<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Data basics</title>

<script>// Hide empty <a> tag within highlighted CodeBlock for screen reader accessibility (see https://github.com/jgm/pandoc/issues/6352#issuecomment-626106786) -->
// v0.0.1
// Written by JooYoung Seo (jooyoung@psu.edu) and Atsushi Yasumoto on June 1st, 2020.

document.addEventListener('DOMContentLoaded', function() {
  const codeList = document.getElementsByClassName("sourceCode");
  for (var i = 0; i < codeList.length; i++) {
    var linkList = codeList[i].getElementsByTagName('a');
    for (var j = 0; j < linkList.length; j++) {
      if (linkList[j].innerHTML === "") {
        linkList[j].setAttribute('aria-hidden', 'true');
      }
    }
  }
});
</script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Data basics</h1>



<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>Introduces the four data sets in the midfielddata package and basic data manipulation operations in the data.table package.</p>
<div id="why-data.table" class="section level3">
<h3>Why data.table?</h3>
<p><code>data.table</code> provides “a high-performance version of base R’s <code>data.frame</code> with syntax and feature enhancements for ease of use, convenience and programming speed” <span class="citation">(Dowle and Srinivasan, <a href="#ref-Dowle+Srinivasan:2020:data.table:website" role="doc-biblioref">2020</a><a href="#ref-Dowle+Srinivasan:2020:data.table:website" role="doc-biblioref">b</a>)</span>. MIDFIELD data can require a lot of memory (<code>midfieldcourses</code> has 3.5 M rows and requires 348 MB of memory), making data.table’s efficient use of memory potentially an important consideration.</p>
<p>Consequently, the midfieldr and midfielddata data sets are in data.table form and the inner workings of midfieldr functions are written using data.table syntax to take advantage of its features.</p>
<p>However, midfieldr users are not required to adopt data.table syntax if they prefer a different “dialect” such as base R or dplyr—midfieldr functions attempt to preserve data frames and tibbles when used as arguments.</p>
<p>The vignettes, while written using data.table syntax, can be rewritten in base R or dplyr using online resources such as those by van der Laken <span class="citation">(<a href="#ref-vanDerLaken:2020" role="doc-biblioref">2020</a>)</span> or Mercer <span class="citation">(<a href="#ref-Mercer:2020" role="doc-biblioref">2020</a>)</span>. We also highly recommend <span class="citation">(Zumel and Mount, <a href="#ref-Zumel+Mount:2020" role="doc-biblioref">2020</a>, Ch. 5)</span>.</p>
</div>
<div id="this-vignette-uses" class="section level3">
<h3>This vignette uses</h3>
<p>packages</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># packages used</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw">library</span>(midfieldr)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="kw">library</span>(midfielddata)</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="kw">library</span>(data.table)</span>
<span id="cb1-5"><a href="#cb1-5"></a></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="co"># print max 10 rows, otherwise 5 rows each head/tail</span></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="kw">options</span>(<span class="dt">datatable.print.nrows =</span> <span class="dv">10</span>, <span class="dt">datatable.print.topn =</span> <span class="dv">5</span>)</span></code></pre></div>
</div>
</div>
<div id="midfielddata" class="section level2">
<h2>midfielddata</h2>
<p>midfielddata <a href="https://midfieldr.github.io/midfielddata/">(link)</a> is an R data package that provides a stratified sample of MIDFIELD data. Contains data for 97,640 undergraduates at 12 institutions from 1987–2016 in four interrelated data sets.</p>
<div id="midfieldstudents" class="section level3">
<h3>midfieldstudents</h3>
<ul>
<li>matriculation attributes keyed by student ID</li>
<li>97,640 students over 142 terms</li>
<li>97,640 rows, 15 columns, 19 MB memory</li>
<li>data dictionary <a href="https://midfieldr.github.io/midfielddata/reference/midfieldstudents.html">(link)</a></li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>midfieldstudents</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="co">#&gt;                 id   institution   cip6 term_enter transfer hours_transfer</span></span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="co">#&gt;     1: MID25783135 Institution M 511199      19911        N             NA</span></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co">#&gt;     2: MID25783147 Institution M 131202      20041        N             NA</span></span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="co">#&gt;     3: MID25783156 Institution M 040201      20011        N             NA</span></span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="co">#&gt;     4: MID25783162 Institution M 14XXXX      19921        N             NA</span></span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="co">#&gt;     5: MID25783166 Institution M 14XXXX      20091        N             NA</span></span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="co">#&gt;    ---                                                                    </span></span>
<span id="cb2-9"><a href="#cb2-9"></a><span class="co">#&gt; 97636: MID26697680 Institution L 300000      20163        N             NA</span></span>
<span id="cb2-10"><a href="#cb2-10"></a><span class="co">#&gt; 97637: MID26697682 Institution L 240101      20163        N             NA</span></span>
<span id="cb2-11"><a href="#cb2-11"></a><span class="co">#&gt; 97638: MID26697685 Institution L 300000      20151        N             NA</span></span>
<span id="cb2-12"><a href="#cb2-12"></a><span class="co">#&gt; 97639: MID26697689 Institution L 240101      20163        Y             47</span></span>
<span id="cb2-13"><a href="#cb2-13"></a><span class="co">#&gt; 97640: MID26697702 Institution L 240101      20161        N             NA</span></span>
<span id="cb2-14"><a href="#cb2-14"></a><span class="co">#&gt;           sex            race age us_citizen home_zip high_school sat_math</span></span>
<span id="cb2-15"><a href="#cb2-15"></a><span class="co">#&gt;     1:   Male           White  17          Y    29485      411900      580</span></span>
<span id="cb2-16"><a href="#cb2-16"></a><span class="co">#&gt;     2: Female           White  17          Y    29072      410825      470</span></span>
<span id="cb2-17"><a href="#cb2-17"></a><span class="co">#&gt;     3: Female           White  18          Y    43026      210568      750</span></span>
<span id="cb2-18"><a href="#cb2-18"></a><span class="co">#&gt;     4:   Male           White  17          Y    29572      411465      560</span></span>
<span id="cb2-19"><a href="#cb2-19"></a><span class="co">#&gt;     5:   Male           White  18          Y    29016      410210      670</span></span>
<span id="cb2-20"><a href="#cb2-20"></a><span class="co">#&gt;    ---                                                                    </span></span>
<span id="cb2-21"><a href="#cb2-21"></a><span class="co">#&gt; 97636: Female           Other  39       &lt;NA&gt;    73119        &lt;NA&gt;       NA</span></span>
<span id="cb2-22"><a href="#cb2-22"></a><span class="co">#&gt; 97637:   Male           White  36       &lt;NA&gt;    74104        &lt;NA&gt;      630</span></span>
<span id="cb2-23"><a href="#cb2-23"></a><span class="co">#&gt; 97638:   Male           White  32       &lt;NA&gt;    73071        &lt;NA&gt;       NA</span></span>
<span id="cb2-24"><a href="#cb2-24"></a><span class="co">#&gt; 97639:   Male Native American  42       &lt;NA&gt;    74857      372378       NA</span></span>
<span id="cb2-25"><a href="#cb2-25"></a><span class="co">#&gt; 97640:   Male           White  38       &lt;NA&gt;    73112        &lt;NA&gt;       NA</span></span>
<span id="cb2-26"><a href="#cb2-26"></a><span class="co">#&gt;        sat_verbal act_comp</span></span>
<span id="cb2-27"><a href="#cb2-27"></a><span class="co">#&gt;     1:        505       21</span></span>
<span id="cb2-28"><a href="#cb2-28"></a><span class="co">#&gt;     2:        530       19</span></span>
<span id="cb2-29"><a href="#cb2-29"></a><span class="co">#&gt;     3:        627       29</span></span>
<span id="cb2-30"><a href="#cb2-30"></a><span class="co">#&gt;     4:        395       18</span></span>
<span id="cb2-31"><a href="#cb2-31"></a><span class="co">#&gt;     5:        530       26</span></span>
<span id="cb2-32"><a href="#cb2-32"></a><span class="co">#&gt;    ---                    </span></span>
<span id="cb2-33"><a href="#cb2-33"></a><span class="co">#&gt; 97636:         NA       14</span></span>
<span id="cb2-34"><a href="#cb2-34"></a><span class="co">#&gt; 97637:        620       30</span></span>
<span id="cb2-35"><a href="#cb2-35"></a><span class="co">#&gt; 97638:         NA       22</span></span>
<span id="cb2-36"><a href="#cb2-36"></a><span class="co">#&gt; 97639:         NA       20</span></span>
<span id="cb2-37"><a href="#cb2-37"></a><span class="co">#&gt; 97640:         NA       33</span></span></code></pre></div>
</div>
<div id="midfielddegrees" class="section level3">
<h3>midfielddegrees</h3>
<ul>
<li>degree attributes keyed by student ID</li>
<li>97,640 students of whom 47,499 earn bachelor’s degrees</li>
<li>97,640 rows, 5 columns, 10.2 MB memory</li>
<li>data dictionary <a href="https://midfieldr.github.io/midfielddata/reference/midfielddegrees.html">(link)</a></li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>midfielddegrees</span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="co">#&gt;                 id   institution   cip6 term_degree              degree</span></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="co">#&gt;     1: MID25783135 Institution M   &lt;NA&gt;          NA                &lt;NA&gt;</span></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="co">#&gt;     2: MID25783147 Institution M   &lt;NA&gt;          NA                &lt;NA&gt;</span></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="co">#&gt;     3: MID25783156 Institution M   &lt;NA&gt;          NA                &lt;NA&gt;</span></span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="co">#&gt;     4: MID25783162 Institution M 521401       19963 Bachelor of Science</span></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="co">#&gt;     5: MID25783166 Institution M   &lt;NA&gt;          NA                &lt;NA&gt;</span></span>
<span id="cb3-8"><a href="#cb3-8"></a><span class="co">#&gt;    ---                                                                 </span></span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="co">#&gt; 97636: MID26697680 Institution L   &lt;NA&gt;          NA                &lt;NA&gt;</span></span>
<span id="cb3-10"><a href="#cb3-10"></a><span class="co">#&gt; 97637: MID26697682 Institution L   &lt;NA&gt;          NA                &lt;NA&gt;</span></span>
<span id="cb3-11"><a href="#cb3-11"></a><span class="co">#&gt; 97638: MID26697685 Institution L   &lt;NA&gt;          NA                &lt;NA&gt;</span></span>
<span id="cb3-12"><a href="#cb3-12"></a><span class="co">#&gt; 97639: MID26697689 Institution L   &lt;NA&gt;          NA                &lt;NA&gt;</span></span>
<span id="cb3-13"><a href="#cb3-13"></a><span class="co">#&gt; 97640: MID26697702 Institution L   &lt;NA&gt;          NA                &lt;NA&gt;</span></span></code></pre></div>
</div>
<div id="midfieldterms" class="section level3">
<h3>midfieldterms</h3>
<ul>
<li>term attributes keyed by student ID and academic term</li>
<li>95,995 students in 1190 programs over 148 terms<br />
</li>
<li>727,369 rows, 13 columns, 82 MB memory<br />
</li>
<li>data dictionary <a href="https://midfieldr.github.io/midfielddata/reference/midfieldterms.html">(link)</a></li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>midfieldterms</span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="co">#&gt;                  id   institution   cip6  term        level</span></span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="co">#&gt;      1: MID25783135 Institution M 520101 19911  01 Freshman</span></span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="co">#&gt;      2: MID25783135 Institution M 520101 19913 02 Sophomore</span></span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="co">#&gt;      3: MID25783147 Institution M 131202 20041  01 Freshman</span></span>
<span id="cb4-6"><a href="#cb4-6"></a><span class="co">#&gt;      4: MID25783147 Institution M 131210 20043 02 Sophomore</span></span>
<span id="cb4-7"><a href="#cb4-7"></a><span class="co">#&gt;      5: MID25783147 Institution M 131210 20051 02 Sophomore</span></span>
<span id="cb4-8"><a href="#cb4-8"></a><span class="co">#&gt;     ---                                                    </span></span>
<span id="cb4-9"><a href="#cb4-9"></a><span class="co">#&gt; 727365: MID26697685 Institution L 521201 20164 02 Sophomore</span></span>
<span id="cb4-10"><a href="#cb4-10"></a><span class="co">#&gt; 727366: MID26697689 Institution L 240101 20163    04 Senior</span></span>
<span id="cb4-11"><a href="#cb4-11"></a><span class="co">#&gt; 727367: MID26697702 Institution L 240101 20161  01 Freshman</span></span>
<span id="cb4-12"><a href="#cb4-12"></a><span class="co">#&gt; 727368: MID26697702 Institution L 240101 20163  01 Freshman</span></span>
<span id="cb4-13"><a href="#cb4-13"></a><span class="co">#&gt; 727369: MID26697702 Institution L 240101 20164  01 Freshman</span></span>
<span id="cb4-14"><a href="#cb4-14"></a><span class="co">#&gt;                      standing coop hours_term_attempt hours_term gpa_term</span></span>
<span id="cb4-15"><a href="#cb4-15"></a><span class="co">#&gt;      1: First Time in College    N                 19         19     2.47</span></span>
<span id="cb4-16"><a href="#cb4-16"></a><span class="co">#&gt;      2:         Good Standing    N                 14         14     3.21</span></span>
<span id="cb4-17"><a href="#cb4-17"></a><span class="co">#&gt;      3: First Time in College    N                 13         17     3.76</span></span>
<span id="cb4-18"><a href="#cb4-18"></a><span class="co">#&gt;      4:         Good Standing    N                 18         18     2.67</span></span>
<span id="cb4-19"><a href="#cb4-19"></a><span class="co">#&gt;      5:         Good Standing    N                 15         15     3.20</span></span>
<span id="cb4-20"><a href="#cb4-20"></a><span class="co">#&gt;     ---                                                                  </span></span>
<span id="cb4-21"><a href="#cb4-21"></a><span class="co">#&gt; 727365:         Good Standing    N                  6          6     3.50</span></span>
<span id="cb4-22"><a href="#cb4-22"></a><span class="co">#&gt; 727366:          New Transfer    N                  6          6     3.50</span></span>
<span id="cb4-23"><a href="#cb4-23"></a><span class="co">#&gt; 727367: First Time in College    N                 12         12     3.25</span></span>
<span id="cb4-24"><a href="#cb4-24"></a><span class="co">#&gt; 727368:         Good Standing    N                  6          6     4.00</span></span>
<span id="cb4-25"><a href="#cb4-25"></a><span class="co">#&gt; 727369:         Good Standing    N                  3          3     4.00</span></span>
<span id="cb4-26"><a href="#cb4-26"></a><span class="co">#&gt;         hours_cumul_attempt hours_cumul gpa_cumul</span></span>
<span id="cb4-27"><a href="#cb4-27"></a><span class="co">#&gt;      1:                  19          19      2.47</span></span>
<span id="cb4-28"><a href="#cb4-28"></a><span class="co">#&gt;      2:                  33          33      2.79</span></span>
<span id="cb4-29"><a href="#cb4-29"></a><span class="co">#&gt;      3:                  13          17      3.76</span></span>
<span id="cb4-30"><a href="#cb4-30"></a><span class="co">#&gt;      4:                  31          35      3.13</span></span>
<span id="cb4-31"><a href="#cb4-31"></a><span class="co">#&gt;      5:                  46          50      3.15</span></span>
<span id="cb4-32"><a href="#cb4-32"></a><span class="co">#&gt;     ---                                          </span></span>
<span id="cb4-33"><a href="#cb4-33"></a><span class="co">#&gt; 727365:                  40          40      3.63</span></span>
<span id="cb4-34"><a href="#cb4-34"></a><span class="co">#&gt; 727366:                   6         106      3.50</span></span>
<span id="cb4-35"><a href="#cb4-35"></a><span class="co">#&gt; 727367:                  12          12      3.25</span></span>
<span id="cb4-36"><a href="#cb4-36"></a><span class="co">#&gt; 727368:                  18          18      3.50</span></span>
<span id="cb4-37"><a href="#cb4-37"></a><span class="co">#&gt; 727369:                  21          21      3.57</span></span></code></pre></div>
</div>
<div id="midfieldcourses" class="section level3">
<h3>midfieldcourses</h3>
<ul>
<li>course attributes keyed by student ID, academic term, and course/section identifiers</li>
<li>97,640 students in 59,751 courses over 153 terms</li>
<li>3,540,533 rows, 12 columns, 349 MB memory<br />
</li>
<li>data dictionary <a href="https://midfieldr.github.io/midfielddata/reference/midfieldcourses.html">(link)</a></li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>midfieldcourses</span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="co">#&gt;            institution          id term_course                         course</span></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="co">#&gt;       1: Institution M MID25783135       19911                               </span></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="co">#&gt;       2: Institution M MID25783135       19911                               </span></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="co">#&gt;       3: Institution M MID25783135       19911                               </span></span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="co">#&gt;       4: Institution M MID25783135       19911                               </span></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="co">#&gt;       5: Institution M MID25783135       19911                               </span></span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="co">#&gt;      ---                                                                     </span></span>
<span id="cb5-9"><a href="#cb5-9"></a><span class="co">#&gt; 3540529: Institution L MID26697702       20161      Interdisciplinary Inquiry</span></span>
<span id="cb5-10"><a href="#cb5-10"></a><span class="co">#&gt; 3540530: Institution L MID26697702       20161    Leadership in Organizations</span></span>
<span id="cb5-11"><a href="#cb5-11"></a><span class="co">#&gt; 3540531: Institution L MID26697702       20163    Goal Setting and Attainment</span></span>
<span id="cb5-12"><a href="#cb5-12"></a><span class="co">#&gt; 3540532: Institution L MID26697702       20163          Non-Profit Management</span></span>
<span id="cb5-13"><a href="#cb5-13"></a><span class="co">#&gt; 3540533: Institution L MID26697702       20164 Quality Initiatives Organiztns</span></span>
<span id="cb5-14"><a href="#cb5-14"></a><span class="co">#&gt;          abbrev number section hours_course    type pass_fail grade</span></span>
<span id="cb5-15"><a href="#cb5-15"></a><span class="co">#&gt;       1:   SPCH    363     001            3 Lecture        No     A</span></span>
<span id="cb5-16"><a href="#cb5-16"></a><span class="co">#&gt;       2:     CH    101     005            4 Lecture        No     C</span></span>
<span id="cb5-17"><a href="#cb5-17"></a><span class="co">#&gt;       3:     ED    103     002            1 Lecture        No     A</span></span>
<span id="cb5-18"><a href="#cb5-18"></a><span class="co">#&gt;       4:   ENGL    101     050            3 Lecture        No     B</span></span>
<span id="cb5-19"><a href="#cb5-19"></a><span class="co">#&gt;       5:  MTHSC    105     009            5 Lecture        No     D</span></span>
<span id="cb5-20"><a href="#cb5-20"></a><span class="co">#&gt;      ---                                                           </span></span>
<span id="cb5-21"><a href="#cb5-21"></a><span class="co">#&gt; 3540529:   LSTD   3003     105            3  Online        No     B</span></span>
<span id="cb5-22"><a href="#cb5-22"></a><span class="co">#&gt; 3540530:   LSAL   3113     202            3  Online        No     B</span></span>
<span id="cb5-23"><a href="#cb5-23"></a><span class="co">#&gt; 3540531:   LSAL   3173     301            3  Online        No     A</span></span>
<span id="cb5-24"><a href="#cb5-24"></a><span class="co">#&gt; 3540532:   LSAL   4163     403            3  Online        No     A</span></span>
<span id="cb5-25"><a href="#cb5-25"></a><span class="co">#&gt; 3540533:   LSAL   4123     501            3  Online        No     A</span></span>
<span id="cb5-26"><a href="#cb5-26"></a><span class="co">#&gt;                 faculty_rank</span></span>
<span id="cb5-27"><a href="#cb5-27"></a><span class="co">#&gt;       1:                    </span></span>
<span id="cb5-28"><a href="#cb5-28"></a><span class="co">#&gt;       2:                    </span></span>
<span id="cb5-29"><a href="#cb5-29"></a><span class="co">#&gt;       3:                    </span></span>
<span id="cb5-30"><a href="#cb5-30"></a><span class="co">#&gt;       4:                    </span></span>
<span id="cb5-31"><a href="#cb5-31"></a><span class="co">#&gt;       5:                    </span></span>
<span id="cb5-32"><a href="#cb5-32"></a><span class="co">#&gt;      ---                    </span></span>
<span id="cb5-33"><a href="#cb5-33"></a><span class="co">#&gt; 3540529:          Instructor</span></span>
<span id="cb5-34"><a href="#cb5-34"></a><span class="co">#&gt; 3540530: Assistant Professor</span></span>
<span id="cb5-35"><a href="#cb5-35"></a><span class="co">#&gt; 3540531:          Instructor</span></span>
<span id="cb5-36"><a href="#cb5-36"></a><span class="co">#&gt; 3540532:          Instructor</span></span>
<span id="cb5-37"><a href="#cb5-37"></a><span class="co">#&gt; 3540533:          Instructor</span></span></code></pre></div>
</div>
</div>
<div id="basic-data-manipulation-with-data.table" class="section level2">
<h2>Basic data manipulation with data.table</h2>
<p>In this section, we introduce the data.table syntax most often used in the midfieldr vignettes. For more information on data.table, see <span class="citation">(Dowle and Srinivasan, <a href="#ref-Dowle+Srinivasan:2020:data.table:website" role="doc-biblioref">2020</a><a href="#ref-Dowle+Srinivasan:2020:data.table:website" role="doc-biblioref">b</a>)</span>.</p>
<div id="identifying-a-data.table-object" class="section level3">
<h3>Identifying a data.table object</h3>
<p>If you view a data frame in the console, one clue that it is a data.table is the colon that separates the row number from the first column. For example, if I extract the first 10 rows from the degrees data, you can see the colons.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="co"># data.table object</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>midfielddegrees[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, ]</span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="co">#&gt;              id   institution   cip6 term_degree              degree</span></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="co">#&gt;  1: MID25783135 Institution M   &lt;NA&gt;          NA                &lt;NA&gt;</span></span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="co">#&gt;  2: MID25783147 Institution M   &lt;NA&gt;          NA                &lt;NA&gt;</span></span>
<span id="cb6-6"><a href="#cb6-6"></a><span class="co">#&gt;  3: MID25783156 Institution M   &lt;NA&gt;          NA                &lt;NA&gt;</span></span>
<span id="cb6-7"><a href="#cb6-7"></a><span class="co">#&gt;  4: MID25783162 Institution M 521401       19963 Bachelor of Science</span></span>
<span id="cb6-8"><a href="#cb6-8"></a><span class="co">#&gt;  5: MID25783166 Institution M   &lt;NA&gt;          NA                &lt;NA&gt;</span></span>
<span id="cb6-9"><a href="#cb6-9"></a><span class="co">#&gt;  6: MID25783167 Institution M   &lt;NA&gt;          NA                &lt;NA&gt;</span></span>
<span id="cb6-10"><a href="#cb6-10"></a><span class="co">#&gt;  7: MID25783178 Institution M 143501       20001 Bachelor of Science</span></span>
<span id="cb6-11"><a href="#cb6-11"></a><span class="co">#&gt;  8: MID25783184 Institution M   &lt;NA&gt;          NA                &lt;NA&gt;</span></span>
<span id="cb6-12"><a href="#cb6-12"></a><span class="co">#&gt;  9: MID25783188 Institution M 230101       20023    Bachelor of Arts</span></span>
<span id="cb6-13"><a href="#cb6-13"></a><span class="co">#&gt; 10: MID25783195 Institution M 521401       19966 Bachelor of Science</span></span></code></pre></div>
<p>Of course, we can identify its class directly. The output shows that a <code>data.table</code> is also <code>data.frame</code> thus one can operate on data.table objects using data.frame (base R) syntax.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="co"># confirm classification </span></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="kw">class</span>(midfielddegrees)</span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="co">#&gt; [1] &quot;data.table&quot; &quot;data.frame&quot;</span></span></code></pre></div>
<p>Viewing a data.frame object (base R <code>airquality</code> data), the row numbers are not denoted by colons.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="co"># data.frame object</span></span>
<span id="cb8-2"><a href="#cb8-2"></a>airquality[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, ]</span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="co">#&gt;    Ozone Solar.R Wind Temp Month Day</span></span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="co">#&gt; 1     41     190  7.4   67     5   1</span></span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="co">#&gt; 2     36     118  8.0   72     5   2</span></span>
<span id="cb8-6"><a href="#cb8-6"></a><span class="co">#&gt; 3     12     149 12.6   74     5   3</span></span>
<span id="cb8-7"><a href="#cb8-7"></a><span class="co">#&gt; 4     18     313 11.5   62     5   4</span></span>
<span id="cb8-8"><a href="#cb8-8"></a><span class="co">#&gt; 5     NA      NA 14.3   56     5   5</span></span>
<span id="cb8-9"><a href="#cb8-9"></a><span class="co">#&gt; 6     28      NA 14.9   66     5   6</span></span>
<span id="cb8-10"><a href="#cb8-10"></a><span class="co">#&gt; 7     23     299  8.6   65     5   7</span></span>
<span id="cb8-11"><a href="#cb8-11"></a><span class="co">#&gt; 8     19      99 13.8   59     5   8</span></span>
<span id="cb8-12"><a href="#cb8-12"></a><span class="co">#&gt; 9      8      19 20.1   61     5   9</span></span>
<span id="cb8-13"><a href="#cb8-13"></a><span class="co">#&gt; 10    NA     194  8.6   69     5  10</span></span>
<span id="cb8-14"><a href="#cb8-14"></a></span>
<span id="cb8-15"><a href="#cb8-15"></a><span class="co"># confirm classification </span></span>
<span id="cb8-16"><a href="#cb8-16"></a><span class="kw">class</span>(airquality)</span>
<span id="cb8-17"><a href="#cb8-17"></a><span class="co">#&gt; [1] &quot;data.frame&quot;</span></span></code></pre></div>
</div>
<div id="subset-and-arrange-rows" class="section level3">
<h3>Subset and arrange rows</h3>
<p><strong>Summary</strong></p>
<ul>
<li><code>DT[rows_we_want]</code> subset rows</li>
<li><code>DT[order(col)]</code> arrange rows by values in column</li>
<li><code>DT[]</code> to print the data</li>
</ul>
<p>We start by copying a data.table object. As we discuss later in the vignette, copies are used to avoid changing the source in place.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="co"># start with a fresh copy</span></span>
<span id="cb9-2"><a href="#cb9-2"></a>DT &lt;-<span class="st"> </span><span class="kw">copy</span>(midfielddegrees)</span></code></pre></div>
<p><strong>Filter rows using a logical expression</strong></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="co"># TRUE/FALSE/NA vector</span></span>
<span id="cb10-2"><a href="#cb10-2"></a>rows_we_want &lt;-<span class="st"> </span>DT<span class="op">$</span>cip6 <span class="op">==</span><span class="st"> &quot;540101&quot;</span></span>
<span id="cb10-3"><a href="#cb10-3"></a></span>
<span id="cb10-4"><a href="#cb10-4"></a><span class="co"># subset the data frame</span></span>
<span id="cb10-5"><a href="#cb10-5"></a>DT &lt;-<span class="st"> </span>DT[rows_we_want]</span>
<span id="cb10-6"><a href="#cb10-6"></a></span>
<span id="cb10-7"><a href="#cb10-7"></a><span class="co"># examine the result</span></span>
<span id="cb10-8"><a href="#cb10-8"></a>DT[]</span>
<span id="cb10-9"><a href="#cb10-9"></a><span class="co">#&gt;               id   institution   cip6 term_degree           degree</span></span>
<span id="cb10-10"><a href="#cb10-10"></a><span class="co">#&gt;   1: MID25784804 Institution M 540101       19943 Bachelor of Arts</span></span>
<span id="cb10-11"><a href="#cb10-11"></a><span class="co">#&gt;   2: MID25785903 Institution M 540101       19983 Bachelor of Arts</span></span>
<span id="cb10-12"><a href="#cb10-12"></a><span class="co">#&gt;   3: MID25792918 Institution M 540101       19963 Bachelor of Arts</span></span>
<span id="cb10-13"><a href="#cb10-13"></a><span class="co">#&gt;   4: MID25793224 Institution M 540101       19941 Bachelor of Arts</span></span>
<span id="cb10-14"><a href="#cb10-14"></a><span class="co">#&gt;   5: MID25795977 Institution M 540101       19993 Bachelor of Arts</span></span>
<span id="cb10-15"><a href="#cb10-15"></a><span class="co">#&gt;  ---                                                              </span></span>
<span id="cb10-16"><a href="#cb10-16"></a><span class="co">#&gt; 635: MID26692495 Institution L 540101       20141 Bachelor of Arts</span></span>
<span id="cb10-17"><a href="#cb10-17"></a><span class="co">#&gt; 636: MID26693361 Institution L 540101       20144 Bachelor of Arts</span></span>
<span id="cb10-18"><a href="#cb10-18"></a><span class="co">#&gt; 637: MID26694138 Institution L 540101       20121 Bachelor of Arts</span></span>
<span id="cb10-19"><a href="#cb10-19"></a><span class="co">#&gt; 638: MID26695406 Institution L 540101       20133 Bachelor of Arts</span></span>
<span id="cb10-20"><a href="#cb10-20"></a><span class="co">#&gt; 639: MID26696157 Institution L 540101       20151 Bachelor of Arts</span></span></code></pre></div>
<p>We could have written <code>DT[cip6 == &quot;540101&quot;]</code> and obtained the same result. For clarity, however, we use the 2-step process illustrated above: 1) identify the rows (or columns) we want, and 2) subset the data frame in a separate step.</p>
<p>Note too, in data.table syntax we can write</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>DT[rows_we_want]</span></code></pre></div>
<p>instead of the base R syntax,</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>DF[rows_we_want, , drop =<span class="st"> </span><span class="ot">FALSE</span>]</span></code></pre></div>
<p><strong>Filter rows using multiple conditions</strong></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="co"># start with a fresh copy</span></span>
<span id="cb13-2"><a href="#cb13-2"></a>DT &lt;-<span class="st"> </span><span class="kw">copy</span>(midfielddegrees)</span>
<span id="cb13-3"><a href="#cb13-3"></a></span>
<span id="cb13-4"><a href="#cb13-4"></a><span class="co"># subset the data frame</span></span>
<span id="cb13-5"><a href="#cb13-5"></a>rows_we_want &lt;-<span class="st"> </span><span class="kw">is.na</span>(DT<span class="op">$</span>cip6) <span class="op">&amp;</span><span class="st"> </span>DT<span class="op">$</span>institution <span class="op">==</span><span class="st"> &quot;Institution D&quot;</span></span>
<span id="cb13-6"><a href="#cb13-6"></a>DT &lt;-<span class="st"> </span>DT[rows_we_want]</span>
<span id="cb13-7"><a href="#cb13-7"></a></span>
<span id="cb13-8"><a href="#cb13-8"></a><span class="co"># examine the result</span></span>
<span id="cb13-9"><a href="#cb13-9"></a>DT[]</span>
<span id="cb13-10"><a href="#cb13-10"></a><span class="co">#&gt;               id   institution cip6 term_degree degree</span></span>
<span id="cb13-11"><a href="#cb13-11"></a><span class="co">#&gt;   1: MID26094493 Institution D &lt;NA&gt;          NA   &lt;NA&gt;</span></span>
<span id="cb13-12"><a href="#cb13-12"></a><span class="co">#&gt;   2: MID26094544 Institution D &lt;NA&gt;          NA   &lt;NA&gt;</span></span>
<span id="cb13-13"><a href="#cb13-13"></a><span class="co">#&gt;   3: MID26094742 Institution D &lt;NA&gt;          NA   &lt;NA&gt;</span></span>
<span id="cb13-14"><a href="#cb13-14"></a><span class="co">#&gt;   4: MID26094785 Institution D &lt;NA&gt;          NA   &lt;NA&gt;</span></span>
<span id="cb13-15"><a href="#cb13-15"></a><span class="co">#&gt;   5: MID26094801 Institution D &lt;NA&gt;          NA   &lt;NA&gt;</span></span>
<span id="cb13-16"><a href="#cb13-16"></a><span class="co">#&gt;  ---                                                  </span></span>
<span id="cb13-17"><a href="#cb13-17"></a><span class="co">#&gt; 285: MID26131229 Institution D &lt;NA&gt;          NA   &lt;NA&gt;</span></span>
<span id="cb13-18"><a href="#cb13-18"></a><span class="co">#&gt; 286: MID26131231 Institution D &lt;NA&gt;          NA   &lt;NA&gt;</span></span>
<span id="cb13-19"><a href="#cb13-19"></a><span class="co">#&gt; 287: MID26131238 Institution D &lt;NA&gt;          NA   &lt;NA&gt;</span></span>
<span id="cb13-20"><a href="#cb13-20"></a><span class="co">#&gt; 288: MID26131261 Institution D &lt;NA&gt;          NA   &lt;NA&gt;</span></span>
<span id="cb13-21"><a href="#cb13-21"></a><span class="co">#&gt; 289: MID26131268 Institution D &lt;NA&gt;          NA   &lt;NA&gt;</span></span></code></pre></div>
<p><strong>Discard rows with missing values</strong></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="co"># start with a fresh copy</span></span>
<span id="cb14-2"><a href="#cb14-2"></a>DT &lt;-<span class="st"> </span><span class="kw">copy</span>(midfielddegrees)</span>
<span id="cb14-3"><a href="#cb14-3"></a></span>
<span id="cb14-4"><a href="#cb14-4"></a><span class="co"># subset the data frame</span></span>
<span id="cb14-5"><a href="#cb14-5"></a>DT &lt;-<span class="st"> </span><span class="kw">na.omit</span>(DT)</span>
<span id="cb14-6"><a href="#cb14-6"></a></span>
<span id="cb14-7"><a href="#cb14-7"></a><span class="co"># examine the result</span></span>
<span id="cb14-8"><a href="#cb14-8"></a>DT[]</span>
<span id="cb14-9"><a href="#cb14-9"></a><span class="co">#&gt;                 id   institution   cip6 term_degree</span></span>
<span id="cb14-10"><a href="#cb14-10"></a><span class="co">#&gt;     1: MID25783162 Institution M 521401       19963</span></span>
<span id="cb14-11"><a href="#cb14-11"></a><span class="co">#&gt;     2: MID25783178 Institution M 143501       20001</span></span>
<span id="cb14-12"><a href="#cb14-12"></a><span class="co">#&gt;     3: MID25783188 Institution M 230101       20023</span></span>
<span id="cb14-13"><a href="#cb14-13"></a><span class="co">#&gt;     4: MID25783195 Institution M 521401       19966</span></span>
<span id="cb14-14"><a href="#cb14-14"></a><span class="co">#&gt;     5: MID25783197 Institution M 140801       19911</span></span>
<span id="cb14-15"><a href="#cb14-15"></a><span class="co">#&gt;    ---                                             </span></span>
<span id="cb14-16"><a href="#cb14-16"></a><span class="co">#&gt; 47495: MID26697553 Institution L 451001       20133</span></span>
<span id="cb14-17"><a href="#cb14-17"></a><span class="co">#&gt; 47496: MID26697574 Institution L 300000       20113</span></span>
<span id="cb14-18"><a href="#cb14-18"></a><span class="co">#&gt; 47497: MID26697576 Institution L 521401       20134</span></span>
<span id="cb14-19"><a href="#cb14-19"></a><span class="co">#&gt; 47498: MID26697599 Institution L 110401       20143</span></span>
<span id="cb14-20"><a href="#cb14-20"></a><span class="co">#&gt; 47499: MID26697623 Institution L 520301       20153</span></span>
<span id="cb14-21"><a href="#cb14-21"></a><span class="co">#&gt;                                     degree</span></span>
<span id="cb14-22"><a href="#cb14-22"></a><span class="co">#&gt;     1:                 Bachelor of Science</span></span>
<span id="cb14-23"><a href="#cb14-23"></a><span class="co">#&gt;     2:                 Bachelor of Science</span></span>
<span id="cb14-24"><a href="#cb14-24"></a><span class="co">#&gt;     3:                    Bachelor of Arts</span></span>
<span id="cb14-25"><a href="#cb14-25"></a><span class="co">#&gt;     4:                 Bachelor of Science</span></span>
<span id="cb14-26"><a href="#cb14-26"></a><span class="co">#&gt;     5:                 Bachelor of Science</span></span>
<span id="cb14-27"><a href="#cb14-27"></a><span class="co">#&gt;    ---                                    </span></span>
<span id="cb14-28"><a href="#cb14-28"></a><span class="co">#&gt; 47495:                    Bachelor of Arts</span></span>
<span id="cb14-29"><a href="#cb14-29"></a><span class="co">#&gt; 47496:                    Bachelor of Arts</span></span>
<span id="cb14-30"><a href="#cb14-30"></a><span class="co">#&gt; 47497: Bachelor of Business Administration</span></span>
<span id="cb14-31"><a href="#cb14-31"></a><span class="co">#&gt; 47498:                    Bachelor of Arts</span></span>
<span id="cb14-32"><a href="#cb14-32"></a><span class="co">#&gt; 47499: Bachelor of Business Administration</span></span></code></pre></div>
<p><strong>Arrange rows in ascending order</strong></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="co"># subset the data frame</span></span>
<span id="cb15-2"><a href="#cb15-2"></a>rows_we_want &lt;-<span class="st"> </span>DT<span class="op">$</span>cip6 <span class="op">==</span><span class="st"> &quot;540101&quot;</span></span>
<span id="cb15-3"><a href="#cb15-3"></a>DT &lt;-<span class="st"> </span>DT[rows_we_want]</span>
<span id="cb15-4"><a href="#cb15-4"></a></span>
<span id="cb15-5"><a href="#cb15-5"></a><span class="co"># order rows by values in ID column </span></span>
<span id="cb15-6"><a href="#cb15-6"></a>DT &lt;-<span class="st"> </span>DT[<span class="kw">order</span>(id)]</span>
<span id="cb15-7"><a href="#cb15-7"></a></span>
<span id="cb15-8"><a href="#cb15-8"></a><span class="co"># examine the result</span></span>
<span id="cb15-9"><a href="#cb15-9"></a>DT[]</span>
<span id="cb15-10"><a href="#cb15-10"></a><span class="co">#&gt;               id   institution   cip6 term_degree           degree</span></span>
<span id="cb15-11"><a href="#cb15-11"></a><span class="co">#&gt;   1: MID25784804 Institution M 540101       19943 Bachelor of Arts</span></span>
<span id="cb15-12"><a href="#cb15-12"></a><span class="co">#&gt;   2: MID25785903 Institution M 540101       19983 Bachelor of Arts</span></span>
<span id="cb15-13"><a href="#cb15-13"></a><span class="co">#&gt;   3: MID25792918 Institution M 540101       19963 Bachelor of Arts</span></span>
<span id="cb15-14"><a href="#cb15-14"></a><span class="co">#&gt;   4: MID25793224 Institution M 540101       19941 Bachelor of Arts</span></span>
<span id="cb15-15"><a href="#cb15-15"></a><span class="co">#&gt;   5: MID25795977 Institution M 540101       19993 Bachelor of Arts</span></span>
<span id="cb15-16"><a href="#cb15-16"></a><span class="co">#&gt;  ---                                                              </span></span>
<span id="cb15-17"><a href="#cb15-17"></a><span class="co">#&gt; 635: MID26692495 Institution L 540101       20141 Bachelor of Arts</span></span>
<span id="cb15-18"><a href="#cb15-18"></a><span class="co">#&gt; 636: MID26693361 Institution L 540101       20144 Bachelor of Arts</span></span>
<span id="cb15-19"><a href="#cb15-19"></a><span class="co">#&gt; 637: MID26694138 Institution L 540101       20121 Bachelor of Arts</span></span>
<span id="cb15-20"><a href="#cb15-20"></a><span class="co">#&gt; 638: MID26695406 Institution L 540101       20133 Bachelor of Arts</span></span>
<span id="cb15-21"><a href="#cb15-21"></a><span class="co">#&gt; 639: MID26696157 Institution L 540101       20151 Bachelor of Arts</span></span></code></pre></div>
<p><strong>Arrange rows by more than one column</strong></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="co"># order rows by values in two columns </span></span>
<span id="cb16-2"><a href="#cb16-2"></a>DT &lt;-<span class="st"> </span>DT[<span class="kw">order</span>(institution, id)]</span>
<span id="cb16-3"><a href="#cb16-3"></a></span>
<span id="cb16-4"><a href="#cb16-4"></a><span class="co"># examine the result</span></span>
<span id="cb16-5"><a href="#cb16-5"></a>DT[]</span>
<span id="cb16-6"><a href="#cb16-6"></a><span class="co">#&gt;               id   institution   cip6 term_degree            degree</span></span>
<span id="cb16-7"><a href="#cb16-7"></a><span class="co">#&gt;   1: MID26146754 Institution A 540101       19993 Bachelor&#39;s Degree</span></span>
<span id="cb16-8"><a href="#cb16-8"></a><span class="co">#&gt;   2: MID26180085 Institution A 540101       19951 Bachelor&#39;s Degree</span></span>
<span id="cb16-9"><a href="#cb16-9"></a><span class="co">#&gt;   3: MID26185279 Institution A 540101       19964 Bachelor&#39;s Degree</span></span>
<span id="cb16-10"><a href="#cb16-10"></a><span class="co">#&gt;   4: MID26210454 Institution A 540101       19961 Bachelor&#39;s Degree</span></span>
<span id="cb16-11"><a href="#cb16-11"></a><span class="co">#&gt;   5: MID26216469 Institution A 540101       19994 Bachelor&#39;s Degree</span></span>
<span id="cb16-12"><a href="#cb16-12"></a><span class="co">#&gt;  ---                                                               </span></span>
<span id="cb16-13"><a href="#cb16-13"></a><span class="co">#&gt; 635: MID25838604 Institution M 540101       19931  Bachelor of Arts</span></span>
<span id="cb16-14"><a href="#cb16-14"></a><span class="co">#&gt; 636: MID25841313 Institution M 540101       20023  Bachelor of Arts</span></span>
<span id="cb16-15"><a href="#cb16-15"></a><span class="co">#&gt; 637: MID25842943 Institution M 540101       19923  Bachelor of Arts</span></span>
<span id="cb16-16"><a href="#cb16-16"></a><span class="co">#&gt; 638: MID25844205 Institution M 540101       19923  Bachelor of Arts</span></span>
<span id="cb16-17"><a href="#cb16-17"></a><span class="co">#&gt; 639: MID25845319 Institution M 540101       19923  Bachelor of Arts</span></span></code></pre></div>
<p><strong>Arrange rows in descending order</strong></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="co"># order rows by values, one ascending, one descending </span></span>
<span id="cb17-2"><a href="#cb17-2"></a>DT &lt;-<span class="st"> </span>DT[<span class="kw">order</span>(institution, <span class="op">-</span>term_degree)]</span>
<span id="cb17-3"><a href="#cb17-3"></a></span>
<span id="cb17-4"><a href="#cb17-4"></a><span class="co"># examine the result</span></span>
<span id="cb17-5"><a href="#cb17-5"></a>DT[]</span>
<span id="cb17-6"><a href="#cb17-6"></a><span class="co">#&gt;               id   institution   cip6 term_degree            degree</span></span>
<span id="cb17-7"><a href="#cb17-7"></a><span class="co">#&gt;   1: MID26223740 Institution A 540101       20021 Bachelor&#39;s Degree</span></span>
<span id="cb17-8"><a href="#cb17-8"></a><span class="co">#&gt;   2: MID26355315 Institution A 540101       20003 Bachelor&#39;s Degree</span></span>
<span id="cb17-9"><a href="#cb17-9"></a><span class="co">#&gt;   3: MID26216469 Institution A 540101       19994 Bachelor&#39;s Degree</span></span>
<span id="cb17-10"><a href="#cb17-10"></a><span class="co">#&gt;   4: MID26146754 Institution A 540101       19993 Bachelor&#39;s Degree</span></span>
<span id="cb17-11"><a href="#cb17-11"></a><span class="co">#&gt;   5: MID26185279 Institution A 540101       19964 Bachelor&#39;s Degree</span></span>
<span id="cb17-12"><a href="#cb17-12"></a><span class="co">#&gt;  ---                                                               </span></span>
<span id="cb17-13"><a href="#cb17-13"></a><span class="co">#&gt; 635: MID25844205 Institution M 540101       19923  Bachelor of Arts</span></span>
<span id="cb17-14"><a href="#cb17-14"></a><span class="co">#&gt; 636: MID25845319 Institution M 540101       19923  Bachelor of Arts</span></span>
<span id="cb17-15"><a href="#cb17-15"></a><span class="co">#&gt; 637: MID25820147 Institution M 540101       19913  Bachelor of Arts</span></span>
<span id="cb17-16"><a href="#cb17-16"></a><span class="co">#&gt; 638: MID25834566 Institution M 540101       19903  Bachelor of Arts</span></span>
<span id="cb17-17"><a href="#cb17-17"></a><span class="co">#&gt; 639: MID25838147 Institution M 540101       19891  Bachelor of Arts</span></span></code></pre></div>
<p><strong>Print a result.</strong> In the examples above, we use <code>DT[]</code> to print the result to the screen. This step is not always necessary. Often, simply typing the object name, e.g., <code>DT</code>, is sufficient. You’ll see both types in the vignettes.</p>
</div>
<div id="select-columns" class="section level3">
<h3>Select columns</h3>
<p><strong>Summary</strong></p>
<ul>
<li><code>DT[, ..cols_we_want]</code> select columns using a character vector</li>
<li><code>DT[, .(col1, col2)]</code> select columns using a list</li>
<li><code>DT[, .(col1, new_col = col2)]</code> select columns, rename one</li>
</ul>
<p><strong>Select columns using a character vector.</strong> In this form, the column names are quoted and 2 dots identify the vector name, e.g.,</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>DT[, ..cols_we_want]</span></code></pre></div>
<p>Example</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="co"># start with a fresh copy</span></span>
<span id="cb19-2"><a href="#cb19-2"></a>DT &lt;-<span class="st"> </span><span class="kw">copy</span>(midfieldstudents)</span>
<span id="cb19-3"><a href="#cb19-3"></a></span>
<span id="cb19-4"><a href="#cb19-4"></a><span class="co"># column-names vector</span></span>
<span id="cb19-5"><a href="#cb19-5"></a>cols_we_want &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;id&quot;</span>, <span class="st">&quot;race&quot;</span>, <span class="st">&quot;sex&quot;</span>)</span>
<span id="cb19-6"><a href="#cb19-6"></a></span>
<span id="cb19-7"><a href="#cb19-7"></a><span class="co"># subset the data frame</span></span>
<span id="cb19-8"><a href="#cb19-8"></a>DT &lt;-<span class="st"> </span>DT[, ..cols_we_want]</span>
<span id="cb19-9"><a href="#cb19-9"></a></span>
<span id="cb19-10"><a href="#cb19-10"></a><span class="co"># examine the result</span></span>
<span id="cb19-11"><a href="#cb19-11"></a>DT</span>
<span id="cb19-12"><a href="#cb19-12"></a><span class="co">#&gt;                 id            race    sex</span></span>
<span id="cb19-13"><a href="#cb19-13"></a><span class="co">#&gt;     1: MID25783135           White   Male</span></span>
<span id="cb19-14"><a href="#cb19-14"></a><span class="co">#&gt;     2: MID25783147           White Female</span></span>
<span id="cb19-15"><a href="#cb19-15"></a><span class="co">#&gt;     3: MID25783156           White Female</span></span>
<span id="cb19-16"><a href="#cb19-16"></a><span class="co">#&gt;     4: MID25783162           White   Male</span></span>
<span id="cb19-17"><a href="#cb19-17"></a><span class="co">#&gt;     5: MID25783166           White   Male</span></span>
<span id="cb19-18"><a href="#cb19-18"></a><span class="co">#&gt;    ---                                   </span></span>
<span id="cb19-19"><a href="#cb19-19"></a><span class="co">#&gt; 97636: MID26697680           Other Female</span></span>
<span id="cb19-20"><a href="#cb19-20"></a><span class="co">#&gt; 97637: MID26697682           White   Male</span></span>
<span id="cb19-21"><a href="#cb19-21"></a><span class="co">#&gt; 97638: MID26697685           White   Male</span></span>
<span id="cb19-22"><a href="#cb19-22"></a><span class="co">#&gt; 97639: MID26697689 Native American   Male</span></span>
<span id="cb19-23"><a href="#cb19-23"></a><span class="co">#&gt; 97640: MID26697702           White   Male</span></span></code></pre></div>
<p><strong>Select columns using a list.</strong> The list appears with unquoted column names inside the brackets. The syntax <code>.()</code> is data.table shorthand for <code>list()</code>, thus the two lines are equivalent.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>DT[, <span class="kw">list</span>(col1, col2)]</span>
<span id="cb20-2"><a href="#cb20-2"></a>DT[, .(col1, col2)]</span></code></pre></div>
<p>Example</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="co"># start with a fresh copy</span></span>
<span id="cb21-2"><a href="#cb21-2"></a>DT &lt;-<span class="st"> </span><span class="kw">copy</span>(midfieldstudents)</span>
<span id="cb21-3"><a href="#cb21-3"></a></span>
<span id="cb21-4"><a href="#cb21-4"></a><span class="co"># subset the data frame</span></span>
<span id="cb21-5"><a href="#cb21-5"></a>DT &lt;-<span class="st"> </span>DT[, .(id, race, sex)]</span>
<span id="cb21-6"><a href="#cb21-6"></a></span>
<span id="cb21-7"><a href="#cb21-7"></a><span class="co"># examine the result</span></span>
<span id="cb21-8"><a href="#cb21-8"></a>DT</span>
<span id="cb21-9"><a href="#cb21-9"></a><span class="co">#&gt;                 id            race    sex</span></span>
<span id="cb21-10"><a href="#cb21-10"></a><span class="co">#&gt;     1: MID25783135           White   Male</span></span>
<span id="cb21-11"><a href="#cb21-11"></a><span class="co">#&gt;     2: MID25783147           White Female</span></span>
<span id="cb21-12"><a href="#cb21-12"></a><span class="co">#&gt;     3: MID25783156           White Female</span></span>
<span id="cb21-13"><a href="#cb21-13"></a><span class="co">#&gt;     4: MID25783162           White   Male</span></span>
<span id="cb21-14"><a href="#cb21-14"></a><span class="co">#&gt;     5: MID25783166           White   Male</span></span>
<span id="cb21-15"><a href="#cb21-15"></a><span class="co">#&gt;    ---                                   </span></span>
<span id="cb21-16"><a href="#cb21-16"></a><span class="co">#&gt; 97636: MID26697680           Other Female</span></span>
<span id="cb21-17"><a href="#cb21-17"></a><span class="co">#&gt; 97637: MID26697682           White   Male</span></span>
<span id="cb21-18"><a href="#cb21-18"></a><span class="co">#&gt; 97638: MID26697685           White   Male</span></span>
<span id="cb21-19"><a href="#cb21-19"></a><span class="co">#&gt; 97639: MID26697689 Native American   Male</span></span>
<span id="cb21-20"><a href="#cb21-20"></a><span class="co">#&gt; 97640: MID26697702           White   Male</span></span></code></pre></div>
<p><strong>Select columns, rename one.</strong></p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a><span class="co"># subset the data frame, rename a column </span></span>
<span id="cb22-2"><a href="#cb22-2"></a>DT &lt;-<span class="st"> </span>DT[, .(id, <span class="dt">race_ethnicity =</span> race, sex)]</span>
<span id="cb22-3"><a href="#cb22-3"></a></span>
<span id="cb22-4"><a href="#cb22-4"></a><span class="co"># examine the result</span></span>
<span id="cb22-5"><a href="#cb22-5"></a>DT</span>
<span id="cb22-6"><a href="#cb22-6"></a><span class="co">#&gt;                 id  race_ethnicity    sex</span></span>
<span id="cb22-7"><a href="#cb22-7"></a><span class="co">#&gt;     1: MID25783135           White   Male</span></span>
<span id="cb22-8"><a href="#cb22-8"></a><span class="co">#&gt;     2: MID25783147           White Female</span></span>
<span id="cb22-9"><a href="#cb22-9"></a><span class="co">#&gt;     3: MID25783156           White Female</span></span>
<span id="cb22-10"><a href="#cb22-10"></a><span class="co">#&gt;     4: MID25783162           White   Male</span></span>
<span id="cb22-11"><a href="#cb22-11"></a><span class="co">#&gt;     5: MID25783166           White   Male</span></span>
<span id="cb22-12"><a href="#cb22-12"></a><span class="co">#&gt;    ---                                   </span></span>
<span id="cb22-13"><a href="#cb22-13"></a><span class="co">#&gt; 97636: MID26697680           Other Female</span></span>
<span id="cb22-14"><a href="#cb22-14"></a><span class="co">#&gt; 97637: MID26697682           White   Male</span></span>
<span id="cb22-15"><a href="#cb22-15"></a><span class="co">#&gt; 97638: MID26697685           White   Male</span></span>
<span id="cb22-16"><a href="#cb22-16"></a><span class="co">#&gt; 97639: MID26697689 Native American   Male</span></span>
<span id="cb22-17"><a href="#cb22-17"></a><span class="co">#&gt; 97640: MID26697702           White   Male</span></span></code></pre></div>
<p>A drawback to this approach is that you must include the names of all columns you want to keep. To rename a column without having to list them all, see <code>setnames()</code> discussion later in the vignette.</p>
</div>
<div id="combine-row-and-column-operations" class="section level3">
<h3>Combine row and column operations</h3>
<p>In most cases, simply combine the row and column operation in the same set of brackets, i.e., <code>DT[i, j]</code>, where <code>i</code> is the row operation and <code>j</code> is the column operation.</p>
<p>Example</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="co"># start with a fresh copy</span></span>
<span id="cb23-2"><a href="#cb23-2"></a>DT &lt;-<span class="st"> </span><span class="kw">copy</span>(midfieldstudents)</span>
<span id="cb23-3"><a href="#cb23-3"></a></span>
<span id="cb23-4"><a href="#cb23-4"></a><span class="co"># subset the data frame</span></span>
<span id="cb23-5"><a href="#cb23-5"></a>rows_we_want &lt;-<span class="st"> </span>DT<span class="op">$</span>hours_transfer <span class="op">&gt;</span><span class="st"> </span><span class="dv">11</span> <span class="op">&amp;</span><span class="st"> </span>DT<span class="op">$</span>hours_transfer <span class="op">&lt;</span><span class="st"> </span><span class="dv">49</span></span>
<span id="cb23-6"><a href="#cb23-6"></a>cols_we_want &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;id&quot;</span>, <span class="st">&quot;cip6&quot;</span>, <span class="st">&quot;hours_transfer&quot;</span>)</span>
<span id="cb23-7"><a href="#cb23-7"></a>DT &lt;-<span class="st"> </span>DT[rows_we_want, ..cols_we_want]</span>
<span id="cb23-8"><a href="#cb23-8"></a></span>
<span id="cb23-9"><a href="#cb23-9"></a><span class="co"># examine the result</span></span>
<span id="cb23-10"><a href="#cb23-10"></a>DT</span>
<span id="cb23-11"><a href="#cb23-11"></a><span class="co">#&gt;                id   cip6 hours_transfer</span></span>
<span id="cb23-12"><a href="#cb23-12"></a><span class="co">#&gt;    1: MID25821313 260502             23</span></span>
<span id="cb23-13"><a href="#cb23-13"></a><span class="co">#&gt;    2: MID25852945 090401             46</span></span>
<span id="cb23-14"><a href="#cb23-14"></a><span class="co">#&gt;    3: MID25853011 160901             30</span></span>
<span id="cb23-15"><a href="#cb23-15"></a><span class="co">#&gt;    4: MID25853123 520201             46</span></span>
<span id="cb23-16"><a href="#cb23-16"></a><span class="co">#&gt;    5: MID25853143 520201             43</span></span>
<span id="cb23-17"><a href="#cb23-17"></a><span class="co">#&gt;   ---                                  </span></span>
<span id="cb23-18"><a href="#cb23-18"></a><span class="co">#&gt; 3177: MID26696701 521003             38</span></span>
<span id="cb23-19"><a href="#cb23-19"></a><span class="co">#&gt; 3178: MID26696756 040201             40</span></span>
<span id="cb23-20"><a href="#cb23-20"></a><span class="co">#&gt; 3179: MID26696806 090101             44</span></span>
<span id="cb23-21"><a href="#cb23-21"></a><span class="co">#&gt; 3180: MID26696919 400601             47</span></span>
<span id="cb23-22"><a href="#cb23-22"></a><span class="co">#&gt; 3181: MID26697689 240101             47</span></span></code></pre></div>
<p>Example</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a><span class="co"># order rows and rename columns </span></span>
<span id="cb24-2"><a href="#cb24-2"></a>DT &lt;-<span class="st"> </span>DT[<span class="kw">order</span>(<span class="op">-</span>hours_transfer), </span>
<span id="cb24-3"><a href="#cb24-3"></a>         .(<span class="dt">ID =</span> id, <span class="dt">CIP =</span> cip6, <span class="dt">HOURS =</span> hours_transfer)]</span>
<span id="cb24-4"><a href="#cb24-4"></a></span>
<span id="cb24-5"><a href="#cb24-5"></a><span class="co"># examine the result</span></span>
<span id="cb24-6"><a href="#cb24-6"></a>DT</span>
<span id="cb24-7"><a href="#cb24-7"></a><span class="co">#&gt;                ID    CIP HOURS</span></span>
<span id="cb24-8"><a href="#cb24-8"></a><span class="co">#&gt;    1: MID25855267 450701    48</span></span>
<span id="cb24-9"><a href="#cb24-9"></a><span class="co">#&gt;    2: MID25856207 540101    48</span></span>
<span id="cb24-10"><a href="#cb24-10"></a><span class="co">#&gt;    3: MID25857743 520201    48</span></span>
<span id="cb24-11"><a href="#cb24-11"></a><span class="co">#&gt;    4: MID25861482 260406    48</span></span>
<span id="cb24-12"><a href="#cb24-12"></a><span class="co">#&gt;    5: MID25862586 260901    48</span></span>
<span id="cb24-13"><a href="#cb24-13"></a><span class="co">#&gt;   ---                         </span></span>
<span id="cb24-14"><a href="#cb24-14"></a><span class="co">#&gt; 3177: MID26655729 510912    12</span></span>
<span id="cb24-15"><a href="#cb24-15"></a><span class="co">#&gt; 3178: MID26675549 521401    12</span></span>
<span id="cb24-16"><a href="#cb24-16"></a><span class="co">#&gt; 3179: MID26676567 141901    12</span></span>
<span id="cb24-17"><a href="#cb24-17"></a><span class="co">#&gt; 3180: MID26679546 520301    12</span></span>
<span id="cb24-18"><a href="#cb24-18"></a><span class="co">#&gt; 3181: MID26688410 160102    12</span></span></code></pre></div>
</div>
<div id="modify-columns-in-place" class="section level3">
<h3>Modify columns in place</h3>
<p>Columns are modified by reference (in place) using the column assignment symbol <code>:=</code>. The operation is faster than operations requiring a copy, especially for large data frames.</p>
<p><strong>Summary</strong></p>
<ul>
<li><code>DT[, col := NULL]</code> remove a column in place</li>
<li><code>DT[, new_col := FUN]</code> add new column in place where FUN is a function or value</li>
<li><code>DT[rows_to_edit, col := value]</code> add or modify a column in place for specific rows</li>
</ul>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a><span class="co"># create a subset to work with</span></span>
<span id="cb25-2"><a href="#cb25-2"></a>DT &lt;-<span class="st"> </span><span class="kw">copy</span>(midfielddegrees)</span>
<span id="cb25-3"><a href="#cb25-3"></a>rows_we_want &lt;-<span class="st"> </span>DT<span class="op">$</span>institution <span class="op">==</span><span class="st"> &quot;Institution D&quot;</span></span>
<span id="cb25-4"><a href="#cb25-4"></a>DT &lt;-<span class="st"> </span>DT[rows_we_want]</span>
<span id="cb25-5"><a href="#cb25-5"></a></span>
<span id="cb25-6"><a href="#cb25-6"></a><span class="co"># examine the result</span></span>
<span id="cb25-7"><a href="#cb25-7"></a>DT[<span class="kw">order</span>(degree)]</span>
<span id="cb25-8"><a href="#cb25-8"></a><span class="co">#&gt;               id   institution   cip6 term_degree           degree</span></span>
<span id="cb25-9"><a href="#cb25-9"></a><span class="co">#&gt;   1: MID26094487 Institution D 540101       20073 Bachelor of Arts</span></span>
<span id="cb25-10"><a href="#cb25-10"></a><span class="co">#&gt;   2: MID26094762 Institution D 540101       20063 Bachelor of Arts</span></span>
<span id="cb25-11"><a href="#cb25-11"></a><span class="co">#&gt;   3: MID26094844 Institution D 450401       20073 Bachelor of Arts</span></span>
<span id="cb25-12"><a href="#cb25-12"></a><span class="co">#&gt;   4: MID26095029 Institution D 230101       20083 Bachelor of Arts</span></span>
<span id="cb25-13"><a href="#cb25-13"></a><span class="co">#&gt;   5: MID26095126 Institution D 451001       20073 Bachelor of Arts</span></span>
<span id="cb25-14"><a href="#cb25-14"></a><span class="co">#&gt;  ---                                                              </span></span>
<span id="cb25-15"><a href="#cb25-15"></a><span class="co">#&gt; 678: MID26131229 Institution D   &lt;NA&gt;          NA             &lt;NA&gt;</span></span>
<span id="cb25-16"><a href="#cb25-16"></a><span class="co">#&gt; 679: MID26131231 Institution D   &lt;NA&gt;          NA             &lt;NA&gt;</span></span>
<span id="cb25-17"><a href="#cb25-17"></a><span class="co">#&gt; 680: MID26131238 Institution D   &lt;NA&gt;          NA             &lt;NA&gt;</span></span>
<span id="cb25-18"><a href="#cb25-18"></a><span class="co">#&gt; 681: MID26131261 Institution D   &lt;NA&gt;          NA             &lt;NA&gt;</span></span>
<span id="cb25-19"><a href="#cb25-19"></a><span class="co">#&gt; 682: MID26131268 Institution D   &lt;NA&gt;          NA             &lt;NA&gt;</span></span></code></pre></div>
<p><strong>Remove a column by selection.</strong> Earlier, we saw one approach to omitting columns is to exclude them from a selection vector. For example, by selecting the three columns shown below, we are necessarily omitting the <code>cip6</code> and <code>institution</code> columns. This operation requires the use of the assignment operator <code>&lt;-</code> to assign the result to an object name.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a><span class="co"># omit columns by not selecting them </span></span>
<span id="cb26-2"><a href="#cb26-2"></a>cols_we_want &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;id&quot;</span>, <span class="st">&quot;degree&quot;</span>,  <span class="st">&quot;term_degree&quot;</span>)</span>
<span id="cb26-3"><a href="#cb26-3"></a>DT &lt;-<span class="st"> </span>DT[, ..cols_we_want]</span>
<span id="cb26-4"><a href="#cb26-4"></a></span>
<span id="cb26-5"><a href="#cb26-5"></a><span class="co"># examine the result</span></span>
<span id="cb26-6"><a href="#cb26-6"></a>DT[<span class="kw">order</span>(degree)]</span>
<span id="cb26-7"><a href="#cb26-7"></a><span class="co">#&gt;               id           degree term_degree</span></span>
<span id="cb26-8"><a href="#cb26-8"></a><span class="co">#&gt;   1: MID26094487 Bachelor of Arts       20073</span></span>
<span id="cb26-9"><a href="#cb26-9"></a><span class="co">#&gt;   2: MID26094762 Bachelor of Arts       20063</span></span>
<span id="cb26-10"><a href="#cb26-10"></a><span class="co">#&gt;   3: MID26094844 Bachelor of Arts       20073</span></span>
<span id="cb26-11"><a href="#cb26-11"></a><span class="co">#&gt;   4: MID26095029 Bachelor of Arts       20083</span></span>
<span id="cb26-12"><a href="#cb26-12"></a><span class="co">#&gt;   5: MID26095126 Bachelor of Arts       20073</span></span>
<span id="cb26-13"><a href="#cb26-13"></a><span class="co">#&gt;  ---                                         </span></span>
<span id="cb26-14"><a href="#cb26-14"></a><span class="co">#&gt; 678: MID26131229             &lt;NA&gt;          NA</span></span>
<span id="cb26-15"><a href="#cb26-15"></a><span class="co">#&gt; 679: MID26131231             &lt;NA&gt;          NA</span></span>
<span id="cb26-16"><a href="#cb26-16"></a><span class="co">#&gt; 680: MID26131238             &lt;NA&gt;          NA</span></span>
<span id="cb26-17"><a href="#cb26-17"></a><span class="co">#&gt; 681: MID26131261             &lt;NA&gt;          NA</span></span>
<span id="cb26-18"><a href="#cb26-18"></a><span class="co">#&gt; 682: MID26131268             &lt;NA&gt;          NA</span></span></code></pre></div>
<p><strong>Remove a column in place.</strong> In contrast, we avoid the memory usage entailed by <code>&lt;-</code> if we omit a column using the data.table <code>:=</code> operator.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a><span class="co"># omit a column in place</span></span>
<span id="cb27-2"><a href="#cb27-2"></a>DT[, id <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="ot">NULL</span>]</span>
<span id="cb27-3"><a href="#cb27-3"></a></span>
<span id="cb27-4"><a href="#cb27-4"></a><span class="co"># examine the result</span></span>
<span id="cb27-5"><a href="#cb27-5"></a>DT[<span class="kw">order</span>(degree)]</span>
<span id="cb27-6"><a href="#cb27-6"></a><span class="co">#&gt;                degree term_degree</span></span>
<span id="cb27-7"><a href="#cb27-7"></a><span class="co">#&gt;   1: Bachelor of Arts       20073</span></span>
<span id="cb27-8"><a href="#cb27-8"></a><span class="co">#&gt;   2: Bachelor of Arts       20063</span></span>
<span id="cb27-9"><a href="#cb27-9"></a><span class="co">#&gt;   3: Bachelor of Arts       20073</span></span>
<span id="cb27-10"><a href="#cb27-10"></a><span class="co">#&gt;   4: Bachelor of Arts       20083</span></span>
<span id="cb27-11"><a href="#cb27-11"></a><span class="co">#&gt;   5: Bachelor of Arts       20073</span></span>
<span id="cb27-12"><a href="#cb27-12"></a><span class="co">#&gt;  ---                             </span></span>
<span id="cb27-13"><a href="#cb27-13"></a><span class="co">#&gt; 678:             &lt;NA&gt;          NA</span></span>
<span id="cb27-14"><a href="#cb27-14"></a><span class="co">#&gt; 679:             &lt;NA&gt;          NA</span></span>
<span id="cb27-15"><a href="#cb27-15"></a><span class="co">#&gt; 680:             &lt;NA&gt;          NA</span></span>
<span id="cb27-16"><a href="#cb27-16"></a><span class="co">#&gt; 681:             &lt;NA&gt;          NA</span></span>
<span id="cb27-17"><a href="#cb27-17"></a><span class="co">#&gt; 682:             &lt;NA&gt;          NA</span></span></code></pre></div>
<p><strong>Add a column in place.</strong> The form is <code>DT[, new_col := FUN]</code> where <code>FUN</code> is a function or value. Here we add a new column that consists of a single value.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a><span class="co"># add column in place </span></span>
<span id="cb28-2"><a href="#cb28-2"></a>DT[, inst_size <span class="op">:</span><span class="er">=</span><span class="st"> &quot;small&quot;</span>]</span>
<span id="cb28-3"><a href="#cb28-3"></a></span>
<span id="cb28-4"><a href="#cb28-4"></a><span class="co"># examine the result</span></span>
<span id="cb28-5"><a href="#cb28-5"></a>DT[<span class="kw">order</span>(degree)]</span>
<span id="cb28-6"><a href="#cb28-6"></a><span class="co">#&gt;                degree term_degree inst_size</span></span>
<span id="cb28-7"><a href="#cb28-7"></a><span class="co">#&gt;   1: Bachelor of Arts       20073     small</span></span>
<span id="cb28-8"><a href="#cb28-8"></a><span class="co">#&gt;   2: Bachelor of Arts       20063     small</span></span>
<span id="cb28-9"><a href="#cb28-9"></a><span class="co">#&gt;   3: Bachelor of Arts       20073     small</span></span>
<span id="cb28-10"><a href="#cb28-10"></a><span class="co">#&gt;   4: Bachelor of Arts       20083     small</span></span>
<span id="cb28-11"><a href="#cb28-11"></a><span class="co">#&gt;   5: Bachelor of Arts       20073     small</span></span>
<span id="cb28-12"><a href="#cb28-12"></a><span class="co">#&gt;  ---                                       </span></span>
<span id="cb28-13"><a href="#cb28-13"></a><span class="co">#&gt; 678:             &lt;NA&gt;          NA     small</span></span>
<span id="cb28-14"><a href="#cb28-14"></a><span class="co">#&gt; 679:             &lt;NA&gt;          NA     small</span></span>
<span id="cb28-15"><a href="#cb28-15"></a><span class="co">#&gt; 680:             &lt;NA&gt;          NA     small</span></span>
<span id="cb28-16"><a href="#cb28-16"></a><span class="co">#&gt; 681:             &lt;NA&gt;          NA     small</span></span>
<span id="cb28-17"><a href="#cb28-17"></a><span class="co">#&gt; 682:             &lt;NA&gt;          NA     small</span></span></code></pre></div>
<p>Here, we add a new columns <code>year</code> and <code>iterm</code> that are functions of the <code>term</code> column. This operation illustrates one approach to separating the encoded term into separate year and integer-term columns.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a><span class="co"># add columns in place </span></span>
<span id="cb29-2"><a href="#cb29-2"></a>DT[, year  <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="kw">floor</span>(term_degree <span class="op">/</span><span class="st"> </span><span class="dv">10</span>)]</span>
<span id="cb29-3"><a href="#cb29-3"></a>DT[, iterm <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="kw">floor</span>(term_degree <span class="op">-</span><span class="st"> </span><span class="dv">10</span> <span class="op">*</span><span class="st"> </span>year)]</span>
<span id="cb29-4"><a href="#cb29-4"></a></span>
<span id="cb29-5"><a href="#cb29-5"></a><span class="co"># examine the result</span></span>
<span id="cb29-6"><a href="#cb29-6"></a>DT[<span class="kw">order</span>(degree, term_degree)]</span>
<span id="cb29-7"><a href="#cb29-7"></a><span class="co">#&gt;                degree term_degree inst_size year iterm</span></span>
<span id="cb29-8"><a href="#cb29-8"></a><span class="co">#&gt;   1: Bachelor of Arts       20063     small 2006     3</span></span>
<span id="cb29-9"><a href="#cb29-9"></a><span class="co">#&gt;   2: Bachelor of Arts       20063     small 2006     3</span></span>
<span id="cb29-10"><a href="#cb29-10"></a><span class="co">#&gt;   3: Bachelor of Arts       20073     small 2007     3</span></span>
<span id="cb29-11"><a href="#cb29-11"></a><span class="co">#&gt;   4: Bachelor of Arts       20073     small 2007     3</span></span>
<span id="cb29-12"><a href="#cb29-12"></a><span class="co">#&gt;   5: Bachelor of Arts       20073     small 2007     3</span></span>
<span id="cb29-13"><a href="#cb29-13"></a><span class="co">#&gt;  ---                                                  </span></span>
<span id="cb29-14"><a href="#cb29-14"></a><span class="co">#&gt; 678:             &lt;NA&gt;          NA     small   NA    NA</span></span>
<span id="cb29-15"><a href="#cb29-15"></a><span class="co">#&gt; 679:             &lt;NA&gt;          NA     small   NA    NA</span></span>
<span id="cb29-16"><a href="#cb29-16"></a><span class="co">#&gt; 680:             &lt;NA&gt;          NA     small   NA    NA</span></span>
<span id="cb29-17"><a href="#cb29-17"></a><span class="co">#&gt; 681:             &lt;NA&gt;          NA     small   NA    NA</span></span>
<span id="cb29-18"><a href="#cb29-18"></a><span class="co">#&gt; 682:             &lt;NA&gt;          NA     small   NA    NA</span></span></code></pre></div>
<p>The <code>floor()</code> function in the first instance purposefully truncates the decimal value to yield an integer year. In the second instance, <code>floor()</code> is insurance that the term is a whole number as expected (avoiding any potential floating-point errors).</p>
<p><strong>Add a column in place for specific rows.</strong> Here we create a new <code>status</code> column with the value of “grad” in rows where <code>degree</code> is not NA. In all other rows, the value of the <code>status</code> is automatically NA.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a>DT[<span class="op">!</span><span class="kw">is.na</span>(degree), status <span class="op">:</span><span class="er">=</span><span class="st"> &quot;grad&quot;</span>]</span>
<span id="cb30-2"><a href="#cb30-2"></a>DT[<span class="kw">order</span>(status)]</span>
<span id="cb30-3"><a href="#cb30-3"></a><span class="co">#&gt;                   degree term_degree inst_size year iterm status</span></span>
<span id="cb30-4"><a href="#cb30-4"></a><span class="co">#&gt;   1: Bachelor of Science       20081     small 2008     1   grad</span></span>
<span id="cb30-5"><a href="#cb30-5"></a><span class="co">#&gt;   2:    Bachelor of Arts       20073     small 2007     3   grad</span></span>
<span id="cb30-6"><a href="#cb30-6"></a><span class="co">#&gt;   3: Bachelor of Science       20073     small 2007     3   grad</span></span>
<span id="cb30-7"><a href="#cb30-7"></a><span class="co">#&gt;   4: Bachelor of Science       20081     small 2008     1   grad</span></span>
<span id="cb30-8"><a href="#cb30-8"></a><span class="co">#&gt;   5: Bachelor of Science       20073     small 2007     3   grad</span></span>
<span id="cb30-9"><a href="#cb30-9"></a><span class="co">#&gt;  ---                                                            </span></span>
<span id="cb30-10"><a href="#cb30-10"></a><span class="co">#&gt; 678:                &lt;NA&gt;          NA     small   NA    NA   &lt;NA&gt;</span></span>
<span id="cb30-11"><a href="#cb30-11"></a><span class="co">#&gt; 679:                &lt;NA&gt;          NA     small   NA    NA   &lt;NA&gt;</span></span>
<span id="cb30-12"><a href="#cb30-12"></a><span class="co">#&gt; 680:                &lt;NA&gt;          NA     small   NA    NA   &lt;NA&gt;</span></span>
<span id="cb30-13"><a href="#cb30-13"></a><span class="co">#&gt; 681:                &lt;NA&gt;          NA     small   NA    NA   &lt;NA&gt;</span></span>
<span id="cb30-14"><a href="#cb30-14"></a><span class="co">#&gt; 682:                &lt;NA&gt;          NA     small   NA    NA   &lt;NA&gt;</span></span></code></pre></div>
<p><strong>Modify a column in place for specific rows.</strong> Next we can overwrite the NA values in <code>status</code>.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a>DT[<span class="kw">is.na</span>(degree), status <span class="op">:</span><span class="er">=</span><span class="st"> &quot;nongrad&quot;</span>]</span>
<span id="cb31-2"><a href="#cb31-2"></a>DT[<span class="kw">order</span>(status)]</span>
<span id="cb31-3"><a href="#cb31-3"></a><span class="co">#&gt;                   degree term_degree inst_size year iterm  status</span></span>
<span id="cb31-4"><a href="#cb31-4"></a><span class="co">#&gt;   1: Bachelor of Science       20081     small 2008     1    grad</span></span>
<span id="cb31-5"><a href="#cb31-5"></a><span class="co">#&gt;   2:    Bachelor of Arts       20073     small 2007     3    grad</span></span>
<span id="cb31-6"><a href="#cb31-6"></a><span class="co">#&gt;   3: Bachelor of Science       20073     small 2007     3    grad</span></span>
<span id="cb31-7"><a href="#cb31-7"></a><span class="co">#&gt;   4: Bachelor of Science       20081     small 2008     1    grad</span></span>
<span id="cb31-8"><a href="#cb31-8"></a><span class="co">#&gt;   5: Bachelor of Science       20073     small 2007     3    grad</span></span>
<span id="cb31-9"><a href="#cb31-9"></a><span class="co">#&gt;  ---                                                             </span></span>
<span id="cb31-10"><a href="#cb31-10"></a><span class="co">#&gt; 678:                &lt;NA&gt;          NA     small   NA    NA nongrad</span></span>
<span id="cb31-11"><a href="#cb31-11"></a><span class="co">#&gt; 679:                &lt;NA&gt;          NA     small   NA    NA nongrad</span></span>
<span id="cb31-12"><a href="#cb31-12"></a><span class="co">#&gt; 680:                &lt;NA&gt;          NA     small   NA    NA nongrad</span></span>
<span id="cb31-13"><a href="#cb31-13"></a><span class="co">#&gt; 681:                &lt;NA&gt;          NA     small   NA    NA nongrad</span></span>
<span id="cb31-14"><a href="#cb31-14"></a><span class="co">#&gt; 682:                &lt;NA&gt;          NA     small   NA    NA nongrad</span></span></code></pre></div>
</div>
<div id="operations-by-group" class="section level3">
<h3>Operations by group</h3>
<p><strong>Summary</strong></p>
<ul>
<li><code>DT[, .(new_col = .N), by = grouping_variables]</code> frequency by group</li>
<li><code>DT[, .SD[FUN(col)], by = grouping_variables]</code> operate on a column by group</li>
</ul>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a><span class="co"># create a subset to work with</span></span>
<span id="cb32-2"><a href="#cb32-2"></a>rows_we_want &lt;-<span class="st"> </span>midfieldterms<span class="op">$</span>cip6 <span class="op">==</span><span class="st"> &quot;141901&quot;</span></span>
<span id="cb32-3"><a href="#cb32-3"></a>cols_we_want &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;institution&quot;</span>, <span class="st">&quot;cip6&quot;</span>, <span class="st">&quot;term&quot;</span>, <span class="st">&quot;coop&quot;</span>)</span>
<span id="cb32-4"><a href="#cb32-4"></a>DT &lt;-<span class="st"> </span>midfieldterms[rows_we_want, ..cols_we_want]</span>
<span id="cb32-5"><a href="#cb32-5"></a></span>
<span id="cb32-6"><a href="#cb32-6"></a><span class="co"># examine the result</span></span>
<span id="cb32-7"><a href="#cb32-7"></a>DT</span>
<span id="cb32-8"><a href="#cb32-8"></a><span class="co">#&gt;          institution   cip6  term coop</span></span>
<span id="cb32-9"><a href="#cb32-9"></a><span class="co">#&gt;     1: Institution M 141901 19881    N</span></span>
<span id="cb32-10"><a href="#cb32-10"></a><span class="co">#&gt;     2: Institution M 141901 19883    N</span></span>
<span id="cb32-11"><a href="#cb32-11"></a><span class="co">#&gt;     3: Institution M 141901 19891    N</span></span>
<span id="cb32-12"><a href="#cb32-12"></a><span class="co">#&gt;     4: Institution M 141901 19893    N</span></span>
<span id="cb32-13"><a href="#cb32-13"></a><span class="co">#&gt;     5: Institution M 141901 19895    N</span></span>
<span id="cb32-14"><a href="#cb32-14"></a><span class="co">#&gt;    ---                                </span></span>
<span id="cb32-15"><a href="#cb32-15"></a><span class="co">#&gt; 24142: Institution L 141901 20124    N</span></span>
<span id="cb32-16"><a href="#cb32-16"></a><span class="co">#&gt; 24143: Institution L 141901 20131    N</span></span>
<span id="cb32-17"><a href="#cb32-17"></a><span class="co">#&gt; 24144: Institution L 141901 20133    N</span></span>
<span id="cb32-18"><a href="#cb32-18"></a><span class="co">#&gt; 24145: Institution L 141901 20101    N</span></span>
<span id="cb32-19"><a href="#cb32-19"></a><span class="co">#&gt; 24146: Institution L 141901 20103    N</span></span></code></pre></div>
<p><strong>Frequency by group.</strong> We use this syntax regularly in computing persistence metrics. Once a data set keyed by student ID has been manipulated for the desired form, we count the number of students (or frequency) by group.</p>
<p>First, we count the total number of students by institution. The data.table <code>.N</code> function is the total count. The default column name in <code>N</code>.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a><span class="co"># count by institution</span></span>
<span id="cb33-2"><a href="#cb33-2"></a>DT[<span class="kw">order</span>(institution), .N, by =<span class="st"> </span>institution]</span>
<span id="cb33-3"><a href="#cb33-3"></a><span class="co">#&gt;       institution    N</span></span>
<span id="cb33-4"><a href="#cb33-4"></a><span class="co">#&gt;  1: Institution A  416</span></span>
<span id="cb33-5"><a href="#cb33-5"></a><span class="co">#&gt;  2: Institution B 1766</span></span>
<span id="cb33-6"><a href="#cb33-6"></a><span class="co">#&gt;  3: Institution C 2506</span></span>
<span id="cb33-7"><a href="#cb33-7"></a><span class="co">#&gt;  4: Institution E  499</span></span>
<span id="cb33-8"><a href="#cb33-8"></a><span class="co">#&gt;  5: Institution F 6295</span></span>
<span id="cb33-9"><a href="#cb33-9"></a><span class="co">#&gt;  6: Institution G 1018</span></span>
<span id="cb33-10"><a href="#cb33-10"></a><span class="co">#&gt;  7: Institution H 3364</span></span>
<span id="cb33-11"><a href="#cb33-11"></a><span class="co">#&gt;  8: Institution J 3673</span></span>
<span id="cb33-12"><a href="#cb33-12"></a><span class="co">#&gt;  9: Institution K 1731</span></span>
<span id="cb33-13"><a href="#cb33-13"></a><span class="co">#&gt; 10: Institution L  726</span></span>
<span id="cb33-14"><a href="#cb33-14"></a><span class="co">#&gt; 11: Institution M 2152</span></span>
<span id="cb33-15"><a href="#cb33-15"></a></span>
<span id="cb33-16"><a href="#cb33-16"></a><span class="co"># count by coop</span></span>
<span id="cb33-17"><a href="#cb33-17"></a>DT[, .N, by =<span class="st"> </span>coop]</span>
<span id="cb33-18"><a href="#cb33-18"></a><span class="co">#&gt;    coop     N</span></span>
<span id="cb33-19"><a href="#cb33-19"></a><span class="co">#&gt; 1:    N 23102</span></span>
<span id="cb33-20"><a href="#cb33-20"></a><span class="co">#&gt; 2:    Y  1044</span></span></code></pre></div>
<p>Assign a column name to the count</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a><span class="co"># column name for the count</span></span>
<span id="cb34-2"><a href="#cb34-2"></a>DT[, .(<span class="dt">N_coop =</span> .N), by =<span class="st"> </span>coop]</span>
<span id="cb34-3"><a href="#cb34-3"></a><span class="co">#&gt;    coop N_coop</span></span>
<span id="cb34-4"><a href="#cb34-4"></a><span class="co">#&gt; 1:    N  23102</span></span>
<span id="cb34-5"><a href="#cb34-5"></a><span class="co">#&gt; 2:    Y   1044</span></span></code></pre></div>
<p>Our practice in the vignettes is to place the grouping variables in a character vector. For example,</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a><span class="co"># edit the printout option</span></span>
<span id="cb35-2"><a href="#cb35-2"></a><span class="kw">options</span>(<span class="dt">datatable.print.nrows =</span> <span class="dv">16</span>)</span>
<span id="cb35-3"><a href="#cb35-3"></a></span>
<span id="cb35-4"><a href="#cb35-4"></a><span class="co"># assign the grouping variables </span></span>
<span id="cb35-5"><a href="#cb35-5"></a>grouping_variables &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;institution&quot;</span>, <span class="st">&quot;coop&quot;</span>)</span>
<span id="cb35-6"><a href="#cb35-6"></a></span>
<span id="cb35-7"><a href="#cb35-7"></a><span class="co"># count by the groupings</span></span>
<span id="cb35-8"><a href="#cb35-8"></a>DT[<span class="kw">order</span>(institution, coop), .(<span class="dt">frequency =</span> .N), by =<span class="st"> </span>grouping_variables]</span>
<span id="cb35-9"><a href="#cb35-9"></a><span class="co">#&gt;       institution coop frequency</span></span>
<span id="cb35-10"><a href="#cb35-10"></a><span class="co">#&gt;  1: Institution A    N       416</span></span>
<span id="cb35-11"><a href="#cb35-11"></a><span class="co">#&gt;  2: Institution B    N      1766</span></span>
<span id="cb35-12"><a href="#cb35-12"></a><span class="co">#&gt;  3: Institution C    N      2506</span></span>
<span id="cb35-13"><a href="#cb35-13"></a><span class="co">#&gt;  4: Institution E    N       499</span></span>
<span id="cb35-14"><a href="#cb35-14"></a><span class="co">#&gt;  5: Institution F    N      5382</span></span>
<span id="cb35-15"><a href="#cb35-15"></a><span class="co">#&gt;  6: Institution F    Y       913</span></span>
<span id="cb35-16"><a href="#cb35-16"></a><span class="co">#&gt;  7: Institution G    N      1018</span></span>
<span id="cb35-17"><a href="#cb35-17"></a><span class="co">#&gt;  8: Institution H    N      3324</span></span>
<span id="cb35-18"><a href="#cb35-18"></a><span class="co">#&gt;  9: Institution H    Y        40</span></span>
<span id="cb35-19"><a href="#cb35-19"></a><span class="co">#&gt; 10: Institution J    N      3667</span></span>
<span id="cb35-20"><a href="#cb35-20"></a><span class="co">#&gt; 11: Institution J    Y         6</span></span>
<span id="cb35-21"><a href="#cb35-21"></a><span class="co">#&gt; 12: Institution K    N      1668</span></span>
<span id="cb35-22"><a href="#cb35-22"></a><span class="co">#&gt; 13: Institution K    Y        63</span></span>
<span id="cb35-23"><a href="#cb35-23"></a><span class="co">#&gt; 14: Institution L    N       726</span></span>
<span id="cb35-24"><a href="#cb35-24"></a><span class="co">#&gt; 15: Institution M    N      2130</span></span>
<span id="cb35-25"><a href="#cb35-25"></a><span class="co">#&gt; 16: Institution M    Y        22</span></span>
<span id="cb35-26"><a href="#cb35-26"></a></span>
<span id="cb35-27"><a href="#cb35-27"></a><span class="co"># reset the printout option</span></span>
<span id="cb35-28"><a href="#cb35-28"></a><span class="kw">options</span>(<span class="dt">datatable.print.nrows =</span> <span class="dv">10</span>, <span class="dt">datatable.print.topn =</span> <span class="dv">5</span>)</span></code></pre></div>
<p><strong>Operate on a column by group.</strong> The data.table <code>.SD</code> operator can be thought of as a symbol that represents “each group”. We can use it to operate on one column grouped by the values in another column.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a><span class="co"># create a subset to work with</span></span>
<span id="cb36-2"><a href="#cb36-2"></a>rows_we_want &lt;-<span class="st"> </span>midfieldterms<span class="op">$</span>cip6 <span class="op">==</span><span class="st"> &quot;141901&quot;</span></span>
<span id="cb36-3"><a href="#cb36-3"></a>cols_we_want &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;id&quot;</span>, <span class="st">&quot;cip6&quot;</span>, <span class="st">&quot;term&quot;</span>)</span>
<span id="cb36-4"><a href="#cb36-4"></a>DT &lt;-<span class="st"> </span>midfieldterms[rows_we_want, ..cols_we_want]</span>
<span id="cb36-5"><a href="#cb36-5"></a></span>
<span id="cb36-6"><a href="#cb36-6"></a><span class="co"># examine the result</span></span>
<span id="cb36-7"><a href="#cb36-7"></a>DT</span>
<span id="cb36-8"><a href="#cb36-8"></a><span class="co">#&gt;                 id   cip6  term</span></span>
<span id="cb36-9"><a href="#cb36-9"></a><span class="co">#&gt;     1: MID25783388 141901 19881</span></span>
<span id="cb36-10"><a href="#cb36-10"></a><span class="co">#&gt;     2: MID25783388 141901 19883</span></span>
<span id="cb36-11"><a href="#cb36-11"></a><span class="co">#&gt;     3: MID25783388 141901 19891</span></span>
<span id="cb36-12"><a href="#cb36-12"></a><span class="co">#&gt;     4: MID25783388 141901 19893</span></span>
<span id="cb36-13"><a href="#cb36-13"></a><span class="co">#&gt;     5: MID25783388 141901 19895</span></span>
<span id="cb36-14"><a href="#cb36-14"></a><span class="co">#&gt;    ---                         </span></span>
<span id="cb36-15"><a href="#cb36-15"></a><span class="co">#&gt; 24142: MID26697163 141901 20124</span></span>
<span id="cb36-16"><a href="#cb36-16"></a><span class="co">#&gt; 24143: MID26697163 141901 20131</span></span>
<span id="cb36-17"><a href="#cb36-17"></a><span class="co">#&gt; 24144: MID26697163 141901 20133</span></span>
<span id="cb36-18"><a href="#cb36-18"></a><span class="co">#&gt; 24145: MID26697444 141901 20101</span></span>
<span id="cb36-19"><a href="#cb36-19"></a><span class="co">#&gt; 24146: MID26697444 141901 20103</span></span></code></pre></div>
<p>Example. Retain rows with the most recent term by ID.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a><span class="co"># keep the latest term data by ID</span></span>
<span id="cb37-2"><a href="#cb37-2"></a>DT &lt;-<span class="st"> </span>DT[, .SD[term <span class="op">==</span><span class="st"> </span><span class="kw">max</span>(term)], by =<span class="st"> </span>id]</span>
<span id="cb37-3"><a href="#cb37-3"></a></span>
<span id="cb37-4"><a href="#cb37-4"></a><span class="co"># examine the result</span></span>
<span id="cb37-5"><a href="#cb37-5"></a>DT</span>
<span id="cb37-6"><a href="#cb37-6"></a><span class="co">#&gt;                id   cip6  term</span></span>
<span id="cb37-7"><a href="#cb37-7"></a><span class="co">#&gt;    1: MID25783388 141901 19905</span></span>
<span id="cb37-8"><a href="#cb37-8"></a><span class="co">#&gt;    2: MID25784022 141901 20053</span></span>
<span id="cb37-9"><a href="#cb37-9"></a><span class="co">#&gt;    3: MID25784025 141901 19966</span></span>
<span id="cb37-10"><a href="#cb37-10"></a><span class="co">#&gt;    4: MID25784056 141901 20053</span></span>
<span id="cb37-11"><a href="#cb37-11"></a><span class="co">#&gt;    5: MID25784331 141901 19893</span></span>
<span id="cb37-12"><a href="#cb37-12"></a><span class="co">#&gt;   ---                         </span></span>
<span id="cb37-13"><a href="#cb37-13"></a><span class="co">#&gt; 3930: MID26696958 141901 20111</span></span>
<span id="cb37-14"><a href="#cb37-14"></a><span class="co">#&gt; 3931: MID26696967 141901 20141</span></span>
<span id="cb37-15"><a href="#cb37-15"></a><span class="co">#&gt; 3932: MID26696979 141901 20154</span></span>
<span id="cb37-16"><a href="#cb37-16"></a><span class="co">#&gt; 3933: MID26697163 141901 20133</span></span>
<span id="cb37-17"><a href="#cb37-17"></a><span class="co">#&gt; 3934: MID26697444 141901 20103</span></span></code></pre></div>
</div>
<div id="modify-in-place" class="section level3">
<h3>Modify in place</h3>
<p><strong>Summary</strong></p>
<ul>
<li><code>setDT()</code> convert data.frame to data.table in place</li>
<li><code>setDF()</code> convert data.table to data.frame in place</li>
<li><code>setnames()</code> rename columns in place</li>
<li><code>copy()</code> to avoid modifying the source object</li>
</ul>
<p>When we apply any data.table function that starts with <code>set</code> (or when we use the <code>:=</code> operator), data.table changes the object in place (also called “by reference”). This is an important feature for saving computational expense when working with large data frames such as <code>midfieldcourses</code>.</p>
<p><strong>Side-effects.</strong> Modify in place has side-effects, however, of which the user must be aware. Suppose we start with a data.frame object and we use <code>setDT()</code> to transform it to a data.table object. We’ll use the base R <code>airquality</code> data set again.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a><span class="co"># the original is a data.frame</span></span>
<span id="cb38-2"><a href="#cb38-2"></a>DF &lt;-<span class="st"> </span><span class="kw">copy</span>(airquality)</span>
<span id="cb38-3"><a href="#cb38-3"></a><span class="kw">class</span>(DF)</span>
<span id="cb38-4"><a href="#cb38-4"></a><span class="co">#&gt; [1] &quot;data.frame&quot;</span></span></code></pre></div>
<p>Create a data.table with <code>setDT()</code>.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1"></a><span class="co"># create data.table</span></span>
<span id="cb39-2"><a href="#cb39-2"></a>DT &lt;-<span class="st"> </span><span class="kw">setDT</span>(DF)</span>
<span id="cb39-3"><a href="#cb39-3"></a><span class="kw">class</span>(DT)</span>
<span id="cb39-4"><a href="#cb39-4"></a><span class="co">#&gt; [1] &quot;data.table&quot; &quot;data.frame&quot;</span></span></code></pre></div>
<p><code>DT</code> is a data.table as expected. However, because the transformation was “in place”, it applied to the original <code>DF</code> as well.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1"></a><span class="kw">class</span>(DF)</span>
<span id="cb40-2"><a href="#cb40-2"></a><span class="co">#&gt; [1] &quot;data.table&quot; &quot;data.frame&quot;</span></span></code></pre></div>
<p>Using in-place operations, <code>DF</code> and <code>DT</code> point to the same location in memory.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1"></a><span class="co"># both labels refer to the same memory address</span></span>
<span id="cb41-2"><a href="#cb41-2"></a><span class="kw">address</span>(DT)</span>
<span id="cb41-3"><a href="#cb41-3"></a><span class="co">#&gt; [1] &quot;0000000029357b40&quot;</span></span>
<span id="cb41-4"><a href="#cb41-4"></a><span class="kw">address</span>(DF)</span>
<span id="cb41-5"><a href="#cb41-5"></a><span class="co">#&gt; [1] &quot;0000000029357b40&quot;</span></span></code></pre></div>
<p>It follows then that a function applied to <code>DT</code> is also applied to <code>DF</code>,</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1"></a><span class="co"># edit DT</span></span>
<span id="cb42-2"><a href="#cb42-2"></a>DT[, year <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="dv">1973</span>]</span>
<span id="cb42-3"><a href="#cb42-3"></a>DT </span>
<span id="cb42-4"><a href="#cb42-4"></a><span class="co">#&gt;      Ozone Solar.R Wind Temp Month Day year</span></span>
<span id="cb42-5"><a href="#cb42-5"></a><span class="co">#&gt;   1:    41     190  7.4   67     5   1 1973</span></span>
<span id="cb42-6"><a href="#cb42-6"></a><span class="co">#&gt;   2:    36     118  8.0   72     5   2 1973</span></span>
<span id="cb42-7"><a href="#cb42-7"></a><span class="co">#&gt;   3:    12     149 12.6   74     5   3 1973</span></span>
<span id="cb42-8"><a href="#cb42-8"></a><span class="co">#&gt;   4:    18     313 11.5   62     5   4 1973</span></span>
<span id="cb42-9"><a href="#cb42-9"></a><span class="co">#&gt;   5:    NA      NA 14.3   56     5   5 1973</span></span>
<span id="cb42-10"><a href="#cb42-10"></a><span class="co">#&gt;  ---                                       </span></span>
<span id="cb42-11"><a href="#cb42-11"></a><span class="co">#&gt; 149:    30     193  6.9   70     9  26 1973</span></span>
<span id="cb42-12"><a href="#cb42-12"></a><span class="co">#&gt; 150:    NA     145 13.2   77     9  27 1973</span></span>
<span id="cb42-13"><a href="#cb42-13"></a><span class="co">#&gt; 151:    14     191 14.3   75     9  28 1973</span></span>
<span id="cb42-14"><a href="#cb42-14"></a><span class="co">#&gt; 152:    18     131  8.0   76     9  29 1973</span></span>
<span id="cb42-15"><a href="#cb42-15"></a><span class="co">#&gt; 153:    20     223 11.5   68     9  30 1973</span></span>
<span id="cb42-16"><a href="#cb42-16"></a></span>
<span id="cb42-17"><a href="#cb42-17"></a><span class="co"># and the change applied to DF </span></span>
<span id="cb42-18"><a href="#cb42-18"></a>DF</span>
<span id="cb42-19"><a href="#cb42-19"></a><span class="co">#&gt;      Ozone Solar.R Wind Temp Month Day year</span></span>
<span id="cb42-20"><a href="#cb42-20"></a><span class="co">#&gt;   1:    41     190  7.4   67     5   1 1973</span></span>
<span id="cb42-21"><a href="#cb42-21"></a><span class="co">#&gt;   2:    36     118  8.0   72     5   2 1973</span></span>
<span id="cb42-22"><a href="#cb42-22"></a><span class="co">#&gt;   3:    12     149 12.6   74     5   3 1973</span></span>
<span id="cb42-23"><a href="#cb42-23"></a><span class="co">#&gt;   4:    18     313 11.5   62     5   4 1973</span></span>
<span id="cb42-24"><a href="#cb42-24"></a><span class="co">#&gt;   5:    NA      NA 14.3   56     5   5 1973</span></span>
<span id="cb42-25"><a href="#cb42-25"></a><span class="co">#&gt;  ---                                       </span></span>
<span id="cb42-26"><a href="#cb42-26"></a><span class="co">#&gt; 149:    30     193  6.9   70     9  26 1973</span></span>
<span id="cb42-27"><a href="#cb42-27"></a><span class="co">#&gt; 150:    NA     145 13.2   77     9  27 1973</span></span>
<span id="cb42-28"><a href="#cb42-28"></a><span class="co">#&gt; 151:    14     191 14.3   75     9  28 1973</span></span>
<span id="cb42-29"><a href="#cb42-29"></a><span class="co">#&gt; 152:    18     131  8.0   76     9  29 1973</span></span>
<span id="cb42-30"><a href="#cb42-30"></a><span class="co">#&gt; 153:    20     223 11.5   68     9  30 1973</span></span></code></pre></div>
<p>To avoid this side effect, we use <code>copy()</code>.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1"></a><span class="co"># the original is a data.frame</span></span>
<span id="cb43-2"><a href="#cb43-2"></a>DF &lt;-<span class="st"> </span><span class="kw">copy</span>(airquality)</span>
<span id="cb43-3"><a href="#cb43-3"></a><span class="kw">class</span>(DF)</span>
<span id="cb43-4"><a href="#cb43-4"></a><span class="co">#&gt; [1] &quot;data.frame&quot;</span></span></code></pre></div>
<p>Make a copy and transform to data.table</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1"></a><span class="co"># make a copy</span></span>
<span id="cb44-2"><a href="#cb44-2"></a>DT &lt;-<span class="st"> </span><span class="kw">copy</span>(DF)</span>
<span id="cb44-3"><a href="#cb44-3"></a></span>
<span id="cb44-4"><a href="#cb44-4"></a><span class="co"># transform</span></span>
<span id="cb44-5"><a href="#cb44-5"></a><span class="kw">setDT</span>(DT)</span>
<span id="cb44-6"><a href="#cb44-6"></a></span>
<span id="cb44-7"><a href="#cb44-7"></a><span class="co"># DT is a data.table</span></span>
<span id="cb44-8"><a href="#cb44-8"></a><span class="kw">class</span>(DT)</span>
<span id="cb44-9"><a href="#cb44-9"></a><span class="co">#&gt; [1] &quot;data.table&quot; &quot;data.frame&quot;</span></span></code></pre></div>
<p><code>DT</code> and <code>DF</code> have different addresses, so <code>DF</code> remains unaffected.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1"></a><span class="co"># the two objects have different addresses in memory</span></span>
<span id="cb45-2"><a href="#cb45-2"></a><span class="kw">address</span>(DT)</span>
<span id="cb45-3"><a href="#cb45-3"></a><span class="co">#&gt; [1] &quot;00000000294dbcf8&quot;</span></span>
<span id="cb45-4"><a href="#cb45-4"></a><span class="kw">address</span>(DF)</span>
<span id="cb45-5"><a href="#cb45-5"></a><span class="co">#&gt; [1] &quot;000000001ed380c0&quot;</span></span>
<span id="cb45-6"><a href="#cb45-6"></a></span>
<span id="cb45-7"><a href="#cb45-7"></a><span class="co"># DF remains a data.frame</span></span>
<span id="cb45-8"><a href="#cb45-8"></a><span class="kw">class</span>(DF)</span>
<span id="cb45-9"><a href="#cb45-9"></a><span class="co">#&gt; [1] &quot;data.frame&quot;</span></span></code></pre></div>
<p>Operating on <code>DT</code> no has no side-effect on <code>DF</code>.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1"></a><span class="co"># edit DT</span></span>
<span id="cb46-2"><a href="#cb46-2"></a>DT[, year <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="dv">1973</span>]</span>
<span id="cb46-3"><a href="#cb46-3"></a></span>
<span id="cb46-4"><a href="#cb46-4"></a><span class="co"># examine the result</span></span>
<span id="cb46-5"><a href="#cb46-5"></a><span class="kw">head</span>(DT)</span>
<span id="cb46-6"><a href="#cb46-6"></a><span class="co">#&gt;    Ozone Solar.R Wind Temp Month Day year</span></span>
<span id="cb46-7"><a href="#cb46-7"></a><span class="co">#&gt; 1:    41     190  7.4   67     5   1 1973</span></span>
<span id="cb46-8"><a href="#cb46-8"></a><span class="co">#&gt; 2:    36     118  8.0   72     5   2 1973</span></span>
<span id="cb46-9"><a href="#cb46-9"></a><span class="co">#&gt; 3:    12     149 12.6   74     5   3 1973</span></span>
<span id="cb46-10"><a href="#cb46-10"></a><span class="co">#&gt; 4:    18     313 11.5   62     5   4 1973</span></span>
<span id="cb46-11"><a href="#cb46-11"></a><span class="co">#&gt; 5:    NA      NA 14.3   56     5   5 1973</span></span>
<span id="cb46-12"><a href="#cb46-12"></a><span class="co">#&gt; 6:    28      NA 14.9   66     5   6 1973</span></span>
<span id="cb46-13"><a href="#cb46-13"></a></span>
<span id="cb46-14"><a href="#cb46-14"></a><span class="co"># no change to DF </span></span>
<span id="cb46-15"><a href="#cb46-15"></a><span class="kw">head</span>(DF)</span>
<span id="cb46-16"><a href="#cb46-16"></a><span class="co">#&gt;   Ozone Solar.R Wind Temp Month Day</span></span>
<span id="cb46-17"><a href="#cb46-17"></a><span class="co">#&gt; 1    41     190  7.4   67     5   1</span></span>
<span id="cb46-18"><a href="#cb46-18"></a><span class="co">#&gt; 2    36     118  8.0   72     5   2</span></span>
<span id="cb46-19"><a href="#cb46-19"></a><span class="co">#&gt; 3    12     149 12.6   74     5   3</span></span>
<span id="cb46-20"><a href="#cb46-20"></a><span class="co">#&gt; 4    18     313 11.5   62     5   4</span></span>
<span id="cb46-21"><a href="#cb46-21"></a><span class="co">#&gt; 5    NA      NA 14.3   56     5   5</span></span>
<span id="cb46-22"><a href="#cb46-22"></a><span class="co">#&gt; 6    28      NA 14.9   66     5   6</span></span></code></pre></div>
<p><strong>Convert data.frame to data.table in place</strong>. Here we start with the <code>airquality</code> data.frame from base R. Copy and transform to a data.table and compare results. The original is unaffected because we used <code>copy()</code>.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1"></a><span class="co"># start with a data.frame</span></span>
<span id="cb47-2"><a href="#cb47-2"></a><span class="kw">class</span>(airquality)</span>
<span id="cb47-3"><a href="#cb47-3"></a><span class="co">#&gt; [1] &quot;data.frame&quot;</span></span>
<span id="cb47-4"><a href="#cb47-4"></a></span>
<span id="cb47-5"><a href="#cb47-5"></a><span class="co"># copy and transform in place</span></span>
<span id="cb47-6"><a href="#cb47-6"></a>DT &lt;-<span class="st"> </span><span class="kw">copy</span>(airquality)</span>
<span id="cb47-7"><a href="#cb47-7"></a><span class="kw">setDT</span>(DT)</span>
<span id="cb47-8"><a href="#cb47-8"></a></span>
<span id="cb47-9"><a href="#cb47-9"></a><span class="co"># compare results</span></span>
<span id="cb47-10"><a href="#cb47-10"></a><span class="kw">class</span>(airquality)</span>
<span id="cb47-11"><a href="#cb47-11"></a><span class="co">#&gt; [1] &quot;data.frame&quot;</span></span>
<span id="cb47-12"><a href="#cb47-12"></a><span class="kw">class</span>(DT)</span>
<span id="cb47-13"><a href="#cb47-13"></a><span class="co">#&gt; [1] &quot;data.table&quot; &quot;data.frame&quot;</span></span></code></pre></div>
<p><strong>Convert data.table to data.frame in place</strong>. Here we start with the <code>cip</code> data.table from midfieldr. Copy and transform to a data.frame and compare results. Again, because we started with<code>copy()</code>, the original is unaffected by the <code>setDF()</code> operation.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1"></a><span class="co"># start with a data.table</span></span>
<span id="cb48-2"><a href="#cb48-2"></a><span class="kw">class</span>(cip)</span>
<span id="cb48-3"><a href="#cb48-3"></a><span class="co">#&gt; [1] &quot;data.table&quot; &quot;data.frame&quot;</span></span>
<span id="cb48-4"><a href="#cb48-4"></a></span>
<span id="cb48-5"><a href="#cb48-5"></a><span class="co"># copy and transform in place</span></span>
<span id="cb48-6"><a href="#cb48-6"></a>DF &lt;-<span class="st"> </span><span class="kw">copy</span>(cip)</span>
<span id="cb48-7"><a href="#cb48-7"></a><span class="kw">setDF</span>(DF)</span>
<span id="cb48-8"><a href="#cb48-8"></a></span>
<span id="cb48-9"><a href="#cb48-9"></a><span class="co"># compare results</span></span>
<span id="cb48-10"><a href="#cb48-10"></a><span class="kw">class</span>(cip)</span>
<span id="cb48-11"><a href="#cb48-11"></a><span class="co">#&gt; [1] &quot;data.table&quot; &quot;data.frame&quot;</span></span>
<span id="cb48-12"><a href="#cb48-12"></a><span class="kw">class</span>(DF)</span>
<span id="cb48-13"><a href="#cb48-13"></a><span class="co">#&gt; [1] &quot;data.frame&quot;</span></span></code></pre></div>
<p><strong>Rename columns in place</strong>. <code>setnames()</code> allows us to edit one or more column names without affecting unnamed columns.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1"></a><span class="co"># create a subset to work with</span></span>
<span id="cb49-2"><a href="#cb49-2"></a>DT &lt;-<span class="st"> </span><span class="kw">copy</span>(midfielddegrees)</span>
<span id="cb49-3"><a href="#cb49-3"></a>rows_we_want &lt;-<span class="st"> </span>DT<span class="op">$</span>institution <span class="op">==</span><span class="st"> &quot;Institution D&quot;</span></span>
<span id="cb49-4"><a href="#cb49-4"></a>DT &lt;-<span class="st"> </span>DT[rows_we_want]</span>
<span id="cb49-5"><a href="#cb49-5"></a></span>
<span id="cb49-6"><a href="#cb49-6"></a><span class="co"># examine the result</span></span>
<span id="cb49-7"><a href="#cb49-7"></a>DT[<span class="kw">order</span>(degree)]</span>
<span id="cb49-8"><a href="#cb49-8"></a><span class="co">#&gt;               id   institution   cip6 term_degree           degree</span></span>
<span id="cb49-9"><a href="#cb49-9"></a><span class="co">#&gt;   1: MID26094487 Institution D 540101       20073 Bachelor of Arts</span></span>
<span id="cb49-10"><a href="#cb49-10"></a><span class="co">#&gt;   2: MID26094762 Institution D 540101       20063 Bachelor of Arts</span></span>
<span id="cb49-11"><a href="#cb49-11"></a><span class="co">#&gt;   3: MID26094844 Institution D 450401       20073 Bachelor of Arts</span></span>
<span id="cb49-12"><a href="#cb49-12"></a><span class="co">#&gt;   4: MID26095029 Institution D 230101       20083 Bachelor of Arts</span></span>
<span id="cb49-13"><a href="#cb49-13"></a><span class="co">#&gt;   5: MID26095126 Institution D 451001       20073 Bachelor of Arts</span></span>
<span id="cb49-14"><a href="#cb49-14"></a><span class="co">#&gt;  ---                                                              </span></span>
<span id="cb49-15"><a href="#cb49-15"></a><span class="co">#&gt; 678: MID26131229 Institution D   &lt;NA&gt;          NA             &lt;NA&gt;</span></span>
<span id="cb49-16"><a href="#cb49-16"></a><span class="co">#&gt; 679: MID26131231 Institution D   &lt;NA&gt;          NA             &lt;NA&gt;</span></span>
<span id="cb49-17"><a href="#cb49-17"></a><span class="co">#&gt; 680: MID26131238 Institution D   &lt;NA&gt;          NA             &lt;NA&gt;</span></span>
<span id="cb49-18"><a href="#cb49-18"></a><span class="co">#&gt; 681: MID26131261 Institution D   &lt;NA&gt;          NA             &lt;NA&gt;</span></span>
<span id="cb49-19"><a href="#cb49-19"></a><span class="co">#&gt; 682: MID26131268 Institution D   &lt;NA&gt;          NA             &lt;NA&gt;</span></span></code></pre></div>
<p>Edit some column names, leaving others intact</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1"></a><span class="co"># edit column names in place</span></span>
<span id="cb50-2"><a href="#cb50-2"></a><span class="kw">setnames</span>(DT, <span class="dt">old =</span> <span class="kw">c</span>(<span class="st">&quot;id&quot;</span>, <span class="st">&quot;cip6&quot;</span>), <span class="dt">new =</span> <span class="kw">c</span>(<span class="st">&quot;ID&quot;</span>, <span class="st">&quot;CIP&quot;</span>))</span>
<span id="cb50-3"><a href="#cb50-3"></a></span>
<span id="cb50-4"><a href="#cb50-4"></a><span class="co"># examine the result</span></span>
<span id="cb50-5"><a href="#cb50-5"></a>DT</span>
<span id="cb50-6"><a href="#cb50-6"></a><span class="co">#&gt;               ID   institution    CIP term_degree              degree</span></span>
<span id="cb50-7"><a href="#cb50-7"></a><span class="co">#&gt;   1: MID26094406 Institution D 270101       20081 Bachelor of Science</span></span>
<span id="cb50-8"><a href="#cb50-8"></a><span class="co">#&gt;   2: MID26094487 Institution D 540101       20073    Bachelor of Arts</span></span>
<span id="cb50-9"><a href="#cb50-9"></a><span class="co">#&gt;   3: MID26094493 Institution D   &lt;NA&gt;          NA                &lt;NA&gt;</span></span>
<span id="cb50-10"><a href="#cb50-10"></a><span class="co">#&gt;   4: MID26094516 Institution D 519999       20073 Bachelor of Science</span></span>
<span id="cb50-11"><a href="#cb50-11"></a><span class="co">#&gt;   5: MID26094544 Institution D   &lt;NA&gt;          NA                &lt;NA&gt;</span></span>
<span id="cb50-12"><a href="#cb50-12"></a><span class="co">#&gt;  ---                                                                 </span></span>
<span id="cb50-13"><a href="#cb50-13"></a><span class="co">#&gt; 678: MID26131229 Institution D   &lt;NA&gt;          NA                &lt;NA&gt;</span></span>
<span id="cb50-14"><a href="#cb50-14"></a><span class="co">#&gt; 679: MID26131231 Institution D   &lt;NA&gt;          NA                &lt;NA&gt;</span></span>
<span id="cb50-15"><a href="#cb50-15"></a><span class="co">#&gt; 680: MID26131238 Institution D   &lt;NA&gt;          NA                &lt;NA&gt;</span></span>
<span id="cb50-16"><a href="#cb50-16"></a><span class="co">#&gt; 681: MID26131261 Institution D   &lt;NA&gt;          NA                &lt;NA&gt;</span></span>
<span id="cb50-17"><a href="#cb50-17"></a><span class="co">#&gt; 682: MID26131268 Institution D   &lt;NA&gt;          NA                &lt;NA&gt;</span></span></code></pre></div>
</div>
</div>
<div id="references" class="section level2">
<h2>References</h2>
<div id="refs">
<div id="ref-Dowle+Srinivasan:2020:data.table">
<p>Dowle, Matt and Srinivasan, Arun (2020a) <em>data.table: Extension of data.frame</em>. R package version 1.13.0. Available at: <a href="https://CRAN.R-project.org/package=data.table">https://CRAN.R-project.org/package=data.table</a>.</p>
</div>
<div id="ref-Dowle+Srinivasan:2020:data.table:website">
<p>Dowle, Matt and Srinivasan, Arun (2020b) Introduction to data.table. Available at: <a href="https://tinyurl.com/y4xc94pq">https://tinyurl.com/y4xc94pq</a>.</p>
</div>
<div id="ref-Mercer:2020">
<p>Mercer, Jason (2020) Base R, the tidyverse, and data.table: A comparison of R dialects to wrangle your data. Available at: <a href="https://tinyurl.com/yy544udn">https://tinyurl.com/yy544udn</a>.</p>
</div>
<div id="ref-vanDerLaken:2020">
<p>van der Laken, Paul (2020) A data.table and dplyr tour. Available at: <a href="https://tinyurl.com/y6m33fvx">https://tinyurl.com/y6m33fvx</a>.</p>
</div>
<div id="ref-Zumel+Mount:2020">
<p>Zumel, Nina and Mount, John (2020) <em>Practical Data Science with R</em>. 2nd ed. Shelter Island. NY: Manning Publications Co. Available at: <a href="https://tinyurl.com/y6mdgfx8">https://tinyurl.com/y6mdgfx8</a>.</p>
</div>
</div>
</div>
<div id="appendix" class="section level2">
<h2>Appendix</h2>
<div id="complete-script" class="section level3">
<h3>Complete script</h3>
<p>The vignette code chunks are collected below in a single, condensed script.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1"></a><span class="co"># packages used</span></span>
<span id="cb51-2"><a href="#cb51-2"></a><span class="kw">library</span>(midfieldr)</span>
<span id="cb51-3"><a href="#cb51-3"></a><span class="kw">library</span>(midfielddata)</span>
<span id="cb51-4"><a href="#cb51-4"></a><span class="kw">library</span>(data.table)</span>
<span id="cb51-5"><a href="#cb51-5"></a></span>
<span id="cb51-6"><a href="#cb51-6"></a><span class="co"># view each data set </span></span>
<span id="cb51-7"><a href="#cb51-7"></a>midfieldstudents</span>
<span id="cb51-8"><a href="#cb51-8"></a>midfielddegrees</span>
<span id="cb51-9"><a href="#cb51-9"></a>midfieldterms</span>
<span id="cb51-10"><a href="#cb51-10"></a>midfieldcourses</span>
<span id="cb51-11"><a href="#cb51-11"></a></span>
<span id="cb51-12"><a href="#cb51-12"></a><span class="co"># identify objects</span></span>
<span id="cb51-13"><a href="#cb51-13"></a>midfielddegrees[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, ]</span>
<span id="cb51-14"><a href="#cb51-14"></a><span class="kw">class</span>(midfielddegrees)</span>
<span id="cb51-15"><a href="#cb51-15"></a>airquality[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, ]</span>
<span id="cb51-16"><a href="#cb51-16"></a><span class="kw">class</span>(airquality)</span>
<span id="cb51-17"><a href="#cb51-17"></a></span>
<span id="cb51-18"><a href="#cb51-18"></a><span class="co"># subset and arrange rows</span></span>
<span id="cb51-19"><a href="#cb51-19"></a>DT &lt;-<span class="st"> </span><span class="kw">copy</span>(midfielddegrees)</span>
<span id="cb51-20"><a href="#cb51-20"></a>rows_we_want &lt;-<span class="st"> </span>DT<span class="op">$</span>cip6 <span class="op">==</span><span class="st"> &quot;540101&quot;</span></span>
<span id="cb51-21"><a href="#cb51-21"></a>DT &lt;-<span class="st"> </span>DT[rows_we_want]</span>
<span id="cb51-22"><a href="#cb51-22"></a></span>
<span id="cb51-23"><a href="#cb51-23"></a><span class="co"># filter rows using multiple conditions</span></span>
<span id="cb51-24"><a href="#cb51-24"></a>DT &lt;-<span class="st"> </span><span class="kw">copy</span>(midfielddegrees)</span>
<span id="cb51-25"><a href="#cb51-25"></a>rows_we_want &lt;-<span class="st"> </span><span class="kw">is.na</span>(DT<span class="op">$</span>cip6) <span class="op">&amp;</span><span class="st"> </span>DT<span class="op">$</span>institution <span class="op">==</span><span class="st"> &quot;Institution D&quot;</span></span>
<span id="cb51-26"><a href="#cb51-26"></a>DT &lt;-<span class="st"> </span>DT[rows_we_want]</span>
<span id="cb51-27"><a href="#cb51-27"></a></span>
<span id="cb51-28"><a href="#cb51-28"></a><span class="co"># discard rows with missing values</span></span>
<span id="cb51-29"><a href="#cb51-29"></a>DT &lt;-<span class="st"> </span><span class="kw">copy</span>(midfielddegrees)</span>
<span id="cb51-30"><a href="#cb51-30"></a>DT &lt;-<span class="st"> </span><span class="kw">na.omit</span>(DT)</span>
<span id="cb51-31"><a href="#cb51-31"></a></span>
<span id="cb51-32"><a href="#cb51-32"></a><span class="co"># arrange rows</span></span>
<span id="cb51-33"><a href="#cb51-33"></a>rows_we_want &lt;-<span class="st"> </span>DT<span class="op">$</span>cip6 <span class="op">==</span><span class="st"> &quot;540101&quot;</span></span>
<span id="cb51-34"><a href="#cb51-34"></a>DT &lt;-<span class="st"> </span>DT[rows_we_want]</span>
<span id="cb51-35"><a href="#cb51-35"></a>DT &lt;-<span class="st"> </span>DT[<span class="kw">order</span>(id)]</span>
<span id="cb51-36"><a href="#cb51-36"></a>DT &lt;-<span class="st"> </span>DT[<span class="kw">order</span>(institution, id)]</span>
<span id="cb51-37"><a href="#cb51-37"></a>DT &lt;-<span class="st"> </span>DT[<span class="kw">order</span>(institution, <span class="op">-</span>term_degree)]</span>
<span id="cb51-38"><a href="#cb51-38"></a></span>
<span id="cb51-39"><a href="#cb51-39"></a><span class="co"># select columns using a character vector</span></span>
<span id="cb51-40"><a href="#cb51-40"></a>DT &lt;-<span class="st"> </span><span class="kw">copy</span>(midfieldstudents)</span>
<span id="cb51-41"><a href="#cb51-41"></a>cols_we_want &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;id&quot;</span>, <span class="st">&quot;race&quot;</span>, <span class="st">&quot;sex&quot;</span>)</span>
<span id="cb51-42"><a href="#cb51-42"></a>DT &lt;-<span class="st"> </span>DT[, ..cols_we_want]</span>
<span id="cb51-43"><a href="#cb51-43"></a></span>
<span id="cb51-44"><a href="#cb51-44"></a><span class="co"># select columns using a list</span></span>
<span id="cb51-45"><a href="#cb51-45"></a>DT &lt;-<span class="st"> </span><span class="kw">copy</span>(midfieldstudents)</span>
<span id="cb51-46"><a href="#cb51-46"></a>DT &lt;-<span class="st"> </span>DT[, .(id, race, sex)]</span>
<span id="cb51-47"><a href="#cb51-47"></a></span>
<span id="cb51-48"><a href="#cb51-48"></a><span class="co"># select columns, rename one</span></span>
<span id="cb51-49"><a href="#cb51-49"></a>DT &lt;-<span class="st"> </span>DT[, .(id, <span class="dt">race_ethnicity =</span> race, sex)]</span>
<span id="cb51-50"><a href="#cb51-50"></a></span>
<span id="cb51-51"><a href="#cb51-51"></a><span class="co"># combine row and column operations</span></span>
<span id="cb51-52"><a href="#cb51-52"></a>DT &lt;-<span class="st"> </span><span class="kw">copy</span>(midfieldstudents)</span>
<span id="cb51-53"><a href="#cb51-53"></a>rows_we_want &lt;-<span class="st"> </span>DT<span class="op">$</span>hours_transfer <span class="op">&gt;</span><span class="st"> </span><span class="dv">11</span> <span class="op">&amp;</span><span class="st"> </span>DT<span class="op">$</span>hours_transfer <span class="op">&lt;</span><span class="st"> </span><span class="dv">49</span></span>
<span id="cb51-54"><a href="#cb51-54"></a>cols_we_want &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;id&quot;</span>, <span class="st">&quot;cip6&quot;</span>, <span class="st">&quot;hours_transfer&quot;</span>)</span>
<span id="cb51-55"><a href="#cb51-55"></a>DT &lt;-<span class="st"> </span>DT[rows_we_want, ..cols_we_want]</span>
<span id="cb51-56"><a href="#cb51-56"></a>DT &lt;-<span class="st"> </span>DT[<span class="kw">order</span>(<span class="op">-</span>hours_transfer), </span>
<span id="cb51-57"><a href="#cb51-57"></a>         .(<span class="dt">ID =</span> id, <span class="dt">CIP =</span> cip6, <span class="dt">HOURS =</span> hours_transfer)]</span>
<span id="cb51-58"><a href="#cb51-58"></a></span>
<span id="cb51-59"><a href="#cb51-59"></a><span class="co"># remove a column in place</span></span>
<span id="cb51-60"><a href="#cb51-60"></a>DT &lt;-<span class="st"> </span><span class="kw">copy</span>(midfielddegrees)</span>
<span id="cb51-61"><a href="#cb51-61"></a>rows_we_want &lt;-<span class="st"> </span>DT<span class="op">$</span>institution <span class="op">==</span><span class="st"> &quot;Institution D&quot;</span></span>
<span id="cb51-62"><a href="#cb51-62"></a>cols_we_want &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;id&quot;</span>, <span class="st">&quot;degree&quot;</span>,  <span class="st">&quot;term_degree&quot;</span>)</span>
<span id="cb51-63"><a href="#cb51-63"></a>DT &lt;-<span class="st"> </span>DT[rows_we_want, ..cols_we_want]</span>
<span id="cb51-64"><a href="#cb51-64"></a>DT[, id <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="ot">NULL</span>]</span>
<span id="cb51-65"><a href="#cb51-65"></a></span>
<span id="cb51-66"><a href="#cb51-66"></a><span class="co"># add a column in place</span></span>
<span id="cb51-67"><a href="#cb51-67"></a>DT[, inst_size <span class="op">:</span><span class="er">=</span><span class="st"> &quot;small&quot;</span>]</span>
<span id="cb51-68"><a href="#cb51-68"></a>DT[, year  <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="kw">floor</span>(term_degree <span class="op">/</span><span class="st"> </span><span class="dv">10</span>)]</span>
<span id="cb51-69"><a href="#cb51-69"></a>DT[, iterm <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="kw">floor</span>(term_degree <span class="op">-</span><span class="st"> </span><span class="dv">10</span> <span class="op">*</span><span class="st"> </span>year)]</span>
<span id="cb51-70"><a href="#cb51-70"></a></span>
<span id="cb51-71"><a href="#cb51-71"></a><span class="co"># add/modify a column in place for specific rows</span></span>
<span id="cb51-72"><a href="#cb51-72"></a>DT[<span class="op">!</span><span class="kw">is.na</span>(degree), status <span class="op">:</span><span class="er">=</span><span class="st"> &quot;grad&quot;</span>]</span>
<span id="cb51-73"><a href="#cb51-73"></a>DT[<span class="kw">is.na</span>(degree), status <span class="op">:</span><span class="er">=</span><span class="st"> &quot;nongrad&quot;</span>]</span>
<span id="cb51-74"><a href="#cb51-74"></a></span>
<span id="cb51-75"><a href="#cb51-75"></a><span class="co"># frequency by group</span></span>
<span id="cb51-76"><a href="#cb51-76"></a>rows_we_want &lt;-<span class="st"> </span>midfieldterms<span class="op">$</span>cip6 <span class="op">==</span><span class="st"> &quot;141901&quot;</span></span>
<span id="cb51-77"><a href="#cb51-77"></a>cols_we_want &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;institution&quot;</span>, <span class="st">&quot;cip6&quot;</span>, <span class="st">&quot;term&quot;</span>, <span class="st">&quot;coop&quot;</span>)</span>
<span id="cb51-78"><a href="#cb51-78"></a>DT &lt;-<span class="st"> </span>midfieldterms[rows_we_want, ..cols_we_want]</span>
<span id="cb51-79"><a href="#cb51-79"></a>DT[<span class="kw">order</span>(institution), .N, by =<span class="st"> </span>institution]</span>
<span id="cb51-80"><a href="#cb51-80"></a>DT[, .(<span class="dt">N_coop =</span> .N), by =<span class="st"> </span>coop]</span>
<span id="cb51-81"><a href="#cb51-81"></a>grouping_variables &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;institution&quot;</span>, <span class="st">&quot;coop&quot;</span>)</span>
<span id="cb51-82"><a href="#cb51-82"></a>DT[<span class="kw">order</span>(institution, coop), .(<span class="dt">frequency =</span> .N), by =<span class="st"> </span>grouping_variables]</span>
<span id="cb51-83"><a href="#cb51-83"></a></span>
<span id="cb51-84"><a href="#cb51-84"></a><span class="co"># operate on a column by group</span></span>
<span id="cb51-85"><a href="#cb51-85"></a>rows_we_want &lt;-<span class="st"> </span>midfieldterms<span class="op">$</span>cip6 <span class="op">==</span><span class="st"> &quot;141901&quot;</span></span>
<span id="cb51-86"><a href="#cb51-86"></a>cols_we_want &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;id&quot;</span>, <span class="st">&quot;cip6&quot;</span>, <span class="st">&quot;term&quot;</span>)</span>
<span id="cb51-87"><a href="#cb51-87"></a>DT &lt;-<span class="st"> </span>midfieldterms[rows_we_want, ..cols_we_want]</span>
<span id="cb51-88"><a href="#cb51-88"></a>DT &lt;-<span class="st"> </span>DT[, .SD[term <span class="op">==</span><span class="st"> </span><span class="kw">max</span>(term)], by =<span class="st"> </span>id]</span>
<span id="cb51-89"><a href="#cb51-89"></a></span>
<span id="cb51-90"><a href="#cb51-90"></a><span class="co"># convert data.frame to data.table in place</span></span>
<span id="cb51-91"><a href="#cb51-91"></a><span class="kw">class</span>(airquality)</span>
<span id="cb51-92"><a href="#cb51-92"></a>DT &lt;-<span class="st"> </span><span class="kw">copy</span>(airquality)</span>
<span id="cb51-93"><a href="#cb51-93"></a><span class="kw">setDT</span>(DT)</span>
<span id="cb51-94"><a href="#cb51-94"></a><span class="kw">class</span>(airquality)</span>
<span id="cb51-95"><a href="#cb51-95"></a><span class="kw">class</span>(DT)</span>
<span id="cb51-96"><a href="#cb51-96"></a></span>
<span id="cb51-97"><a href="#cb51-97"></a><span class="co"># convert data.table to data.frame in place</span></span>
<span id="cb51-98"><a href="#cb51-98"></a><span class="kw">class</span>(cip)</span>
<span id="cb51-99"><a href="#cb51-99"></a>DF &lt;-<span class="st"> </span><span class="kw">copy</span>(cip)</span>
<span id="cb51-100"><a href="#cb51-100"></a><span class="kw">setDF</span>(DF)</span>
<span id="cb51-101"><a href="#cb51-101"></a><span class="kw">class</span>(cip)</span>
<span id="cb51-102"><a href="#cb51-102"></a><span class="kw">class</span>(DF)</span>
<span id="cb51-103"><a href="#cb51-103"></a></span>
<span id="cb51-104"><a href="#cb51-104"></a><span class="co"># rename columns in place</span></span>
<span id="cb51-105"><a href="#cb51-105"></a>DT &lt;-<span class="st"> </span><span class="kw">copy</span>(midfielddegrees)</span>
<span id="cb51-106"><a href="#cb51-106"></a>rows_we_want &lt;-<span class="st"> </span>DT<span class="op">$</span>institution <span class="op">==</span><span class="st"> &quot;Institution D&quot;</span></span>
<span id="cb51-107"><a href="#cb51-107"></a>DT &lt;-<span class="st"> </span>DT[rows_we_want]</span>
<span id="cb51-108"><a href="#cb51-108"></a><span class="kw">setnames</span>(DT, <span class="dt">old =</span> <span class="kw">c</span>(<span class="st">&quot;id&quot;</span>, <span class="st">&quot;cip6&quot;</span>), <span class="dt">new =</span> <span class="kw">c</span>(<span class="st">&quot;ID&quot;</span>, <span class="st">&quot;CIP&quot;</span>))</span></code></pre></div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
