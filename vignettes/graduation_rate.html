<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Graduation rate</title>

<script>// Hide empty <a> tag within highlighted CodeBlock for screen reader accessibility (see https://github.com/jgm/pandoc/issues/6352#issuecomment-626106786) -->
// v0.0.1
// Written by JooYoung Seo (jooyoung@psu.edu) and Atsushi Yasumoto on June 1st, 2020.

document.addEventListener('DOMContentLoaded', function() {
  const codeList = document.getElementsByClassName("sourceCode");
  for (var i = 0; i < codeList.length; i++) {
    var linkList = codeList[i].getElementsByTagName('a');
    for (var j = 0; j < linkList.length; j++) {
      if (linkList[j].innerHTML === "") {
        linkList[j].setAttribute('aria-hidden', 'true');
      }
    }
  }
});
</script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Graduation rate</h1>



<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>Despite its flaws, graduation rate is commonly used persistence metric.</p>
<p>In the US, the Integrated Postsecondary Education Data System (IPEDS) defines “graduation rate” as the fraction of <em>full-time, first-time,</em> degree/certificate-seeking undergraduate students in a particular year who <em>complete the program in which they matriculate</em> within 150 percent of normal time, i.e., <em>within 6 years</em> for a 4-year program <span class="citation">(NCES, <a href="#ref-IPEDS:2020" role="doc-biblioref">2020</a>)</span>.</p>
<p>The IPEDS definition excludes students who attend college part-time, who transfer from one institution to another, and who change majors. The American Council on Education (ACE) estimates that this definition of graduation rate may exclude up to 60% of students at 4-year institutions <span class="citation">(Cook and Hartle, <a href="#ref-Cook+Hartle:2011" role="doc-biblioref">2011</a>)</span>.</p>
<p>So why use the metric? Do graduation rates really matter? Cook and Hartle say, yes they do …</p>
<blockquote>
<p>… because in the eyes of the public, policy makers, and the media, they provide a clear, simple, and logical—if often misleading—number.</p>
</blockquote>
<p>So with these caveats in mind, we provide the tools for determining program graduation rates per the IPEDS definition.</p>
<div id="this-vignette-uses" class="section level3">
<h3>This vignette uses</h3>
<p>midfieldr functions</p>
<ul>
<li><code>subset_feasible()</code></li>
<li><code>subset_ipeds()</code></li>
<li><code>prepare_multiway()</code></li>
</ul>
<p>data.table syntax</p>
<ul>
<li><code>copy()</code> prevent changing a source by reference</li>
<li><code>setnames()</code> rename columns</li>
<li><code>DT[]</code> print a data frame</li>
<li><code>DT[rows_we_want]</code> subset rows</li>
<li><code>DT[, col := NULL]</code> remove a column</li>
<li><code>DT[, col := FUN]</code> assign values in a column</li>
<li><code>DT[, .(new_col = .N), by = grouping_variables]</code> count N by group</li>
</ul>
<p>packages</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># packages used</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw">library</span>(midfieldr)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="kw">library</span>(midfielddata)</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="kw">library</span>(data.table)</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb1-6"><a href="#cb1-6"></a></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="co"># print max 20 rows, otherwise 10 rows each head/tail</span></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="kw">options</span>(<span class="dt">datatable.print.nrows =</span> <span class="dv">20</span>, <span class="dt">datatable.print.topn =</span> <span class="dv">10</span>)</span></code></pre></div>
</div>
</div>
<div id="choose-the-programs-to-study" class="section level2">
<h2>Choose the programs to study</h2>
<p>The program group for the engineering case study is included with midfieldr as the built-in data set <code>rep_group</code>. View its help page by running</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>? rep_group </span></code></pre></div>
<p>The data are loaded with midfieldr.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="co"># obtain programs (built-in data set)</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>program_group &lt;-<span class="st"> </span><span class="kw">copy</span>(rep_group)</span>
<span id="cb3-3"><a href="#cb3-3"></a></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="co"># examine the result</span></span>
<span id="cb3-5"><a href="#cb3-5"></a>program_group</span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="co">#&gt;       cip6                program</span></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="co">#&gt;  1: 140801      Civil Engineering</span></span>
<span id="cb3-8"><a href="#cb3-8"></a><span class="co">#&gt;  2: 140802      Civil Engineering</span></span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="co">#&gt;  3: 140803      Civil Engineering</span></span>
<span id="cb3-10"><a href="#cb3-10"></a><span class="co">#&gt;  4: 140804      Civil Engineering</span></span>
<span id="cb3-11"><a href="#cb3-11"></a><span class="co">#&gt;  5: 140805      Civil Engineering</span></span>
<span id="cb3-12"><a href="#cb3-12"></a><span class="co">#&gt;  6: 140899      Civil Engineering</span></span>
<span id="cb3-13"><a href="#cb3-13"></a><span class="co">#&gt;  7: 141001 Electrical Engineering</span></span>
<span id="cb3-14"><a href="#cb3-14"></a><span class="co">#&gt;  8: 141003 Electrical Engineering</span></span>
<span id="cb3-15"><a href="#cb3-15"></a><span class="co">#&gt;  9: 141004 Electrical Engineering</span></span>
<span id="cb3-16"><a href="#cb3-16"></a><span class="co">#&gt; 10: 141099 Electrical Engineering</span></span>
<span id="cb3-17"><a href="#cb3-17"></a><span class="co">#&gt; 11: 141901 Mechanical Engineering</span></span>
<span id="cb3-18"><a href="#cb3-18"></a><span class="co">#&gt; 12: 143501 Industrial Engineering</span></span></code></pre></div>
<p>We extract the <code>cip6</code> column as a character vector to gather student data.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="co"># extract a vector of 6-digit CIP codes</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>group_cip &lt;-<span class="st"> </span>program_group<span class="op">$</span>cip6</span>
<span id="cb4-3"><a href="#cb4-3"></a></span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="co"># examine the result</span></span>
<span id="cb4-5"><a href="#cb4-5"></a>group_cip</span>
<span id="cb4-6"><a href="#cb4-6"></a><span class="co">#&gt;  [1] &quot;140801&quot; &quot;140802&quot; &quot;140803&quot; &quot;140804&quot; &quot;140805&quot; &quot;140899&quot; &quot;141001&quot; &quot;141003&quot;</span></span>
<span id="cb4-7"><a href="#cb4-7"></a><span class="co">#&gt;  [9] &quot;141004&quot; &quot;141099&quot; &quot;141901&quot; &quot;143501&quot;</span></span></code></pre></div>
<p>Related vignettes</p>
<ul>
<li><em>Identify programs</em> <a href="identify_programs.html">(link)</a> illustrates program labeling options</li>
</ul>
</div>
<div id="gather-the-starters" class="section level2">
<h2>Gather the starters</h2>
<p>By “starters” we mean students matriculating in a case study program and FYE students whose starting programs are in the case study.</p>
<ul>
<li>matriculants from <code>midfieldstudents</code> by CIP</li>
<li>FYE starters from <code>fye_start</code></li>
</ul>
<p>From <code>midfieldstudents</code>, we extract the IDs of students matriculating in these programs.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="co"># gather students matriculating in programs</span></span>
<span id="cb5-2"><a href="#cb5-2"></a>cols_we_want &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;id&quot;</span>, <span class="st">&quot;cip6&quot;</span>)</span>
<span id="cb5-3"><a href="#cb5-3"></a>rows_we_want &lt;-<span class="st"> </span>midfieldstudents<span class="op">$</span>cip6 <span class="op">%in%</span><span class="st"> </span>group_cip</span>
<span id="cb5-4"><a href="#cb5-4"></a>matriculants &lt;-<span class="st"> </span>midfieldstudents[rows_we_want, ..cols_we_want]</span>
<span id="cb5-5"><a href="#cb5-5"></a>matriculants &lt;-<span class="st"> </span><span class="kw">unique</span>(matriculants)</span>
<span id="cb5-6"><a href="#cb5-6"></a></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="co"># examine the result</span></span>
<span id="cb5-8"><a href="#cb5-8"></a>matriculants</span>
<span id="cb5-9"><a href="#cb5-9"></a><span class="co">#&gt;                id   cip6</span></span>
<span id="cb5-10"><a href="#cb5-10"></a><span class="co">#&gt;    1: MID25792087 141901</span></span>
<span id="cb5-11"><a href="#cb5-11"></a><span class="co">#&gt;    2: MID25796088 140801</span></span>
<span id="cb5-12"><a href="#cb5-12"></a><span class="co">#&gt;    3: MID25799551 141001</span></span>
<span id="cb5-13"><a href="#cb5-13"></a><span class="co">#&gt;    4: MID25799578 141001</span></span>
<span id="cb5-14"><a href="#cb5-14"></a><span class="co">#&gt;    5: MID25808049 140801</span></span>
<span id="cb5-15"><a href="#cb5-15"></a><span class="co">#&gt;    6: MID25814680 141901</span></span>
<span id="cb5-16"><a href="#cb5-16"></a><span class="co">#&gt;    7: MID25816716 141901</span></span>
<span id="cb5-17"><a href="#cb5-17"></a><span class="co">#&gt;    8: MID25818239 141001</span></span>
<span id="cb5-18"><a href="#cb5-18"></a><span class="co">#&gt;    9: MID25825948 140801</span></span>
<span id="cb5-19"><a href="#cb5-19"></a><span class="co">#&gt;   10: MID25836704 141901</span></span>
<span id="cb5-20"><a href="#cb5-20"></a><span class="co">#&gt;   ---                   </span></span>
<span id="cb5-21"><a href="#cb5-21"></a><span class="co">#&gt; 5017: MID26696337 140801</span></span>
<span id="cb5-22"><a href="#cb5-22"></a><span class="co">#&gt; 5018: MID26696429 143501</span></span>
<span id="cb5-23"><a href="#cb5-23"></a><span class="co">#&gt; 5019: MID26696439 141901</span></span>
<span id="cb5-24"><a href="#cb5-24"></a><span class="co">#&gt; 5020: MID26696484 141901</span></span>
<span id="cb5-25"><a href="#cb5-25"></a><span class="co">#&gt; 5021: MID26696642 141001</span></span>
<span id="cb5-26"><a href="#cb5-26"></a><span class="co">#&gt; 5022: MID26696738 141901</span></span>
<span id="cb5-27"><a href="#cb5-27"></a><span class="co">#&gt; 5023: MID26696958 141901</span></span>
<span id="cb5-28"><a href="#cb5-28"></a><span class="co">#&gt; 5024: MID26696967 141901</span></span>
<span id="cb5-29"><a href="#cb5-29"></a><span class="co">#&gt; 5025: MID26696979 141901</span></span>
<span id="cb5-30"><a href="#cb5-30"></a><span class="co">#&gt; 5026: MID26697444 141901</span></span></code></pre></div>
<p>In the <em>Handle FYE programs</em> vignette <a href="handle_fye.html">(link)</a>, we derive the starting programs for all FYE students in midfielddata. Again, we filter by the program group CIP codes.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="co"># gather FYE students predicted to start in these programs</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>cols_we_want &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;id&quot;</span>, <span class="st">&quot;start&quot;</span>)</span>
<span id="cb6-3"><a href="#cb6-3"></a>rows_we_want &lt;-<span class="st"> </span>fye_start<span class="op">$</span>start <span class="op">%in%</span><span class="st"> </span>group_cip</span>
<span id="cb6-4"><a href="#cb6-4"></a>fye_starters &lt;-<span class="st"> </span>fye_start[rows_we_want, ..cols_we_want]</span>
<span id="cb6-5"><a href="#cb6-5"></a>fye_starters &lt;-<span class="st"> </span><span class="kw">unique</span>(fye_starters)</span>
<span id="cb6-6"><a href="#cb6-6"></a><span class="kw">setnames</span>(fye_starters, <span class="dt">old =</span> <span class="st">&quot;start&quot;</span>, <span class="dt">new =</span> <span class="st">&quot;cip6&quot;</span>)</span>
<span id="cb6-7"><a href="#cb6-7"></a></span>
<span id="cb6-8"><a href="#cb6-8"></a><span class="co"># examine the result</span></span>
<span id="cb6-9"><a href="#cb6-9"></a>fye_starters</span>
<span id="cb6-10"><a href="#cb6-10"></a><span class="co">#&gt;                id   cip6</span></span>
<span id="cb6-11"><a href="#cb6-11"></a><span class="co">#&gt;    1: MID25783166 141901</span></span>
<span id="cb6-12"><a href="#cb6-12"></a><span class="co">#&gt;    2: MID25783227 141001</span></span>
<span id="cb6-13"><a href="#cb6-13"></a><span class="co">#&gt;    3: MID25783388 141901</span></span>
<span id="cb6-14"><a href="#cb6-14"></a><span class="co">#&gt;    4: MID25783428 140801</span></span>
<span id="cb6-15"><a href="#cb6-15"></a><span class="co">#&gt;    5: MID25783441 140801</span></span>
<span id="cb6-16"><a href="#cb6-16"></a><span class="co">#&gt;    6: MID25783491 141001</span></span>
<span id="cb6-17"><a href="#cb6-17"></a><span class="co">#&gt;    7: MID25783553 140801</span></span>
<span id="cb6-18"><a href="#cb6-18"></a><span class="co">#&gt;    8: MID25783606 141001</span></span>
<span id="cb6-19"><a href="#cb6-19"></a><span class="co">#&gt;    9: MID25783648 140801</span></span>
<span id="cb6-20"><a href="#cb6-20"></a><span class="co">#&gt;   10: MID25783753 141901</span></span>
<span id="cb6-21"><a href="#cb6-21"></a><span class="co">#&gt;   ---                   </span></span>
<span id="cb6-22"><a href="#cb6-22"></a><span class="co">#&gt; 3819: MID26648222 141901</span></span>
<span id="cb6-23"><a href="#cb6-23"></a><span class="co">#&gt; 3820: MID26648282 143501</span></span>
<span id="cb6-24"><a href="#cb6-24"></a><span class="co">#&gt; 3821: MID26648283 141001</span></span>
<span id="cb6-25"><a href="#cb6-25"></a><span class="co">#&gt; 3822: MID26648334 140801</span></span>
<span id="cb6-26"><a href="#cb6-26"></a><span class="co">#&gt; 3823: MID26648392 141901</span></span>
<span id="cb6-27"><a href="#cb6-27"></a><span class="co">#&gt; 3824: MID26648422 141901</span></span>
<span id="cb6-28"><a href="#cb6-28"></a><span class="co">#&gt; 3825: MID26648435 141901</span></span>
<span id="cb6-29"><a href="#cb6-29"></a><span class="co">#&gt; 3826: MID26648484 140801</span></span>
<span id="cb6-30"><a href="#cb6-30"></a><span class="co">#&gt; 3827: MID26648517 140801</span></span>
<span id="cb6-31"><a href="#cb6-31"></a><span class="co">#&gt; 3828: MID26648544 141901</span></span></code></pre></div>
<p>Bind the two data frames</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>starters &lt;-<span class="st"> </span><span class="kw">rbind</span>(matriculants, fye_starters)</span>
<span id="cb7-2"><a href="#cb7-2"></a></span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="co"># examine the result</span></span>
<span id="cb7-4"><a href="#cb7-4"></a>starters</span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="co">#&gt;                id   cip6</span></span>
<span id="cb7-6"><a href="#cb7-6"></a><span class="co">#&gt;    1: MID25792087 141901</span></span>
<span id="cb7-7"><a href="#cb7-7"></a><span class="co">#&gt;    2: MID25796088 140801</span></span>
<span id="cb7-8"><a href="#cb7-8"></a><span class="co">#&gt;    3: MID25799551 141001</span></span>
<span id="cb7-9"><a href="#cb7-9"></a><span class="co">#&gt;    4: MID25799578 141001</span></span>
<span id="cb7-10"><a href="#cb7-10"></a><span class="co">#&gt;    5: MID25808049 140801</span></span>
<span id="cb7-11"><a href="#cb7-11"></a><span class="co">#&gt;    6: MID25814680 141901</span></span>
<span id="cb7-12"><a href="#cb7-12"></a><span class="co">#&gt;    7: MID25816716 141901</span></span>
<span id="cb7-13"><a href="#cb7-13"></a><span class="co">#&gt;    8: MID25818239 141001</span></span>
<span id="cb7-14"><a href="#cb7-14"></a><span class="co">#&gt;    9: MID25825948 140801</span></span>
<span id="cb7-15"><a href="#cb7-15"></a><span class="co">#&gt;   10: MID25836704 141901</span></span>
<span id="cb7-16"><a href="#cb7-16"></a><span class="co">#&gt;   ---                   </span></span>
<span id="cb7-17"><a href="#cb7-17"></a><span class="co">#&gt; 8845: MID26648222 141901</span></span>
<span id="cb7-18"><a href="#cb7-18"></a><span class="co">#&gt; 8846: MID26648282 143501</span></span>
<span id="cb7-19"><a href="#cb7-19"></a><span class="co">#&gt; 8847: MID26648283 141001</span></span>
<span id="cb7-20"><a href="#cb7-20"></a><span class="co">#&gt; 8848: MID26648334 140801</span></span>
<span id="cb7-21"><a href="#cb7-21"></a><span class="co">#&gt; 8849: MID26648392 141901</span></span>
<span id="cb7-22"><a href="#cb7-22"></a><span class="co">#&gt; 8850: MID26648422 141901</span></span>
<span id="cb7-23"><a href="#cb7-23"></a><span class="co">#&gt; 8851: MID26648435 141901</span></span>
<span id="cb7-24"><a href="#cb7-24"></a><span class="co">#&gt; 8852: MID26648484 140801</span></span>
<span id="cb7-25"><a href="#cb7-25"></a><span class="co">#&gt; 8853: MID26648517 140801</span></span>
<span id="cb7-26"><a href="#cb7-26"></a><span class="co">#&gt; 8854: MID26648544 141901</span></span></code></pre></div>
<p>For some of these students, completing their program may not be feasible given the range of data available. <code>subset_feasible()</code> subsets the student IDs, retaining those who matriculate at least six years before the last term in the data.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="co"># apply the feasible completion filter</span></span>
<span id="cb8-2"><a href="#cb8-2"></a>feasible_ids &lt;-<span class="st"> </span><span class="kw">subset_feasible</span>(<span class="dt">id =</span> starters<span class="op">$</span>id)</span>
<span id="cb8-3"><a href="#cb8-3"></a></span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="co"># examine the result</span></span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="kw">str</span>(feasible_ids)</span>
<span id="cb8-6"><a href="#cb8-6"></a><span class="co">#&gt;  chr [1:6947] &quot;MID25783441&quot; &quot;MID25783491&quot; &quot;MID25783912&quot; &quot;MID25784047&quot; ...</span></span></code></pre></div>
<p>See the <em>Feasible completion</em> vignette <a href="feasible_completion.html">(link)</a> for a detailed explanation of how completion feasibility is determined.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="co"># subset the starters</span></span>
<span id="cb9-2"><a href="#cb9-2"></a>rows_we_want &lt;-<span class="st"> </span>starters<span class="op">$</span>id <span class="op">%in%</span><span class="st"> </span>feasible_ids</span>
<span id="cb9-3"><a href="#cb9-3"></a>starters &lt;-<span class="st"> </span>starters[rows_we_want]</span>
<span id="cb9-4"><a href="#cb9-4"></a></span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="co"># examine the result</span></span>
<span id="cb9-6"><a href="#cb9-6"></a>starters</span>
<span id="cb9-7"><a href="#cb9-7"></a><span class="co">#&gt;                id   cip6</span></span>
<span id="cb9-8"><a href="#cb9-8"></a><span class="co">#&gt;    1: MID25792087 141901</span></span>
<span id="cb9-9"><a href="#cb9-9"></a><span class="co">#&gt;    2: MID25796088 140801</span></span>
<span id="cb9-10"><a href="#cb9-10"></a><span class="co">#&gt;    3: MID25799551 141001</span></span>
<span id="cb9-11"><a href="#cb9-11"></a><span class="co">#&gt;    4: MID25799578 141001</span></span>
<span id="cb9-12"><a href="#cb9-12"></a><span class="co">#&gt;    5: MID25808049 140801</span></span>
<span id="cb9-13"><a href="#cb9-13"></a><span class="co">#&gt;    6: MID25814680 141901</span></span>
<span id="cb9-14"><a href="#cb9-14"></a><span class="co">#&gt;    7: MID25816716 141901</span></span>
<span id="cb9-15"><a href="#cb9-15"></a><span class="co">#&gt;    8: MID25818239 141001</span></span>
<span id="cb9-16"><a href="#cb9-16"></a><span class="co">#&gt;    9: MID25825948 140801</span></span>
<span id="cb9-17"><a href="#cb9-17"></a><span class="co">#&gt;   10: MID25836704 141901</span></span>
<span id="cb9-18"><a href="#cb9-18"></a><span class="co">#&gt;   ---                   </span></span>
<span id="cb9-19"><a href="#cb9-19"></a><span class="co">#&gt; 6938: MID26624428 143501</span></span>
<span id="cb9-20"><a href="#cb9-20"></a><span class="co">#&gt; 6939: MID26624493 141901</span></span>
<span id="cb9-21"><a href="#cb9-21"></a><span class="co">#&gt; 6940: MID26624564 143501</span></span>
<span id="cb9-22"><a href="#cb9-22"></a><span class="co">#&gt; 6941: MID26624723 141001</span></span>
<span id="cb9-23"><a href="#cb9-23"></a><span class="co">#&gt; 6942: MID26624792 141901</span></span>
<span id="cb9-24"><a href="#cb9-24"></a><span class="co">#&gt; 6943: MID26625136 143501</span></span>
<span id="cb9-25"><a href="#cb9-25"></a><span class="co">#&gt; 6944: MID26628494 141901</span></span>
<span id="cb9-26"><a href="#cb9-26"></a><span class="co">#&gt; 6945: MID26629213 140801</span></span>
<span id="cb9-27"><a href="#cb9-27"></a><span class="co">#&gt; 6946: MID26630725 141901</span></span>
<span id="cb9-28"><a href="#cb9-28"></a><span class="co">#&gt; 6947: MID26636885 140801</span></span></code></pre></div>
<p>These are the students eligible to be considered starters in our case study programs before we apply the IPEDS constraints.</p>
<p>The <code>starters</code> data frame is the input to <code>subset_ipeds()</code>.</p>
</div>
<div id="apply-ipeds-criteria" class="section level2">
<h2>Apply IPEDS criteria</h2>
<p>In the next step, we subset the starters, retaining those who satisfy the IPEDS criteria:</p>
<ul>
<li>first time in college (thus removing transfers)</li>
<li>matriculate and graduate in the same program (thus removing migrators)</li>
<li>graduate no later than 6 years after matriculation (effectively removing part-time students)</li>
</ul>
<p>The IPEDS definition excludes part-time students. We do not test for part-time status specifically. We assume that students attending for no more than 6 years are effectively full-time.</p>
<p>The input to <code>subset_ipeds()</code> is the <code>starters</code> data frame with columns <code>id</code> and <code>start</code>. The function subsets the rows of the data frame per the IPEDS constraints and adds a new yes/no column <code>ipeds_grad</code>, where “Y” indicates that the student’s graduation accords with the IPEDS definition of graduation rate.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="co"># subset_ipeds() requires a CIP `start` column</span></span>
<span id="cb10-2"><a href="#cb10-2"></a><span class="kw">setnames</span>(starters, <span class="dt">old =</span> <span class="st">&quot;cip6&quot;</span>, <span class="dt">new =</span> <span class="st">&quot;start&quot;</span>)</span>
<span id="cb10-3"><a href="#cb10-3"></a>ipeds_students &lt;-<span class="st"> </span><span class="kw">subset_ipeds</span>(starters)</span>
<span id="cb10-4"><a href="#cb10-4"></a>ipeds_students[]</span>
<span id="cb10-5"><a href="#cb10-5"></a><span class="co">#&gt;                id  start ipeds_grad</span></span>
<span id="cb10-6"><a href="#cb10-6"></a><span class="co">#&gt;    1: MID25783227 141001          N</span></span>
<span id="cb10-7"><a href="#cb10-7"></a><span class="co">#&gt;    2: MID25783388 141901          N</span></span>
<span id="cb10-8"><a href="#cb10-8"></a><span class="co">#&gt;    3: MID25783441 140801          Y</span></span>
<span id="cb10-9"><a href="#cb10-9"></a><span class="co">#&gt;    4: MID25783491 141001          Y</span></span>
<span id="cb10-10"><a href="#cb10-10"></a><span class="co">#&gt;    5: MID25783553 140801          N</span></span>
<span id="cb10-11"><a href="#cb10-11"></a><span class="co">#&gt;    6: MID25783606 141001          N</span></span>
<span id="cb10-12"><a href="#cb10-12"></a><span class="co">#&gt;    7: MID25783753 141901          N</span></span>
<span id="cb10-13"><a href="#cb10-13"></a><span class="co">#&gt;    8: MID25783830 141901          N</span></span>
<span id="cb10-14"><a href="#cb10-14"></a><span class="co">#&gt;    9: MID25783912 143501          Y</span></span>
<span id="cb10-15"><a href="#cb10-15"></a><span class="co">#&gt;   10: MID25784022 141901          N</span></span>
<span id="cb10-16"><a href="#cb10-16"></a><span class="co">#&gt;   ---                              </span></span>
<span id="cb10-17"><a href="#cb10-17"></a><span class="co">#&gt; 5828: MID26696050 141901          Y</span></span>
<span id="cb10-18"><a href="#cb10-18"></a><span class="co">#&gt; 5829: MID26696234 141901          Y</span></span>
<span id="cb10-19"><a href="#cb10-19"></a><span class="co">#&gt; 5830: MID26696337 140801          Y</span></span>
<span id="cb10-20"><a href="#cb10-20"></a><span class="co">#&gt; 5831: MID26696429 143501          Y</span></span>
<span id="cb10-21"><a href="#cb10-21"></a><span class="co">#&gt; 5832: MID26696439 141901          N</span></span>
<span id="cb10-22"><a href="#cb10-22"></a><span class="co">#&gt; 5833: MID26696484 141901          Y</span></span>
<span id="cb10-23"><a href="#cb10-23"></a><span class="co">#&gt; 5834: MID26696642 141001          Y</span></span>
<span id="cb10-24"><a href="#cb10-24"></a><span class="co">#&gt; 5835: MID26696958 141901          N</span></span>
<span id="cb10-25"><a href="#cb10-25"></a><span class="co">#&gt; 5836: MID26696967 141901          Y</span></span>
<span id="cb10-26"><a href="#cb10-26"></a><span class="co">#&gt; 5837: MID26697444 141901          N</span></span></code></pre></div>
<p>By applying the IPEDS restrictions, we’ve dropped from 6947 to 5837 students in this example, a 16% reduction in the number of students being considered.</p>
</div>
<div id="group-summarize-and-join" class="section level2">
<h2>Group, summarize, and join</h2>
<p>Join program labels, race/ethnicity and sex.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="kw">setnames</span>(ipeds_students, <span class="dt">old =</span> <span class="st">&quot;start&quot;</span>, <span class="dt">new =</span> <span class="st">&quot;cip6&quot;</span>)</span>
<span id="cb11-2"><a href="#cb11-2"></a></span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="co"># join race sex</span></span>
<span id="cb11-4"><a href="#cb11-4"></a>rows_we_want &lt;-<span class="st"> </span>midfieldstudents<span class="op">$</span>id <span class="op">%in%</span><span class="st"> </span>ipeds_students<span class="op">$</span>id </span>
<span id="cb11-5"><a href="#cb11-5"></a>cols_we_want &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;id&quot;</span>, <span class="st">&quot;race&quot;</span>, <span class="st">&quot;sex&quot;</span>)</span>
<span id="cb11-6"><a href="#cb11-6"></a>race_sex &lt;-<span class="st"> </span>midfieldstudents[rows_we_want, ..cols_we_want]</span>
<span id="cb11-7"><a href="#cb11-7"></a>race_sex &lt;-<span class="st"> </span><span class="kw">unique</span>(race_sex)</span>
<span id="cb11-8"><a href="#cb11-8"></a>ipeds_students &lt;-<span class="st"> </span><span class="kw">merge</span>(ipeds_students, race_sex, <span class="dt">by =</span> <span class="st">&quot;id&quot;</span>, <span class="dt">all.x =</span> <span class="ot">TRUE</span>)</span>
<span id="cb11-9"><a href="#cb11-9"></a></span>
<span id="cb11-10"><a href="#cb11-10"></a><span class="co"># join programs</span></span>
<span id="cb11-11"><a href="#cb11-11"></a>ipeds_students &lt;-<span class="st"> </span><span class="kw">merge</span>(ipeds_students,</span>
<span id="cb11-12"><a href="#cb11-12"></a>  program_group,</span>
<span id="cb11-13"><a href="#cb11-13"></a>  <span class="dt">by =</span> <span class="st">&quot;cip6&quot;</span>,</span>
<span id="cb11-14"><a href="#cb11-14"></a>  <span class="dt">all.x =</span> <span class="ot">TRUE</span></span>
<span id="cb11-15"><a href="#cb11-15"></a>)</span>
<span id="cb11-16"><a href="#cb11-16"></a></span>
<span id="cb11-17"><a href="#cb11-17"></a><span class="co"># done with ID and CIP</span></span>
<span id="cb11-18"><a href="#cb11-18"></a>ipeds_students[, id <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="ot">NULL</span>]</span>
<span id="cb11-19"><a href="#cb11-19"></a>ipeds_students[, cip6 <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="ot">NULL</span>]</span>
<span id="cb11-20"><a href="#cb11-20"></a></span>
<span id="cb11-21"><a href="#cb11-21"></a>ipeds_students</span>
<span id="cb11-22"><a href="#cb11-22"></a><span class="co">#&gt;       ipeds_grad    race    sex                program</span></span>
<span id="cb11-23"><a href="#cb11-23"></a><span class="co">#&gt;    1:          Y   White   Male      Civil Engineering</span></span>
<span id="cb11-24"><a href="#cb11-24"></a><span class="co">#&gt;    2:          N   White   Male      Civil Engineering</span></span>
<span id="cb11-25"><a href="#cb11-25"></a><span class="co">#&gt;    3:          Y   White   Male      Civil Engineering</span></span>
<span id="cb11-26"><a href="#cb11-26"></a><span class="co">#&gt;    4:          N   White   Male      Civil Engineering</span></span>
<span id="cb11-27"><a href="#cb11-27"></a><span class="co">#&gt;    5:          Y   White   Male      Civil Engineering</span></span>
<span id="cb11-28"><a href="#cb11-28"></a><span class="co">#&gt;    6:          Y   White   Male      Civil Engineering</span></span>
<span id="cb11-29"><a href="#cb11-29"></a><span class="co">#&gt;    7:          N   White   Male      Civil Engineering</span></span>
<span id="cb11-30"><a href="#cb11-30"></a><span class="co">#&gt;    8:          N   White Female      Civil Engineering</span></span>
<span id="cb11-31"><a href="#cb11-31"></a><span class="co">#&gt;    9:          N   White Female      Civil Engineering</span></span>
<span id="cb11-32"><a href="#cb11-32"></a><span class="co">#&gt;   10:          N   White   Male      Civil Engineering</span></span>
<span id="cb11-33"><a href="#cb11-33"></a><span class="co">#&gt;   ---                                                 </span></span>
<span id="cb11-34"><a href="#cb11-34"></a><span class="co">#&gt; 5828:          Y   White Female Industrial Engineering</span></span>
<span id="cb11-35"><a href="#cb11-35"></a><span class="co">#&gt; 5829:          Y   White Female Industrial Engineering</span></span>
<span id="cb11-36"><a href="#cb11-36"></a><span class="co">#&gt; 5830:          Y   Black   Male Industrial Engineering</span></span>
<span id="cb11-37"><a href="#cb11-37"></a><span class="co">#&gt; 5831:          Y   White   Male Industrial Engineering</span></span>
<span id="cb11-38"><a href="#cb11-38"></a><span class="co">#&gt; 5832:          N Unknown Female Industrial Engineering</span></span>
<span id="cb11-39"><a href="#cb11-39"></a><span class="co">#&gt; 5833:          N Unknown   Male Industrial Engineering</span></span>
<span id="cb11-40"><a href="#cb11-40"></a><span class="co">#&gt; 5834:          Y   White   Male Industrial Engineering</span></span>
<span id="cb11-41"><a href="#cb11-41"></a><span class="co">#&gt; 5835:          Y   White   Male Industrial Engineering</span></span>
<span id="cb11-42"><a href="#cb11-42"></a><span class="co">#&gt; 5836:          Y   White   Male Industrial Engineering</span></span>
<span id="cb11-43"><a href="#cb11-43"></a><span class="co">#&gt; 5837:          Y   White Female Industrial Engineering</span></span></code></pre></div>
<p>Aggregate number of starters by program, race, and sex</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="co"># assign variables to aggregate by</span></span>
<span id="cb12-2"><a href="#cb12-2"></a>grouping_variables &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;program&quot;</span>, <span class="st">&quot;race&quot;</span>, <span class="st">&quot;sex&quot;</span>)</span>
<span id="cb12-3"><a href="#cb12-3"></a></span>
<span id="cb12-4"><a href="#cb12-4"></a><span class="co"># group and summarize</span></span>
<span id="cb12-5"><a href="#cb12-5"></a>grouped_starters &lt;-<span class="st"> </span>ipeds_students[, .(<span class="dt">start =</span> .N), by =<span class="st"> </span>grouping_variables]</span>
<span id="cb12-6"><a href="#cb12-6"></a></span>
<span id="cb12-7"><a href="#cb12-7"></a><span class="co"># examine the result</span></span>
<span id="cb12-8"><a href="#cb12-8"></a>grouped_starters</span>
<span id="cb12-9"><a href="#cb12-9"></a><span class="co">#&gt;                    program            race    sex start</span></span>
<span id="cb12-10"><a href="#cb12-10"></a><span class="co">#&gt;  1:      Civil Engineering           White   Male   815</span></span>
<span id="cb12-11"><a href="#cb12-11"></a><span class="co">#&gt;  2:      Civil Engineering           White Female   242</span></span>
<span id="cb12-12"><a href="#cb12-12"></a><span class="co">#&gt;  3:      Civil Engineering           Black   Male    60</span></span>
<span id="cb12-13"><a href="#cb12-13"></a><span class="co">#&gt;  4:      Civil Engineering           Black Female    28</span></span>
<span id="cb12-14"><a href="#cb12-14"></a><span class="co">#&gt;  5:      Civil Engineering           Other   Male    10</span></span>
<span id="cb12-15"><a href="#cb12-15"></a><span class="co">#&gt;  6:      Civil Engineering           Asian   Male    31</span></span>
<span id="cb12-16"><a href="#cb12-16"></a><span class="co">#&gt;  7:      Civil Engineering        Hispanic   Male    33</span></span>
<span id="cb12-17"><a href="#cb12-17"></a><span class="co">#&gt;  8:      Civil Engineering           Other Female     3</span></span>
<span id="cb12-18"><a href="#cb12-18"></a><span class="co">#&gt;  9:      Civil Engineering           Asian Female    14</span></span>
<span id="cb12-19"><a href="#cb12-19"></a><span class="co">#&gt; 10:      Civil Engineering   International   Male     6</span></span>
<span id="cb12-20"><a href="#cb12-20"></a><span class="co">#&gt; ---                                                    </span></span>
<span id="cb12-21"><a href="#cb12-21"></a><span class="co">#&gt; 52: Industrial Engineering   International   Male    19</span></span>
<span id="cb12-22"><a href="#cb12-22"></a><span class="co">#&gt; 53: Industrial Engineering        Hispanic   Male    13</span></span>
<span id="cb12-23"><a href="#cb12-23"></a><span class="co">#&gt; 54: Industrial Engineering        Hispanic Female     2</span></span>
<span id="cb12-24"><a href="#cb12-24"></a><span class="co">#&gt; 55: Industrial Engineering           Asian Female    16</span></span>
<span id="cb12-25"><a href="#cb12-25"></a><span class="co">#&gt; 56: Industrial Engineering   International Female     3</span></span>
<span id="cb12-26"><a href="#cb12-26"></a><span class="co">#&gt; 57: Industrial Engineering Native American   Male     1</span></span>
<span id="cb12-27"><a href="#cb12-27"></a><span class="co">#&gt; 58: Industrial Engineering           Other Female     3</span></span>
<span id="cb12-28"><a href="#cb12-28"></a><span class="co">#&gt; 59: Industrial Engineering           Other   Male     6</span></span>
<span id="cb12-29"><a href="#cb12-29"></a><span class="co">#&gt; 60: Industrial Engineering         Unknown Female     1</span></span>
<span id="cb12-30"><a href="#cb12-30"></a><span class="co">#&gt; 61: Industrial Engineering         Unknown   Male     1</span></span></code></pre></div>
<p>Aggregate number of graduates by program, race, and sex</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="co"># group and summarize</span></span>
<span id="cb13-2"><a href="#cb13-2"></a>rows_we_want &lt;-<span class="st"> </span>ipeds_students<span class="op">$</span>ipeds_grad <span class="op">==</span><span class="st"> &quot;Y&quot;</span></span>
<span id="cb13-3"><a href="#cb13-3"></a>grouped_graduates &lt;-<span class="st"> </span>ipeds_students[rows_we_want,</span>
<span id="cb13-4"><a href="#cb13-4"></a>  .(<span class="dt">grad =</span> .N),</span>
<span id="cb13-5"><a href="#cb13-5"></a>  by =<span class="st"> </span>grouping_variables</span>
<span id="cb13-6"><a href="#cb13-6"></a>]</span>
<span id="cb13-7"><a href="#cb13-7"></a></span>
<span id="cb13-8"><a href="#cb13-8"></a><span class="co"># examine the result</span></span>
<span id="cb13-9"><a href="#cb13-9"></a>grouped_graduates</span>
<span id="cb13-10"><a href="#cb13-10"></a><span class="co">#&gt;                    program            race    sex grad</span></span>
<span id="cb13-11"><a href="#cb13-11"></a><span class="co">#&gt;  1:      Civil Engineering           White   Male  335</span></span>
<span id="cb13-12"><a href="#cb13-12"></a><span class="co">#&gt;  2:      Civil Engineering           White Female   95</span></span>
<span id="cb13-13"><a href="#cb13-13"></a><span class="co">#&gt;  3:      Civil Engineering           Black   Male   19</span></span>
<span id="cb13-14"><a href="#cb13-14"></a><span class="co">#&gt;  4:      Civil Engineering           Asian   Male   12</span></span>
<span id="cb13-15"><a href="#cb13-15"></a><span class="co">#&gt;  5:      Civil Engineering           Black Female   11</span></span>
<span id="cb13-16"><a href="#cb13-16"></a><span class="co">#&gt;  6:      Civil Engineering   International   Male    2</span></span>
<span id="cb13-17"><a href="#cb13-17"></a><span class="co">#&gt;  7:      Civil Engineering        Hispanic   Male   12</span></span>
<span id="cb13-18"><a href="#cb13-18"></a><span class="co">#&gt;  8:      Civil Engineering           Asian Female    6</span></span>
<span id="cb13-19"><a href="#cb13-19"></a><span class="co">#&gt;  9:      Civil Engineering Native American   Male    2</span></span>
<span id="cb13-20"><a href="#cb13-20"></a><span class="co">#&gt; 10:      Civil Engineering        Hispanic Female    1</span></span>
<span id="cb13-21"><a href="#cb13-21"></a><span class="co">#&gt; ---                                                   </span></span>
<span id="cb13-22"><a href="#cb13-22"></a><span class="co">#&gt; 44: Industrial Engineering           Black Female   24</span></span>
<span id="cb13-23"><a href="#cb13-23"></a><span class="co">#&gt; 45: Industrial Engineering           White Female   80</span></span>
<span id="cb13-24"><a href="#cb13-24"></a><span class="co">#&gt; 46: Industrial Engineering           Black   Male   25</span></span>
<span id="cb13-25"><a href="#cb13-25"></a><span class="co">#&gt; 47: Industrial Engineering        Hispanic   Male    7</span></span>
<span id="cb13-26"><a href="#cb13-26"></a><span class="co">#&gt; 48: Industrial Engineering        Hispanic Female    1</span></span>
<span id="cb13-27"><a href="#cb13-27"></a><span class="co">#&gt; 49: Industrial Engineering   International   Male   12</span></span>
<span id="cb13-28"><a href="#cb13-28"></a><span class="co">#&gt; 50: Industrial Engineering           Asian Female    7</span></span>
<span id="cb13-29"><a href="#cb13-29"></a><span class="co">#&gt; 51: Industrial Engineering   International Female    2</span></span>
<span id="cb13-30"><a href="#cb13-30"></a><span class="co">#&gt; 52: Industrial Engineering           Other Female    3</span></span>
<span id="cb13-31"><a href="#cb13-31"></a><span class="co">#&gt; 53: Industrial Engineering           Other   Male    3</span></span></code></pre></div>
<p>Join. The number of grouped-graduate rows can never be greater than the number of grouped-starters rows, so we left-join graduates to starters.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>grouped_data &lt;-<span class="st"> </span><span class="kw">merge</span>(grouped_starters,</span>
<span id="cb14-2"><a href="#cb14-2"></a>  grouped_graduates,</span>
<span id="cb14-3"><a href="#cb14-3"></a>  <span class="dt">by =</span> grouping_variables,</span>
<span id="cb14-4"><a href="#cb14-4"></a>  <span class="dt">all.x =</span> <span class="ot">TRUE</span></span>
<span id="cb14-5"><a href="#cb14-5"></a>)</span>
<span id="cb14-6"><a href="#cb14-6"></a></span>
<span id="cb14-7"><a href="#cb14-7"></a>grouped_data</span>
<span id="cb14-8"><a href="#cb14-8"></a><span class="co">#&gt;                    program            race    sex start grad</span></span>
<span id="cb14-9"><a href="#cb14-9"></a><span class="co">#&gt;  1:      Civil Engineering           Asian Female    14    6</span></span>
<span id="cb14-10"><a href="#cb14-10"></a><span class="co">#&gt;  2:      Civil Engineering           Asian   Male    31   12</span></span>
<span id="cb14-11"><a href="#cb14-11"></a><span class="co">#&gt;  3:      Civil Engineering           Black Female    28   11</span></span>
<span id="cb14-12"><a href="#cb14-12"></a><span class="co">#&gt;  4:      Civil Engineering           Black   Male    60   19</span></span>
<span id="cb14-13"><a href="#cb14-13"></a><span class="co">#&gt;  5:      Civil Engineering        Hispanic Female     6    1</span></span>
<span id="cb14-14"><a href="#cb14-14"></a><span class="co">#&gt;  6:      Civil Engineering        Hispanic   Male    33   12</span></span>
<span id="cb14-15"><a href="#cb14-15"></a><span class="co">#&gt;  7:      Civil Engineering   International Female     1   NA</span></span>
<span id="cb14-16"><a href="#cb14-16"></a><span class="co">#&gt;  8:      Civil Engineering   International   Male     6    2</span></span>
<span id="cb14-17"><a href="#cb14-17"></a><span class="co">#&gt;  9:      Civil Engineering Native American   Male     5    2</span></span>
<span id="cb14-18"><a href="#cb14-18"></a><span class="co">#&gt; 10:      Civil Engineering           Other Female     3   NA</span></span>
<span id="cb14-19"><a href="#cb14-19"></a><span class="co">#&gt; ---                                                         </span></span>
<span id="cb14-20"><a href="#cb14-20"></a><span class="co">#&gt; 52: Mechanical Engineering   International Female     1   NA</span></span>
<span id="cb14-21"><a href="#cb14-21"></a><span class="co">#&gt; 53: Mechanical Engineering   International   Male    22   10</span></span>
<span id="cb14-22"><a href="#cb14-22"></a><span class="co">#&gt; 54: Mechanical Engineering Native American Female     2    2</span></span>
<span id="cb14-23"><a href="#cb14-23"></a><span class="co">#&gt; 55: Mechanical Engineering Native American   Male     7    3</span></span>
<span id="cb14-24"><a href="#cb14-24"></a><span class="co">#&gt; 56: Mechanical Engineering           Other Female     3    2</span></span>
<span id="cb14-25"><a href="#cb14-25"></a><span class="co">#&gt; 57: Mechanical Engineering           Other   Male    30   17</span></span>
<span id="cb14-26"><a href="#cb14-26"></a><span class="co">#&gt; 58: Mechanical Engineering         Unknown Female     2    1</span></span>
<span id="cb14-27"><a href="#cb14-27"></a><span class="co">#&gt; 59: Mechanical Engineering         Unknown   Male     9    3</span></span>
<span id="cb14-28"><a href="#cb14-28"></a><span class="co">#&gt; 60: Mechanical Engineering           White Female   185   72</span></span>
<span id="cb14-29"><a href="#cb14-29"></a><span class="co">#&gt; 61: Mechanical Engineering           White   Male  1598  630</span></span></code></pre></div>
</div>
<div id="compute-graduation-rate" class="section level2">
<h2>Compute graduation rate</h2>
<p>Convert the NA values in the <code>grad</code> column to zero.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>grad_rate &lt;-<span class="st"> </span>grouped_data</span>
<span id="cb15-2"><a href="#cb15-2"></a>rows_with_grad_NA &lt;-<span class="st"> </span><span class="kw">is.na</span>(grad_rate<span class="op">$</span>grad)</span>
<span id="cb15-3"><a href="#cb15-3"></a>grad_rate[rows_with_grad_NA, grad <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="dv">0</span>]</span>
<span id="cb15-4"><a href="#cb15-4"></a></span>
<span id="cb15-5"><a href="#cb15-5"></a>grad_rate</span>
<span id="cb15-6"><a href="#cb15-6"></a><span class="co">#&gt;                    program            race    sex start grad</span></span>
<span id="cb15-7"><a href="#cb15-7"></a><span class="co">#&gt;  1:      Civil Engineering           Asian Female    14    6</span></span>
<span id="cb15-8"><a href="#cb15-8"></a><span class="co">#&gt;  2:      Civil Engineering           Asian   Male    31   12</span></span>
<span id="cb15-9"><a href="#cb15-9"></a><span class="co">#&gt;  3:      Civil Engineering           Black Female    28   11</span></span>
<span id="cb15-10"><a href="#cb15-10"></a><span class="co">#&gt;  4:      Civil Engineering           Black   Male    60   19</span></span>
<span id="cb15-11"><a href="#cb15-11"></a><span class="co">#&gt;  5:      Civil Engineering        Hispanic Female     6    1</span></span>
<span id="cb15-12"><a href="#cb15-12"></a><span class="co">#&gt;  6:      Civil Engineering        Hispanic   Male    33   12</span></span>
<span id="cb15-13"><a href="#cb15-13"></a><span class="co">#&gt;  7:      Civil Engineering   International Female     1    0</span></span>
<span id="cb15-14"><a href="#cb15-14"></a><span class="co">#&gt;  8:      Civil Engineering   International   Male     6    2</span></span>
<span id="cb15-15"><a href="#cb15-15"></a><span class="co">#&gt;  9:      Civil Engineering Native American   Male     5    2</span></span>
<span id="cb15-16"><a href="#cb15-16"></a><span class="co">#&gt; 10:      Civil Engineering           Other Female     3    0</span></span>
<span id="cb15-17"><a href="#cb15-17"></a><span class="co">#&gt; ---                                                         </span></span>
<span id="cb15-18"><a href="#cb15-18"></a><span class="co">#&gt; 52: Mechanical Engineering   International Female     1    0</span></span>
<span id="cb15-19"><a href="#cb15-19"></a><span class="co">#&gt; 53: Mechanical Engineering   International   Male    22   10</span></span>
<span id="cb15-20"><a href="#cb15-20"></a><span class="co">#&gt; 54: Mechanical Engineering Native American Female     2    2</span></span>
<span id="cb15-21"><a href="#cb15-21"></a><span class="co">#&gt; 55: Mechanical Engineering Native American   Male     7    3</span></span>
<span id="cb15-22"><a href="#cb15-22"></a><span class="co">#&gt; 56: Mechanical Engineering           Other Female     3    2</span></span>
<span id="cb15-23"><a href="#cb15-23"></a><span class="co">#&gt; 57: Mechanical Engineering           Other   Male    30   17</span></span>
<span id="cb15-24"><a href="#cb15-24"></a><span class="co">#&gt; 58: Mechanical Engineering         Unknown Female     2    1</span></span>
<span id="cb15-25"><a href="#cb15-25"></a><span class="co">#&gt; 59: Mechanical Engineering         Unknown   Male     9    3</span></span>
<span id="cb15-26"><a href="#cb15-26"></a><span class="co">#&gt; 60: Mechanical Engineering           White Female   185   72</span></span>
<span id="cb15-27"><a href="#cb15-27"></a><span class="co">#&gt; 61: Mechanical Engineering           White   Male  1598  630</span></span></code></pre></div>
<p>We omit rows with zero starters, if any, to avoid dividing by zero.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="co"># prevent division by zero</span></span>
<span id="cb16-2"><a href="#cb16-2"></a>rows_we_want &lt;-<span class="st"> </span>grad_rate<span class="op">$</span>start <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span></span>
<span id="cb16-3"><a href="#cb16-3"></a>grad_rate &lt;-<span class="st"> </span>grad_rate[rows_we_want]</span></code></pre></div>
<p>Graduation rate is the ratio of <code>grad</code> to <code>start</code>.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>grad_rate[, rate <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="kw">round</span>(grad <span class="op">/</span><span class="st"> </span>start, <span class="dv">2</span>)]</span>
<span id="cb17-2"><a href="#cb17-2"></a></span>
<span id="cb17-3"><a href="#cb17-3"></a>grad_rate</span>
<span id="cb17-4"><a href="#cb17-4"></a><span class="co">#&gt;                    program            race    sex start grad rate</span></span>
<span id="cb17-5"><a href="#cb17-5"></a><span class="co">#&gt;  1:      Civil Engineering           Asian Female    14    6 0.43</span></span>
<span id="cb17-6"><a href="#cb17-6"></a><span class="co">#&gt;  2:      Civil Engineering           Asian   Male    31   12 0.39</span></span>
<span id="cb17-7"><a href="#cb17-7"></a><span class="co">#&gt;  3:      Civil Engineering           Black Female    28   11 0.39</span></span>
<span id="cb17-8"><a href="#cb17-8"></a><span class="co">#&gt;  4:      Civil Engineering           Black   Male    60   19 0.32</span></span>
<span id="cb17-9"><a href="#cb17-9"></a><span class="co">#&gt;  5:      Civil Engineering        Hispanic Female     6    1 0.17</span></span>
<span id="cb17-10"><a href="#cb17-10"></a><span class="co">#&gt;  6:      Civil Engineering        Hispanic   Male    33   12 0.36</span></span>
<span id="cb17-11"><a href="#cb17-11"></a><span class="co">#&gt;  7:      Civil Engineering   International Female     1    0 0.00</span></span>
<span id="cb17-12"><a href="#cb17-12"></a><span class="co">#&gt;  8:      Civil Engineering   International   Male     6    2 0.33</span></span>
<span id="cb17-13"><a href="#cb17-13"></a><span class="co">#&gt;  9:      Civil Engineering Native American   Male     5    2 0.40</span></span>
<span id="cb17-14"><a href="#cb17-14"></a><span class="co">#&gt; 10:      Civil Engineering           Other Female     3    0 0.00</span></span>
<span id="cb17-15"><a href="#cb17-15"></a><span class="co">#&gt; ---                                                              </span></span>
<span id="cb17-16"><a href="#cb17-16"></a><span class="co">#&gt; 52: Mechanical Engineering   International Female     1    0 0.00</span></span>
<span id="cb17-17"><a href="#cb17-17"></a><span class="co">#&gt; 53: Mechanical Engineering   International   Male    22   10 0.45</span></span>
<span id="cb17-18"><a href="#cb17-18"></a><span class="co">#&gt; 54: Mechanical Engineering Native American Female     2    2 1.00</span></span>
<span id="cb17-19"><a href="#cb17-19"></a><span class="co">#&gt; 55: Mechanical Engineering Native American   Male     7    3 0.43</span></span>
<span id="cb17-20"><a href="#cb17-20"></a><span class="co">#&gt; 56: Mechanical Engineering           Other Female     3    2 0.67</span></span>
<span id="cb17-21"><a href="#cb17-21"></a><span class="co">#&gt; 57: Mechanical Engineering           Other   Male    30   17 0.57</span></span>
<span id="cb17-22"><a href="#cb17-22"></a><span class="co">#&gt; 58: Mechanical Engineering         Unknown Female     2    1 0.50</span></span>
<span id="cb17-23"><a href="#cb17-23"></a><span class="co">#&gt; 59: Mechanical Engineering         Unknown   Male     9    3 0.33</span></span>
<span id="cb17-24"><a href="#cb17-24"></a><span class="co">#&gt; 60: Mechanical Engineering           White Female   185   72 0.39</span></span>
<span id="cb17-25"><a href="#cb17-25"></a><span class="co">#&gt; 61: Mechanical Engineering           White   Male  1598  630 0.39</span></span></code></pre></div>
<p>To see the class of each column:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="co"># name and class of variables (columns)</span></span>
<span id="cb18-2"><a href="#cb18-2"></a><span class="kw">unlist</span>(<span class="kw">lapply</span>(grad_rate, <span class="dt">FUN =</span> class))</span>
<span id="cb18-3"><a href="#cb18-3"></a><span class="co">#&gt;     program        race         sex       start        grad        rate </span></span>
<span id="cb18-4"><a href="#cb18-4"></a><span class="co">#&gt; &quot;character&quot; &quot;character&quot; &quot;character&quot;   &quot;integer&quot;   &quot;integer&quot;   &quot;numeric&quot;</span></span></code></pre></div>
</div>
<div id="condition-the-data-for-display" class="section level2">
<h2>Condition the data for display</h2>
<p>Before graphing, we isolate the three multiway variables (program, combined race and sex, and rate) and transform the categorical variables into factors with levels that are ordered by median graduation rate.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="co"># pre-multiway data frame</span></span>
<span id="cb19-2"><a href="#cb19-2"></a>pre_mw &lt;-<span class="st"> </span><span class="kw">copy</span>(grad_rate)</span>
<span id="cb19-3"><a href="#cb19-3"></a></span>
<span id="cb19-4"><a href="#cb19-4"></a><span class="co"># prepare rows</span></span>
<span id="cb19-5"><a href="#cb19-5"></a>rows_we_want &lt;-<span class="st"> </span>pre_mw<span class="op">$</span>start <span class="op">&gt;=</span><span class="st"> </span><span class="dv">5</span></span>
<span id="cb19-6"><a href="#cb19-6"></a>pre_mw &lt;-<span class="st"> </span>pre_mw[rows_we_want]</span>
<span id="cb19-7"><a href="#cb19-7"></a></span>
<span id="cb19-8"><a href="#cb19-8"></a>rows_we_want &lt;-<span class="st"> </span><span class="op">!</span>pre_mw<span class="op">$</span>race <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(</span>
<span id="cb19-9"><a href="#cb19-9"></a>  <span class="st">&quot;Unknown&quot;</span>,</span>
<span id="cb19-10"><a href="#cb19-10"></a>  <span class="st">&quot;International&quot;</span>,</span>
<span id="cb19-11"><a href="#cb19-11"></a>  <span class="st">&quot;Other&quot;</span>,</span>
<span id="cb19-12"><a href="#cb19-12"></a>  <span class="st">&quot;Native American&quot;</span></span>
<span id="cb19-13"><a href="#cb19-13"></a>)</span>
<span id="cb19-14"><a href="#cb19-14"></a>pre_mw &lt;-<span class="st"> </span>pre_mw[rows_we_want]</span>
<span id="cb19-15"><a href="#cb19-15"></a></span>
<span id="cb19-16"><a href="#cb19-16"></a><span class="co"># complete the transformation to multiway form</span></span>
<span id="cb19-17"><a href="#cb19-17"></a>data_mw &lt;-<span class="st"> </span><span class="kw">copy</span>(pre_mw)</span>
<span id="cb19-18"><a href="#cb19-18"></a>data_mw[, race_sex <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="kw">paste</span>(race, sex, <span class="dt">sep =</span> <span class="st">&quot; &quot;</span>)]</span>
<span id="cb19-19"><a href="#cb19-19"></a>cols_we_want &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;program&quot;</span>, <span class="st">&quot;race_sex&quot;</span>, <span class="st">&quot;rate&quot;</span>)</span>
<span id="cb19-20"><a href="#cb19-20"></a>data_mw &lt;-<span class="st"> </span>data_mw[, ..cols_we_want]</span>
<span id="cb19-21"><a href="#cb19-21"></a></span>
<span id="cb19-22"><a href="#cb19-22"></a><span class="co"># transform characters to factors ordered by median rate</span></span>
<span id="cb19-23"><a href="#cb19-23"></a>data_mw &lt;-<span class="st"> </span><span class="kw">prepare_multiway</span>(data_mw)</span></code></pre></div>
</div>
<div id="graph-the-metric" class="section level2">
<h2>Graph the metric</h2>
<p>We use conventional ggplot2 functions to graph the <code>data_mw</code> data set in a multiway graph.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="co"># graph results</span></span>
<span id="cb20-2"><a href="#cb20-2"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> data_mw, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> rate, <span class="dt">y =</span> race_sex)) <span class="op">+</span></span>
<span id="cb20-3"><a href="#cb20-3"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="dt">facets =</span> <span class="kw">vars</span>(program), <span class="dt">ncol =</span> <span class="dv">1</span>, <span class="dt">as.table =</span> <span class="ot">FALSE</span>) <span class="op">+</span></span>
<span id="cb20-4"><a href="#cb20-4"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">na.rm =</span> <span class="ot">TRUE</span>) <span class="op">+</span></span>
<span id="cb20-5"><a href="#cb20-5"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Graduation rate&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;&quot;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="references" class="section level2">
<h2>References</h2>
<div id="refs">
<div id="ref-Cook+Hartle:2011">
<p>Cook, Bryan and Hartle, Terry W. (2011) Why graduation rates matter—and why they don’t. <em>The Presidency magazine</em> (Spring/Summer 2011). American Council on Education.</p>
</div>
<div id="ref-IPEDS:2020">
<p>NCES (2020) <em>IPEDS Survey Methodology</em>. National Center for Education Statistics; [Online; accessed 2020-07-29]. Available at: <a href="https://nces.ed.gov/ipeds/ReportYourData/IpedsSurveyMethodology">https://nces.ed.gov/ipeds/ReportYourData/IpedsSurveyMethodology</a>.</p>
</div>
</div>
</div>
<div id="appendix" class="section level2">
<h2>Appendix</h2>
<div id="a.-how-subset_ipeds-works" class="section level3">
<h3>A. How <code>subset_ipeds()</code> works</h3>
<p>The first operation in <code>subset_ipeds()</code> is accessing <code>midfieldstudents</code> for entering term and transfer information for the students is <code>starters</code>. Then transfer students are removed, yielding:</p>
<pre><code>#&gt;                id  start term_enter transfer
#&gt;    1: MID25783227 141001      20031        N
#&gt;    2: MID25783388 141901      19871        N
#&gt;    3: MID25783441 140801      19921        N
#&gt;    4: MID25783491 141001      19961        N
#&gt;    5: MID25783553 140801      20021        N
#&gt;    6: MID25783606 141001      20011        N
#&gt;    7: MID25783753 141901      20001        N
#&gt;    8: MID25783830 141901      19951        N
#&gt;    9: MID25783912 143501      19971        N
#&gt;   10: MID25784022 141901      20011        N
#&gt;   ---                                       
#&gt; 5862: MID26696050 141901      20111        N
#&gt; 5863: MID26696234 141901      20111        N
#&gt; 5864: MID26696337 140801      20101        N
#&gt; 5865: MID26696429 143501      20101        N
#&gt; 5866: MID26696439 141901      20101        N
#&gt; 5867: MID26696484 141901      20101        N
#&gt; 5868: MID26696642 141001      20121        N
#&gt; 5869: MID26696958 141901      20111        N
#&gt; 5870: MID26696967 141901      20101        N
#&gt; 5871: MID26697444 141901      20101        N</code></pre>
<p>By removing transfer students, we’ve reduced the population in this example from 6947 to 5871.</p>
<p>The next operation accesses <code>midfielddegrees</code> for the degree term and CIP code. An NA indicates no degree.</p>
<pre><code>#&gt;                id  start term_enter term_degree cip_degree
#&gt;    1: MID25783227 141001      20031          NA       &lt;NA&gt;
#&gt;    2: MID25783388 141901      19871          NA       &lt;NA&gt;
#&gt;    3: MID25783441 140801      19921       19963     140801
#&gt;    4: MID25783491 141001      19961       20001     141001
#&gt;    5: MID25783553 140801      20021          NA       &lt;NA&gt;
#&gt;    6: MID25783606 141001      20011          NA       &lt;NA&gt;
#&gt;    7: MID25783753 141901      20001          NA       &lt;NA&gt;
#&gt;    8: MID25783830 141901      19951          NA       &lt;NA&gt;
#&gt;    9: MID25783912 143501      19971       20001     143501
#&gt;   10: MID25784022 141901      20011          NA       &lt;NA&gt;
#&gt;   ---                                                     
#&gt; 5862: MID26696050 141901      20111       20163     141901
#&gt; 5863: MID26696234 141901      20111       20143     141901
#&gt; 5864: MID26696337 140801      20101       20133     140801
#&gt; 5865: MID26696429 143501      20101       20133     143501
#&gt; 5866: MID26696439 141901      20101          NA       &lt;NA&gt;
#&gt; 5867: MID26696484 141901      20101       20154     141901
#&gt; 5868: MID26696642 141001      20121       20153     141001
#&gt; 5869: MID26696958 141901      20111          NA       &lt;NA&gt;
#&gt; 5870: MID26696967 141901      20101       20141     141901
#&gt; 5871: MID26697444 141901      20101       20151     240199</code></pre>
<p>In the degree data, the term recorded is NA for students with no degree. Therefore, the next operation accesses <code>midfieldterms</code> for the term and CIP code for every term for these students, retaining the last term only, yielding:</p>
<pre><code>#&gt;                id  start term_enter  term term_degree cip_term cip_degree
#&gt;    1: MID25783227 141001      20031 20033          NA   230101       &lt;NA&gt;
#&gt;    2: MID25783388 141901      19871 19905          NA   141901       &lt;NA&gt;
#&gt;    3: MID25783441 140801      19921 19963       19963   140801     140801
#&gt;    4: MID25783491 141001      19961 20001       20001   141001     141001
#&gt;    5: MID25783553 140801      20021 20071          NA   140801       &lt;NA&gt;
#&gt;    6: MID25783606 141001      20011 20043          NA   141001       &lt;NA&gt;
#&gt;    7: MID25783753 141901      20001 20043          NA   310301       &lt;NA&gt;
#&gt;    8: MID25783830 141901      19951 19963          NA   419999       &lt;NA&gt;
#&gt;    9: MID25783912 143501      19971 20001       20001   143501     143501
#&gt;   10: MID25784022 141901      20011 20053          NA   141901       &lt;NA&gt;
#&gt;   ---                                                                    
#&gt; 5828: MID26696050 141901      20111 20163       20163   141901     141901
#&gt; 5829: MID26696234 141901      20111 20143       20143   141901     141901
#&gt; 5830: MID26696337 140801      20101 20131       20133   140801     140801
#&gt; 5831: MID26696429 143501      20101 20131       20133   143501     143501
#&gt; 5832: MID26696439 141901      20101 20131          NA   141901       &lt;NA&gt;
#&gt; 5833: MID26696484 141901      20101 20154       20154   141901     141901
#&gt; 5834: MID26696642 141001      20121 20153       20153   141001     141001
#&gt; 5835: MID26696958 141901      20111 20111          NA   141901       &lt;NA&gt;
#&gt; 5836: MID26696967 141901      20101 20141       20141   141901     141901
#&gt; 5837: MID26697444 141901      20101 20151       20151   240199     240199</code></pre>
<p>There is a small reduction in the number of students, from 5871 to 5837, because of incomplete data in <code>midfieldterms</code>. (Some students have an NA in both their degree term and in their <code>term</code> data in <code>midfieldterms</code>. Essentially, we have matriculation information for these students but no term information.)</p>
<p>Selecting the columns that are needed to apply the IPEDS constraints, we have,</p>
<pre><code>#&gt;                id  start term_enter term_degree cip_degree
#&gt;    1: MID25783227 141001      20031          NA       &lt;NA&gt;
#&gt;    2: MID25783388 141901      19871          NA       &lt;NA&gt;
#&gt;    3: MID25783441 140801      19921       19963     140801
#&gt;    4: MID25783491 141001      19961       20001     141001
#&gt;    5: MID25783553 140801      20021          NA       &lt;NA&gt;
#&gt;    6: MID25783606 141001      20011          NA       &lt;NA&gt;
#&gt;    7: MID25783753 141901      20001          NA       &lt;NA&gt;
#&gt;    8: MID25783830 141901      19951          NA       &lt;NA&gt;
#&gt;    9: MID25783912 143501      19971       20001     143501
#&gt;   10: MID25784022 141901      20011          NA       &lt;NA&gt;
#&gt;   ---                                                     
#&gt; 5828: MID26696050 141901      20111       20163     141901
#&gt; 5829: MID26696234 141901      20111       20143     141901
#&gt; 5830: MID26696337 140801      20101       20133     140801
#&gt; 5831: MID26696429 143501      20101       20133     143501
#&gt; 5832: MID26696439 141901      20101          NA       &lt;NA&gt;
#&gt; 5833: MID26696484 141901      20101       20154     141901
#&gt; 5834: MID26696642 141001      20121       20153     141001
#&gt; 5835: MID26696958 141901      20111          NA       &lt;NA&gt;
#&gt; 5836: MID26696967 141901      20101       20141     141901
#&gt; 5837: MID26697444 141901      20101       20151     240199</code></pre>
<p>The next step is to recode degree CIP under either condition:</p>
<ul>
<li>recode a degree to NA if more than 6 years from entering term to degree term</li>
<li>recode a degree to NA if degree CIP different from matriculation CIP</li>
</ul>
<p>Finally, the degree CIP is used to create a yes/no column <code>ipeds_grad</code> to be returned with the original ID and <code>start</code> columns. For graduates in this result, the degree CIP and starting CIP are identical.</p>
<pre><code>#&gt;                id  start ipeds_grad
#&gt;    1: MID25783227 141001          N
#&gt;    2: MID25783388 141901          N
#&gt;    3: MID25783441 140801          Y
#&gt;    4: MID25783491 141001          Y
#&gt;    5: MID25783553 140801          N
#&gt;    6: MID25783606 141001          N
#&gt;    7: MID25783753 141901          N
#&gt;    8: MID25783830 141901          N
#&gt;    9: MID25783912 143501          Y
#&gt;   10: MID25784022 141901          N
#&gt;   ---                              
#&gt; 5828: MID26696050 141901          Y
#&gt; 5829: MID26696234 141901          Y
#&gt; 5830: MID26696337 140801          Y
#&gt; 5831: MID26696429 143501          Y
#&gt; 5832: MID26696439 141901          N
#&gt; 5833: MID26696484 141901          Y
#&gt; 5834: MID26696642 141001          Y
#&gt; 5835: MID26696958 141901          N
#&gt; 5836: MID26696967 141901          Y
#&gt; 5837: MID26697444 141901          N</code></pre>
</div>
<div id="b.-complete-script" class="section level3">
<h3>B. Complete script</h3>
<p>The vignette code chunks are collected below in a single, condensed script.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a><span class="co"># packages used</span></span>
<span id="cb26-2"><a href="#cb26-2"></a><span class="kw">library</span>(midfieldr)</span>
<span id="cb26-3"><a href="#cb26-3"></a><span class="kw">library</span>(midfielddata)</span>
<span id="cb26-4"><a href="#cb26-4"></a><span class="kw">library</span>(data.table)</span>
<span id="cb26-5"><a href="#cb26-5"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb26-6"><a href="#cb26-6"></a></span>
<span id="cb26-7"><a href="#cb26-7"></a><span class="co"># select programs (built-in data set)</span></span>
<span id="cb26-8"><a href="#cb26-8"></a>program_group &lt;-<span class="st"> </span><span class="kw">copy</span>(rep_group)</span>
<span id="cb26-9"><a href="#cb26-9"></a>group_cip &lt;-<span class="st"> </span>program_group<span class="op">$</span>cip6</span>
<span id="cb26-10"><a href="#cb26-10"></a></span>
<span id="cb26-11"><a href="#cb26-11"></a><span class="co"># gather students matriculating in programs</span></span>
<span id="cb26-12"><a href="#cb26-12"></a>cols_we_want &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;id&quot;</span>, <span class="st">&quot;cip6&quot;</span>)</span>
<span id="cb26-13"><a href="#cb26-13"></a>rows_we_want &lt;-<span class="st"> </span>midfieldstudents<span class="op">$</span>cip6 <span class="op">%in%</span><span class="st"> </span>group_cip</span>
<span id="cb26-14"><a href="#cb26-14"></a>matriculants &lt;-<span class="st"> </span>midfieldstudents[rows_we_want, ..cols_we_want]</span>
<span id="cb26-15"><a href="#cb26-15"></a>matriculants &lt;-<span class="st"> </span><span class="kw">unique</span>(matriculants)</span>
<span id="cb26-16"><a href="#cb26-16"></a></span>
<span id="cb26-17"><a href="#cb26-17"></a><span class="co"># gather FYE students predicted to start in these programs</span></span>
<span id="cb26-18"><a href="#cb26-18"></a>cols_we_want &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;id&quot;</span>, <span class="st">&quot;start&quot;</span>)</span>
<span id="cb26-19"><a href="#cb26-19"></a>rows_we_want &lt;-<span class="st"> </span>fye_start<span class="op">$</span>start <span class="op">%in%</span><span class="st"> </span>group_cip</span>
<span id="cb26-20"><a href="#cb26-20"></a>fye_starters &lt;-<span class="st"> </span>fye_start[rows_we_want, ..cols_we_want]</span>
<span id="cb26-21"><a href="#cb26-21"></a>fye_starters &lt;-<span class="st"> </span><span class="kw">unique</span>(fye_starters)</span>
<span id="cb26-22"><a href="#cb26-22"></a><span class="kw">setnames</span>(fye_starters, <span class="dt">old =</span> <span class="st">&quot;start&quot;</span>, <span class="dt">new =</span> <span class="st">&quot;cip6&quot;</span>)</span>
<span id="cb26-23"><a href="#cb26-23"></a>starters &lt;-<span class="st"> </span><span class="kw">rbind</span>(matriculants, fye_starters)</span>
<span id="cb26-24"><a href="#cb26-24"></a></span>
<span id="cb26-25"><a href="#cb26-25"></a><span class="co"># apply the feasible completion filter</span></span>
<span id="cb26-26"><a href="#cb26-26"></a>feasible_ids &lt;-<span class="st"> </span><span class="kw">subset_feasible</span>(starters<span class="op">$</span>id)</span>
<span id="cb26-27"><a href="#cb26-27"></a>rows_we_want &lt;-<span class="st"> </span>starters<span class="op">$</span>id <span class="op">%in%</span><span class="st"> </span>feasible_ids</span>
<span id="cb26-28"><a href="#cb26-28"></a>starters &lt;-<span class="st"> </span>starters[rows_we_want]</span>
<span id="cb26-29"><a href="#cb26-29"></a></span>
<span id="cb26-30"><a href="#cb26-30"></a><span class="co"># apply IPEDS constraints</span></span>
<span id="cb26-31"><a href="#cb26-31"></a><span class="kw">setnames</span>(starters, <span class="dt">old =</span> <span class="st">&quot;cip6&quot;</span>, <span class="dt">new =</span> <span class="st">&quot;start&quot;</span>)</span>
<span id="cb26-32"><a href="#cb26-32"></a>ipeds_students &lt;-<span class="st"> </span><span class="kw">subset_ipeds</span>(starters)</span>
<span id="cb26-33"><a href="#cb26-33"></a><span class="kw">setnames</span>(ipeds_students, <span class="dt">old =</span> <span class="st">&quot;start&quot;</span>, <span class="dt">new =</span> <span class="st">&quot;cip6&quot;</span>)</span>
<span id="cb26-34"><a href="#cb26-34"></a></span>
<span id="cb26-35"><a href="#cb26-35"></a><span class="co"># join race sex</span></span>
<span id="cb26-36"><a href="#cb26-36"></a>rows_we_want &lt;-<span class="st"> </span>midfieldstudents<span class="op">$</span>id <span class="op">%in%</span><span class="st"> </span>ipeds_students<span class="op">$</span>id </span>
<span id="cb26-37"><a href="#cb26-37"></a>cols_we_want &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;id&quot;</span>, <span class="st">&quot;race&quot;</span>, <span class="st">&quot;sex&quot;</span>)</span>
<span id="cb26-38"><a href="#cb26-38"></a>race_sex &lt;-<span class="st"> </span>midfieldstudents[rows_we_want, ..cols_we_want]</span>
<span id="cb26-39"><a href="#cb26-39"></a>race_sex &lt;-<span class="st"> </span><span class="kw">unique</span>(race_sex)</span>
<span id="cb26-40"><a href="#cb26-40"></a>ipeds_students &lt;-<span class="st"> </span><span class="kw">merge</span>(ipeds_students, race_sex, <span class="dt">by =</span> <span class="st">&quot;id&quot;</span>, <span class="dt">all.x =</span> <span class="ot">TRUE</span>)</span>
<span id="cb26-41"><a href="#cb26-41"></a></span>
<span id="cb26-42"><a href="#cb26-42"></a><span class="co"># join programs</span></span>
<span id="cb26-43"><a href="#cb26-43"></a>ipeds_students &lt;-<span class="st"> </span><span class="kw">merge</span>(ipeds_students,</span>
<span id="cb26-44"><a href="#cb26-44"></a>  program_group,</span>
<span id="cb26-45"><a href="#cb26-45"></a>  <span class="dt">by =</span> <span class="st">&quot;cip6&quot;</span>,</span>
<span id="cb26-46"><a href="#cb26-46"></a>  <span class="dt">all.x =</span> <span class="ot">TRUE</span></span>
<span id="cb26-47"><a href="#cb26-47"></a>)</span>
<span id="cb26-48"><a href="#cb26-48"></a></span>
<span id="cb26-49"><a href="#cb26-49"></a><span class="co"># group, summarize, join</span></span>
<span id="cb26-50"><a href="#cb26-50"></a>grouping_variables &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;program&quot;</span>, <span class="st">&quot;race&quot;</span>, <span class="st">&quot;sex&quot;</span>)</span>
<span id="cb26-51"><a href="#cb26-51"></a>grouped_starters &lt;-<span class="st"> </span>ipeds_students[, .(<span class="dt">start =</span> .N), by =<span class="st"> </span>grouping_variables]</span>
<span id="cb26-52"><a href="#cb26-52"></a>rows_we_want &lt;-<span class="st"> </span>ipeds_students<span class="op">$</span>ipeds_grad <span class="op">==</span><span class="st"> &quot;Y&quot;</span></span>
<span id="cb26-53"><a href="#cb26-53"></a>grouped_graduates &lt;-<span class="st"> </span>ipeds_students[rows_we_want,</span>
<span id="cb26-54"><a href="#cb26-54"></a>  .(<span class="dt">grad =</span> .N),</span>
<span id="cb26-55"><a href="#cb26-55"></a>  by =<span class="st"> </span>grouping_variables</span>
<span id="cb26-56"><a href="#cb26-56"></a>]</span>
<span id="cb26-57"><a href="#cb26-57"></a>grouped_data &lt;-<span class="st"> </span><span class="kw">merge</span>(grouped_starters,</span>
<span id="cb26-58"><a href="#cb26-58"></a>  grouped_graduates,</span>
<span id="cb26-59"><a href="#cb26-59"></a>  <span class="dt">by =</span> grouping_variables,</span>
<span id="cb26-60"><a href="#cb26-60"></a>  <span class="dt">all.x =</span> <span class="ot">TRUE</span></span>
<span id="cb26-61"><a href="#cb26-61"></a>)</span>
<span id="cb26-62"><a href="#cb26-62"></a></span>
<span id="cb26-63"><a href="#cb26-63"></a><span class="co"># compute graduation rate</span></span>
<span id="cb26-64"><a href="#cb26-64"></a>grad_rate &lt;-<span class="st"> </span>grouped_data</span>
<span id="cb26-65"><a href="#cb26-65"></a>rows_with_grad_NA &lt;-<span class="st"> </span><span class="kw">is.na</span>(grad_rate<span class="op">$</span>grad)</span>
<span id="cb26-66"><a href="#cb26-66"></a>grad_rate[rows_with_grad_NA, grad <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="dv">0</span>]</span>
<span id="cb26-67"><a href="#cb26-67"></a>rows_we_want &lt;-<span class="st"> </span>grad_rate<span class="op">$</span>start <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span></span>
<span id="cb26-68"><a href="#cb26-68"></a>grad_rate &lt;-<span class="st"> </span>grad_rate[rows_we_want]</span>
<span id="cb26-69"><a href="#cb26-69"></a>grad_rate[, rate <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="kw">round</span>(grad <span class="op">/</span><span class="st"> </span>start, <span class="dv">2</span>)]</span>
<span id="cb26-70"><a href="#cb26-70"></a></span>
<span id="cb26-71"><a href="#cb26-71"></a><span class="co"># condition data for display</span></span>
<span id="cb26-72"><a href="#cb26-72"></a>pre_mw &lt;-<span class="st"> </span>grad_rate</span>
<span id="cb26-73"><a href="#cb26-73"></a>rows_we_want &lt;-<span class="st"> </span>pre_mw<span class="op">$</span>start <span class="op">&gt;=</span><span class="st"> </span><span class="dv">5</span></span>
<span id="cb26-74"><a href="#cb26-74"></a>pre_mw &lt;-<span class="st"> </span>pre_mw[rows_we_want]</span>
<span id="cb26-75"><a href="#cb26-75"></a>rows_we_want &lt;-<span class="st"> </span><span class="op">!</span>pre_mw<span class="op">$</span>race <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(</span>
<span id="cb26-76"><a href="#cb26-76"></a>  <span class="st">&quot;Unknown&quot;</span>,</span>
<span id="cb26-77"><a href="#cb26-77"></a>  <span class="st">&quot;International&quot;</span>,</span>
<span id="cb26-78"><a href="#cb26-78"></a>  <span class="st">&quot;Other&quot;</span>,</span>
<span id="cb26-79"><a href="#cb26-79"></a>  <span class="st">&quot;Native American&quot;</span></span>
<span id="cb26-80"><a href="#cb26-80"></a>)</span>
<span id="cb26-81"><a href="#cb26-81"></a>pre_mw &lt;-<span class="st"> </span>pre_mw[rows_we_want]</span>
<span id="cb26-82"><a href="#cb26-82"></a>data_mw &lt;-<span class="st"> </span>pre_mw</span>
<span id="cb26-83"><a href="#cb26-83"></a>data_mw[, race_sex <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="kw">paste</span>(race, sex, <span class="dt">sep =</span> <span class="st">&quot; &quot;</span>)]</span>
<span id="cb26-84"><a href="#cb26-84"></a>cols_we_want &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;program&quot;</span>, <span class="st">&quot;race_sex&quot;</span>, <span class="st">&quot;rate&quot;</span>)</span>
<span id="cb26-85"><a href="#cb26-85"></a>data_mw &lt;-<span class="st"> </span>data_mw[, ..cols_we_want]</span>
<span id="cb26-86"><a href="#cb26-86"></a>data_mw &lt;-<span class="st"> </span><span class="kw">prepare_multiway</span>(data_mw)</span>
<span id="cb26-87"><a href="#cb26-87"></a></span>
<span id="cb26-88"><a href="#cb26-88"></a><span class="co"># graph</span></span>
<span id="cb26-89"><a href="#cb26-89"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> data_mw, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> rate, <span class="dt">y =</span> race_sex)) <span class="op">+</span></span>
<span id="cb26-90"><a href="#cb26-90"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="dt">facets =</span> <span class="kw">vars</span>(program), <span class="dt">ncol =</span> <span class="dv">1</span>, <span class="dt">as.table =</span> <span class="ot">FALSE</span>) <span class="op">+</span></span>
<span id="cb26-91"><a href="#cb26-91"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">na.rm =</span> <span class="ot">TRUE</span>) <span class="op">+</span></span>
<span id="cb26-92"><a href="#cb26-92"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Graduation rate&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;&quot;</span>)</span></code></pre></div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
