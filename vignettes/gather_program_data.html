<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Gather program data</title>

<script>$(document).ready(function(){
    if (typeof $('[data-toggle="tooltip"]').tooltip === 'function') {
        $('[data-toggle="tooltip"]').tooltip();
    }
    if ($('[data-toggle="popover"]').popover === 'function') {
        $('[data-toggle="popover"]').popover();
    }
});
</script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Gather program data</h1>



<p>Before we can compute a persistence metric, we have to select the academic programs we wish to study. Here, we show the details of selecting and labeling a set of programs that we re-use in subsequent vignettes.</p>
<div id="explore-cip-codes" class="section level2">
<h2>Explore CIP codes</h2>
<p>The programs we are studying in this example are Civil Engineering, Electrical Engineering, Industrial Engineering, and Mechanical Engineering. We start by assuming we do not know the CIP codes for these disciplines.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># packages used</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw">library</span>(<span class="st">&quot;midfieldr&quot;</span>)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="kw">library</span>(<span class="st">&quot;dplyr&quot;</span>)</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="kw">library</span>(<span class="st">&quot;stringr&quot;</span>)</span></code></pre></div>
<p>We use <code>cip_filter()</code> to search the <code>cip</code> dataset first for Engineering and then filter the result for Civil, Electrical, Industrial, and Mechanical. Having done this type of search before, we know that we can exclude engineering technology programs.</p>
<p>The results show that the codes we want are at the 4-digit level: 1408, 1410, 1419, and 1435.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw">cip_filter</span>(<span class="dt">data =</span> cip, <span class="dt">keep_any =</span> <span class="st">&quot;engineering&quot;</span>, <span class="dt">drop_any =</span> <span class="st">&quot;technology&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="st">  </span><span class="kw">cip_filter</span>(<span class="dt">data =</span> ., <span class="dt">keep_any =</span> <span class="kw">c</span>(<span class="st">&quot;civil&quot;</span>, <span class="st">&quot;electrical&quot;</span>, <span class="st">&quot;industrial&quot;</span>, <span class="st">&quot;mechanical&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="st">  </span><span class="kw">print</span>() <span class="co"># or View() </span></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co">#&gt; # A tibble: 13 x 6</span></span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="co">#&gt;    cip2  cip2name  cip4  cip4name                cip6   cip6name                </span></span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="co">#&gt;    &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;                   &lt;chr&gt;  &lt;chr&gt;                   </span></span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="co">#&gt;  1 14    Engineer~ 1408  Civil Engineering       140801 Civil Engineering, Gene~</span></span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="co">#&gt;  2 14    Engineer~ 1408  Civil Engineering       140802 Geotechnical Engineering</span></span>
<span id="cb2-9"><a href="#cb2-9"></a><span class="co">#&gt;  3 14    Engineer~ 1408  Civil Engineering       140803 Structural Engineering  </span></span>
<span id="cb2-10"><a href="#cb2-10"></a><span class="co">#&gt;  4 14    Engineer~ 1408  Civil Engineering       140804 Transportation and High~</span></span>
<span id="cb2-11"><a href="#cb2-11"></a><span class="co">#&gt;  5 14    Engineer~ 1408  Civil Engineering       140805 Water Resources Enginee~</span></span>
<span id="cb2-12"><a href="#cb2-12"></a><span class="co">#&gt;  6 14    Engineer~ 1408  Civil Engineering       140899 Civil Engineering, Other</span></span>
<span id="cb2-13"><a href="#cb2-13"></a><span class="co">#&gt;  7 14    Engineer~ 1410  Electrical, Electronic~ 141001 Electrical, Electronics~</span></span>
<span id="cb2-14"><a href="#cb2-14"></a><span class="co">#&gt;  8 14    Engineer~ 1410  Electrical, Electronic~ 141003 Laser and Optical Engin~</span></span>
<span id="cb2-15"><a href="#cb2-15"></a><span class="co">#&gt;  9 14    Engineer~ 1410  Electrical, Electronic~ 141004 Telecommunications Engi~</span></span>
<span id="cb2-16"><a href="#cb2-16"></a><span class="co">#&gt; 10 14    Engineer~ 1410  Electrical, Electronic~ 141099 Electrical, Electronics~</span></span>
<span id="cb2-17"><a href="#cb2-17"></a><span class="co">#&gt; 11 14    Engineer~ 1419  Mechanical Engineering  141901 Mechanical Engineering  </span></span>
<span id="cb2-18"><a href="#cb2-18"></a><span class="co">#&gt; 12 14    Engineer~ 1435  Industrial Engineering  143501 Industrial Engineering  </span></span>
<span id="cb2-19"><a href="#cb2-19"></a><span class="co">#&gt; 13 14    Engineer~ 1441  Electromechanical Engi~ 144101 Electromechanical Engin~</span></span></code></pre></div>
<p>Notes.</p>
<ul>
<li>Instead of <code>print()</code>, one can use <code>View()</code> for a spreadsheet-style view of a result.</li>
<li>We recommend that you examine the result of every step of your work to help find errors and correct them as you go.<br />
</li>
<li>Reminder that is a sequence of operations using the pipe operator (<code>%&gt;%</code>), the outcome of the one operation is assigned to the data argument of the next operation using the dot (<code>.</code>) argument.</li>
<li>For more practice using <code>cip_filter()</code>, see the vignette <a href="cip_filter.html">Exploring program CIP codes</a>.<br />
</li>
<li>To learn more, open the help page by running <code>? cip_filter</code>.</li>
</ul>
</div>
<div id="select-and-label-programs" class="section level2">
<h2>Select and label programs</h2>
<p>In the next step, we extract these programs individually so we can label the programs individually. We’ll start with Civil Engineering.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>cve &lt;-<span class="st"> </span><span class="kw">cip_filter</span>(<span class="dt">data =</span> cip, <span class="dt">keep_any =</span> <span class="st">&quot;^1408&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="st">  </span><span class="kw">print</span>() <span class="co"># or View() </span></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="co">#&gt; # A tibble: 6 x 6</span></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="co">#&gt;   cip2  cip2name    cip4  cip4name         cip6  cip6name                       </span></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;            &lt;chr&gt; &lt;chr&gt;                          </span></span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="co">#&gt; 1 14    Engineering 1408  Civil Engineeri~ 1408~ Civil Engineering, General     </span></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="co">#&gt; 2 14    Engineering 1408  Civil Engineeri~ 1408~ Geotechnical Engineering       </span></span>
<span id="cb3-8"><a href="#cb3-8"></a><span class="co">#&gt; 3 14    Engineering 1408  Civil Engineeri~ 1408~ Structural Engineering         </span></span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="co">#&gt; 4 14    Engineering 1408  Civil Engineeri~ 1408~ Transportation and Highway Eng~</span></span>
<span id="cb3-10"><a href="#cb3-10"></a><span class="co">#&gt; 5 14    Engineering 1408  Civil Engineeri~ 1408~ Water Resources Engineering    </span></span>
<span id="cb3-11"><a href="#cb3-11"></a><span class="co">#&gt; 6 14    Engineering 1408  Civil Engineeri~ 1408~ Civil Engineering, Other</span></span></code></pre></div>
<p>We extract the 6-digit columns with <code>cip6_select()</code>. In this case, the default <code>cip4name</code> is suitably concise to use as the <code>program</code> argument.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>cve &lt;-<span class="st"> </span><span class="kw">cip6_select</span>(<span class="dt">data =</span> cve, <span class="dt">program =</span> <span class="st">&quot;cip4name&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="st">  </span><span class="kw">print</span>() <span class="co"># or View() </span></span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="co">#&gt; # A tibble: 6 x 3</span></span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="co">#&gt;   cip6   cip6name                               program          </span></span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="co">#&gt;   &lt;chr&gt;  &lt;chr&gt;                                  &lt;chr&gt;            </span></span>
<span id="cb4-6"><a href="#cb4-6"></a><span class="co">#&gt; 1 140801 Civil Engineering, General             Civil Engineering</span></span>
<span id="cb4-7"><a href="#cb4-7"></a><span class="co">#&gt; 2 140802 Geotechnical Engineering               Civil Engineering</span></span>
<span id="cb4-8"><a href="#cb4-8"></a><span class="co">#&gt; 3 140803 Structural Engineering                 Civil Engineering</span></span>
<span id="cb4-9"><a href="#cb4-9"></a><span class="co">#&gt; 4 140804 Transportation and Highway Engineering Civil Engineering</span></span>
<span id="cb4-10"><a href="#cb4-10"></a><span class="co">#&gt; 5 140805 Water Resources Engineering            Civil Engineering</span></span>
<span id="cb4-11"><a href="#cb4-11"></a><span class="co">#&gt; 6 140899 Civil Engineering, Other               Civil Engineering</span></span></code></pre></div>
<p>We repeat for the other three disciplines.</p>
<ul>
<li>For Electrical Engineering, the default 4-digit name is “Electrical, Electronics and Communications Engineering” which we shorten to the more concise “Electrical Engineering” using the <code>program</code> argument.</li>
<li>For the other two disciplines, the <code>cip4name</code> value is used for <code>program</code>.</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>ele &lt;-<span class="st"> </span><span class="kw">cip_filter</span>(<span class="dt">data =</span> cip, <span class="dt">keep_any =</span> <span class="st">&quot;^1410&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="st">  </span><span class="kw">cip6_select</span>(<span class="dt">data =</span> ., <span class="dt">program =</span> <span class="st">&quot;Electrical Engineering&quot;</span>)</span>
<span id="cb5-3"><a href="#cb5-3"></a></span>
<span id="cb5-4"><a href="#cb5-4"></a>mce &lt;-<span class="st"> </span><span class="kw">cip_filter</span>(<span class="dt">data =</span> cip, <span class="dt">keep_any =</span> <span class="st">&quot;^1419&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="st">  </span><span class="kw">cip6_select</span>(<span class="dt">data =</span> ., <span class="dt">program =</span> <span class="st">&quot;cip4name&quot;</span>)</span>
<span id="cb5-6"><a href="#cb5-6"></a></span>
<span id="cb5-7"><a href="#cb5-7"></a>ise &lt;-<span class="st"> </span><span class="kw">cip_filter</span>(<span class="dt">data =</span> cip, <span class="dt">keep_any =</span> <span class="st">&quot;^1435&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="st">  </span><span class="kw">cip6_select</span>(<span class="dt">data =</span> ., <span class="dt">program =</span> <span class="st">&quot;cip4name&quot;</span>)</span></code></pre></div>
<p>We use <code>dplyr::bind_rows()</code> to bind the individual data frames into one data frame.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>program_group &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(cve, ele, mce, ise) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="st">  </span><span class="kw">print</span>() <span class="co"># or View() </span></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="co">#&gt; # A tibble: 12 x 3</span></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="co">#&gt;    cip6   cip6name                                            program           </span></span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="co">#&gt;    &lt;chr&gt;  &lt;chr&gt;                                               &lt;chr&gt;             </span></span>
<span id="cb6-6"><a href="#cb6-6"></a><span class="co">#&gt;  1 140801 Civil Engineering, General                          Civil Engineering </span></span>
<span id="cb6-7"><a href="#cb6-7"></a><span class="co">#&gt;  2 140802 Geotechnical Engineering                            Civil Engineering </span></span>
<span id="cb6-8"><a href="#cb6-8"></a><span class="co">#&gt;  3 140803 Structural Engineering                              Civil Engineering </span></span>
<span id="cb6-9"><a href="#cb6-9"></a><span class="co">#&gt;  4 140804 Transportation and Highway Engineering              Civil Engineering </span></span>
<span id="cb6-10"><a href="#cb6-10"></a><span class="co">#&gt;  5 140805 Water Resources Engineering                         Civil Engineering </span></span>
<span id="cb6-11"><a href="#cb6-11"></a><span class="co">#&gt;  6 140899 Civil Engineering, Other                            Civil Engineering </span></span>
<span id="cb6-12"><a href="#cb6-12"></a><span class="co">#&gt;  7 141001 Electrical, Electronics and Communications Enginee~ Electrical Engine~</span></span>
<span id="cb6-13"><a href="#cb6-13"></a><span class="co">#&gt;  8 141003 Laser and Optical Engineering                       Electrical Engine~</span></span>
<span id="cb6-14"><a href="#cb6-14"></a><span class="co">#&gt;  9 141004 Telecommunications Engineering                      Electrical Engine~</span></span>
<span id="cb6-15"><a href="#cb6-15"></a><span class="co">#&gt; 10 141099 Electrical, Electronics and Communications Enginee~ Electrical Engine~</span></span>
<span id="cb6-16"><a href="#cb6-16"></a><span class="co">#&gt; 11 141901 Mechanical Engineering                              Mechanical Engine~</span></span>
<span id="cb6-17"><a href="#cb6-17"></a><span class="co">#&gt; 12 143501 Industrial Engineering                              Industrial Engine~</span></span></code></pre></div>
<p>To learn more, open the help page by running <code>? cip6_select</code>.</p>
<p><br> <a href="#top">▲ top of page</a></p>
</div>
<div id="optional-select-and-label-procedure" class="section level2">
<h2>Optional select and label procedure</h2>
<p>As a rule, the midfieldr vignettes are written for the R novice. We attempt to facilitate the reader’s understanding by reducing the programming information density and using more and simpler lines of code than strictly necessary.</p>
<p>In this optional section, we rewrite the procedure used above to illustrate a more concise approach that eliminates the row-binding of several data frames and simply operates on one data frame throughout. The programming content is correspondingly more dense—suitable for readers with some programming experience.</p>
<ul>
<li>We select the majors all at once and assign the default 4-digit program names.<br />
</li>
<li>We use <code>stringr::str_detect()</code> to identify <code>cip6</code> values starting with 1410 and use <code>mutate()</code> to change the corresponding <code>program</code> values to Electrical Engineering, replacing the original, longer program name.</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>program_group &lt;-<span class="st"> </span><span class="kw">cip_filter</span>(<span class="dt">data =</span> cip, <span class="dt">keep_any =</span> <span class="kw">c</span>(<span class="st">&quot;^1408&quot;</span>, <span class="st">&quot;^1410&quot;</span>, <span class="st">&quot;^1419&quot;</span>, <span class="st">&quot;^1435&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="st">  </span><span class="kw">cip6_select</span>(<span class="dt">data =</span> ., <span class="dt">program =</span> <span class="st">&quot;cip4name&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">program =</span> <span class="kw">ifelse</span>(<span class="kw">str_detect</span>(cip6, <span class="st">&quot;^1410&quot;</span>), <span class="st">&quot;Electrical Engineering&quot;</span>, program)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="st">  </span><span class="kw">print</span>() <span class="co"># or View() </span></span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="co">#&gt; # A tibble: 12 x 3</span></span>
<span id="cb7-6"><a href="#cb7-6"></a><span class="co">#&gt;    cip6   cip6name                                            program           </span></span>
<span id="cb7-7"><a href="#cb7-7"></a><span class="co">#&gt;    &lt;chr&gt;  &lt;chr&gt;                                               &lt;chr&gt;             </span></span>
<span id="cb7-8"><a href="#cb7-8"></a><span class="co">#&gt;  1 140801 Civil Engineering, General                          Civil Engineering </span></span>
<span id="cb7-9"><a href="#cb7-9"></a><span class="co">#&gt;  2 140802 Geotechnical Engineering                            Civil Engineering </span></span>
<span id="cb7-10"><a href="#cb7-10"></a><span class="co">#&gt;  3 140803 Structural Engineering                              Civil Engineering </span></span>
<span id="cb7-11"><a href="#cb7-11"></a><span class="co">#&gt;  4 140804 Transportation and Highway Engineering              Civil Engineering </span></span>
<span id="cb7-12"><a href="#cb7-12"></a><span class="co">#&gt;  5 140805 Water Resources Engineering                         Civil Engineering </span></span>
<span id="cb7-13"><a href="#cb7-13"></a><span class="co">#&gt;  6 140899 Civil Engineering, Other                            Civil Engineering </span></span>
<span id="cb7-14"><a href="#cb7-14"></a><span class="co">#&gt;  7 141001 Electrical, Electronics and Communications Enginee~ Electrical Engine~</span></span>
<span id="cb7-15"><a href="#cb7-15"></a><span class="co">#&gt;  8 141003 Laser and Optical Engineering                       Electrical Engine~</span></span>
<span id="cb7-16"><a href="#cb7-16"></a><span class="co">#&gt;  9 141004 Telecommunications Engineering                      Electrical Engine~</span></span>
<span id="cb7-17"><a href="#cb7-17"></a><span class="co">#&gt; 10 141099 Electrical, Electronics and Communications Enginee~ Electrical Engine~</span></span>
<span id="cb7-18"><a href="#cb7-18"></a><span class="co">#&gt; 11 141901 Mechanical Engineering                              Mechanical Engine~</span></span>
<span id="cb7-19"><a href="#cb7-19"></a><span class="co">#&gt; 12 143501 Industrial Engineering                              Industrial Engine~</span></span></code></pre></div>
<p>Thus we have 3 lines of code producing the same result as we obtained earlier with 9 lines (excluding the print functions).</p>
<p><br> <a href="#top">▲ top of page</a></p>
</div>
<div id="case-study-program-group" class="section level2">
<h2>Case study program group</h2>
<p><code>case_program_group</code>, a data set identical to the <code>program_group</code> data frame above, is bundled in midfieldr for use in subsequent vignettes and example.</p>
<p>The data are available if midfieldr is loaded.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="kw">library</span>(<span class="st">&quot;midfieldr&quot;</span>)</span>
<span id="cb8-2"><a href="#cb8-2"></a>case_program_group <span class="op">%&gt;%</span></span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="st">  </span><span class="kw">print</span>() <span class="co"># or View() </span></span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="co">#&gt; # A tibble: 12 x 3</span></span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="co">#&gt;    cip6   cip6name                                            program           </span></span>
<span id="cb8-6"><a href="#cb8-6"></a><span class="co">#&gt;    &lt;chr&gt;  &lt;chr&gt;                                               &lt;chr&gt;             </span></span>
<span id="cb8-7"><a href="#cb8-7"></a><span class="co">#&gt;  1 140801 Civil Engineering, General                          Civil Engineering </span></span>
<span id="cb8-8"><a href="#cb8-8"></a><span class="co">#&gt;  2 140802 Geotechnical Engineering                            Civil Engineering </span></span>
<span id="cb8-9"><a href="#cb8-9"></a><span class="co">#&gt;  3 140803 Structural Engineering                              Civil Engineering </span></span>
<span id="cb8-10"><a href="#cb8-10"></a><span class="co">#&gt;  4 140804 Transportation and Highway Engineering              Civil Engineering </span></span>
<span id="cb8-11"><a href="#cb8-11"></a><span class="co">#&gt;  5 140805 Water Resources Engineering                         Civil Engineering </span></span>
<span id="cb8-12"><a href="#cb8-12"></a><span class="co">#&gt;  6 140899 Civil Engineering, Other                            Civil Engineering </span></span>
<span id="cb8-13"><a href="#cb8-13"></a><span class="co">#&gt;  7 141001 Electrical, Electronics and Communications Enginee~ Electrical Engine~</span></span>
<span id="cb8-14"><a href="#cb8-14"></a><span class="co">#&gt;  8 141003 Laser and Optical Engineering                       Electrical Engine~</span></span>
<span id="cb8-15"><a href="#cb8-15"></a><span class="co">#&gt;  9 141004 Telecommunications Engineering                      Electrical Engine~</span></span>
<span id="cb8-16"><a href="#cb8-16"></a><span class="co">#&gt; 10 141099 Electrical, Electronics and Communications Enginee~ Electrical Engine~</span></span>
<span id="cb8-17"><a href="#cb8-17"></a><span class="co">#&gt; 11 141901 Mechanical Engineering                              Mechanical Engine~</span></span>
<span id="cb8-18"><a href="#cb8-18"></a><span class="co">#&gt; 12 143501 Industrial Engineering                              Industrial Engine~</span></span></code></pre></div>
<p><br> <a href="#top">▲ top of page</a></p>
</div>
<div id="program-label-options" class="section level2">
<h2>Program label options</h2>
<p>In this section, we explore the arguments of <code>cip6_select()</code>. There are four options for <code>program</code> argument</p>
<p><br></p>
<p><strong>Option 1:</strong> When a string of our own choosing is assigned to <code>program</code>, then that string is the value.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>cip <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="st">  </span><span class="kw">cip_filter</span>(<span class="dt">data =</span> ., <span class="dt">keep_any =</span> <span class="st">&quot;^31&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="st">  </span><span class="kw">cip6_select</span>(<span class="dt">data =</span> ., <span class="dt">program =</span> <span class="st">&quot;Leisure Studies&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="st">  </span><span class="kw">print</span>() <span class="co"># or View()</span></span></code></pre></div>
<table class="table" style="font-size: 11px; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
cip6
</th>
<th style="text-align:left;">
cip6name
</th>
<th style="text-align:left;">
program
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
310101
</td>
<td style="text-align:left;">
Parks, Recreation and Leisure Studies
</td>
<td style="text-align:left;">
Leisure Studies
</td>
</tr>
<tr>
<td style="text-align:left;">
310301
</td>
<td style="text-align:left;">
Parks, Recreation and Leisure Facilities Management
</td>
<td style="text-align:left;">
Leisure Studies
</td>
</tr>
<tr>
<td style="text-align:left;">
310302
</td>
<td style="text-align:left;">
Golf Course Operation and Grounds Management
</td>
<td style="text-align:left;">
Leisure Studies
</td>
</tr>
<tr>
<td style="text-align:left;">
310399
</td>
<td style="text-align:left;">
Parks, Recreation and Leisure Facilities Management, Other
</td>
<td style="text-align:left;">
Leisure Studies
</td>
</tr>
<tr>
<td style="text-align:left;">
310501
</td>
<td style="text-align:left;">
Health and Physical Education, General
</td>
<td style="text-align:left;">
Leisure Studies
</td>
</tr>
<tr>
<td style="text-align:left;">
310504
</td>
<td style="text-align:left;">
Sport and Fitness Administration, Management
</td>
<td style="text-align:left;">
Leisure Studies
</td>
</tr>
<tr>
<td style="text-align:left;">
310505
</td>
<td style="text-align:left;">
Kinesiology and Exercise Science
</td>
<td style="text-align:left;">
Leisure Studies
</td>
</tr>
<tr>
<td style="text-align:left;">
310507
</td>
<td style="text-align:left;">
Physical Fitness Technician
</td>
<td style="text-align:left;">
Leisure Studies
</td>
</tr>
<tr>
<td style="text-align:left;">
310508
</td>
<td style="text-align:left;">
Sports Studies
</td>
<td style="text-align:left;">
Leisure Studies
</td>
</tr>
<tr>
<td style="text-align:left;">
310599
</td>
<td style="text-align:left;">
Health and Physical Education, Fitness, Other
</td>
<td style="text-align:left;">
Leisure Studies
</td>
</tr>
<tr>
<td style="text-align:left;">
310601
</td>
<td style="text-align:left;">
Outdoor Education
</td>
<td style="text-align:left;">
Leisure Studies
</td>
</tr>
<tr>
<td style="text-align:left;">
319999
</td>
<td style="text-align:left;">
Parks, Recreation, Leisure and Fitness Studies, Other
</td>
<td style="text-align:left;">
Leisure Studies
</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><strong>Option 2:</strong> When <code>program = &quot;named_series&quot;</code> and <code>data</code> matches one of the named <code>cip_series</code>, then the value from the named series is assigned to the new column.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>cip <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb10-2"><a href="#cb10-2"></a><span class="st">  </span><span class="kw">cip_filter</span>(<span class="dt">data =</span> ., <span class="dt">keep_any =</span> cip_math_stat) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="st">  </span><span class="kw">cip6_select</span>(<span class="dt">data =</span> ., <span class="dt">program =</span> <span class="st">&quot;named_series&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb10-4"><a href="#cb10-4"></a><span class="st">  </span><span class="kw">print</span>() <span class="co"># or View()</span></span></code></pre></div>
<table class="table" style="font-size: 11px; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
cip6
</th>
<th style="text-align:left;">
cip6name
</th>
<th style="text-align:left;">
program
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
270101
</td>
<td style="text-align:left;">
Mathematics, General
</td>
<td style="text-align:left;">
Mathematics and Statistics
</td>
</tr>
<tr>
<td style="text-align:left;">
270102
</td>
<td style="text-align:left;">
Algebra and Number Theory
</td>
<td style="text-align:left;">
Mathematics and Statistics
</td>
</tr>
<tr>
<td style="text-align:left;">
270103
</td>
<td style="text-align:left;">
Analysis and Functional Analysis
</td>
<td style="text-align:left;">
Mathematics and Statistics
</td>
</tr>
<tr>
<td style="text-align:left;">
270104
</td>
<td style="text-align:left;">
Geometry, Geometric Analysis
</td>
<td style="text-align:left;">
Mathematics and Statistics
</td>
</tr>
<tr>
<td style="text-align:left;">
270105
</td>
<td style="text-align:left;">
Topology and Foundations
</td>
<td style="text-align:left;">
Mathematics and Statistics
</td>
</tr>
<tr>
<td style="text-align:left;">
270199
</td>
<td style="text-align:left;">
Mathematics, Other
</td>
<td style="text-align:left;">
Mathematics and Statistics
</td>
</tr>
<tr>
<td style="text-align:left;">
270301
</td>
<td style="text-align:left;">
Applied Mathematics
</td>
<td style="text-align:left;">
Mathematics and Statistics
</td>
</tr>
<tr>
<td style="text-align:left;">
270303
</td>
<td style="text-align:left;">
Computational Mathematics
</td>
<td style="text-align:left;">
Mathematics and Statistics
</td>
</tr>
<tr>
<td style="text-align:left;">
270304
</td>
<td style="text-align:left;">
Computational and Applied Mathematics
</td>
<td style="text-align:left;">
Mathematics and Statistics
</td>
</tr>
<tr>
<td style="text-align:left;">
270305
</td>
<td style="text-align:left;">
Financial Mathematics
</td>
<td style="text-align:left;">
Mathematics and Statistics
</td>
</tr>
<tr>
<td style="text-align:left;">
270306
</td>
<td style="text-align:left;">
Mathematical Biology
</td>
<td style="text-align:left;">
Mathematics and Statistics
</td>
</tr>
<tr>
<td style="text-align:left;">
270399
</td>
<td style="text-align:left;">
Applied Mathematics, Other
</td>
<td style="text-align:left;">
Mathematics and Statistics
</td>
</tr>
<tr>
<td style="text-align:left;">
270501
</td>
<td style="text-align:left;">
Statistics, General
</td>
<td style="text-align:left;">
Mathematics and Statistics
</td>
</tr>
<tr>
<td style="text-align:left;">
270502
</td>
<td style="text-align:left;">
Mathematical Statistics and Probability
</td>
<td style="text-align:left;">
Mathematics and Statistics
</td>
</tr>
<tr>
<td style="text-align:left;">
270503
</td>
<td style="text-align:left;">
Mathematics and Statistics
</td>
<td style="text-align:left;">
Mathematics and Statistics
</td>
</tr>
<tr>
<td style="text-align:left;">
270599
</td>
<td style="text-align:left;">
Statistics, Other
</td>
<td style="text-align:left;">
Mathematics and Statistics
</td>
</tr>
<tr>
<td style="text-align:left;">
279999
</td>
<td style="text-align:left;">
Mathematics and Statistics, Other
</td>
<td style="text-align:left;">
Mathematics and Statistics
</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><strong>Option 3:</strong> When <code>program</code> is assigned one of three strings (“cip2name”, “cip4name”, or “cip6name”), then the 2-, 4-, or 6-digit names from <code>cip</code> are assigned to the new column.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="co"># 2-digit </span></span>
<span id="cb11-2"><a href="#cb11-2"></a>cip <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="st">  </span><span class="kw">cip_filter</span>(<span class="dt">data =</span> ., <span class="dt">keep_any =</span> <span class="st">&quot;^31&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb11-4"><a href="#cb11-4"></a><span class="st">  </span><span class="kw">cip6_select</span>(<span class="dt">data =</span> ., <span class="dt">program =</span> <span class="st">&quot;cip2name&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb11-5"><a href="#cb11-5"></a><span class="st">  </span><span class="kw">print</span>() <span class="co"># or View()</span></span></code></pre></div>
<table class="table" style="font-size: 11px; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
cip6
</th>
<th style="text-align:left;">
cip6name
</th>
<th style="text-align:left;">
program
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
310101
</td>
<td style="text-align:left;">
Parks, Recreation and Leisure Studies
</td>
<td style="text-align:left;">
Parks, Recreation, Leisure and Fitness Studies
</td>
</tr>
<tr>
<td style="text-align:left;">
310301
</td>
<td style="text-align:left;">
Parks, Recreation and Leisure Facilities Management
</td>
<td style="text-align:left;">
Parks, Recreation, Leisure and Fitness Studies
</td>
</tr>
<tr>
<td style="text-align:left;">
310302
</td>
<td style="text-align:left;">
Golf Course Operation and Grounds Management
</td>
<td style="text-align:left;">
Parks, Recreation, Leisure and Fitness Studies
</td>
</tr>
<tr>
<td style="text-align:left;">
310399
</td>
<td style="text-align:left;">
Parks, Recreation and Leisure Facilities Management, Other
</td>
<td style="text-align:left;">
Parks, Recreation, Leisure and Fitness Studies
</td>
</tr>
<tr>
<td style="text-align:left;">
310501
</td>
<td style="text-align:left;">
Health and Physical Education, General
</td>
<td style="text-align:left;">
Parks, Recreation, Leisure and Fitness Studies
</td>
</tr>
<tr>
<td style="text-align:left;">
310504
</td>
<td style="text-align:left;">
Sport and Fitness Administration, Management
</td>
<td style="text-align:left;">
Parks, Recreation, Leisure and Fitness Studies
</td>
</tr>
<tr>
<td style="text-align:left;">
310505
</td>
<td style="text-align:left;">
Kinesiology and Exercise Science
</td>
<td style="text-align:left;">
Parks, Recreation, Leisure and Fitness Studies
</td>
</tr>
<tr>
<td style="text-align:left;">
310507
</td>
<td style="text-align:left;">
Physical Fitness Technician
</td>
<td style="text-align:left;">
Parks, Recreation, Leisure and Fitness Studies
</td>
</tr>
<tr>
<td style="text-align:left;">
310508
</td>
<td style="text-align:left;">
Sports Studies
</td>
<td style="text-align:left;">
Parks, Recreation, Leisure and Fitness Studies
</td>
</tr>
<tr>
<td style="text-align:left;">
310599
</td>
<td style="text-align:left;">
Health and Physical Education, Fitness, Other
</td>
<td style="text-align:left;">
Parks, Recreation, Leisure and Fitness Studies
</td>
</tr>
<tr>
<td style="text-align:left;">
310601
</td>
<td style="text-align:left;">
Outdoor Education
</td>
<td style="text-align:left;">
Parks, Recreation, Leisure and Fitness Studies
</td>
</tr>
<tr>
<td style="text-align:left;">
319999
</td>
<td style="text-align:left;">
Parks, Recreation, Leisure and Fitness Studies, Other
</td>
<td style="text-align:left;">
Parks, Recreation, Leisure and Fitness Studies
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="co"># 4-digit </span></span>
<span id="cb12-2"><a href="#cb12-2"></a>cip <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb12-3"><a href="#cb12-3"></a><span class="st">  </span><span class="kw">cip_filter</span>(<span class="dt">data =</span> ., <span class="dt">keep_any =</span> <span class="st">&quot;^31&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb12-4"><a href="#cb12-4"></a><span class="st">  </span><span class="kw">cip6_select</span>(<span class="dt">data =</span> ., <span class="dt">program =</span> <span class="st">&quot;cip4name&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb12-5"><a href="#cb12-5"></a><span class="st">  </span><span class="kw">print</span>() <span class="co"># or View() </span></span></code></pre></div>
<table class="table" style="font-size: 11px; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
cip6
</th>
<th style="text-align:left;">
cip6name
</th>
<th style="text-align:left;">
program
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
310101
</td>
<td style="text-align:left;">
Parks, Recreation and Leisure Studies
</td>
<td style="text-align:left;">
Parks, Recreation and Leisure Studies
</td>
</tr>
<tr>
<td style="text-align:left;">
310301
</td>
<td style="text-align:left;">
Parks, Recreation and Leisure Facilities Management
</td>
<td style="text-align:left;">
Parks, Recreation and Leisure Facilities Management
</td>
</tr>
<tr>
<td style="text-align:left;">
310302
</td>
<td style="text-align:left;">
Golf Course Operation and Grounds Management
</td>
<td style="text-align:left;">
Parks, Recreation and Leisure Facilities Management
</td>
</tr>
<tr>
<td style="text-align:left;">
310399
</td>
<td style="text-align:left;">
Parks, Recreation and Leisure Facilities Management, Other
</td>
<td style="text-align:left;">
Parks, Recreation and Leisure Facilities Management
</td>
</tr>
<tr>
<td style="text-align:left;">
310501
</td>
<td style="text-align:left;">
Health and Physical Education, General
</td>
<td style="text-align:left;">
Health and Physical Education, Fitness
</td>
</tr>
<tr>
<td style="text-align:left;">
310504
</td>
<td style="text-align:left;">
Sport and Fitness Administration, Management
</td>
<td style="text-align:left;">
Health and Physical Education, Fitness
</td>
</tr>
<tr>
<td style="text-align:left;">
310505
</td>
<td style="text-align:left;">
Kinesiology and Exercise Science
</td>
<td style="text-align:left;">
Health and Physical Education, Fitness
</td>
</tr>
<tr>
<td style="text-align:left;">
310507
</td>
<td style="text-align:left;">
Physical Fitness Technician
</td>
<td style="text-align:left;">
Health and Physical Education, Fitness
</td>
</tr>
<tr>
<td style="text-align:left;">
310508
</td>
<td style="text-align:left;">
Sports Studies
</td>
<td style="text-align:left;">
Health and Physical Education, Fitness
</td>
</tr>
<tr>
<td style="text-align:left;">
310599
</td>
<td style="text-align:left;">
Health and Physical Education, Fitness, Other
</td>
<td style="text-align:left;">
Health and Physical Education, Fitness
</td>
</tr>
<tr>
<td style="text-align:left;">
310601
</td>
<td style="text-align:left;">
Outdoor Education
</td>
<td style="text-align:left;">
Outdoor Education
</td>
</tr>
<tr>
<td style="text-align:left;">
319999
</td>
<td style="text-align:left;">
Parks, Recreation, Leisure and Fitness Studies, Other
</td>
<td style="text-align:left;">
Parks, Recreation, Leisure and Fitness Studies, Other
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="co"># 6-digit </span></span>
<span id="cb13-2"><a href="#cb13-2"></a>cip <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb13-3"><a href="#cb13-3"></a><span class="st">  </span><span class="kw">cip_filter</span>(<span class="dt">data =</span> ., <span class="dt">keep_any =</span> <span class="st">&quot;^31&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb13-4"><a href="#cb13-4"></a><span class="st">  </span><span class="kw">cip6_select</span>(<span class="dt">data =</span> ., <span class="dt">program =</span> <span class="st">&quot;cip6name&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb13-5"><a href="#cb13-5"></a><span class="st">  </span><span class="kw">print</span>() <span class="co"># or View() </span></span></code></pre></div>
<table class="table" style="font-size: 11px; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
cip6
</th>
<th style="text-align:left;">
cip6name
</th>
<th style="text-align:left;">
program
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
310101
</td>
<td style="text-align:left;">
Parks, Recreation and Leisure Studies
</td>
<td style="text-align:left;">
Parks, Recreation and Leisure Studies
</td>
</tr>
<tr>
<td style="text-align:left;">
310301
</td>
<td style="text-align:left;">
Parks, Recreation and Leisure Facilities Management
</td>
<td style="text-align:left;">
Parks, Recreation and Leisure Facilities Management
</td>
</tr>
<tr>
<td style="text-align:left;">
310302
</td>
<td style="text-align:left;">
Golf Course Operation and Grounds Management
</td>
<td style="text-align:left;">
Golf Course Operation and Grounds Management
</td>
</tr>
<tr>
<td style="text-align:left;">
310399
</td>
<td style="text-align:left;">
Parks, Recreation and Leisure Facilities Management, Other
</td>
<td style="text-align:left;">
Parks, Recreation and Leisure Facilities Management, Other
</td>
</tr>
<tr>
<td style="text-align:left;">
310501
</td>
<td style="text-align:left;">
Health and Physical Education, General
</td>
<td style="text-align:left;">
Health and Physical Education, General
</td>
</tr>
<tr>
<td style="text-align:left;">
310504
</td>
<td style="text-align:left;">
Sport and Fitness Administration, Management
</td>
<td style="text-align:left;">
Sport and Fitness Administration, Management
</td>
</tr>
<tr>
<td style="text-align:left;">
310505
</td>
<td style="text-align:left;">
Kinesiology and Exercise Science
</td>
<td style="text-align:left;">
Kinesiology and Exercise Science
</td>
</tr>
<tr>
<td style="text-align:left;">
310507
</td>
<td style="text-align:left;">
Physical Fitness Technician
</td>
<td style="text-align:left;">
Physical Fitness Technician
</td>
</tr>
<tr>
<td style="text-align:left;">
310508
</td>
<td style="text-align:left;">
Sports Studies
</td>
<td style="text-align:left;">
Sports Studies
</td>
</tr>
<tr>
<td style="text-align:left;">
310599
</td>
<td style="text-align:left;">
Health and Physical Education, Fitness, Other
</td>
<td style="text-align:left;">
Health and Physical Education, Fitness, Other
</td>
</tr>
<tr>
<td style="text-align:left;">
310601
</td>
<td style="text-align:left;">
Outdoor Education
</td>
<td style="text-align:left;">
Outdoor Education
</td>
</tr>
<tr>
<td style="text-align:left;">
319999
</td>
<td style="text-align:left;">
Parks, Recreation, Leisure and Fitness Studies, Other
</td>
<td style="text-align:left;">
Parks, Recreation, Leisure and Fitness Studies, Other
</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><strong>Option 4:</strong> When <code>program = NULL</code> (default), then the 4-digit CIP program name assigned to the new column. This result is identical to <code>program = &quot;cip4name&quot;</code>.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="co"># program is NULL</span></span>
<span id="cb14-2"><a href="#cb14-2"></a>cip <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb14-3"><a href="#cb14-3"></a><span class="st">  </span><span class="kw">cip_filter</span>(<span class="dt">data =</span> ., <span class="dt">keep_any =</span> <span class="st">&quot;^31&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb14-4"><a href="#cb14-4"></a><span class="st">  </span><span class="kw">cip6_select</span>(<span class="dt">data =</span> .) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb14-5"><a href="#cb14-5"></a><span class="st">  </span><span class="kw">print</span>() <span class="co"># or View()</span></span></code></pre></div>
<table class="table" style="font-size: 11px; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
cip6
</th>
<th style="text-align:left;">
cip6name
</th>
<th style="text-align:left;">
program
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
310101
</td>
<td style="text-align:left;">
Parks, Recreation and Leisure Studies
</td>
<td style="text-align:left;">
Parks, Recreation and Leisure Studies
</td>
</tr>
<tr>
<td style="text-align:left;">
310301
</td>
<td style="text-align:left;">
Parks, Recreation and Leisure Facilities Management
</td>
<td style="text-align:left;">
Parks, Recreation and Leisure Facilities Management
</td>
</tr>
<tr>
<td style="text-align:left;">
310302
</td>
<td style="text-align:left;">
Golf Course Operation and Grounds Management
</td>
<td style="text-align:left;">
Parks, Recreation and Leisure Facilities Management
</td>
</tr>
<tr>
<td style="text-align:left;">
310399
</td>
<td style="text-align:left;">
Parks, Recreation and Leisure Facilities Management, Other
</td>
<td style="text-align:left;">
Parks, Recreation and Leisure Facilities Management
</td>
</tr>
<tr>
<td style="text-align:left;">
310501
</td>
<td style="text-align:left;">
Health and Physical Education, General
</td>
<td style="text-align:left;">
Health and Physical Education, Fitness
</td>
</tr>
<tr>
<td style="text-align:left;">
310504
</td>
<td style="text-align:left;">
Sport and Fitness Administration, Management
</td>
<td style="text-align:left;">
Health and Physical Education, Fitness
</td>
</tr>
<tr>
<td style="text-align:left;">
310505
</td>
<td style="text-align:left;">
Kinesiology and Exercise Science
</td>
<td style="text-align:left;">
Health and Physical Education, Fitness
</td>
</tr>
<tr>
<td style="text-align:left;">
310507
</td>
<td style="text-align:left;">
Physical Fitness Technician
</td>
<td style="text-align:left;">
Health and Physical Education, Fitness
</td>
</tr>
<tr>
<td style="text-align:left;">
310508
</td>
<td style="text-align:left;">
Sports Studies
</td>
<td style="text-align:left;">
Health and Physical Education, Fitness
</td>
</tr>
<tr>
<td style="text-align:left;">
310599
</td>
<td style="text-align:left;">
Health and Physical Education, Fitness, Other
</td>
<td style="text-align:left;">
Health and Physical Education, Fitness
</td>
</tr>
<tr>
<td style="text-align:left;">
310601
</td>
<td style="text-align:left;">
Outdoor Education
</td>
<td style="text-align:left;">
Outdoor Education
</td>
</tr>
<tr>
<td style="text-align:left;">
319999
</td>
<td style="text-align:left;">
Parks, Recreation, Leisure and Fitness Studies, Other
</td>
<td style="text-align:left;">
Parks, Recreation, Leisure and Fitness Studies, Other
</td>
</tr>
</tbody>
</table>
<p><br> <a href="#top">▲ top of page</a></p>
</div>
<div id="non-midfieldr-cip-variables" class="section level2">
<h2>Non-midfieldr CIP variables</h2>
<p>Optional arguments in <code>cip6_select()</code> accommodate the possibility that one uses a CIP data frame with different variable names than those in <code>midfieldr::cip</code>. The four columns accommodated are <code>cip6</code>, <code>cip6name</code>, <code>cip4name</code>, and <code>cip2name</code>.</p>
<p>For illustration only, let’s create a CIP data frame called <code>nonstandard_cip</code> with a different name for the two variables <code>cip6</code> and <code>cip6name</code>.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>nonstandard_cip &lt;-<span class="st"> </span>cip <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb15-2"><a href="#cb15-2"></a><span class="st">  </span><span class="kw">rename</span>(<span class="st">&quot;code_6&quot;</span> =<span class="st"> </span>cip6, <span class="st">&quot;name_6&quot;</span> =<span class="st"> </span>cip6name) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb15-3"><a href="#cb15-3"></a><span class="st">  </span><span class="kw">print</span>() <span class="co"># or View() </span></span>
<span id="cb15-4"><a href="#cb15-4"></a><span class="co">#&gt; # A tibble: 1,584 x 6</span></span>
<span id="cb15-5"><a href="#cb15-5"></a><span class="co">#&gt;   cip2  cip2name                cip4  cip4name          code_6 name_6           </span></span>
<span id="cb15-6"><a href="#cb15-6"></a><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt;                   &lt;chr&gt; &lt;chr&gt;             &lt;chr&gt;  &lt;chr&gt;            </span></span>
<span id="cb15-7"><a href="#cb15-7"></a><span class="co">#&gt; 1 01    Agriculture, Agricultu~ 0100  Agriculture, Gen~ 010000 Agriculture, Gen~</span></span>
<span id="cb15-8"><a href="#cb15-8"></a><span class="co">#&gt; 2 01    Agriculture, Agricultu~ 0101  Agricultural Bus~ 010101 Agricultural Bus~</span></span>
<span id="cb15-9"><a href="#cb15-9"></a><span class="co">#&gt; 3 01    Agriculture, Agricultu~ 0101  Agricultural Bus~ 010102 Agribusiness, Ag~</span></span>
<span id="cb15-10"><a href="#cb15-10"></a><span class="co">#&gt; 4 01    Agriculture, Agricultu~ 0101  Agricultural Bus~ 010103 Agricultural Eco~</span></span>
<span id="cb15-11"><a href="#cb15-11"></a><span class="co">#&gt; 5 01    Agriculture, Agricultu~ 0101  Agricultural Bus~ 010104 Farm, Farm and R~</span></span>
<span id="cb15-12"><a href="#cb15-12"></a><span class="co">#&gt; # ... with 1,579 more rows</span></span></code></pre></div>
<p><strong>Option 1:</strong> If the non-standard variable names must be kept intact, then we use the optional arguments <code>cip6</code> and <code>cip6name</code> so that <code>cip6_select()</code> can operate on the nonstandard column names.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>nonstandard_cip <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb16-2"><a href="#cb16-2"></a><span class="st">  </span><span class="kw">cip_filter</span>(<span class="dt">data =</span> ., <span class="dt">keep_any =</span> <span class="st">&quot;^31&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb16-3"><a href="#cb16-3"></a><span class="st">  </span><span class="kw">cip6_select</span>(<span class="dt">program =</span> <span class="st">&quot;Leisure Studies&quot;</span>, <span class="dt">cip6 =</span> <span class="st">&quot;code_6&quot;</span>, <span class="dt">cip6name =</span> <span class="st">&quot;name_6&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb16-4"><a href="#cb16-4"></a><span class="st">  </span><span class="kw">print</span>() <span class="co"># or View() </span></span>
<span id="cb16-5"><a href="#cb16-5"></a><span class="co">#&gt; # A tibble: 12 x 3</span></span>
<span id="cb16-6"><a href="#cb16-6"></a><span class="co">#&gt;   code_6 name_6                                                   program       </span></span>
<span id="cb16-7"><a href="#cb16-7"></a><span class="co">#&gt;   &lt;chr&gt;  &lt;chr&gt;                                                    &lt;chr&gt;         </span></span>
<span id="cb16-8"><a href="#cb16-8"></a><span class="co">#&gt; 1 310101 Parks, Recreation and Leisure Studies                    Leisure Studi~</span></span>
<span id="cb16-9"><a href="#cb16-9"></a><span class="co">#&gt; 2 310301 Parks, Recreation and Leisure Facilities Management      Leisure Studi~</span></span>
<span id="cb16-10"><a href="#cb16-10"></a><span class="co">#&gt; 3 310302 Golf Course Operation and Grounds Management             Leisure Studi~</span></span>
<span id="cb16-11"><a href="#cb16-11"></a><span class="co">#&gt; 4 310399 Parks, Recreation and Leisure Facilities Management, Ot~ Leisure Studi~</span></span>
<span id="cb16-12"><a href="#cb16-12"></a><span class="co">#&gt; 5 310501 Health and Physical Education, General                   Leisure Studi~</span></span>
<span id="cb16-13"><a href="#cb16-13"></a><span class="co">#&gt; # ... with 7 more rows</span></span></code></pre></div>
<p><strong>Option 2:</strong> If the non-standard variable names do not have to be kept intact, the simple option is to <code>dplyr::rename()</code> the nonstandard variable names to the standard names, e.g.,</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>standard_cip &lt;-<span class="st"> </span>nonstandard_cip <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb17-2"><a href="#cb17-2"></a><span class="st">  </span><span class="kw">cip_filter</span>(<span class="dt">data =</span> ., <span class="dt">keep_any =</span> <span class="st">&quot;^31&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb17-3"><a href="#cb17-3"></a><span class="st">  </span><span class="kw">rename</span>(<span class="st">&quot;cip6&quot;</span> =<span class="st"> </span>code_<span class="dv">6</span>, <span class="st">&quot;cip6name&quot;</span> =<span class="st"> </span>name_<span class="dv">6</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb17-4"><a href="#cb17-4"></a><span class="st">  </span><span class="kw">print</span>() <span class="co"># or View() </span></span>
<span id="cb17-5"><a href="#cb17-5"></a><span class="co">#&gt; # A tibble: 12 x 6</span></span>
<span id="cb17-6"><a href="#cb17-6"></a><span class="co">#&gt;   cip2  cip2name           cip4  cip4name             cip6  cip6name            </span></span>
<span id="cb17-7"><a href="#cb17-7"></a><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt;              &lt;chr&gt; &lt;chr&gt;                &lt;chr&gt; &lt;chr&gt;               </span></span>
<span id="cb17-8"><a href="#cb17-8"></a><span class="co">#&gt; 1 31    Parks, Recreation~ 3101  Parks, Recreation a~ 3101~ Parks, Recreation a~</span></span>
<span id="cb17-9"><a href="#cb17-9"></a><span class="co">#&gt; 2 31    Parks, Recreation~ 3103  Parks, Recreation a~ 3103~ Parks, Recreation a~</span></span>
<span id="cb17-10"><a href="#cb17-10"></a><span class="co">#&gt; 3 31    Parks, Recreation~ 3103  Parks, Recreation a~ 3103~ Golf Course Operati~</span></span>
<span id="cb17-11"><a href="#cb17-11"></a><span class="co">#&gt; 4 31    Parks, Recreation~ 3103  Parks, Recreation a~ 3103~ Parks, Recreation a~</span></span>
<span id="cb17-12"><a href="#cb17-12"></a><span class="co">#&gt; 5 31    Parks, Recreation~ 3105  Health and Physical~ 3105~ Health and Physical~</span></span>
<span id="cb17-13"><a href="#cb17-13"></a><span class="co">#&gt; # ... with 7 more rows</span></span></code></pre></div>
<p>Notes.</p>
<ul>
<li>Similar arguments are made when one has nonstandard column names for <code>cip4name</code> and <code>cip2name</code>.</li>
<li>To learn more about the optional arguments, open the help page by running <code>? cip6_select</code>.</li>
</ul>
<p><br> <a href="#top">▲ top of page</a></p>
</div>
<div id="session-information" class="section level2">
<h2>Session information</h2>
<pre><code> setting  value                       
 version  R version 4.0.1 (2020-06-06)
 os       Windows 10 x64              
 system   x86_64, mingw32             
 ui       RTerm                       
 language (EN)                        
 collate  English_United States.1252  
 ctype    English_United States.1252  
 tz       America/New_York            
 date     2020-06-19                  

 package   * version    date       lib source        
 dplyr     * 1.0.0      2020-05-29 []  CRAN (R 4.0.0)
 midfieldr * 1.0.0.9001 2020-06-19 []  local         
 stringr   * 1.4.0      2019-02-10 []  CRAN (R 4.0.0)

* dependent packages not listed</code></pre>
<p><br> <a href="#top">▲ top of page</a></p>
</div>
<div id="references" class="section level2">
<h2>References</h2>
<div id="refs">

</div>
<p><br> <a href="#top">▲ top of page </a><br />
<a href="../index.html">◁ main page </a></p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
