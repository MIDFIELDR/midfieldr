<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Groupings</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">

div.csl-bib-body { }
div.csl-entry {
clear: both;
}
.hanging div.csl-entry {
margin-left:2em;
text-indent:-2em;
}
div.csl-left-margin {
min-width:2em;
float:left;
}
div.csl-right-inline {
margin-left:2em;
padding-left:1em;
}
div.csl-indent {
margin-left: 2em;
}
</style>

<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Groupings</h1>



<p>We add grouping variables from the MIDFIELD data tables to our blocs
in progress. We select these variables to provide the aggregating
categories we want for a particular metric. Program labels and student
demographics are two of the most common sets of grouping variables we
use.</p>
<p>This vignette in the MIDFIELD workflow.</p>
<ol style="list-style-type: decimal">
<li>Planning<br />
</li>
<li>Initial processing</li>
<li>Blocs<br />
</li>
<li><span style=" font-weight: bold;    color: #b35806 !important;">Groupings</span>
<ul>
<li><span style=" font-weight: bold;    color: #b35806 !important;">Program
labels</span></li>
<li><span style=" font-weight: bold;    color: #b35806 !important;">Demographics</span></li>
<li><span style=" font-weight: bold;    color: #b35806 !important;">Other
variables</span><br />
</li>
</ul></li>
<li>Metrics<br />
</li>
<li>Displays</li>
</ol>
<div id="definitions" class="section level2">
<h2>Definitions</h2>
<dl>
<dt>bloc</dt>
<dd>
<p>A grouping of student-level data dealt with as a unit, for example,
starters, students ever-enrolled, graduates, transfer students,
traditional and non-traditional students, migrators, etc.</p>
</dd>
<dt>grouping variables</dt>
<dd>
<p>Detailed information in the student-level data that further
characterize a bloc of records, typically used to create bloc subsets
for comparison, for example, program, race/ethnicity, sex, age, grade
level, grades, etc.</p>
</dd>
</dl>
</div>
<div id="method" class="section level2">
<h2>Method</h2>
<p>We join grouping variables to a bloc after initial processing (data
sufficiency and degree seeking) and any other subsetting criteria that
define a bloc. The two most common join operations to add grouping
variables are:</p>
<ul>
<li><p><em>Program labels</em> Â  using an <a href="art-030-degree-seeking.html#inner-joins">inner join</a> on
CIPs.</p></li>
<li><p><em>Demographics</em> Â  using a <a href="art-050-blocs.html#left-joins">left join</a> on IDs.</p></li>
</ul>
<p>Other variables too can be usefully joined for grouping operations.
We include examples from <code>student</code>, <code>term</code>, and
<code>degree</code>.</p>
<p><em>Reminder.</em> Â  midfielddata datasets are for practice, not
research.</p>
</div>
<div id="load-data" class="section level2">
<h2>Load data</h2>
<p><em>Start.</em> Â  If you are writing your own script to follow along,
we use these packages in this article:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(midfieldr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(midfielddata)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span></code></pre></div>
<p><em>Load.</em> Â  Practice datasets. View data dictionaries via
<code>?student</code>, <code>?term</code>, <code>?degree</code>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load practice data</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(student, term, degree)</span></code></pre></div>
<p><em>Loads with midfieldr.</em> Â  Prepared data. View data
dictionaries via <code>?study_programs</code>,
<code>?baseline_mcid</code>.</p>
<ul>
<li><p><code>study_programs</code> (derived in <a href="art-040-programs.html#assigning-program-names">Programs</a>).</p></li>
<li><p><code>baseline_mcid</code> (derived in <a href="art-050-blocs.html#initial-processing">Blocs</a>).</p></li>
</ul>
</div>
<div id="initial-processing" class="section level2">
<h2>Initial processing</h2>
<p><em>Select (optional).</em> Â  Reduce the number of columns. Code
reproduced from <a href="art-000-getting-started.html#reusable-code">Getting
started</a>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Optional. Copy of source files with all variables</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>source_student <span class="ot">&lt;-</span> <span class="fu">copy</span>(student)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>source_term <span class="ot">&lt;-</span> <span class="fu">copy</span>(term)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>source_degree <span class="ot">&lt;-</span> <span class="fu">copy</span>(degree)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Optional. Select variables required by midfieldr functions</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>student <span class="ot">&lt;-</span> <span class="fu">select_required</span>(source_student)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>term <span class="ot">&lt;-</span> <span class="fu">select_required</span>(source_term)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>degree <span class="ot">&lt;-</span> <span class="fu">select_required</span>(source_degree)</span></code></pre></div>
<p><em>Initialize.</em> Â  From <code>term</code> and
<code>student</code>, construct a data frame of student IDs filtered for
data sufficiency and degree seeking as described in <a href="art-050-blocs.html#initial-processing">Blocs</a>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Working data frame</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>DT <span class="ot">&lt;-</span> <span class="fu">copy</span>(baseline_mcid)</span></code></pre></div>
<p>We join a CIP variable for examples that join by CIP.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reusable starting state with CIP</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>baseline_cip <span class="ot">&lt;-</span> term[DT, .(mcid, cip6), on <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;mcid&quot;</span>)]</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>baseline_cip <span class="ot">&lt;-</span> <span class="fu">unique</span>(baseline_cip)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>baseline_cip</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                   mcid   cip6</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      1: MCID3111142689 090401</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      2: MCID3111142782 260101</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      3: MCID3111142881 450601</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     ---                      </span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 127347: MCID3112800920 240102</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 127348: MCID3112800920 240199</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 127349: MCID3112870009 240102</span></span></code></pre></div>
</div>
<div id="program-labels" class="section level2">
<h2>Program labels</h2>
<p>At this point in a typical workflow, we have a bloc of student-level
records in progress and a data frame of program labels (similar to
<code>study_programs</code>). Both data frames have a 6-digit CIP
variable to join by.</p>
<p>Program labels serve two main functions:</p>
<ul>
<li><p><em>Filtering variable</em> Â  to finalize a bloc. For example,
âstartersâ or âgraduatesâ usually mean starters or graduates <em>in
specific programs</em>. Thus a bloc procedure typically concludes with a
program filter as in <a href="art-050-blocs.html#filter-by-program">Ever-enrolled</a>, <a href="art-070-starters.html#filter-by-program">Starters</a>, or <a href="art-080-graduates.html#filter-by-program">Graduates</a>.</p></li>
<li><p><em>Grouping variable</em> Â  for summarizing data. Having
filtered a bloc to retain records in specific programs, the program
label is retained and used with other grouping variables such as
race/ethnicity and sex when computing and comparing metrics. Because of
its role in groupings, the program label join is developed in detail in
this vignette.</p></li>
</ul>
<p><em>Rationale for the inner join.</em> Â  An inner join accomplishes
two tasks: adds a column of program labels to the bloc; and filters the
bloc to retain only those observations with CIPs matching the desired
programs.</p>
<p><em>Reset</em> Â  The CIP baseline data frame we preserved earlier is
the intake for this section.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reusable starting state</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>DT <span class="ot">&lt;-</span> <span class="fu">copy</span>(baseline_cip)</span></code></pre></div>
<p><em>Filter.</em> Â  An inner join adds the program label and filters
for matching CIPs.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Join program labels via inner join</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>DT <span class="ot">&lt;-</span> study_programs[DT, on <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;cip6&quot;</span>), nomatch <span class="ot">=</span> <span class="cn">NULL</span>]</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>DT</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         cip6 program           mcid</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    1: 141001      EE MCID3111142965</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    2: 141001      EE MCID3111145102</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    3: 141001      EE MCID3111146537</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ---                              </span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5655: 141901      ME MCID3112641399</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5656: 141901      ME MCID3112641535</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5657: 141901      ME MCID3112698681</span></span></code></pre></div>
<p>We can see the filtering effect by noting that the baseline data
frame had 127,349 observations while the inner join on the selected
programs returned 5657 observations. We can also verify the selected
programs, e.g.,</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Verify program labels</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">unique</span>(DT<span class="sc">$</span>program))</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;CE&quot;  &quot;EE&quot;  &quot;ISE&quot; &quot;ME&quot;</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Verify program CIP codes</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">unique</span>(DT<span class="sc">$</span>cip6))</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;140801&quot; &quot;141001&quot; &quot;141901&quot; &quot;142701&quot; &quot;143501&quot;</span></span></code></pre></div>
<p>Students can migrate between majors having different 6-digit CIP
codes, but those codes might be grouped under a single program label. A
common example in Engineering is the âIndustrial/Systems Engineeringâ
label we assign to following CIP codes:</p>
<ul>
<li>142701 Systems Engineering</li>
<li>143501 Industrial Engineering</li>
<li>143601 Manufacturing Engineering</li>
<li>143701 Operations Research</li>
</ul>
<p>A student migrating among these CIPs would appear in multiple rows in
the current bloc, yet we would not consider their change of CIP a change
of major. The next step addresses this anomaly.</p>
<p><em>Select.</em> Â  Drop the CIP code.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare to filter</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>DT[, cip6 <span class="sc">:</span><span class="er">=</span> <span class="cn">NULL</span>]</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>DT</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       program           mcid</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    1:      EE MCID3111142965</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    2:      EE MCID3111145102</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    3:      EE MCID3111146537</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ---                       </span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5655:      ME MCID3112641399</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5656:      ME MCID3112641535</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5657:      ME MCID3112698681</span></span></code></pre></div>
<p><em>Filter.</em> Â  Filter for unique observations.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Case study ever enrolled</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>DT <span class="ot">&lt;-</span> <span class="fu">unique</span>(DT)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>DT</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       program           mcid</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    1:      EE MCID3111142965</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    2:      EE MCID3111145102</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    3:      EE MCID3111146537</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ---                       </span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5651:      ME MCID3112641399</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5652:      ME MCID3112641535</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5653:      ME MCID3112698681</span></span></code></pre></div>
<p>The difference in the number of observations indicates that this
example includes one student in ISE with two CIPs. We examine that
studentâs record below.</p>
<div id="closer-look" class="section level3">
<h3>Closer look</h3>
<p>Examining the records of selected students in detail.</p>
<p><em>Example 1.</em> Â  This studentâs <code>term</code> record
includes CIP 142701 (Systems Engineering) and CIP 143501 (Industrial
Engineering), both of which are majors in our combined
Industrial/Systems Engineering (ISE) major, illustrating our rationale
for filtering for unique observations by ID/program pairs and not ID/CIP
pairs.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># All terms, one ID</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> term[mcid <span class="sc">==</span> <span class="st">&quot;MCID3111251565&quot;</span>, .(mcid, cip6)]</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Join case study program labels</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> study_programs[x, on <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;cip6&quot;</span>), nomatch <span class="ot">=</span> <span class="cn">NULL</span>]</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Unique CIPs for this student</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(x)</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      cip6 program           mcid</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1: 143501     ISE MCID3111251565</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2: 142701     ISE MCID3111251565</span></span></code></pre></div>
</div>
</div>
<div id="demographics" class="section level2">
<h2>Demographics</h2>
<p>Demographic variables (race/ethnicity and sex) are regularly
left-joined to blocs for grouping and summarizing.</p>
<p><em>Reset</em> Â  The data frame of baseline IDs is the intake for
this section.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reusable starting state</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>DT <span class="ot">&lt;-</span> <span class="fu">copy</span>(baseline_mcid)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>DT</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                  mcid</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     1: MCID3111142689</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     2: MCID3111142782</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     3: MCID3111142881</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    ---               </span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 76873: MCID3112785480</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 76874: MCID3112800920</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 76875: MCID3112870009</span></span></code></pre></div>
<p><em>Select.</em> Â  From <code>student</code>, select the join-by
variable (student ID) and the variables we want to add. By selecting
columns here, we donât have to select columns in the join operation to
follow.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract desired columns</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>cols_we_want <span class="ot">&lt;-</span> student[, .(mcid, race, sex)]</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>cols_we_want</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                  mcid          race    sex</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     1: MCID3111142225         Asian   Male</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     2: MCID3111142283         Asian Female</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     3: MCID3111142290         Asian   Male</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    ---                                    </span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 97553: MCID3112898894         White Female</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 97554: MCID3112898895         White Female</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 97555: MCID3112898940 Other/Unknown   Male</span></span></code></pre></div>
<p><em>Add variables.</em> Â  Left join two data frames, retaining all
variables from both.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add demographics</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>DT <span class="ot">&lt;-</span> cols_we_want[DT, on <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;mcid&quot;</span>)]</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>DT</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                  mcid          race    sex</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     1: MCID3111142689        Latine Female</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     2: MCID3111142782        Latine Female</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     3: MCID3111142881 International   Male</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    ---                                    </span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 76873: MCID3112785480         White   Male</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 76874: MCID3112800920         White Female</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 76875: MCID3112870009         White   Male</span></span></code></pre></div>
<div id="unknown-race-or-sex" class="section level3">
<h3>Unknown <code>race</code> or <code>sex</code></h3>
<p>We often want to remove records for which race/ethnicity or sex are
âunknownâ.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Display values</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(DT<span class="sc">$</span>race)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Latine&quot;          &quot;International&quot;   &quot;White&quot;           &quot;Asian&quot;          </span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [5] &quot;Black&quot;           &quot;Native American&quot; &quot;Other/Unknown&quot;</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(DT<span class="sc">$</span>sex)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Female&quot;  &quot;Male&quot;    &quot;Unknown&quot;</span></span></code></pre></div>
<p><em>Filter.</em> Â  In data.table syntax, we can use
<code>x %ilike% pattern</code> as a case-insensitive wrapper around
<code>grepl()</code> to find matches and partial matches.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove records with unknown sex, if any</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">copy</span>(DT)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> x[<span class="sc">!</span>sex <span class="sc">%ilike%</span> <span class="st">&quot;unknown&quot;</span>]</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>x</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                  mcid          race    sex</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     1: MCID3111142689        Latine Female</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     2: MCID3111142782        Latine Female</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     3: MCID3111142881 International   Male</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    ---                                    </span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 76872: MCID3112785480         White   Male</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 76873: MCID3112800920         White Female</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 76874: MCID3112870009         White   Male</span></span></code></pre></div>
<p>Removing unknown race observations is similar.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove records with unknown sex, if any</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> x[<span class="sc">!</span>race <span class="sc">%ilike%</span> <span class="st">&quot;unknown&quot;</span>]</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>x</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                  mcid          race    sex</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     1: MCID3111142689        Latine Female</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     2: MCID3111142782        Latine Female</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     3: MCID3111142881 International   Male</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    ---                                    </span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 73774: MCID3112785480         White   Male</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 73775: MCID3112800920         White Female</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 73776: MCID3112870009         White   Male</span></span></code></pre></div>
<p>Alternatively, these statements can be combined.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove unknowns in either of two columns</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>DT <span class="ot">&lt;-</span> DT[<span class="sc">!</span>(sex <span class="sc">%ilike%</span> <span class="st">&quot;unknown&quot;</span> <span class="sc">|</span> race <span class="sc">%ilike%</span> <span class="st">&quot;unknown&quot;</span>)]</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Verify equivalence</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="fu">same_content</span>(x, DT)</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>With âunknownsâ removed, the <code>race</code> and <code>sex</code>
values are:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">unique</span>(DT<span class="sc">$</span>race))</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Asian&quot;           &quot;Black&quot;           &quot;International&quot;   &quot;Latine&quot;         </span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [5] &quot;Native American&quot; &quot;White&quot;</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">unique</span>(DT<span class="sc">$</span>sex))</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Female&quot; &quot;Male&quot;</span></span></code></pre></div>
</div>
<div id="add-origin" class="section level3">
<h3>Add <code>origin</code></h3>
<p><code>origin</code> is a demographic variable we use to distinguish
âdomesticâ students from âinternationalâ students. The variable is a
recoding of the <code>race</code> variable.</p>
<p><em>Add a variable.</em> Â  Assuming that race/ethnicity âunknownâ
have been removed, we use a conditional assignment to create the
âoriginâ variable.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Two values for origin</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">copy</span>(DT)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> x[, origin <span class="sc">:</span><span class="er">=</span> <span class="fu">fifelse</span>(race <span class="sc">==</span> <span class="st">&quot;International&quot;</span>, <span class="st">&quot;International&quot;</span>, <span class="st">&quot;Domestic&quot;</span>)]</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>x[]</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                  mcid          race    sex        origin</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     1: MCID3111142689        Latine Female      Domestic</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     2: MCID3111142782        Latine Female      Domestic</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     3: MCID3111142881 International   Male International</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    ---                                                  </span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 73774: MCID3112785480         White   Male      Domestic</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 73775: MCID3112800920         White Female      Domestic</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 73776: MCID3112870009         White   Male      Domestic</span></span></code></pre></div>
<p>With âunknownsâ removed, the <code>origin</code> values are:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">unique</span>(x<span class="sc">$</span>origin))</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Domestic&quot;      &quot;International&quot;</span></span></code></pre></div>
</div>
<div id="add-people" class="section level3">
<h3>Add <code>people</code></h3>
<p><code>people</code> is a demographic variable we use in many of our
summaries. The variable combines the <code>race</code> and
<code>sex</code> variables.</p>
<p><em>Add a variable.</em> Â  We combine race/ethnicity and sex to
create a grouping variable.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">copy</span>(DT)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> x[, people <span class="sc">:</span><span class="er">=</span> <span class="fu">paste</span>(race, sex)]</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<p>With âunknownsâ removed, the <code>people</code> values are:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">unique</span>(x<span class="sc">$</span>people))</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;Asian Female&quot;           &quot;Asian Male&quot;             &quot;Black Female&quot;          </span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4] &quot;Black Male&quot;             &quot;International Female&quot;   &quot;International Male&quot;    </span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7] &quot;Latine Female&quot;          &quot;Latine Male&quot;            &quot;Native American Female&quot;</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10] &quot;Native American Male&quot;   &quot;White Female&quot;           &quot;White Male&quot;</span></span></code></pre></div>
</div>
<div id="add-people-by-origin" class="section level3">
<h3>Add <code>people</code> by <code>origin</code></h3>
<p>Combining the two ideas above, again assuming that the observations
on unknown race/ethnicity and sex have been removed,</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Two values for origin</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">copy</span>(DT)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> x[, origin <span class="sc">:</span><span class="er">=</span> <span class="fu">fifelse</span>(race <span class="sc">==</span> <span class="st">&quot;International&quot;</span>, <span class="st">&quot;International&quot;</span>, <span class="st">&quot;Domestic&quot;</span>)]</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine with sex</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>x[, people <span class="sc">:</span><span class="er">=</span> <span class="fu">paste</span>(origin, sex)]</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Omit unnecessary variables</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> x[, .(mcid, people)]</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>x</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                  mcid             people</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     1: MCID3111142689    Domestic Female</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     2: MCID3111142782    Domestic Female</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     3: MCID3111142881 International Male</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    ---                                  </span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 73774: MCID3112785480      Domestic Male</span></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 73775: MCID3112800920    Domestic Female</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 73776: MCID3112870009      Domestic Male</span></span></code></pre></div>
<p>The possible <code>people</code> values are:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">unique</span>(x<span class="sc">$</span>people))</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Domestic Female&quot;      &quot;Domestic Male&quot;        &quot;International Female&quot;</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [4] &quot;International Male&quot;</span></span></code></pre></div>
</div>
</div>
<div id="other-variables" class="section level2">
<h2>Other variables</h2>
<p>Depending on oneâs research question, any number of MIDFIELD
variables might be used for grouping records. In this section we
illustrate joining other variables from <code>student</code>,
<code>term</code>, and <code>degree</code> to a working data frame.</p>
<p>We use the original source files copied earlier because some
variables we want to use were removed when we applied
<code>select_required()</code>.</p>
<div id="from-student" class="section level3">
<h3>From <code>student</code></h3>
<p><em>Reset</em> Â  Reset the working data frame.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reusable starting state</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>DT <span class="ot">&lt;-</span> <span class="fu">copy</span>(baseline_mcid)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>DT</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                  mcid</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     1: MCID3111142689</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     2: MCID3111142782</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     3: MCID3111142881</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    ---               </span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 76873: MCID3112785480</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 76874: MCID3112800920</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 76875: MCID3112870009</span></span></code></pre></div>
<p>The available variables in the source <code>student</code> data
are:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Variables in the practice data set</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(source_student)</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;mcid&quot;           &quot;institution&quot;    &quot;transfer&quot;       &quot;hours_transfer&quot;</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5] &quot;race&quot;           &quot;sex&quot;            &quot;age_desc&quot;       &quot;us_citizen&quot;    </span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9] &quot;home_zip&quot;       &quot;high_school&quot;    &quot;sat_math&quot;       &quot;sat_verbal&quot;    </span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13] &quot;act_comp&quot;</span></span></code></pre></div>
<p><em>Select.</em> Â  Select our variables and the key (ID).</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract desired columns</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>cols_we_want <span class="ot">&lt;-</span> source_student[, .(mcid, transfer, hours_transfer)]</span></code></pre></div>
<p><em>Add variables.</em> Â  Left join to add new columns.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add desired columns</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>cols_we_want[DT, on <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;mcid&quot;</span>)]</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                  mcid            transfer hours_transfer</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     1: MCID3111142689 First-Time Transfer             NA</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     2: MCID3111142782 First-Time Transfer             NA</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     3: MCID3111142881 First-Time Transfer             NA</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    ---                                                  </span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 76873: MCID3112785480 First-Time Transfer              1</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 76874: MCID3112800920 First-Time Transfer             15</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 76875: MCID3112870009 First-Time Transfer             80</span></span></code></pre></div>
</div>
<div id="from-term" class="section level3">
<h3>From <code>term</code></h3>
<p><em>Reset</em> Â  Reset the working data frame.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reusable starting state</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>DT <span class="ot">&lt;-</span> <span class="fu">copy</span>(baseline_mcid)</span></code></pre></div>
<p>The available variables in the source <code>term</code> data are:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Variables in the practice data set</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(source_term)</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;mcid&quot;                &quot;institution&quot;         &quot;term&quot;               </span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4] &quot;cip6&quot;                &quot;level&quot;               &quot;standing&quot;           </span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7] &quot;coop&quot;                &quot;hours_term&quot;          &quot;hours_term_attempt&quot; </span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10] &quot;hours_cumul&quot;         &quot;hours_cumul_attempt&quot; &quot;gpa_term&quot;           </span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13] &quot;gpa_cumul&quot;</span></span></code></pre></div>
<p><em>Select.</em> Â  Select our variables and the key (ID).</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract desired columns</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>cols_we_want <span class="ot">&lt;-</span> source_term[, .(mcid, term, hours_term, gpa_term)]</span></code></pre></div>
<p><em>Add variables.</em> Â  Left join to add new columns.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add desired columns</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>cols_we_want[DT, on <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;mcid&quot;</span>)]</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                   mcid  term hours_term gpa_term</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      1: MCID3111142689 19883          9     3.33</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      2: MCID3111142782 19883         16     2.80</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      3: MCID3111142782 19885          4     3.00</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     ---                                         </span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 531417: MCID3112870009 19953         12     3.57</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 531418: MCID3112870009 19954          1     4.00</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 531419: MCID3112870009 19983          7     4.00</span></span></code></pre></div>
<p><em>Rows in X with multiple matches in Y.</em> Â  Consistent with the
left join matching rules, students in enrolled in multiple terms will
have multiple rows in the joined data frame. Thus this result has
531,419 observations of 76,875 unique students.</p>
</div>
<div id="from-degree" class="section level3">
<h3>From <code>degree</code></h3>
<p><em>Reset</em> Â  Reset the working data frame.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reusable starting state</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>DT <span class="ot">&lt;-</span> <span class="fu">copy</span>(baseline_mcid)</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>DT</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                  mcid</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     1: MCID3111142689</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     2: MCID3111142782</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     3: MCID3111142881</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    ---               </span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 76873: MCID3112785480</span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 76874: MCID3112800920</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 76875: MCID3112870009</span></span></code></pre></div>
<p>The available variables in the source <code>degree</code> data
are:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Variables in the practice data set</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(source_degree)</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;mcid&quot;        &quot;institution&quot; &quot;term_degree&quot; &quot;cip6&quot;        &quot;degree&quot;</span></span></code></pre></div>
<p><em>Select.</em> Â  Select two variables and the key (ID).</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract desired columns</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>cols_we_want <span class="ot">&lt;-</span> source_degree[, .(mcid, cip6, degree)]</span></code></pre></div>
<p><em>Add variables.</em> Â  Left join to add new columns.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add desired columns</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>cols_we_want[DT, on <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;mcid&quot;</span>)]</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                  mcid   cip6                                     degree</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     1: MCID3111142689 090401             Bachelor of Arts in Journalism</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     2: MCID3111142782 260101 Bachelor of Science in Biological Sciences</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     3: MCID3111142881 450601              Bachelor of Arts in Economics</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    ---                                                                 </span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 76990: MCID3112785480   &lt;NA&gt;                                       &lt;NA&gt;</span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 76991: MCID3112800920   &lt;NA&gt;                                       &lt;NA&gt;</span></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 76992: MCID3112870009   &lt;NA&gt;                                       &lt;NA&gt;</span></span></code></pre></div>
<p><em>Rows in X with no match in Y.</em> Â  Consistent with the left
join matching rules, students in <code>DT</code> who do not graduate
will have NA values in the <code>term_degree</code> and
<code>cip6</code> columns of the joined data tables. Thus this result
has 76,875 unique students of whom 43,786 earned degrees.</p>
</div>
</div>
<div id="reusable-code" class="section level2">
<h2>Reusable code</h2>
<p><em>Program labels preparation.</em> Â  The CIP baseline data frame we
preserved earlier is the intake for this section.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>DT <span class="ot">&lt;-</span> <span class="fu">copy</span>(baseline_cip)</span></code></pre></div>
<p><em>Program labels.</em> Â  A summary code chunk for ready reference.
In gathering a bloc of <em>starters</em>, the join-by variable might be
<code>start</code> instead of <code>cip6</code>.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter by program</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>DT <span class="ot">&lt;-</span> study_programs[DT, on <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;cip6&quot;</span>), nomatch <span class="ot">=</span> <span class="cn">NULL</span>]</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>DT[, cip6 <span class="sc">:</span><span class="er">=</span> <span class="cn">NULL</span>]</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>DT <span class="ot">&lt;-</span> <span class="fu">unique</span>(DT)</span></code></pre></div>
<p><em>Demographics preparation.</em> Â  The data frame of baseline IDs
is the intake for this section.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>DT <span class="ot">&lt;-</span> <span class="fu">copy</span>(baseline_mcid)</span></code></pre></div>
<p><em>Demographics.</em> Â  A summary code chunk for ready
reference.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Join race/ethnicity and sex</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>cols_we_want <span class="ot">&lt;-</span> student[, .(mcid, race, sex)]</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>DT <span class="ot">&lt;-</span> cols_we_want[DT, on <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;mcid&quot;</span>)]</span></code></pre></div>
</div>
<div id="references" class="section level2">
<h2>References</h2>
<div id="refs">

</div>
<style type="text/css">
blockquote {
padding: 10px 20px;
margin: 0 0 20px;
border-left: 0px
}
caption {
color: #525252;
text-align: left;
font-weight: normal;
font-size: medium;
line-height: 1.5;
}
</style>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
