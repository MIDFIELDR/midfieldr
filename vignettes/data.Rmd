---
title: "Data"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Data}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
bibliography: ../inst/REFERENCES.bib
---

```{r setup, echo = FALSE, message = FALSE}
library(knitr)
opts_knit$set(root.dir = "../")
opts_chunk$set(
  echo = TRUE, # varies from one Rmd to another
  message = FALSE,
  warning = FALSE,
  collapse = TRUE,
  comment = "#>",
  error = TRUE,
  purl = FALSE,
  fig.width = 6,
  fig.asp = 1 / 1.6,
  out.width = "70%",
  fig.align = "center",
  fig.path = "../man/figures/data-"
)
knit_hooks$set(inline = function(x) {
  if (!is.numeric(x)) {
    x
  } else if (x >= 10000) {
    prettyNum(round(x, 2), big.mark = ",")
  } else {
    prettyNum(round(x, 2))
  }
})
options(tibble.print_min = 8L, tibble.print_max = 8L)
library(magrittr) # for the pipe %>%
unpack_data <- function(x = data_bits, bit, power10 = 0, decimals = 0) {
  x <- x %>%
    dplyr::filter(name == bit) %>%
    dplyr::select(data) %>%
    unlist() %>%
    unname()
  x <- round(x / 10^power10, decimals)
}
```

```{r echo = FALSE}
data_bits <- midfieldr:::data_bits # ::: for internal variables

obs_cip <- unpack_data(bit = "obs_cip")
var_cip <- unpack_data(bit = "var_cip")
size_cip <- unpack_data(bit = "size_cip")

obs_students <- unpack_data(bit = "obs_students")
var_students <- unpack_data(bit = "var_students")
size_students <- unpack_data(bit = "size_students", power10 = 6)

obs_courses <- unpack_data(bit = "obs_courses", power10 = 6, decimals = 1)
var_courses <- unpack_data(bit = "var_courses")
size_courses <- unpack_data(bit = "size_courses", power10 = 6)

obs_terms <- unpack_data(bit = "obs_terms")
var_terms <- unpack_data(bit = "var_terms")
size_terms <- unpack_data(bit = "size_terms", power10 = 6)

obs_degrees <- unpack_data(bit = "obs_degrees")
var_degrees <- unpack_data(bit = "var_degrees")
size_degrees <- unpack_data(bit = "size_degrees", power10 = 6)
```

The midfieldr package includes Classification of Instructional Programs (CIP) data from the US Department of Education [@cip2010].

- `cip` A data frame with `r obs_cip` observations and `r var_cip` variables of program codes and names at 2, 4, and 6-digit levels. 
- `cip_series` Vectors of CIP 6-digit codes denoting specific groups of programs. 

The midfielddata package provides the stratified sample of student record data from the MIDFIELD database. 

- `midfieldstudents` A data frame with `r obs_students` observations and `r var_students` demographic variables, occupying `r size_students` Mb of memory. Each observation is a unique student.  
- `midfieldcourses` A data frame with `r obs_courses` M observations and `r var_courses` academic course variables, occupying `r size_courses` Mb of memory (the largest of the midfielddata datasets). Each observation is one course in one term for one student. 
- `midfieldterms` A data frame with `r obs_terms` observations and `r var_terms` academic term variables, occupying `r size_terms` Mb of memory. Each observation is one term for one student.  
- `midfielddegrees` A data frame with `r obs_degrees` observations and `r var_degrees` graduation variables, occupying `r size_degrees` Mb of memory. Each observation is a unique student.

The process of designing, compiling, maintaining, protecting, and sharing the MIDFIELD data is described in [@aee2016].

## Installing the packages

midfieldr is not currently available from CRAN. The development version can be installed from GitHub with:

```r
# midfieldr package
devtools::install_github("MIDFIELDR/midfieldr")

# help pages for data 
library(midfieldr)
?cip
?cip_series
```

midfielddata is not currently available from CRAN. The development version can be installed from GitHub with:

```r
# midfielddata package
devtools::install_github("MIDFIELDR/midfielddata")

# help pages for data
library(midfielddata)
?midfieldstudents
?midfieldcourses
?midfieldterms
?midfielddegrees
```


## References
