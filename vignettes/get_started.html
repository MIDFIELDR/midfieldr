<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Get started</title>

<script>// Hide empty <a> tag within highlighted CodeBlock for screen reader accessibility (see https://github.com/jgm/pandoc/issues/6352#issuecomment-626106786) -->
// v0.0.1
// Written by JooYoung Seo (jooyoung@psu.edu) and Atsushi Yasumoto on June 1st, 2020.

document.addEventListener('DOMContentLoaded', function() {
  const codeList = document.getElementsByClassName("sourceCode");
  for (var i = 0; i < codeList.length; i++) {
    var linkList = codeList[i].getElementsByTagName('a');
    for (var j = 0; j < linkList.length; j++) {
      if (linkList[j].innerHTML === "") {
        linkList[j].setAttribute('aria-hidden', 'true');
      }
    }
  }
});
</script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Get started</h1>



<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>In the midfielddata sample, the programs with the greatest numbers of students are Business and Engineering. In this vignette, we compare the number of students ever enrolled in these programs, grouped by sex and race/ethnicity.</p>
<p>We use midfieldr functions to access midfielddata student records. We condition, group and summarize the data, and graph a result. For data carpentry, we use base R and selected syntax from the data.table package.</p>
<div id="this-vignette-uses" class="section level3">
<h3>This vignette uses</h3>
<p>midfieldr functions</p>
<ul>
<li><code>filter_text()</code></li>
<li><code>subset_feasible()</code></li>
<li><code>prepare_multiway()</code></li>
</ul>
<p>data.table syntax</p>
<ul>
<li><code>DT[rows_we_want]</code> subset rows</li>
<li><code>DT[order(col)]</code> arrange rows by values in column</li>
<li><code>DT[, ..cols_we_want]</code> select columns</li>
<li><code>DT[, new_col := FUN]</code> new column, FUN is a value or a function</li>
<li><code>DT[, .(new_col = .N), by = grouping_variables]</code> count frequency N by group</li>
</ul>
<p>packages</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># packages used</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw">library</span>(midfieldr)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="kw">library</span>(midfielddata)</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="kw">library</span>(data.table)</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb1-6"><a href="#cb1-6"></a></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="co"># print max 20 rows, otherwise 10 rows each head/tail</span></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="kw">options</span>(<span class="dt">datatable.print.nrows =</span> <span class="dv">20</span>, <span class="dt">datatable.print.topn =</span> <span class="dv">10</span>)</span></code></pre></div>
</div>
</div>
<div id="gather-programs" class="section level2">
<h2>Gather programs</h2>
<p>Instructional programs are encoded by a 6-digit CIP code. <code>filter_text()</code> accesses the <code>cip</code> data set and retrieves all the 6-digit codes that satisfy stated conditions. In this case, we want all codes that start with 14 (engineering) and 52 (business).</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="co"># engineering</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>engineering &lt;-<span class="st"> </span><span class="kw">filter_text</span>(cip, <span class="dt">keep_text =</span> <span class="st">&quot;^14&quot;</span>, <span class="dt">keep_col =</span> <span class="st">&quot;cip6&quot;</span>)</span>
<span id="cb2-3"><a href="#cb2-3"></a></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co"># add program label</span></span>
<span id="cb2-5"><a href="#cb2-5"></a>engineering[, program <span class="op">:</span><span class="er">=</span><span class="st"> &quot;Engineering&quot;</span>]</span>
<span id="cb2-6"><a href="#cb2-6"></a></span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="co"># examine the result</span></span>
<span id="cb2-8"><a href="#cb2-8"></a>engineering[<span class="kw">order</span>(cip6)]</span>
<span id="cb2-9"><a href="#cb2-9"></a><span class="co">#&gt;       cip6     program</span></span>
<span id="cb2-10"><a href="#cb2-10"></a><span class="co">#&gt;  1: 140101 Engineering</span></span>
<span id="cb2-11"><a href="#cb2-11"></a><span class="co">#&gt;  2: 140102 Engineering</span></span>
<span id="cb2-12"><a href="#cb2-12"></a><span class="co">#&gt;  3: 140201 Engineering</span></span>
<span id="cb2-13"><a href="#cb2-13"></a><span class="co">#&gt;  4: 140301 Engineering</span></span>
<span id="cb2-14"><a href="#cb2-14"></a><span class="co">#&gt;  5: 140401 Engineering</span></span>
<span id="cb2-15"><a href="#cb2-15"></a><span class="co">#&gt;  6: 140501 Engineering</span></span>
<span id="cb2-16"><a href="#cb2-16"></a><span class="co">#&gt;  7: 140601 Engineering</span></span>
<span id="cb2-17"><a href="#cb2-17"></a><span class="co">#&gt;  8: 140701 Engineering</span></span>
<span id="cb2-18"><a href="#cb2-18"></a><span class="co">#&gt;  9: 140702 Engineering</span></span>
<span id="cb2-19"><a href="#cb2-19"></a><span class="co">#&gt; 10: 140799 Engineering</span></span>
<span id="cb2-20"><a href="#cb2-20"></a><span class="co">#&gt; ---                   </span></span>
<span id="cb2-21"><a href="#cb2-21"></a><span class="co">#&gt; 47: 143901 Engineering</span></span>
<span id="cb2-22"><a href="#cb2-22"></a><span class="co">#&gt; 48: 144001 Engineering</span></span>
<span id="cb2-23"><a href="#cb2-23"></a><span class="co">#&gt; 49: 144101 Engineering</span></span>
<span id="cb2-24"><a href="#cb2-24"></a><span class="co">#&gt; 50: 144201 Engineering</span></span>
<span id="cb2-25"><a href="#cb2-25"></a><span class="co">#&gt; 51: 144301 Engineering</span></span>
<span id="cb2-26"><a href="#cb2-26"></a><span class="co">#&gt; 52: 144401 Engineering</span></span>
<span id="cb2-27"><a href="#cb2-27"></a><span class="co">#&gt; 53: 144501 Engineering</span></span>
<span id="cb2-28"><a href="#cb2-28"></a><span class="co">#&gt; 54: 149999 Engineering</span></span>
<span id="cb2-29"><a href="#cb2-29"></a><span class="co">#&gt; 55: 14XXXX Engineering</span></span>
<span id="cb2-30"><a href="#cb2-30"></a><span class="co">#&gt; 56: 14YYYY Engineering</span></span></code></pre></div>
<p>Repeat for business.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="co"># business</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>business &lt;-<span class="st"> </span><span class="kw">filter_text</span>(cip, <span class="dt">keep_text =</span> <span class="st">&quot;^52&quot;</span>, <span class="dt">keep_col =</span> <span class="st">&quot;cip6&quot;</span>)</span>
<span id="cb3-3"><a href="#cb3-3"></a></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="co"># add program label</span></span>
<span id="cb3-5"><a href="#cb3-5"></a>business[, program <span class="op">:</span><span class="er">=</span><span class="st"> &quot;Business&quot;</span>]</span>
<span id="cb3-6"><a href="#cb3-6"></a></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="co"># examine the result</span></span>
<span id="cb3-8"><a href="#cb3-8"></a>business[<span class="kw">order</span>(cip6)]</span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="co">#&gt;       cip6  program</span></span>
<span id="cb3-10"><a href="#cb3-10"></a><span class="co">#&gt;  1: 520101 Business</span></span>
<span id="cb3-11"><a href="#cb3-11"></a><span class="co">#&gt;  2: 520201 Business</span></span>
<span id="cb3-12"><a href="#cb3-12"></a><span class="co">#&gt;  3: 520202 Business</span></span>
<span id="cb3-13"><a href="#cb3-13"></a><span class="co">#&gt;  4: 520203 Business</span></span>
<span id="cb3-14"><a href="#cb3-14"></a><span class="co">#&gt;  5: 520204 Business</span></span>
<span id="cb3-15"><a href="#cb3-15"></a><span class="co">#&gt;  6: 520205 Business</span></span>
<span id="cb3-16"><a href="#cb3-16"></a><span class="co">#&gt;  7: 520206 Business</span></span>
<span id="cb3-17"><a href="#cb3-17"></a><span class="co">#&gt;  8: 520207 Business</span></span>
<span id="cb3-18"><a href="#cb3-18"></a><span class="co">#&gt;  9: 520208 Business</span></span>
<span id="cb3-19"><a href="#cb3-19"></a><span class="co">#&gt; 10: 520209 Business</span></span>
<span id="cb3-20"><a href="#cb3-20"></a><span class="co">#&gt; ---                </span></span>
<span id="cb3-21"><a href="#cb3-21"></a><span class="co">#&gt; 85: 521905 Business</span></span>
<span id="cb3-22"><a href="#cb3-22"></a><span class="co">#&gt; 86: 521906 Business</span></span>
<span id="cb3-23"><a href="#cb3-23"></a><span class="co">#&gt; 87: 521907 Business</span></span>
<span id="cb3-24"><a href="#cb3-24"></a><span class="co">#&gt; 88: 521908 Business</span></span>
<span id="cb3-25"><a href="#cb3-25"></a><span class="co">#&gt; 89: 521909 Business</span></span>
<span id="cb3-26"><a href="#cb3-26"></a><span class="co">#&gt; 90: 521910 Business</span></span>
<span id="cb3-27"><a href="#cb3-27"></a><span class="co">#&gt; 91: 521999 Business</span></span>
<span id="cb3-28"><a href="#cb3-28"></a><span class="co">#&gt; 92: 522001 Business</span></span>
<span id="cb3-29"><a href="#cb3-29"></a><span class="co">#&gt; 93: 522101 Business</span></span>
<span id="cb3-30"><a href="#cb3-30"></a><span class="co">#&gt; 94: 529999 Business</span></span></code></pre></div>
<p>Bind the two data frames.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="co"># bind the two data frames</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>program_group &lt;-<span class="st"> </span><span class="kw">rbind</span>(engineering, business)</span>
<span id="cb4-3"><a href="#cb4-3"></a></span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="co"># examine the result</span></span>
<span id="cb4-5"><a href="#cb4-5"></a>program_group[<span class="kw">order</span>(cip6)]</span>
<span id="cb4-6"><a href="#cb4-6"></a><span class="co">#&gt;        cip6     program</span></span>
<span id="cb4-7"><a href="#cb4-7"></a><span class="co">#&gt;   1: 140101 Engineering</span></span>
<span id="cb4-8"><a href="#cb4-8"></a><span class="co">#&gt;   2: 140102 Engineering</span></span>
<span id="cb4-9"><a href="#cb4-9"></a><span class="co">#&gt;   3: 140201 Engineering</span></span>
<span id="cb4-10"><a href="#cb4-10"></a><span class="co">#&gt;   4: 140301 Engineering</span></span>
<span id="cb4-11"><a href="#cb4-11"></a><span class="co">#&gt;   5: 140401 Engineering</span></span>
<span id="cb4-12"><a href="#cb4-12"></a><span class="co">#&gt;   6: 140501 Engineering</span></span>
<span id="cb4-13"><a href="#cb4-13"></a><span class="co">#&gt;   7: 140601 Engineering</span></span>
<span id="cb4-14"><a href="#cb4-14"></a><span class="co">#&gt;   8: 140701 Engineering</span></span>
<span id="cb4-15"><a href="#cb4-15"></a><span class="co">#&gt;   9: 140702 Engineering</span></span>
<span id="cb4-16"><a href="#cb4-16"></a><span class="co">#&gt;  10: 140799 Engineering</span></span>
<span id="cb4-17"><a href="#cb4-17"></a><span class="co">#&gt;  ---                   </span></span>
<span id="cb4-18"><a href="#cb4-18"></a><span class="co">#&gt; 141: 521905    Business</span></span>
<span id="cb4-19"><a href="#cb4-19"></a><span class="co">#&gt; 142: 521906    Business</span></span>
<span id="cb4-20"><a href="#cb4-20"></a><span class="co">#&gt; 143: 521907    Business</span></span>
<span id="cb4-21"><a href="#cb4-21"></a><span class="co">#&gt; 144: 521908    Business</span></span>
<span id="cb4-22"><a href="#cb4-22"></a><span class="co">#&gt; 145: 521909    Business</span></span>
<span id="cb4-23"><a href="#cb4-23"></a><span class="co">#&gt; 146: 521910    Business</span></span>
<span id="cb4-24"><a href="#cb4-24"></a><span class="co">#&gt; 147: 521999    Business</span></span>
<span id="cb4-25"><a href="#cb4-25"></a><span class="co">#&gt; 148: 522001    Business</span></span>
<span id="cb4-26"><a href="#cb4-26"></a><span class="co">#&gt; 149: 522101    Business</span></span>
<span id="cb4-27"><a href="#cb4-27"></a><span class="co">#&gt; 150: 529999    Business</span></span></code></pre></div>
<p>We extract the <code>cip6</code> column as a character vector to use later to extract student data by their CIP codes.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="co"># extract a vector of 6-digit CIP codes</span></span>
<span id="cb5-2"><a href="#cb5-2"></a>group_cip &lt;-<span class="st"> </span>program_group<span class="op">$</span>cip6</span>
<span id="cb5-3"><a href="#cb5-3"></a></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="co"># examine the result</span></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="kw">str</span>(group_cip)</span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="co">#&gt;  chr [1:150] &quot;140101&quot; &quot;140102&quot; &quot;140201&quot; &quot;140301&quot; &quot;140401&quot; &quot;140501&quot; &quot;140601&quot; ...</span></span></code></pre></div>
<p>Related vignettes</p>
<ul>
<li><em>Identify programs</em> <a href="identify_programs.html">(link)</a> illustrates search strategies using <code>filter_text()</code> and program labeling options</li>
</ul>
</div>
<div id="gather-students" class="section level2">
<h2>Gather students</h2>
<p>We access <code>midfieldterms</code> to obtain the IDs of all students ever enrolled in these programs.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="co"># extract students ever enrolled from terms data </span></span>
<span id="cb6-2"><a href="#cb6-2"></a>cols_we_want &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;id&quot;</span>, <span class="st">&quot;cip6&quot;</span>)</span>
<span id="cb6-3"><a href="#cb6-3"></a>rows_we_want &lt;-<span class="st"> </span>midfieldterms<span class="op">$</span>cip6 <span class="op">%in%</span><span class="st"> </span>group_cip</span>
<span id="cb6-4"><a href="#cb6-4"></a>enrollees &lt;-<span class="st"> </span>midfieldterms[rows_we_want, ..cols_we_want]</span>
<span id="cb6-5"><a href="#cb6-5"></a>enrollees &lt;-<span class="st"> </span><span class="kw">unique</span>(enrollees)</span>
<span id="cb6-6"><a href="#cb6-6"></a></span>
<span id="cb6-7"><a href="#cb6-7"></a><span class="co"># examine the result</span></span>
<span id="cb6-8"><a href="#cb6-8"></a>enrollees[<span class="kw">order</span>(id)]</span>
<span id="cb6-9"><a href="#cb6-9"></a><span class="co">#&gt;                 id   cip6</span></span>
<span id="cb6-10"><a href="#cb6-10"></a><span class="co">#&gt;     1: MID25783135 520101</span></span>
<span id="cb6-11"><a href="#cb6-11"></a><span class="co">#&gt;     2: MID25783162 14XXXX</span></span>
<span id="cb6-12"><a href="#cb6-12"></a><span class="co">#&gt;     3: MID25783162 520301</span></span>
<span id="cb6-13"><a href="#cb6-13"></a><span class="co">#&gt;     4: MID25783162 521401</span></span>
<span id="cb6-14"><a href="#cb6-14"></a><span class="co">#&gt;     5: MID25783166 14XXXX</span></span>
<span id="cb6-15"><a href="#cb6-15"></a><span class="co">#&gt;     6: MID25783167 14XXXX</span></span>
<span id="cb6-16"><a href="#cb6-16"></a><span class="co">#&gt;     7: MID25783167 140901</span></span>
<span id="cb6-17"><a href="#cb6-17"></a><span class="co">#&gt;     8: MID25783178 14XXXX</span></span>
<span id="cb6-18"><a href="#cb6-18"></a><span class="co">#&gt;     9: MID25783178 140701</span></span>
<span id="cb6-19"><a href="#cb6-19"></a><span class="co">#&gt;    10: MID25783178 143501</span></span>
<span id="cb6-20"><a href="#cb6-20"></a><span class="co">#&gt;    ---                   </span></span>
<span id="cb6-21"><a href="#cb6-21"></a><span class="co">#&gt; 50956: MID26697447 140701</span></span>
<span id="cb6-22"><a href="#cb6-22"></a><span class="co">#&gt; 50957: MID26697447 141001</span></span>
<span id="cb6-23"><a href="#cb6-23"></a><span class="co">#&gt; 50958: MID26697449 520201</span></span>
<span id="cb6-24"><a href="#cb6-24"></a><span class="co">#&gt; 50959: MID26697449 521003</span></span>
<span id="cb6-25"><a href="#cb6-25"></a><span class="co">#&gt; 50960: MID26697471 520201</span></span>
<span id="cb6-26"><a href="#cb6-26"></a><span class="co">#&gt; 50961: MID26697484 521401</span></span>
<span id="cb6-27"><a href="#cb6-27"></a><span class="co">#&gt; 50962: MID26697576 520301</span></span>
<span id="cb6-28"><a href="#cb6-28"></a><span class="co">#&gt; 50963: MID26697576 521401</span></span>
<span id="cb6-29"><a href="#cb6-29"></a><span class="co">#&gt; 50964: MID26697599 521201</span></span>
<span id="cb6-30"><a href="#cb6-30"></a><span class="co">#&gt; 50965: MID26697685 521201</span></span></code></pre></div>
<p>There may be students matriculating in our programs who do not appear in the terms data. To account for these students, we apply a similar process to <code>midfieldstudents</code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="co"># extract students from matriculant data </span></span>
<span id="cb7-2"><a href="#cb7-2"></a>rows_we_want &lt;-<span class="st"> </span>midfieldstudents<span class="op">$</span>cip6 <span class="op">%in%</span><span class="st"> </span>group_cip</span>
<span id="cb7-3"><a href="#cb7-3"></a>matriculants &lt;-<span class="st"> </span>midfieldstudents[rows_we_want, ..cols_we_want]</span></code></pre></div>
<p>Combine the data frames and remove duplicates.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="co"># combine findings</span></span>
<span id="cb8-2"><a href="#cb8-2"></a>enrollees &lt;-<span class="st"> </span><span class="kw">rbind</span>(enrollees, matriculants)</span>
<span id="cb8-3"><a href="#cb8-3"></a>enrollees &lt;-<span class="st"> </span><span class="kw">unique</span>(enrollees)</span>
<span id="cb8-4"><a href="#cb8-4"></a>                    </span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="co"># examine the result</span></span>
<span id="cb8-6"><a href="#cb8-6"></a>enrollees[<span class="kw">order</span>(id)]</span>
<span id="cb8-7"><a href="#cb8-7"></a><span class="co">#&gt;                 id   cip6</span></span>
<span id="cb8-8"><a href="#cb8-8"></a><span class="co">#&gt;     1: MID25783135 520101</span></span>
<span id="cb8-9"><a href="#cb8-9"></a><span class="co">#&gt;     2: MID25783162 14XXXX</span></span>
<span id="cb8-10"><a href="#cb8-10"></a><span class="co">#&gt;     3: MID25783162 520301</span></span>
<span id="cb8-11"><a href="#cb8-11"></a><span class="co">#&gt;     4: MID25783162 521401</span></span>
<span id="cb8-12"><a href="#cb8-12"></a><span class="co">#&gt;     5: MID25783166 14XXXX</span></span>
<span id="cb8-13"><a href="#cb8-13"></a><span class="co">#&gt;     6: MID25783167 14XXXX</span></span>
<span id="cb8-14"><a href="#cb8-14"></a><span class="co">#&gt;     7: MID25783167 140901</span></span>
<span id="cb8-15"><a href="#cb8-15"></a><span class="co">#&gt;     8: MID25783178 14XXXX</span></span>
<span id="cb8-16"><a href="#cb8-16"></a><span class="co">#&gt;     9: MID25783178 140701</span></span>
<span id="cb8-17"><a href="#cb8-17"></a><span class="co">#&gt;    10: MID25783178 143501</span></span>
<span id="cb8-18"><a href="#cb8-18"></a><span class="co">#&gt;    ---                   </span></span>
<span id="cb8-19"><a href="#cb8-19"></a><span class="co">#&gt; 52543: MID26697449 521003</span></span>
<span id="cb8-20"><a href="#cb8-20"></a><span class="co">#&gt; 52544: MID26697471 520201</span></span>
<span id="cb8-21"><a href="#cb8-21"></a><span class="co">#&gt; 52545: MID26697484 521401</span></span>
<span id="cb8-22"><a href="#cb8-22"></a><span class="co">#&gt; 52546: MID26697484 521099</span></span>
<span id="cb8-23"><a href="#cb8-23"></a><span class="co">#&gt; 52547: MID26697576 520301</span></span>
<span id="cb8-24"><a href="#cb8-24"></a><span class="co">#&gt; 52548: MID26697576 521401</span></span>
<span id="cb8-25"><a href="#cb8-25"></a><span class="co">#&gt; 52549: MID26697599 521201</span></span>
<span id="cb8-26"><a href="#cb8-26"></a><span class="co">#&gt; 52550: MID26697623 520301</span></span>
<span id="cb8-27"><a href="#cb8-27"></a><span class="co">#&gt; 52551: MID26697641 521201</span></span>
<span id="cb8-28"><a href="#cb8-28"></a><span class="co">#&gt; 52552: MID26697685 521201</span></span></code></pre></div>
<p>For some of these students, completing their program may not be feasible given the range of data available. <code>subset_feasible()</code> subsets the enrollees IDs, retaining those who matriculate at least six years before the last term in the data.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="co"># apply the feasible completion filter</span></span>
<span id="cb9-2"><a href="#cb9-2"></a>feasible_ids &lt;-<span class="st"> </span><span class="kw">subset_feasible</span>(enrollees<span class="op">$</span>id)</span>
<span id="cb9-3"><a href="#cb9-3"></a></span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="co"># subset the enrollees</span></span>
<span id="cb9-5"><a href="#cb9-5"></a>rows_we_want &lt;-<span class="st"> </span>enrollees<span class="op">$</span>id <span class="op">%in%</span><span class="st"> </span>feasible_ids</span>
<span id="cb9-6"><a href="#cb9-6"></a>enrollees &lt;-<span class="st"> </span>enrollees[rows_we_want]</span>
<span id="cb9-7"><a href="#cb9-7"></a></span>
<span id="cb9-8"><a href="#cb9-8"></a><span class="co"># examine the result</span></span>
<span id="cb9-9"><a href="#cb9-9"></a>enrollees[<span class="kw">order</span>(id)]</span>
<span id="cb9-10"><a href="#cb9-10"></a><span class="co">#&gt;                 id   cip6</span></span>
<span id="cb9-11"><a href="#cb9-11"></a><span class="co">#&gt;     1: MID25783135 520101</span></span>
<span id="cb9-12"><a href="#cb9-12"></a><span class="co">#&gt;     2: MID25783162 14XXXX</span></span>
<span id="cb9-13"><a href="#cb9-13"></a><span class="co">#&gt;     3: MID25783162 520301</span></span>
<span id="cb9-14"><a href="#cb9-14"></a><span class="co">#&gt;     4: MID25783162 521401</span></span>
<span id="cb9-15"><a href="#cb9-15"></a><span class="co">#&gt;     5: MID25783178 14XXXX</span></span>
<span id="cb9-16"><a href="#cb9-16"></a><span class="co">#&gt;     6: MID25783178 140701</span></span>
<span id="cb9-17"><a href="#cb9-17"></a><span class="co">#&gt;     7: MID25783178 143501</span></span>
<span id="cb9-18"><a href="#cb9-18"></a><span class="co">#&gt;     8: MID25783195 521401</span></span>
<span id="cb9-19"><a href="#cb9-19"></a><span class="co">#&gt;     9: MID25783197 14XXXX</span></span>
<span id="cb9-20"><a href="#cb9-20"></a><span class="co">#&gt;    10: MID25783197 140701</span></span>
<span id="cb9-21"><a href="#cb9-21"></a><span class="co">#&gt;    ---                   </span></span>
<span id="cb9-22"><a href="#cb9-22"></a><span class="co">#&gt; 40981: MID26697447 141001</span></span>
<span id="cb9-23"><a href="#cb9-23"></a><span class="co">#&gt; 40982: MID26697449 520201</span></span>
<span id="cb9-24"><a href="#cb9-24"></a><span class="co">#&gt; 40983: MID26697449 521003</span></span>
<span id="cb9-25"><a href="#cb9-25"></a><span class="co">#&gt; 40984: MID26697471 520201</span></span>
<span id="cb9-26"><a href="#cb9-26"></a><span class="co">#&gt; 40985: MID26697484 521401</span></span>
<span id="cb9-27"><a href="#cb9-27"></a><span class="co">#&gt; 40986: MID26697484 521099</span></span>
<span id="cb9-28"><a href="#cb9-28"></a><span class="co">#&gt; 40987: MID26697576 520301</span></span>
<span id="cb9-29"><a href="#cb9-29"></a><span class="co">#&gt; 40988: MID26697576 521401</span></span>
<span id="cb9-30"><a href="#cb9-30"></a><span class="co">#&gt; 40989: MID26697599 521201</span></span>
<span id="cb9-31"><a href="#cb9-31"></a><span class="co">#&gt; 40990: MID26697623 520301</span></span></code></pre></div>
<p>Related vignettes</p>
<ul>
<li><em>Feasible completion</em> <a href="feasible_completion.html">(link)</a> describes how completion feasibility is determined</li>
</ul>
</div>
<div id="join-the-grouping-variables" class="section level2">
<h2>Join the grouping variables</h2>
<p>In this example, the results are eventually grouped by program, race/ethnicity, and sex. Here, we join these variables to the working data frame.</p>
<p>We access <code>midfieldstudents</code> to obtain students’ race/ethnicity and sex as self-reported at matriculation.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>rows_we_want &lt;-<span class="st"> </span>midfieldstudents<span class="op">$</span>id <span class="op">%in%</span><span class="st"> </span>feasible_ids</span>
<span id="cb10-2"><a href="#cb10-2"></a>cols_we_want &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;id&quot;</span>, <span class="st">&quot;race&quot;</span>, <span class="st">&quot;sex&quot;</span>)</span>
<span id="cb10-3"><a href="#cb10-3"></a>race_sex &lt;-<span class="st"> </span>midfieldstudents[rows_we_want, ..cols_we_want]</span>
<span id="cb10-4"><a href="#cb10-4"></a>race_sex &lt;-<span class="st"> </span><span class="kw">unique</span>(race_sex)</span>
<span id="cb10-5"><a href="#cb10-5"></a></span>
<span id="cb10-6"><a href="#cb10-6"></a><span class="co"># examine the result</span></span>
<span id="cb10-7"><a href="#cb10-7"></a>race_sex[<span class="kw">order</span>(id)]</span>
<span id="cb10-8"><a href="#cb10-8"></a><span class="co">#&gt;                 id     race    sex</span></span>
<span id="cb10-9"><a href="#cb10-9"></a><span class="co">#&gt;     1: MID25783135    White   Male</span></span>
<span id="cb10-10"><a href="#cb10-10"></a><span class="co">#&gt;     2: MID25783162    White   Male</span></span>
<span id="cb10-11"><a href="#cb10-11"></a><span class="co">#&gt;     3: MID25783178    Black   Male</span></span>
<span id="cb10-12"><a href="#cb10-12"></a><span class="co">#&gt;     4: MID25783195    White   Male</span></span>
<span id="cb10-13"><a href="#cb10-13"></a><span class="co">#&gt;     5: MID25783197    White   Male</span></span>
<span id="cb10-14"><a href="#cb10-14"></a><span class="co">#&gt;     6: MID25783227    White   Male</span></span>
<span id="cb10-15"><a href="#cb10-15"></a><span class="co">#&gt;     7: MID25783259    White   Male</span></span>
<span id="cb10-16"><a href="#cb10-16"></a><span class="co">#&gt;     8: MID25783306    White Female</span></span>
<span id="cb10-17"><a href="#cb10-17"></a><span class="co">#&gt;     9: MID25783360    White   Male</span></span>
<span id="cb10-18"><a href="#cb10-18"></a><span class="co">#&gt;    10: MID25783388    White   Male</span></span>
<span id="cb10-19"><a href="#cb10-19"></a><span class="co">#&gt;    ---                            </span></span>
<span id="cb10-20"><a href="#cb10-20"></a><span class="co">#&gt; 28675: MID26697355 Hispanic Female</span></span>
<span id="cb10-21"><a href="#cb10-21"></a><span class="co">#&gt; 28676: MID26697367 Hispanic   Male</span></span>
<span id="cb10-22"><a href="#cb10-22"></a><span class="co">#&gt; 28677: MID26697444    White   Male</span></span>
<span id="cb10-23"><a href="#cb10-23"></a><span class="co">#&gt; 28678: MID26697447    Asian   Male</span></span>
<span id="cb10-24"><a href="#cb10-24"></a><span class="co">#&gt; 28679: MID26697449    White Female</span></span>
<span id="cb10-25"><a href="#cb10-25"></a><span class="co">#&gt; 28680: MID26697471    Black Female</span></span>
<span id="cb10-26"><a href="#cb10-26"></a><span class="co">#&gt; 28681: MID26697484    White Female</span></span>
<span id="cb10-27"><a href="#cb10-27"></a><span class="co">#&gt; 28682: MID26697576    Asian   Male</span></span>
<span id="cb10-28"><a href="#cb10-28"></a><span class="co">#&gt; 28683: MID26697599    White   Male</span></span>
<span id="cb10-29"><a href="#cb10-29"></a><span class="co">#&gt; 28684: MID26697623    Black Female</span></span></code></pre></div>
<p>Join the race/ethnicity and sex data frame to the enrollees data frame by <code>id</code>. Then join the program names from <code>program_group</code> to our working data frame by <code>cip6</code>.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="co"># left-join demographics to enrollees</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>enrollees &lt;-<span class="st"> </span><span class="kw">merge</span>(enrollees, race_sex, <span class="dt">by =</span> <span class="st">&quot;id&quot;</span>, <span class="dt">all.x =</span> <span class="ot">TRUE</span>)</span>
<span id="cb11-3"><a href="#cb11-3"></a></span>
<span id="cb11-4"><a href="#cb11-4"></a><span class="co"># left-join program_group to enrollees</span></span>
<span id="cb11-5"><a href="#cb11-5"></a>enrollees &lt;-<span class="st"> </span><span class="kw">merge</span>(enrollees, program_group, <span class="dt">by =</span> <span class="st">&quot;cip6&quot;</span>, <span class="dt">all.x =</span> <span class="ot">TRUE</span>)</span>
<span id="cb11-6"><a href="#cb11-6"></a></span>
<span id="cb11-7"><a href="#cb11-7"></a><span class="co"># examine the result</span></span>
<span id="cb11-8"><a href="#cb11-8"></a>enrollees[<span class="kw">order</span>(id)]</span>
<span id="cb11-9"><a href="#cb11-9"></a><span class="co">#&gt;          cip6          id  race    sex     program</span></span>
<span id="cb11-10"><a href="#cb11-10"></a><span class="co">#&gt;     1: 520101 MID25783135 White   Male    Business</span></span>
<span id="cb11-11"><a href="#cb11-11"></a><span class="co">#&gt;     2: 14XXXX MID25783162 White   Male Engineering</span></span>
<span id="cb11-12"><a href="#cb11-12"></a><span class="co">#&gt;     3: 520301 MID25783162 White   Male    Business</span></span>
<span id="cb11-13"><a href="#cb11-13"></a><span class="co">#&gt;     4: 521401 MID25783162 White   Male    Business</span></span>
<span id="cb11-14"><a href="#cb11-14"></a><span class="co">#&gt;     5: 140701 MID25783178 Black   Male Engineering</span></span>
<span id="cb11-15"><a href="#cb11-15"></a><span class="co">#&gt;     6: 143501 MID25783178 Black   Male Engineering</span></span>
<span id="cb11-16"><a href="#cb11-16"></a><span class="co">#&gt;     7: 14XXXX MID25783178 Black   Male Engineering</span></span>
<span id="cb11-17"><a href="#cb11-17"></a><span class="co">#&gt;     8: 521401 MID25783195 White   Male    Business</span></span>
<span id="cb11-18"><a href="#cb11-18"></a><span class="co">#&gt;     9: 140701 MID25783197 White   Male Engineering</span></span>
<span id="cb11-19"><a href="#cb11-19"></a><span class="co">#&gt;    10: 140801 MID25783197 White   Male Engineering</span></span>
<span id="cb11-20"><a href="#cb11-20"></a><span class="co">#&gt;    ---                                            </span></span>
<span id="cb11-21"><a href="#cb11-21"></a><span class="co">#&gt; 40981: 141001 MID26697447 Asian   Male Engineering</span></span>
<span id="cb11-22"><a href="#cb11-22"></a><span class="co">#&gt; 40982: 520201 MID26697449 White Female    Business</span></span>
<span id="cb11-23"><a href="#cb11-23"></a><span class="co">#&gt; 40983: 521003 MID26697449 White Female    Business</span></span>
<span id="cb11-24"><a href="#cb11-24"></a><span class="co">#&gt; 40984: 520201 MID26697471 Black Female    Business</span></span>
<span id="cb11-25"><a href="#cb11-25"></a><span class="co">#&gt; 40985: 521099 MID26697484 White Female    Business</span></span>
<span id="cb11-26"><a href="#cb11-26"></a><span class="co">#&gt; 40986: 521401 MID26697484 White Female    Business</span></span>
<span id="cb11-27"><a href="#cb11-27"></a><span class="co">#&gt; 40987: 520301 MID26697576 Asian   Male    Business</span></span>
<span id="cb11-28"><a href="#cb11-28"></a><span class="co">#&gt; 40988: 521401 MID26697576 Asian   Male    Business</span></span>
<span id="cb11-29"><a href="#cb11-29"></a><span class="co">#&gt; 40989: 521201 MID26697599 White   Male    Business</span></span>
<span id="cb11-30"><a href="#cb11-30"></a><span class="co">#&gt; 40990: 520301 MID26697623 Black Female    Business</span></span></code></pre></div>
<p>Here we edit one last time by deleting the CIP column and removing duplicates. In this way, students who migrate within engineering, for example, are not counted twice, but a student who transfers from engineering to business (or vice versa) is counted in both programs.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="co"># remove the CIP codes</span></span>
<span id="cb12-2"><a href="#cb12-2"></a>enrollees[, cip6 <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="ot">NULL</span>]</span>
<span id="cb12-3"><a href="#cb12-3"></a></span>
<span id="cb12-4"><a href="#cb12-4"></a><span class="co"># remove duplicates</span></span>
<span id="cb12-5"><a href="#cb12-5"></a>enrollees &lt;-<span class="st"> </span><span class="kw">unique</span>(enrollees)</span>
<span id="cb12-6"><a href="#cb12-6"></a></span>
<span id="cb12-7"><a href="#cb12-7"></a><span class="co"># examine the result</span></span>
<span id="cb12-8"><a href="#cb12-8"></a>enrollees[<span class="kw">order</span>(id)]</span>
<span id="cb12-9"><a href="#cb12-9"></a><span class="co">#&gt;                 id     race    sex     program</span></span>
<span id="cb12-10"><a href="#cb12-10"></a><span class="co">#&gt;     1: MID25783135    White   Male    Business</span></span>
<span id="cb12-11"><a href="#cb12-11"></a><span class="co">#&gt;     2: MID25783162    White   Male Engineering</span></span>
<span id="cb12-12"><a href="#cb12-12"></a><span class="co">#&gt;     3: MID25783162    White   Male    Business</span></span>
<span id="cb12-13"><a href="#cb12-13"></a><span class="co">#&gt;     4: MID25783178    Black   Male Engineering</span></span>
<span id="cb12-14"><a href="#cb12-14"></a><span class="co">#&gt;     5: MID25783195    White   Male    Business</span></span>
<span id="cb12-15"><a href="#cb12-15"></a><span class="co">#&gt;     6: MID25783197    White   Male Engineering</span></span>
<span id="cb12-16"><a href="#cb12-16"></a><span class="co">#&gt;     7: MID25783227    White   Male Engineering</span></span>
<span id="cb12-17"><a href="#cb12-17"></a><span class="co">#&gt;     8: MID25783259    White   Male Engineering</span></span>
<span id="cb12-18"><a href="#cb12-18"></a><span class="co">#&gt;     9: MID25783306    White Female    Business</span></span>
<span id="cb12-19"><a href="#cb12-19"></a><span class="co">#&gt;    10: MID25783360    White   Male    Business</span></span>
<span id="cb12-20"><a href="#cb12-20"></a><span class="co">#&gt;    ---                                        </span></span>
<span id="cb12-21"><a href="#cb12-21"></a><span class="co">#&gt; 30153: MID26697355 Hispanic Female    Business</span></span>
<span id="cb12-22"><a href="#cb12-22"></a><span class="co">#&gt; 30154: MID26697367 Hispanic   Male Engineering</span></span>
<span id="cb12-23"><a href="#cb12-23"></a><span class="co">#&gt; 30155: MID26697444    White   Male Engineering</span></span>
<span id="cb12-24"><a href="#cb12-24"></a><span class="co">#&gt; 30156: MID26697447    Asian   Male Engineering</span></span>
<span id="cb12-25"><a href="#cb12-25"></a><span class="co">#&gt; 30157: MID26697449    White Female    Business</span></span>
<span id="cb12-26"><a href="#cb12-26"></a><span class="co">#&gt; 30158: MID26697471    Black Female    Business</span></span>
<span id="cb12-27"><a href="#cb12-27"></a><span class="co">#&gt; 30159: MID26697484    White Female    Business</span></span>
<span id="cb12-28"><a href="#cb12-28"></a><span class="co">#&gt; 30160: MID26697576    Asian   Male    Business</span></span>
<span id="cb12-29"><a href="#cb12-29"></a><span class="co">#&gt; 30161: MID26697599    White   Male    Business</span></span>
<span id="cb12-30"><a href="#cb12-30"></a><span class="co">#&gt; 30162: MID26697623    Black Female    Business</span></span></code></pre></div>
</div>
<div id="group-and-summarize" class="section level2">
<h2>Group and summarize</h2>
<p>To frame our results in terms of program, race/ethnicity, and sex, we group by these variables and count the number of students in each grouping using syntax from the data.table package. The count is assigned to the new <code>ever</code> column.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="co"># assign</span></span>
<span id="cb13-2"><a href="#cb13-2"></a>grouping_variables &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;program&quot;</span>, <span class="st">&quot;race&quot;</span>, <span class="st">&quot;sex&quot;</span>)</span>
<span id="cb13-3"><a href="#cb13-3"></a></span>
<span id="cb13-4"><a href="#cb13-4"></a><span class="co"># aggregate using data.table syntax</span></span>
<span id="cb13-5"><a href="#cb13-5"></a>grouped_enrollees &lt;-<span class="st"> </span>enrollees[, .(<span class="dt">ever =</span> .N), by =<span class="st"> </span>grouping_variables]</span>
<span id="cb13-6"><a href="#cb13-6"></a></span>
<span id="cb13-7"><a href="#cb13-7"></a><span class="co"># examine the result</span></span>
<span id="cb13-8"><a href="#cb13-8"></a>grouped_enrollees</span>
<span id="cb13-9"><a href="#cb13-9"></a><span class="co">#&gt;         program            race    sex ever</span></span>
<span id="cb13-10"><a href="#cb13-10"></a><span class="co">#&gt;  1: Engineering           Other   Male  165</span></span>
<span id="cb13-11"><a href="#cb13-11"></a><span class="co">#&gt;  2: Engineering           White Female 2230</span></span>
<span id="cb13-12"><a href="#cb13-12"></a><span class="co">#&gt;  3: Engineering           Asian   Male  734</span></span>
<span id="cb13-13"><a href="#cb13-13"></a><span class="co">#&gt;  4: Engineering           White   Male 8729</span></span>
<span id="cb13-14"><a href="#cb13-14"></a><span class="co">#&gt;  5: Engineering           Black Female  628</span></span>
<span id="cb13-15"><a href="#cb13-15"></a><span class="co">#&gt;  6: Engineering        Hispanic Female  115</span></span>
<span id="cb13-16"><a href="#cb13-16"></a><span class="co">#&gt;  7: Engineering           Asian Female  217</span></span>
<span id="cb13-17"><a href="#cb13-17"></a><span class="co">#&gt;  8: Engineering Native American   Male   60</span></span>
<span id="cb13-18"><a href="#cb13-18"></a><span class="co">#&gt;  9: Engineering           Black   Male  987</span></span>
<span id="cb13-19"><a href="#cb13-19"></a><span class="co">#&gt; 10: Engineering        Hispanic   Male  379</span></span>
<span id="cb13-20"><a href="#cb13-20"></a><span class="co">#&gt; ---                                        </span></span>
<span id="cb13-21"><a href="#cb13-21"></a><span class="co">#&gt; 23:    Business           Asian Female  308</span></span>
<span id="cb13-22"><a href="#cb13-22"></a><span class="co">#&gt; 24:    Business           Other Female   81</span></span>
<span id="cb13-23"><a href="#cb13-23"></a><span class="co">#&gt; 25:    Business   International Female   61</span></span>
<span id="cb13-24"><a href="#cb13-24"></a><span class="co">#&gt; 26:    Business        Hispanic   Male  348</span></span>
<span id="cb13-25"><a href="#cb13-25"></a><span class="co">#&gt; 27:    Business         Unknown Female   50</span></span>
<span id="cb13-26"><a href="#cb13-26"></a><span class="co">#&gt; 28:    Business        Hispanic Female  264</span></span>
<span id="cb13-27"><a href="#cb13-27"></a><span class="co">#&gt; 29:    Business         Unknown   Male   55</span></span>
<span id="cb13-28"><a href="#cb13-28"></a><span class="co">#&gt; 30:    Business   International   Male  106</span></span>
<span id="cb13-29"><a href="#cb13-29"></a><span class="co">#&gt; 31:    Business Native American Female   33</span></span>
<span id="cb13-30"><a href="#cb13-30"></a><span class="co">#&gt; 32:    Business Native American   Male   41</span></span></code></pre></div>
</div>
<div id="condition-the-data-for-display" class="section level2">
<h2>Condition the data for display</h2>
<p>To prepare the results for graphing, we construct a “pre-multiway” version of the data frame. We begin by removing ambiguous levels of race/ethnicity.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="co"># initialize the pre-multiway data frame</span></span>
<span id="cb14-2"><a href="#cb14-2"></a>pre_mw &lt;-<span class="st"> </span><span class="kw">copy</span>(grouped_enrollees)</span>
<span id="cb14-3"><a href="#cb14-3"></a></span>
<span id="cb14-4"><a href="#cb14-4"></a><span class="co"># remove ambiguous levels of race/ethnicity</span></span>
<span id="cb14-5"><a href="#cb14-5"></a>rows_we_want &lt;-<span class="st"> </span><span class="op">!</span>pre_mw<span class="op">$</span>race <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Unknown&quot;</span>, <span class="st">&quot;International&quot;</span>, <span class="st">&quot;Other&quot;</span>)</span>
<span id="cb14-6"><a href="#cb14-6"></a>pre_mw &lt;-<span class="st"> </span>pre_mw[rows_we_want]</span>
<span id="cb14-7"><a href="#cb14-7"></a></span>
<span id="cb14-8"><a href="#cb14-8"></a><span class="co"># examine the result</span></span>
<span id="cb14-9"><a href="#cb14-9"></a><span class="kw">unique</span>(pre_mw<span class="op">$</span>race)</span>
<span id="cb14-10"><a href="#cb14-10"></a><span class="co">#&gt; [1] &quot;White&quot;           &quot;Asian&quot;           &quot;Black&quot;           &quot;Hispanic&quot;       </span></span>
<span id="cb14-11"><a href="#cb14-11"></a><span class="co">#&gt; [5] &quot;Native American&quot;</span></span></code></pre></div>
<p>To protect confidentiality, we omit observations with 10 or fewer students ever enrolled.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="co"># protect confidentiality of small populations</span></span>
<span id="cb15-2"><a href="#cb15-2"></a>rows_we_want &lt;-<span class="st"> </span>pre_mw<span class="op">$</span>ever <span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span></span>
<span id="cb15-3"><a href="#cb15-3"></a>pre_mw &lt;-<span class="st"> </span>pre_mw[rows_we_want]</span>
<span id="cb15-4"><a href="#cb15-4"></a></span>
<span id="cb15-5"><a href="#cb15-5"></a><span class="co"># order rows for viewing</span></span>
<span id="cb15-6"><a href="#cb15-6"></a>pre_mw &lt;-<span class="st"> </span>pre_mw[<span class="kw">order</span>(program, race, sex)]</span>
<span id="cb15-7"><a href="#cb15-7"></a></span>
<span id="cb15-8"><a href="#cb15-8"></a><span class="co"># examine the result</span></span>
<span id="cb15-9"><a href="#cb15-9"></a>pre_mw</span>
<span id="cb15-10"><a href="#cb15-10"></a><span class="co">#&gt;         program            race    sex ever</span></span>
<span id="cb15-11"><a href="#cb15-11"></a><span class="co">#&gt;  1:    Business           Asian Female  308</span></span>
<span id="cb15-12"><a href="#cb15-12"></a><span class="co">#&gt;  2:    Business           Asian   Male  353</span></span>
<span id="cb15-13"><a href="#cb15-13"></a><span class="co">#&gt;  3:    Business           Black Female 1047</span></span>
<span id="cb15-14"><a href="#cb15-14"></a><span class="co">#&gt;  4:    Business           Black   Male  854</span></span>
<span id="cb15-15"><a href="#cb15-15"></a><span class="co">#&gt;  5:    Business        Hispanic Female  264</span></span>
<span id="cb15-16"><a href="#cb15-16"></a><span class="co">#&gt;  6:    Business        Hispanic   Male  348</span></span>
<span id="cb15-17"><a href="#cb15-17"></a><span class="co">#&gt;  7:    Business Native American Female   33</span></span>
<span id="cb15-18"><a href="#cb15-18"></a><span class="co">#&gt;  8:    Business Native American   Male   41</span></span>
<span id="cb15-19"><a href="#cb15-19"></a><span class="co">#&gt;  9:    Business           White Female 4977</span></span>
<span id="cb15-20"><a href="#cb15-20"></a><span class="co">#&gt; 10:    Business           White   Male 6785</span></span>
<span id="cb15-21"><a href="#cb15-21"></a><span class="co">#&gt; 11: Engineering           Asian Female  217</span></span>
<span id="cb15-22"><a href="#cb15-22"></a><span class="co">#&gt; 12: Engineering           Asian   Male  734</span></span>
<span id="cb15-23"><a href="#cb15-23"></a><span class="co">#&gt; 13: Engineering           Black Female  628</span></span>
<span id="cb15-24"><a href="#cb15-24"></a><span class="co">#&gt; 14: Engineering           Black   Male  987</span></span>
<span id="cb15-25"><a href="#cb15-25"></a><span class="co">#&gt; 15: Engineering        Hispanic Female  115</span></span>
<span id="cb15-26"><a href="#cb15-26"></a><span class="co">#&gt; 16: Engineering        Hispanic   Male  379</span></span>
<span id="cb15-27"><a href="#cb15-27"></a><span class="co">#&gt; 17: Engineering Native American Female   16</span></span>
<span id="cb15-28"><a href="#cb15-28"></a><span class="co">#&gt; 18: Engineering Native American   Male   60</span></span>
<span id="cb15-29"><a href="#cb15-29"></a><span class="co">#&gt; 19: Engineering           White Female 2230</span></span>
<span id="cb15-30"><a href="#cb15-30"></a><span class="co">#&gt; 20: Engineering           White   Male 8729</span></span></code></pre></div>
<p>In intersectional studies, we have found combined race/ethnicity and sex to be a useful category. We unite two columns to create the <code>race_sex</code> column.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="co"># create a new category</span></span>
<span id="cb16-2"><a href="#cb16-2"></a>pre_mw[, race_sex <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="kw">paste</span>(race, sex, <span class="dt">sep =</span> <span class="st">&quot; &quot;</span>)]</span>
<span id="cb16-3"><a href="#cb16-3"></a></span>
<span id="cb16-4"><a href="#cb16-4"></a><span class="co"># examine the result</span></span>
<span id="cb16-5"><a href="#cb16-5"></a>pre_mw</span>
<span id="cb16-6"><a href="#cb16-6"></a><span class="co">#&gt;         program            race    sex ever               race_sex</span></span>
<span id="cb16-7"><a href="#cb16-7"></a><span class="co">#&gt;  1:    Business           Asian Female  308           Asian Female</span></span>
<span id="cb16-8"><a href="#cb16-8"></a><span class="co">#&gt;  2:    Business           Asian   Male  353             Asian Male</span></span>
<span id="cb16-9"><a href="#cb16-9"></a><span class="co">#&gt;  3:    Business           Black Female 1047           Black Female</span></span>
<span id="cb16-10"><a href="#cb16-10"></a><span class="co">#&gt;  4:    Business           Black   Male  854             Black Male</span></span>
<span id="cb16-11"><a href="#cb16-11"></a><span class="co">#&gt;  5:    Business        Hispanic Female  264        Hispanic Female</span></span>
<span id="cb16-12"><a href="#cb16-12"></a><span class="co">#&gt;  6:    Business        Hispanic   Male  348          Hispanic Male</span></span>
<span id="cb16-13"><a href="#cb16-13"></a><span class="co">#&gt;  7:    Business Native American Female   33 Native American Female</span></span>
<span id="cb16-14"><a href="#cb16-14"></a><span class="co">#&gt;  8:    Business Native American   Male   41   Native American Male</span></span>
<span id="cb16-15"><a href="#cb16-15"></a><span class="co">#&gt;  9:    Business           White Female 4977           White Female</span></span>
<span id="cb16-16"><a href="#cb16-16"></a><span class="co">#&gt; 10:    Business           White   Male 6785             White Male</span></span>
<span id="cb16-17"><a href="#cb16-17"></a><span class="co">#&gt; 11: Engineering           Asian Female  217           Asian Female</span></span>
<span id="cb16-18"><a href="#cb16-18"></a><span class="co">#&gt; 12: Engineering           Asian   Male  734             Asian Male</span></span>
<span id="cb16-19"><a href="#cb16-19"></a><span class="co">#&gt; 13: Engineering           Black Female  628           Black Female</span></span>
<span id="cb16-20"><a href="#cb16-20"></a><span class="co">#&gt; 14: Engineering           Black   Male  987             Black Male</span></span>
<span id="cb16-21"><a href="#cb16-21"></a><span class="co">#&gt; 15: Engineering        Hispanic Female  115        Hispanic Female</span></span>
<span id="cb16-22"><a href="#cb16-22"></a><span class="co">#&gt; 16: Engineering        Hispanic   Male  379          Hispanic Male</span></span>
<span id="cb16-23"><a href="#cb16-23"></a><span class="co">#&gt; 17: Engineering Native American Female   16 Native American Female</span></span>
<span id="cb16-24"><a href="#cb16-24"></a><span class="co">#&gt; 18: Engineering Native American   Male   60   Native American Male</span></span>
<span id="cb16-25"><a href="#cb16-25"></a><span class="co">#&gt; 19: Engineering           White Female 2230           White Female</span></span>
<span id="cb16-26"><a href="#cb16-26"></a><span class="co">#&gt; 20: Engineering           White   Male 8729             White Male</span></span></code></pre></div>
<p><em>Multiway data</em> are characterized by two categorical variables and one quantitative variable <span class="citation">(Cleveland, <a href="#ref-Cleveland:1993" role="doc-biblioref">1993</a>)</span>. In this example, the two categories are program and race/ethnicity/sex and the quantitative variable is the number of students ever enrolled.</p>
<p>To structure the data in multiway form, we select the three multiway variables.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="co"># select the three multiway variables</span></span>
<span id="cb17-2"><a href="#cb17-2"></a>cols_we_want &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;program&quot;</span>, <span class="st">&quot;race_sex&quot;</span>, <span class="st">&quot;ever&quot;</span>)</span>
<span id="cb17-3"><a href="#cb17-3"></a>pre_mw &lt;-<span class="st"> </span>pre_mw[, ..cols_we_want]</span>
<span id="cb17-4"><a href="#cb17-4"></a></span>
<span id="cb17-5"><a href="#cb17-5"></a><span class="co"># examine the result</span></span>
<span id="cb17-6"><a href="#cb17-6"></a>pre_mw</span>
<span id="cb17-7"><a href="#cb17-7"></a><span class="co">#&gt;         program               race_sex ever</span></span>
<span id="cb17-8"><a href="#cb17-8"></a><span class="co">#&gt;  1:    Business           Asian Female  308</span></span>
<span id="cb17-9"><a href="#cb17-9"></a><span class="co">#&gt;  2:    Business             Asian Male  353</span></span>
<span id="cb17-10"><a href="#cb17-10"></a><span class="co">#&gt;  3:    Business           Black Female 1047</span></span>
<span id="cb17-11"><a href="#cb17-11"></a><span class="co">#&gt;  4:    Business             Black Male  854</span></span>
<span id="cb17-12"><a href="#cb17-12"></a><span class="co">#&gt;  5:    Business        Hispanic Female  264</span></span>
<span id="cb17-13"><a href="#cb17-13"></a><span class="co">#&gt;  6:    Business          Hispanic Male  348</span></span>
<span id="cb17-14"><a href="#cb17-14"></a><span class="co">#&gt;  7:    Business Native American Female   33</span></span>
<span id="cb17-15"><a href="#cb17-15"></a><span class="co">#&gt;  8:    Business   Native American Male   41</span></span>
<span id="cb17-16"><a href="#cb17-16"></a><span class="co">#&gt;  9:    Business           White Female 4977</span></span>
<span id="cb17-17"><a href="#cb17-17"></a><span class="co">#&gt; 10:    Business             White Male 6785</span></span>
<span id="cb17-18"><a href="#cb17-18"></a><span class="co">#&gt; 11: Engineering           Asian Female  217</span></span>
<span id="cb17-19"><a href="#cb17-19"></a><span class="co">#&gt; 12: Engineering             Asian Male  734</span></span>
<span id="cb17-20"><a href="#cb17-20"></a><span class="co">#&gt; 13: Engineering           Black Female  628</span></span>
<span id="cb17-21"><a href="#cb17-21"></a><span class="co">#&gt; 14: Engineering             Black Male  987</span></span>
<span id="cb17-22"><a href="#cb17-22"></a><span class="co">#&gt; 15: Engineering        Hispanic Female  115</span></span>
<span id="cb17-23"><a href="#cb17-23"></a><span class="co">#&gt; 16: Engineering          Hispanic Male  379</span></span>
<span id="cb17-24"><a href="#cb17-24"></a><span class="co">#&gt; 17: Engineering Native American Female   16</span></span>
<span id="cb17-25"><a href="#cb17-25"></a><span class="co">#&gt; 18: Engineering   Native American Male   60</span></span>
<span id="cb17-26"><a href="#cb17-26"></a><span class="co">#&gt; 19: Engineering           White Female 2230</span></span>
<span id="cb17-27"><a href="#cb17-27"></a><span class="co">#&gt; 20: Engineering             White Male 8729</span></span></code></pre></div>
<p>The second attribute of multiway data is that the levels of the categories are ordered by the median value of the quantitative variable. <code>prepare_multiway()</code> converts the categorical variables to factors and orders the category levels.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="co"># order the category levels</span></span>
<span id="cb18-2"><a href="#cb18-2"></a>data_mw &lt;-<span class="st"> </span><span class="kw">prepare_multiway</span>(pre_mw)</span></code></pre></div>
<p>The median values are attributes of the data frame. We can view them as follows. Note that <code>program</code> and <code>race_sex</code> are now factors ordered by the median enrolled numbers (recorded under the <code>scores</code> attribute).</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="kw">lapply</span>(data_mw, <span class="dt">FUN =</span> attributes)</span>
<span id="cb19-2"><a href="#cb19-2"></a><span class="co">#&gt; $program</span></span>
<span id="cb19-3"><a href="#cb19-3"></a><span class="co">#&gt; $program$levels</span></span>
<span id="cb19-4"><a href="#cb19-4"></a><span class="co">#&gt; [1] &quot;Business&quot;    &quot;Engineering&quot;</span></span>
<span id="cb19-5"><a href="#cb19-5"></a><span class="co">#&gt; </span></span>
<span id="cb19-6"><a href="#cb19-6"></a><span class="co">#&gt; $program$class</span></span>
<span id="cb19-7"><a href="#cb19-7"></a><span class="co">#&gt; [1] &quot;factor&quot;</span></span>
<span id="cb19-8"><a href="#cb19-8"></a><span class="co">#&gt; </span></span>
<span id="cb19-9"><a href="#cb19-9"></a><span class="co">#&gt; $program$scores</span></span>
<span id="cb19-10"><a href="#cb19-10"></a><span class="co">#&gt;    Business Engineering </span></span>
<span id="cb19-11"><a href="#cb19-11"></a><span class="co">#&gt;       350.5       503.5 </span></span>
<span id="cb19-12"><a href="#cb19-12"></a><span class="co">#&gt; </span></span>
<span id="cb19-13"><a href="#cb19-13"></a><span class="co">#&gt; </span></span>
<span id="cb19-14"><a href="#cb19-14"></a><span class="co">#&gt; $race_sex</span></span>
<span id="cb19-15"><a href="#cb19-15"></a><span class="co">#&gt; $race_sex$levels</span></span>
<span id="cb19-16"><a href="#cb19-16"></a><span class="co">#&gt;  [1] &quot;Native American Female&quot; &quot;Native American Male&quot;   &quot;Hispanic Female&quot;       </span></span>
<span id="cb19-17"><a href="#cb19-17"></a><span class="co">#&gt;  [4] &quot;Asian Female&quot;           &quot;Hispanic Male&quot;          &quot;Asian Male&quot;            </span></span>
<span id="cb19-18"><a href="#cb19-18"></a><span class="co">#&gt;  [7] &quot;Black Female&quot;           &quot;Black Male&quot;             &quot;White Female&quot;          </span></span>
<span id="cb19-19"><a href="#cb19-19"></a><span class="co">#&gt; [10] &quot;White Male&quot;            </span></span>
<span id="cb19-20"><a href="#cb19-20"></a><span class="co">#&gt; </span></span>
<span id="cb19-21"><a href="#cb19-21"></a><span class="co">#&gt; $race_sex$class</span></span>
<span id="cb19-22"><a href="#cb19-22"></a><span class="co">#&gt; [1] &quot;factor&quot;</span></span>
<span id="cb19-23"><a href="#cb19-23"></a><span class="co">#&gt; </span></span>
<span id="cb19-24"><a href="#cb19-24"></a><span class="co">#&gt; $race_sex$scores</span></span>
<span id="cb19-25"><a href="#cb19-25"></a><span class="co">#&gt;           Asian Female             Asian Male           Black Female </span></span>
<span id="cb19-26"><a href="#cb19-26"></a><span class="co">#&gt;                  262.5                  543.5                  837.5 </span></span>
<span id="cb19-27"><a href="#cb19-27"></a><span class="co">#&gt;             Black Male        Hispanic Female          Hispanic Male </span></span>
<span id="cb19-28"><a href="#cb19-28"></a><span class="co">#&gt;                  920.5                  189.5                  363.5 </span></span>
<span id="cb19-29"><a href="#cb19-29"></a><span class="co">#&gt; Native American Female   Native American Male           White Female </span></span>
<span id="cb19-30"><a href="#cb19-30"></a><span class="co">#&gt;                   24.5                   50.5                 3603.5 </span></span>
<span id="cb19-31"><a href="#cb19-31"></a><span class="co">#&gt;             White Male </span></span>
<span id="cb19-32"><a href="#cb19-32"></a><span class="co">#&gt;                 7757.0 </span></span>
<span id="cb19-33"><a href="#cb19-33"></a><span class="co">#&gt; </span></span>
<span id="cb19-34"><a href="#cb19-34"></a><span class="co">#&gt; </span></span>
<span id="cb19-35"><a href="#cb19-35"></a><span class="co">#&gt; $ever</span></span>
<span id="cb19-36"><a href="#cb19-36"></a><span class="co">#&gt; NULL</span></span></code></pre></div>
<p>Related vignettes</p>
<ul>
<li><em>Multiway graphs and tables</em> <a href="multiway_graphs.html">(link)</a> describes multiway data and graphs in detail</li>
</ul>
</div>
<div id="graph-the-results" class="section level2">
<h2>Graph the results</h2>
<p>We use ggplot2 to graph the multiway data. Rows and panels, from top to bottom, are ordered by decreasing medians. We use a logarithmic scale because the numbers differ by orders of magnitude. In a log base-2 scale, every grid line represents a doubling of the previous grid line.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> data_mw, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> ever, <span class="dt">y =</span> race_sex)) <span class="op">+</span></span>
<span id="cb20-2"><a href="#cb20-2"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="dt">facets =</span> <span class="kw">vars</span>(program), <span class="dt">ncol =</span> <span class="dv">1</span>, <span class="dt">as.table =</span> <span class="ot">FALSE</span>) <span class="op">+</span></span>
<span id="cb20-3"><a href="#cb20-3"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">na.rm =</span> <span class="ot">TRUE</span>) <span class="op">+</span></span>
<span id="cb20-4"><a href="#cb20-4"></a><span class="st">  </span><span class="kw">scale_x_continuous</span>(</span>
<span id="cb20-5"><a href="#cb20-5"></a>    <span class="dt">trans =</span> <span class="st">&quot;log2&quot;</span>,</span>
<span id="cb20-6"><a href="#cb20-6"></a>    <span class="dt">breaks =</span> <span class="dv">2</span><span class="op">^</span><span class="kw">seq</span>(<span class="dv">4</span>, <span class="dv">14</span>),</span>
<span id="cb20-7"><a href="#cb20-7"></a>    <span class="dt">limits =</span> <span class="dv">2</span><span class="op">^</span><span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">14</span>)</span>
<span id="cb20-8"><a href="#cb20-8"></a>  ) <span class="op">+</span></span>
<span id="cb20-9"><a href="#cb20-9"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">panel.grid.minor.x =</span> <span class="kw">element_blank</span>()) <span class="op">+</span></span>
<span id="cb20-10"><a href="#cb20-10"></a><span class="st">  </span><span class="kw">labs</span>(</span>
<span id="cb20-11"><a href="#cb20-11"></a>    <span class="dt">x =</span> <span class="st">&quot;Number of students (log-2 scale)&quot;</span>,</span>
<span id="cb20-12"><a href="#cb20-12"></a>    <span class="dt">y =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb20-13"><a href="#cb20-13"></a>    <span class="dt">title =</span> <span class="st">&quot;Ever enrolled in the program&quot;</span>,</span>
<span id="cb20-14"><a href="#cb20-14"></a>    <span class="dt">caption =</span> <span class="st">&quot;Source: midfielddata&quot;</span></span>
<span id="cb20-15"><a href="#cb20-15"></a>  )</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="references" class="section level2">
<h2>References</h2>
<div id="refs">
<div id="ref-Cleveland:1993">
<p>Cleveland, William S. (1993) <em>Visualizing Data</em>. Summit, NJ: Hobart Press.</p>
</div>
<div id="ref-Dowle+Srinivasan:2020:data.table">
<p>Dowle, Matt and Srinivasan, Arun (2020) <em>data.table: Extension of data.frame</em>. R package version 1.13.0. Available at: <a href="https://CRAN.R-project.org/package=data.table">https://CRAN.R-project.org/package=data.table</a>.</p>
</div>
</div>
</div>
<div id="appendix" class="section level2">
<h2>Appendix</h2>
<div id="complete-script" class="section level3">
<h3>Complete script</h3>
<p>The vignette code chunks are collected below in a single, condensed script.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="co"># packages used</span></span>
<span id="cb21-2"><a href="#cb21-2"></a><span class="kw">library</span>(midfieldr)</span>
<span id="cb21-3"><a href="#cb21-3"></a><span class="kw">library</span>(midfielddata)</span>
<span id="cb21-4"><a href="#cb21-4"></a><span class="kw">library</span>(data.table)</span>
<span id="cb21-5"><a href="#cb21-5"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb21-6"><a href="#cb21-6"></a></span>
<span id="cb21-7"><a href="#cb21-7"></a><span class="co"># gather programs</span></span>
<span id="cb21-8"><a href="#cb21-8"></a>engineering   &lt;-<span class="st"> </span><span class="kw">filter_text</span>(cip, <span class="dt">keep_text =</span> <span class="st">&quot;^14&quot;</span>, <span class="dt">keep_col =</span> <span class="st">&quot;cip6&quot;</span>)</span>
<span id="cb21-9"><a href="#cb21-9"></a>engineering[, program <span class="op">:</span><span class="er">=</span><span class="st"> &quot;Engineering&quot;</span>]</span>
<span id="cb21-10"><a href="#cb21-10"></a>business      &lt;-<span class="st"> </span><span class="kw">filter_text</span>(cip, <span class="dt">keep_text =</span> <span class="st">&quot;^52&quot;</span>, <span class="dt">keep_col =</span> <span class="st">&quot;cip6&quot;</span>)</span>
<span id="cb21-11"><a href="#cb21-11"></a>business      &lt;-<span class="st"> </span>business[, program <span class="op">:</span><span class="er">=</span><span class="st"> &quot;Business&quot;</span>]</span>
<span id="cb21-12"><a href="#cb21-12"></a>program_group &lt;-<span class="st"> </span><span class="kw">rbind</span>(engineering, business)</span>
<span id="cb21-13"><a href="#cb21-13"></a>group_cip     &lt;-<span class="st"> </span>program_group<span class="op">$</span>cip6</span>
<span id="cb21-14"><a href="#cb21-14"></a></span>
<span id="cb21-15"><a href="#cb21-15"></a><span class="co"># gather students</span></span>
<span id="cb21-16"><a href="#cb21-16"></a>cols_we_want &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;id&quot;</span>, <span class="st">&quot;cip6&quot;</span>)</span>
<span id="cb21-17"><a href="#cb21-17"></a>rows_we_want &lt;-<span class="st"> </span>midfieldterms<span class="op">$</span>cip6 <span class="op">%in%</span><span class="st"> </span>group_cip</span>
<span id="cb21-18"><a href="#cb21-18"></a>enrollees    &lt;-<span class="st"> </span>midfieldterms[rows_we_want, ..cols_we_want]</span>
<span id="cb21-19"><a href="#cb21-19"></a>rows_we_want &lt;-<span class="st"> </span>midfieldstudents<span class="op">$</span>cip6 <span class="op">%in%</span><span class="st"> </span>group_cip</span>
<span id="cb21-20"><a href="#cb21-20"></a>matriculants &lt;-<span class="st"> </span>midfieldstudents[rows_we_want, ..cols_we_want]</span>
<span id="cb21-21"><a href="#cb21-21"></a>enrollees    &lt;-<span class="st"> </span><span class="kw">rbind</span>(enrollees, matriculants)</span>
<span id="cb21-22"><a href="#cb21-22"></a>enrollees    &lt;-<span class="st"> </span><span class="kw">unique</span>(enrollees)</span>
<span id="cb21-23"><a href="#cb21-23"></a></span>
<span id="cb21-24"><a href="#cb21-24"></a><span class="co"># apply feasible completion </span></span>
<span id="cb21-25"><a href="#cb21-25"></a>feasible_ids &lt;-<span class="st"> </span><span class="kw">subset_feasible</span>(enrollees<span class="op">$</span>id)</span>
<span id="cb21-26"><a href="#cb21-26"></a>rows_we_want &lt;-<span class="st"> </span>enrollees<span class="op">$</span>id <span class="op">%in%</span><span class="st"> </span>feasible_ids</span>
<span id="cb21-27"><a href="#cb21-27"></a>enrollees    &lt;-<span class="st"> </span>enrollees[rows_we_want]</span>
<span id="cb21-28"><a href="#cb21-28"></a></span>
<span id="cb21-29"><a href="#cb21-29"></a><span class="co"># join grouping variables</span></span>
<span id="cb21-30"><a href="#cb21-30"></a>rows_we_want &lt;-<span class="st"> </span>midfieldstudents<span class="op">$</span>id <span class="op">%in%</span><span class="st"> </span>feasible_ids</span>
<span id="cb21-31"><a href="#cb21-31"></a>cols_we_want &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;id&quot;</span>, <span class="st">&quot;race&quot;</span>, <span class="st">&quot;sex&quot;</span>)</span>
<span id="cb21-32"><a href="#cb21-32"></a>race_sex     &lt;-<span class="st"> </span>midfieldstudents[rows_we_want, ..cols_we_want]</span>
<span id="cb21-33"><a href="#cb21-33"></a>enrollees    &lt;-<span class="st"> </span><span class="kw">merge</span>(enrollees, race_sex, <span class="dt">by =</span> <span class="st">&quot;id&quot;</span>, <span class="dt">all.x =</span> <span class="ot">TRUE</span>)</span>
<span id="cb21-34"><a href="#cb21-34"></a>enrollees    &lt;-<span class="st"> </span><span class="kw">merge</span>(enrollees, program_group, <span class="dt">by =</span> <span class="st">&quot;cip6&quot;</span>, <span class="dt">all.x =</span> <span class="ot">TRUE</span>)</span>
<span id="cb21-35"><a href="#cb21-35"></a>enrollees[, cip6 <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="ot">NULL</span>]</span>
<span id="cb21-36"><a href="#cb21-36"></a>enrollees    &lt;-<span class="st"> </span><span class="kw">unique</span>(enrollees)</span>
<span id="cb21-37"><a href="#cb21-37"></a></span>
<span id="cb21-38"><a href="#cb21-38"></a><span class="co"># group and summarize</span></span>
<span id="cb21-39"><a href="#cb21-39"></a>grouping_variables &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;program&quot;</span>, <span class="st">&quot;race&quot;</span>, <span class="st">&quot;sex&quot;</span>)</span>
<span id="cb21-40"><a href="#cb21-40"></a>grouped_enrollees  &lt;-<span class="st"> </span>enrollees[, .(<span class="dt">ever =</span> .N), by =<span class="st"> </span>grouping_variables]</span>
<span id="cb21-41"><a href="#cb21-41"></a></span>
<span id="cb21-42"><a href="#cb21-42"></a><span class="co"># condition the data for display</span></span>
<span id="cb21-43"><a href="#cb21-43"></a>pre_mw       &lt;-<span class="st"> </span>grouped_enrollees</span>
<span id="cb21-44"><a href="#cb21-44"></a>rows_we_want &lt;-<span class="st"> </span><span class="op">!</span>pre_mw<span class="op">$</span>race <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Unknown&quot;</span>, <span class="st">&quot;International&quot;</span>, <span class="st">&quot;Other&quot;</span>)</span>
<span id="cb21-45"><a href="#cb21-45"></a>pre_mw       &lt;-<span class="st"> </span>pre_mw[rows_we_want]</span>
<span id="cb21-46"><a href="#cb21-46"></a>rows_we_want &lt;-<span class="st"> </span>pre_mw<span class="op">$</span>ever <span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span></span>
<span id="cb21-47"><a href="#cb21-47"></a>pre_mw       &lt;-<span class="st"> </span>pre_mw[rows_we_want]</span>
<span id="cb21-48"><a href="#cb21-48"></a>pre_mw[, race_sex <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="kw">paste</span>(race, sex, <span class="dt">sep =</span> <span class="st">&quot; &quot;</span>)]</span>
<span id="cb21-49"><a href="#cb21-49"></a>cols_we_want &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;program&quot;</span>, <span class="st">&quot;race_sex&quot;</span>, <span class="st">&quot;ever&quot;</span>)</span>
<span id="cb21-50"><a href="#cb21-50"></a>pre_mw       &lt;-<span class="st"> </span>pre_mw[, ..cols_we_want]</span>
<span id="cb21-51"><a href="#cb21-51"></a>data_mw      &lt;-<span class="st"> </span><span class="kw">prepare_multiway</span>(pre_mw)</span>
<span id="cb21-52"><a href="#cb21-52"></a></span>
<span id="cb21-53"><a href="#cb21-53"></a><span class="co"># graph results</span></span>
<span id="cb21-54"><a href="#cb21-54"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> data_mw, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> ever, <span class="dt">y =</span> race_sex)) <span class="op">+</span></span>
<span id="cb21-55"><a href="#cb21-55"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="dt">facets =</span> <span class="kw">vars</span>(program), <span class="dt">ncol =</span> <span class="dv">1</span>, <span class="dt">as.table =</span> <span class="ot">FALSE</span>) <span class="op">+</span></span>
<span id="cb21-56"><a href="#cb21-56"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">na.rm =</span> <span class="ot">TRUE</span>) <span class="op">+</span></span>
<span id="cb21-57"><a href="#cb21-57"></a><span class="st">  </span><span class="kw">scale_x_continuous</span>(</span>
<span id="cb21-58"><a href="#cb21-58"></a>    <span class="dt">trans =</span> <span class="st">&quot;log2&quot;</span>,</span>
<span id="cb21-59"><a href="#cb21-59"></a>    <span class="dt">breaks =</span> <span class="dv">2</span><span class="op">^</span><span class="kw">seq</span>(<span class="dv">4</span>, <span class="dv">14</span>),</span>
<span id="cb21-60"><a href="#cb21-60"></a>    <span class="dt">limits =</span> <span class="dv">2</span><span class="op">^</span><span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">14</span>)</span>
<span id="cb21-61"><a href="#cb21-61"></a>  ) <span class="op">+</span></span>
<span id="cb21-62"><a href="#cb21-62"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">panel.grid.minor.x =</span> <span class="kw">element_blank</span>()) <span class="op">+</span></span>
<span id="cb21-63"><a href="#cb21-63"></a><span class="st">  </span><span class="kw">labs</span>(</span>
<span id="cb21-64"><a href="#cb21-64"></a>    <span class="dt">x =</span> <span class="st">&quot;Number of students (log-2 scale)&quot;</span>,</span>
<span id="cb21-65"><a href="#cb21-65"></a>    <span class="dt">y =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb21-66"><a href="#cb21-66"></a>    <span class="dt">title =</span> <span class="st">&quot;Ever enrolled in the program&quot;</span>,</span>
<span id="cb21-67"><a href="#cb21-67"></a>    <span class="dt">caption =</span> <span class="st">&quot;Source: midfielddata&quot;</span></span>
<span id="cb21-68"><a href="#cb21-68"></a>  )</span></code></pre></div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
