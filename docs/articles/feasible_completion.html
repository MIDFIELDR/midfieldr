<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Filter for program completion feasibility • midfieldr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Filter for program completion feasibility">
<meta property="og:description" content="midfieldr">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">midfieldr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/using_midfieldr.html">Using midfieldr</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/explore_cip.html">Explore program CIP codes</a>
    </li>
    <li>
      <a href="../articles/get_programs.html">Gather programs</a>
    </li>
    <li>
      <a href="../articles/feasible_completion.html">Filter for program completion feasibility</a>
    </li>
    <li>
      <a href="../articles/explore_multiway.html">Explore multiway data</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Papers/Talks
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/pages/talks.html">Talks</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/pages/get_session.html">Session info</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../articles/pages/about_midfield.html">About</a>
</li>
<li>
  <a href="https://github.com/MIDFIELDR/midfieldr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="feasible_completion_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Filter for program completion feasibility</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/MIDFIELDR/midfieldr/blob/master/vignettes/feasible_completion.Rmd"><code>vignettes/feasible_completion.Rmd</code></a></small>
      <div class="hidden name"><code>feasible_completion.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>Persistence metrics often include a criterion that students complete their programs within <span class="math inline">\(x\)</span> years (typically 6 years, based on 150% of the “normal” time to completion). See, for example, <span class="citation">(“IPEDS Survey Components” <a href="#ref-ipeds2018" role="doc-biblioref">2018</a>)</span>.</p>
<p>In longitudinal research, this completion criterion requires special care. For student records near the upper limit of an institution’s data range, a student’s completion status can be ambiguous. Consider a case in which:</p>
<ul>
<li>a student matriculates in 2012 and graduates in 2017</li>
<li>their institution’s data range ends in 2016</li>
</ul>
<p>The student satisfies the completion criterion, but their recorded degree status is NA because their degree term exceeds the data range.</p>
<p>Without special care, such students would add to the count of non-graduates, adversely and unfairly affecting the value of a persistence metric. Therefore, if completing their program is not feasible given the range of data available, students with a degree status of NA are excluded from the analysis.</p>
<p>Feasible completion terminology is illustrated in the figure. Definitions are given below.</p>
<p><br></p>
<p><img src="../man/figures/vignette-feasible-completion-fig1-1.png" width="70%" style="display: block; margin: auto;"></p>
<p><br></p>
<dl>
<dt>term encoding</dt>
<dd>midfielddata terms are encoded numerically <code>YYYYT</code>, where <code>YYYY</code> is the year that starts the academic year and <code>T</code> is the term index: 1 (Fall), 2 (Winter, quarter systems), 3 (Spring), or 4-6 (summer sessions).
</dd>
<dt>data range</dt>
<dd>The span of terms for which student-record data are available, from the “first record” term to the “data limit” term. Varies by institution.
</dd>
<dt>completion feasibility</dt>
<dd>A student may complete their program within the data limit.
</dd>
<dt>matriculation limit</dt>
<dd>The last term a student can matriculate and feasibly complete their program. Defined as <span class="math inline">\(x\)</span> years (typically 6 years) before the data limit. Can be advanced by transfer credit hours.
</dd>
</dl>
<p><br><a href="#top">▲ top of page</a></p>
</div>
<div id="how-to-use-completion_feasible" class="section level2">
<h2 class="hasAnchor">
<a href="#how-to-use-completion_feasible" class="anchor"></a>How to use <code>completion_feasible()</code>
</h2>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="co"># packages used in the vignette</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">midfieldr</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">midfielddata</span>)</pre></body></html></div>
<p>A vector of student IDs is required to begin the feasible completion analysis. We choose the set of students ever enrolled in the study programs as the largest possible pool.</p>
<p>From earlier work in the case study, we have a built-in data set <code>exa_ever</code> of the 10,135 student IDs ever enrolled in our case study programs.</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="co"># identify the group of students</span>
<span class="no">enrollees_id</span> <span class="kw">&lt;-</span> <span class="no">exa_ever</span>

<span class="co"># examine the result</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(<span class="no">enrollees_id</span>)
<span class="co">#&gt;  chr [1:10135] "MID25783178" "MID25783197" "MID25783388" "MID25783441" ...</span></pre></body></html></div>
<p>This vector of IDs is the input to <code><a href="../reference/completion_feasible.html">completion_feasible()</a></code>, which performs the subsetting for completion feasibility in one call.</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="co"># filter IDs for feasible program completion within data limit</span>
<span class="no">enrollees_fc</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/completion_feasible.html">completion_feasible</a></span>(<span class="kw">id</span> <span class="kw">=</span> <span class="no">enrollees_id</span>)

<span class="co"># examine the result</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(<span class="no">enrollees_fc</span>)
<span class="co">#&gt;  chr [1:8043] "MID25783178" "MID25783197" "MID25783388" "MID25783441" ...</span></pre></body></html></div>
<p>In this instance, we started with 10,135 enrollees. After applying the criteria for feasible completion, we retain 8043 students. These students either graduated (demonstrating the feasibility of completing their programs before the data limit) or they matriculated no later than their matriculation limits.</p>
<p>For continuing work with this case study, these IDs are saved as a data set in midfieldr called <code>exa_ever_fc</code>.</p>
<p><br><a href="#top">▲ top of page</a></p>
</div>
<div id="how-completion_feasible-works" class="section level2">
<h2 class="hasAnchor">
<a href="#how-completion_feasible-works" class="anchor"></a>How <code>completion_feasible()</code> works</h2>
<p>The remainder of the vignette describes the inner workings of <code><a href="../reference/completion_feasible.html">completion_feasible()</a></code>. Its operation can be divided into 5 basic steps:</p>
<ol style="list-style-type: decimal">
<li>Subset students with and without degrees</li>
<li>Gather transfer data</li>
<li>Gather institution variables</li>
<li>Advance the matriculation limit</li>
<li>Return the completion-feasible subset of student IDs</li>
</ol>
<div id="subset-students-with-and-without-degrees" class="section level3">
<h3 class="hasAnchor">
<a href="#subset-students-with-and-without-degrees" class="anchor"></a>1. Subset students with and without degrees</h3>
<p>We obtain the degree data for the enrollees using <code><a href="../reference/get_status_degrees.html">get_status_degrees()</a></code> to subset the student degree data (<code>midfielddegrees</code> or equivalent) and return the student degree keyed by ID. The values of <code>degree</code> are character, e.g., “Bachelor of Science”, or NA for no degree.</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="co"># gather student degree data</span>
<span class="no">enrollees_id</span> <span class="kw">&lt;-</span> <span class="no">exa_ever</span>
<span class="no">degree_data</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_status_degrees.html">get_status_degrees</a></span>(<span class="no">midfielddegrees</span>, <span class="kw">keep_id</span> <span class="kw">=</span> <span class="no">enrollees_id</span>)

<span class="co"># examine the result</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(<span class="no">degree_data</span>)
<span class="co">#&gt; Classes 'data.table' and 'data.frame':   10135 obs. of  3 variables:</span>
<span class="co">#&gt;  $ id         : chr  "MID25783178" "MID25783197" "MID25783388" "MID25783441" ...</span>
<span class="co">#&gt;  $ institution: chr  "Institution M" "Institution M" "Institution M" "Institution M" ...</span>
<span class="co">#&gt;  $ degree     : chr  "Bachelor of Science" "Bachelor of Science" NA "Bachelor of Science" ...</span>
<span class="co">#&gt;  - attr(*, ".internal.selfref")=&lt;externalptr&gt;</span></pre></body></html></div>
<p>Students with degrees have demonstrated that completing their programs before the data limits was feasible. We can extract their IDs (to be used later) and continue the completion feasibility study with the smaller non-graduate student subset.</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="co"># subset students with degrees and without</span>
<span class="no">grad_rows</span> <span class="kw">&lt;-</span> !<span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(<span class="no">degree_data</span>$<span class="no">degree</span>)
<span class="no">grads</span> <span class="kw">&lt;-</span> <span class="no">degree_data</span>[<span class="no">grad_rows</span>]
<span class="no">nongrads</span> <span class="kw">&lt;-</span> <span class="no">degree_data</span>[!<span class="no">grad_rows</span>]

<span class="co"># extract the IDs</span>
<span class="no">grads_id</span> <span class="kw">&lt;-</span> <span class="no">grads</span>$<span class="no">id</span>
<span class="no">nongrads_id</span> <span class="kw">&lt;-</span> <span class="no">nongrads</span>$<span class="no">id</span>

<span class="co"># examine the result</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(<span class="no">grads_id</span>)
<span class="co">#&gt;  chr [1:6112] "MID25783178" "MID25783197" "MID25783441" "MID25783491" ...</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(<span class="no">nongrads_id</span>)
<span class="co">#&gt;  chr [1:4023] "MID25783388" "MID25783553" "MID25783606" "MID25783648" ...</span></pre></body></html></div>
</div>
<div id="gather-transfer-data" class="section level3">
<h3 class="hasAnchor">
<a href="#gather-transfer-data" class="anchor"></a>2. Gather transfer data</h3>
<p>If the vector of non-grad IDs is empty, the rest of the algorithm is skipped and we return the vector of grad IDs as the complete set of IDs for feasible completion.</p>
<p>Otherwise, we continue by calling <code><a href="../reference/get_status_transfers.html">get_status_transfers()</a></code> for the non-graduates to subset the student attributes data (<code>midfieldstudents</code> or equivalent) and return the student matriculation term and transfer credit hours keyed by ID. The values of <code>hours_transfer</code> are numerical or NA for no transfer hours.</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="co"># gather transfer data for non-grads</span>
<span class="no">transfer_data</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_status_transfers.html">get_status_transfers</a></span>(<span class="no">midfieldstudents</span>, <span class="kw">keep_id</span> <span class="kw">=</span> <span class="no">nongrads_id</span>)

<span class="co"># examine the result</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(<span class="no">transfer_data</span>)
<span class="co">#&gt; Classes 'data.table' and 'data.frame':   4023 obs. of  3 variables:</span>
<span class="co">#&gt;  $ id            : chr  "MID25783388" "MID25783553" "MID25783606" "MID25783648" ...</span>
<span class="co">#&gt;  $ term_enter    : num  19871 20021 20011 20071 20011 ...</span>
<span class="co">#&gt;  $ hours_transfer: num  NA NA NA NA NA NA NA NA NA NA ...</span>
<span class="co">#&gt;  - attr(*, ".internal.selfref")=&lt;externalptr&gt;</span></pre></body></html></div>
<p>Joining <code>transfer_data</code> to <code>nongrads</code> (by <code>id</code>) yields the complete student information we need.</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="co"># join transfer data to non-grads</span>
<span class="no">nongrads</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html">merge</a></span>(<span class="no">nongrads</span>, <span class="no">transfer_data</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="st">"id"</span>, <span class="kw">all.x</span> <span class="kw">=</span> <span class="fl">TRUE</span>)

<span class="co"># examine the result</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(<span class="no">nongrads</span>)
<span class="co">#&gt; Classes 'data.table' and 'data.frame':   4023 obs. of  5 variables:</span>
<span class="co">#&gt;  $ id            : chr  "MID25783388" "MID25783553" "MID25783606" "MID25783648" ...</span>
<span class="co">#&gt;  $ institution   : chr  "Institution M" "Institution M" "Institution M" "Institution M" ...</span>
<span class="co">#&gt;  $ degree        : chr  NA NA NA NA ...</span>
<span class="co">#&gt;  $ term_enter    : num  19871 20021 20011 20071 20011 ...</span>
<span class="co">#&gt;  $ hours_transfer: num  NA NA NA NA NA NA NA NA NA NA ...</span>
<span class="co">#&gt;  - attr(*, ".internal.selfref")=&lt;externalptr&gt; </span>
<span class="co">#&gt;  - attr(*, "sorted")= chr "id"</span></pre></body></html></div>
</div>
<div id="gather-institution-variables" class="section level3">
<h3 class="hasAnchor">
<a href="#gather-institution-variables" class="anchor"></a>3. Gather institution variables</h3>
<p><code><a href="../reference/get_institution_limits.html">get_institution_limits()</a></code> provides the following information we need for feasible completion analysis:</p>
<ul>
<li>determines upper data limits from the term-attributes data (default is <code>midfieldterms</code>)</li>
<li>calculates <code>matriculation limit = data limit - span</code> (default <code>span</code> is 6 years)</li>
</ul>
<p>Some data limits are “rounded down” before computing matriculation limits. Summer term data limits are rounded to the preceding Spring; Winter term data limits (institutions on quarter systems) are rounded to the preceding Fall.</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="co"># gather data limits and matriculation limits</span>
<span class="no">institution_limits</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_institution_limits.html">get_institution_limits</a></span>(<span class="no">midfieldterms</span>)

<span class="co"># examine the result</span>
<span class="no">institution_limits</span>
<span class="co">#&gt;       institution matric_limit data_limit</span>
<span class="co">#&gt;  1: Institution A        19981      20034</span>
<span class="co">#&gt;  2: Institution B        20051      20104</span>
<span class="co">#&gt;  3: Institution C        20101      20154</span>
<span class="co">#&gt;  4: Institution D        20101      20154</span>
<span class="co">#&gt;  5: Institution E        19981      20034</span>
<span class="co">#&gt;  6: Institution F        19991      20044</span>
<span class="co">#&gt;  7: Institution G        19993      20051</span>
<span class="co">#&gt;  8: Institution H        19981      20036</span>
<span class="co">#&gt;  9: Institution J        20041      20096</span>
<span class="co">#&gt; 10: Institution K        19981      20034</span>
<span class="co">#&gt; 11: Institution L        20111      20164</span>
<span class="co">#&gt; 12: Institution M        20041      20096</span></pre></body></html></div>
<p>We determine the median number of credit-hours per term by institution. We use only students with degrees.</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="co"># find median hours per term of students with degrees</span>
<span class="no">hr_per_term</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_institution_hours_term.html">get_institution_hours_term</a></span>(<span class="no">midfieldterms</span>, <span class="kw">keep_id</span> <span class="kw">=</span> <span class="no">grads_id</span>)

<span class="co"># examine the result</span>
<span class="no">hr_per_term</span>
<span class="co">#&gt;       institution median_hr_per_term</span>
<span class="co">#&gt;  1: Institution A                 14</span>
<span class="co">#&gt;  2: Institution B                 15</span>
<span class="co">#&gt;  3: Institution C                 14</span>
<span class="co">#&gt;  4: Institution D                 17</span>
<span class="co">#&gt;  5: Institution E                 12</span>
<span class="co">#&gt;  6: Institution F                 14</span>
<span class="co">#&gt;  7: Institution G                 12</span>
<span class="co">#&gt;  8: Institution H                 12</span>
<span class="co">#&gt;  9: Institution J                 12</span>
<span class="co">#&gt; 10: Institution K                 12</span>
<span class="co">#&gt; 11: Institution L                 12</span>
<span class="co">#&gt; 12: Institution M                 14</span></pre></body></html></div>
<p>And we join <code>hr_per_term</code> to <code>institution_limits</code> (by <code>institution</code>) to conclude our institution data gathering.</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="co"># join the two sets of institution data</span>
<span class="no">institutions</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html">merge</a></span>(<span class="no">institution_limits</span>,
  <span class="no">hr_per_term</span>,
  <span class="kw">by</span> <span class="kw">=</span> <span class="st">"institution"</span>,
  <span class="kw">all.x</span> <span class="kw">=</span> <span class="fl">TRUE</span>
)

<span class="co"># examine the result</span>
<span class="no">institutions</span>
<span class="co">#&gt;       institution matric_limit data_limit median_hr_per_term</span>
<span class="co">#&gt;  1: Institution A        19981      20034                 14</span>
<span class="co">#&gt;  2: Institution B        20051      20104                 15</span>
<span class="co">#&gt;  3: Institution C        20101      20154                 14</span>
<span class="co">#&gt;  4: Institution D        20101      20154                 17</span>
<span class="co">#&gt;  5: Institution E        19981      20034                 12</span>
<span class="co">#&gt;  6: Institution F        19991      20044                 14</span>
<span class="co">#&gt;  7: Institution G        19993      20051                 12</span>
<span class="co">#&gt;  8: Institution H        19981      20036                 12</span>
<span class="co">#&gt;  9: Institution J        20041      20096                 12</span>
<span class="co">#&gt; 10: Institution K        19981      20034                 12</span>
<span class="co">#&gt; 11: Institution L        20111      20164                 12</span>
<span class="co">#&gt; 12: Institution M        20041      20096                 14</span></pre></body></html></div>
<p>Next we join <code>nongrads</code> and <code>institution_limits</code> (by <code>institution</code>).</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="co"># join student and institution data</span>
<span class="no">fc_data</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html">merge</a></span>(<span class="no">nongrads</span>, <span class="no">institutions</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="st">"institution"</span>, <span class="kw">all.x</span> <span class="kw">=</span> <span class="fl">TRUE</span>)

<span class="co"># examine the result</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(<span class="no">fc_data</span>)
<span class="co">#&gt; Classes 'data.table' and 'data.frame':   4023 obs. of  8 variables:</span>
<span class="co">#&gt;  $ institution       : chr  "Institution A" "Institution A" "Institution A" "Institution A" ...</span>
<span class="co">#&gt;  $ id                : chr  "MID26131502" "MID26131523" "MID26131544" "MID26133649" ...</span>
<span class="co">#&gt;  $ degree            : chr  NA NA NA NA ...</span>
<span class="co">#&gt;  $ term_enter        : num  20011 20011 19981 19901 20024 ...</span>
<span class="co">#&gt;  $ hours_transfer    : num  NA NA NA NA NA NA NA NA NA NA ...</span>
<span class="co">#&gt;  $ matric_limit      : num  19981 19981 19981 19981 19981 ...</span>
<span class="co">#&gt;  $ data_limit        : num  20034 20034 20034 20034 20034 ...</span>
<span class="co">#&gt;  $ median_hr_per_term: num  14 14 14 14 14 14 14 14 14 14 ...</span>
<span class="co">#&gt;  - attr(*, ".internal.selfref")=&lt;externalptr&gt; </span>
<span class="co">#&gt;  - attr(*, "sorted")= chr "institution"</span></pre></body></html></div>
<p>We set NA values of <code>hours_transfer</code> to zero so that later, term addition avoids sums with NA.</p>
<div class="sourceCode" id="cb12"><html><body><pre class="r"><span class="co"># set NA transfer hours to zero</span>
<span class="no">rows_to_zero</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(<span class="no">fc_data</span>$<span class="no">hours_transfer</span>)
<span class="no">fc_data</span>[<span class="no">rows_to_zero</span>, <span class="no">hours_transfer</span> <span class="kw">:=</span> <span class="fl">0</span>]

<span class="co"># examine the result</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(<span class="no">fc_data</span>)
<span class="co">#&gt; Classes 'data.table' and 'data.frame':   4023 obs. of  8 variables:</span>
<span class="co">#&gt;  $ institution       : chr  "Institution A" "Institution A" "Institution A" "Institution A" ...</span>
<span class="co">#&gt;  $ id                : chr  "MID26131502" "MID26131523" "MID26131544" "MID26133649" ...</span>
<span class="co">#&gt;  $ degree            : chr  NA NA NA NA ...</span>
<span class="co">#&gt;  $ term_enter        : num  20011 20011 19981 19901 20024 ...</span>
<span class="co">#&gt;  $ hours_transfer    : num  0 0 0 0 0 0 0 0 0 0 ...</span>
<span class="co">#&gt;  $ matric_limit      : num  19981 19981 19981 19981 19981 ...</span>
<span class="co">#&gt;  $ data_limit        : num  20034 20034 20034 20034 20034 ...</span>
<span class="co">#&gt;  $ median_hr_per_term: num  14 14 14 14 14 14 14 14 14 14 ...</span>
<span class="co">#&gt;  - attr(*, ".internal.selfref")=&lt;externalptr&gt; </span>
<span class="co">#&gt;  - attr(*, "sorted")= chr "institution"</span></pre></body></html></div>
<p>Now we’re ready to advance the matriculation limit for transfer students where needed.</p>
</div>
<div id="advance-the-matriculation-limit" class="section level3">
<h3 class="hasAnchor">
<a href="#advance-the-matriculation-limit" class="anchor"></a>4. Advance the matriculation limit</h3>
<p>We convert transfer-credit hours to their equivalent transfer-credit terms.</p>
<div class="sourceCode" id="cb13"><html><body><pre class="r"><span class="co"># estimate the term-equivalent of transfer credit hours</span>
<span class="no">fc_data</span>[, <span class="no">terms_transfer</span> <span class="kw">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">floor</a></span>(<span class="no">hours_transfer</span> / <span class="no">median_hr_per_term</span>)]

<span class="co"># examine the result</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(<span class="no">fc_data</span>)
<span class="co">#&gt; Classes 'data.table' and 'data.frame':   4023 obs. of  9 variables:</span>
<span class="co">#&gt;  $ institution       : chr  "Institution A" "Institution A" "Institution A" "Institution A" ...</span>
<span class="co">#&gt;  $ id                : chr  "MID26131502" "MID26131523" "MID26131544" "MID26133649" ...</span>
<span class="co">#&gt;  $ degree            : chr  NA NA NA NA ...</span>
<span class="co">#&gt;  $ term_enter        : num  20011 20011 19981 19901 20024 ...</span>
<span class="co">#&gt;  $ hours_transfer    : num  0 0 0 0 0 0 0 0 0 0 ...</span>
<span class="co">#&gt;  $ matric_limit      : num  19981 19981 19981 19981 19981 ...</span>
<span class="co">#&gt;  $ data_limit        : num  20034 20034 20034 20034 20034 ...</span>
<span class="co">#&gt;  $ median_hr_per_term: num  14 14 14 14 14 14 14 14 14 14 ...</span>
<span class="co">#&gt;  $ terms_transfer    : num  0 0 0 0 0 0 0 0 0 0 ...</span>
<span class="co">#&gt;  - attr(*, ".internal.selfref")=&lt;externalptr&gt; </span>
<span class="co">#&gt;  - attr(*, "sorted")= chr "institution"</span></pre></body></html></div>
<p>There are several columns we can drop to make the other variables easier to review as he analysis proceeds.</p>
<div class="sourceCode" id="cb14"><html><body><pre class="r"><span class="co"># omit columns no longer necessary</span>
<span class="no">fc_data</span>$<span class="no">degree</span> <span class="kw">&lt;-</span> <span class="kw">NULL</span>
<span class="no">fc_data</span>$<span class="no">data_limit</span> <span class="kw">&lt;-</span> <span class="kw">NULL</span>
<span class="no">fc_data</span>$<span class="no">institution</span> <span class="kw">&lt;-</span> <span class="kw">NULL</span>
<span class="no">fc_data</span>$<span class="no">hours_transfer</span> <span class="kw">&lt;-</span> <span class="kw">NULL</span>
<span class="no">fc_data</span>$<span class="no">median_hr_per_term</span> <span class="kw">&lt;-</span> <span class="kw">NULL</span>

<span class="co"># examine the result</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">fc_data</span>)
<span class="co">#&gt;             id term_enter matric_limit terms_transfer</span>
<span class="co">#&gt; 1: MID26131502      20011        19981              0</span>
<span class="co">#&gt; 2: MID26131523      20011        19981              0</span>
<span class="co">#&gt; 3: MID26131544      19981        19981              0</span>
<span class="co">#&gt; 4: MID26133649      19901        19981              0</span>
<span class="co">#&gt; 5: MID26135340      20024        19981              0</span>
<span class="co">#&gt; 6: MID26137725      19901        19981              0</span></pre></body></html></div>
<p>Students are typically required to complete at least the final 30-60 credits (about 2 years) in residence at their new institution to earn a degree. Thus for the feasible completion analysis, we limit the transfer terms to 4 or less.</p>
<div class="sourceCode" id="cb15"><html><body><pre class="r"><span class="co"># transfer terms limited to a maximum of 4</span>
<span class="no">rows_to_limit</span> <span class="kw">&lt;-</span> <span class="no">fc_data</span>$<span class="no">terms_transfer</span> <span class="kw">&gt;</span> <span class="fl">4</span>
<span class="no">fc_data</span>[<span class="no">rows_to_limit</span>, <span class="no">terms_transfer</span> <span class="kw">:=</span> <span class="fl">4</span>]</pre></body></html></div>
<p>Next we perform some “term arithmetic” to advance the matriculation limit by the number of terms of credit hours transferred. <code><a href="../reference/term_addition.html">term_addition()</a></code> adds the number of terms T in the <code>add_col</code> argument to the terms YYYYT in the <code>term_col</code> argument.</p>
<div class="sourceCode" id="cb16"><html><body><pre class="r"><span class="co"># advance the matriculation limit</span>
<span class="no">fc_data</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/term_addition.html">term_addition</a></span>(<span class="no">fc_data</span>,
  <span class="kw">term_col</span> <span class="kw">=</span> <span class="st">"matric_limit"</span>,
  <span class="kw">add_col</span> <span class="kw">=</span> <span class="st">"terms_transfer"</span>
)

<span class="co"># examine the result</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(<span class="no">fc_data</span>)
<span class="co">#&gt; Classes 'data.table' and 'data.frame':   4023 obs. of  4 variables:</span>
<span class="co">#&gt;  $ matric_limit  : num  19981 19981 19981 19981 19981 ...</span>
<span class="co">#&gt;  $ id            : chr  "MID26131502" "MID26131523" "MID26131544" "MID26133649" ...</span>
<span class="co">#&gt;  $ term_enter    : num  20011 20011 19981 19901 20024 ...</span>
<span class="co">#&gt;  $ terms_transfer: num  0 0 0 0 0 0 0 0 0 0 ...</span>
<span class="co">#&gt;  - attr(*, ".internal.selfref")=&lt;externalptr&gt;</span></pre></body></html></div>
</div>
<div id="return-the-completion-feasible-subset-of-student-ids" class="section level3">
<h3 class="hasAnchor">
<a href="#return-the-completion-feasible-subset-of-student-ids" class="anchor"></a>5. Return the completion-feasible subset of student IDs</h3>
<p>Finally, we subset the non-graduates, retaining those whose matriculation term is no later than the matriculation limit.</p>
<div class="sourceCode" id="cb17"><html><body><pre class="r"><span class="co"># completion is feasible if the entry term does not exceed</span>
<span class="co"># the matriculation limit</span>
<span class="no">rows_we_want</span> <span class="kw">&lt;-</span> <span class="no">fc_data</span>$<span class="no">term_enter</span> <span class="kw">&lt;=</span> <span class="no">fc_data</span>$<span class="no">matric_limit</span>
<span class="no">nongrad_fc</span> <span class="kw">&lt;-</span> <span class="no">fc_data</span>[<span class="no">rows_we_want</span>]

<span class="co"># examine the result</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(<span class="no">nongrad_fc</span>)
<span class="co">#&gt; Classes 'data.table' and 'data.frame':   1931 obs. of  4 variables:</span>
<span class="co">#&gt;  $ matric_limit  : num  19981 19981 19981 19981 19981 ...</span>
<span class="co">#&gt;  $ id            : chr  "MID26131544" "MID26133649" "MID26137725" "MID26140157" ...</span>
<span class="co">#&gt;  $ term_enter    : num  19981 19901 19901 19941 19944 ...</span>
<span class="co">#&gt;  $ terms_transfer: num  0 0 0 0 0 0 0 0 0 0 ...</span>
<span class="co">#&gt;  - attr(*, ".internal.selfref")=&lt;externalptr&gt;</span></pre></body></html></div>
<p>If the non-grad ID vector is not empty, we combine it with the grads ID vector we set aside earlier. The result is the vector of IDs of students from the original pool for whom program completion is feasible.</p>
<div class="sourceCode" id="cb18"><html><body><pre class="r"><span class="co"># gather the IDs of all students with completion feasible</span>
<span class="no">nongrad_fc_id</span> <span class="kw">&lt;-</span> <span class="no">nongrad_fc</span>$<span class="no">id</span>

<span class="co"># concatenate</span>
<span class="no">feasible_id</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="no">grads_id</span>, <span class="no">nongrad_fc_id</span>)
<span class="no">feasible_id</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span>(<span class="no">feasible_id</span>))

<span class="co"># examine the result</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(<span class="no">feasible_id</span>)
<span class="co">#&gt;  chr [1:8043] "MID25783178" "MID25783197" "MID25783388" "MID25783441" ...</span></pre></body></html></div>
<p>This result is identical to the result obtained earlier using <code><a href="../reference/completion_feasible.html">completion_feasible()</a></code>.</p>
</div>
</div>
<div id="references" class="section level2">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<div id="refs">
<div id="ref-ipeds2018">
<p>“IPEDS Survey Components.” 2018. National Center for Education Statistics (NCES); <a href="https://nces.ed.gov/ipeds/use-the-data/survey-components/outcome-measures">https://nces.ed.gov/ipeds/use-the-data/survey-components/outcome-measures</a>.</p>
</div>
</div>
</div>
<div id="appendix" class="section level2">
<h2 class="hasAnchor">
<a href="#appendix" class="anchor"></a>Appendix</h2>
<p>The vignette code chunks are collected below in a condensed script—in this case, in two parts.</p>
<div id="script-how-to-use-completion_feasible" class="section level3">
<h3 class="hasAnchor">
<a href="#script-how-to-use-completion_feasible" class="anchor"></a>Script: how to use <code>completion_feasible()</code>
</h3>
<div class="sourceCode" id="cb19"><html><body><pre class="r"><span class="co"># packages used in the vignette</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"midfieldr"</span>)

<span class="co"># filter IDs for feasible program completion within data limit</span>
<span class="no">enrollees_id</span> <span class="kw">&lt;-</span> <span class="no">exa_ever</span>
<span class="no">enrollees_fc</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/completion_feasible.html">completion_feasible</a></span>(<span class="kw">id</span> <span class="kw">=</span> <span class="no">enrollees_id</span>)</pre></body></html></div>
</div>
<div id="script-how-completion_feasible-works" class="section level3">
<h3 class="hasAnchor">
<a href="#script-how-completion_feasible-works" class="anchor"></a>Script: how <code>completion_feasible()</code> works</h3>
<p>The rest of the script shows the details of what happens inside <code><a href="../reference/completion_feasible.html">completion_feasible()</a></code>.</p>
<div class="sourceCode" id="cb20"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">midfieldr</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">midfielddata</span>)

<span class="co"># subset students with and without degrees</span>
<span class="no">enrollees_id</span> <span class="kw">&lt;-</span> <span class="no">exa_ever</span>
<span class="no">degree_data</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_status_degrees.html">get_status_degrees</a></span>(<span class="no">midfielddegrees</span>, <span class="kw">keep_id</span> <span class="kw">=</span> <span class="no">enrollees_id</span>)
<span class="no">grad_rows</span> <span class="kw">&lt;-</span> !<span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(<span class="no">degree_data</span>$<span class="no">degree</span>)
<span class="no">grads</span> <span class="kw">&lt;-</span> <span class="no">degree_data</span>[<span class="no">grad_rows</span>]
<span class="no">nongrads</span> <span class="kw">&lt;-</span> <span class="no">degree_data</span>[!<span class="no">grad_rows</span>]
<span class="no">grads_id</span> <span class="kw">&lt;-</span> <span class="no">grads</span>$<span class="no">id</span>
<span class="no">nongrads_id</span> <span class="kw">&lt;-</span> <span class="no">nongrads</span>$<span class="no">id</span>

<span class="co"># gather transfer data</span>
<span class="no">transfer_data</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_status_transfers.html">get_status_transfers</a></span>(<span class="no">midfieldstudents</span>, <span class="kw">keep_id</span> <span class="kw">=</span> <span class="no">nongrads_id</span>)
<span class="no">nongrads</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html">merge</a></span>(<span class="no">nongrads</span>, <span class="no">transfer_data</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="st">"id"</span>, <span class="kw">all.x</span> <span class="kw">=</span> <span class="fl">TRUE</span>)

<span class="co"># gather institution variables</span>
<span class="no">inst_limits</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_institution_limits.html">get_institution_limits</a></span>(<span class="no">midfieldterms</span>)
<span class="no">hr_per_term</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_institution_hours_term.html">get_institution_hours_term</a></span>(<span class="no">midfieldterms</span>, <span class="kw">keep_id</span> <span class="kw">=</span> <span class="no">grads_id</span>)
<span class="no">institutions</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html">merge</a></span>(<span class="no">inst_limits</span>,
  <span class="no">hr_per_term</span>,
  <span class="kw">by</span> <span class="kw">=</span> <span class="st">"institution"</span>,
  <span class="kw">all.x</span> <span class="kw">=</span> <span class="fl">TRUE</span>
)
<span class="no">fc_data</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html">merge</a></span>(<span class="no">nongrads</span>,
  <span class="no">institutions</span>,
  <span class="kw">by</span> <span class="kw">=</span> <span class="st">"institution"</span>,
  <span class="kw">all.x</span> <span class="kw">=</span> <span class="fl">TRUE</span>
)
<span class="no">rows_to_zero</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(<span class="no">fc_data</span>$<span class="no">hours_transfer</span>)
<span class="no">fc_data</span>[<span class="no">rows_to_zero</span>, <span class="no">hours_transfer</span> <span class="kw">:=</span> <span class="fl">0</span>]

<span class="co"># advance the matriculation limit</span>
<span class="no">fc_data</span>[, <span class="no">terms_transfer</span> <span class="kw">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">floor</a></span>(<span class="no">hours_transfer</span> / <span class="no">median_hr_per_term</span>)]
<span class="no">rows_to_limit</span> <span class="kw">&lt;-</span> <span class="no">fc_data</span>$<span class="no">terms_transfer</span> <span class="kw">&gt;</span> <span class="fl">4</span>
<span class="no">fc_data</span>[<span class="no">rows_to_limit</span>, <span class="no">terms_transfer</span> <span class="kw">:=</span> <span class="fl">4</span>]
<span class="no">fc_data</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/term_addition.html">term_addition</a></span>(<span class="no">fc_data</span>,
  <span class="kw">term_col</span> <span class="kw">=</span> <span class="st">"matric_limit"</span>,
  <span class="kw">add_col</span> <span class="kw">=</span> <span class="st">"terms_transfer"</span>
)

<span class="co"># return the completion-feasible subset of student IDs</span>
<span class="no">rows_we_want</span> <span class="kw">&lt;-</span> <span class="no">fc_data</span>$<span class="no">term_enter</span> <span class="kw">&lt;=</span> <span class="no">fc_data</span>$<span class="no">matric_limit</span>
<span class="no">nongrad_fc</span> <span class="kw">&lt;-</span> <span class="no">fc_data</span>[<span class="no">rows_we_want</span>]
<span class="no">nongrad_fc_id</span> <span class="kw">&lt;-</span> <span class="no">nongrad_fc</span>$<span class="no">id</span>
<span class="no">feasible_id</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="no">grads_id</span>, <span class="no">nongrad_fc_id</span>)))</pre></body></html></div>
<p><br><a href="#top">▲ top of page </a><br><a href="../index.html">◁ main page </a></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Richard Layton, Russell Long, Matthew Ohland, US National Science Foundation.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
