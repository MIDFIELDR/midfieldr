<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Data sufficiency • midfieldr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Data sufficiency">
<meta property="og:description" content="midfieldr">
<meta property="og:image" content="https://midfieldr.github.io/midfieldr/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-light navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">midfieldr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0.9018</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/art-000-getting-started.html">Getting started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Case study
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/art-002-case-study-programs.html">Programs</a>
    </li>
    <li>
      <a href="../articles/art-004-case-study-students.html">Students</a>
    </li>
    <li>
      <a href="../articles/art-006-case-study-stickiness.html">Stickiness</a>
    </li>
    <li>
      <a href="../articles/art-008-case-study-grad-rate.html">Graduation rate</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/art-010-program-codes.html">Program codes and names</a>
    </li>
    <li>
      <a href="../articles/art-015-subsetting-midfield-data.html">Subsetting MIDFIELD data</a>
    </li>
    <li>
      <a href="../articles/art-020-data-sufficiency.html">Data sufficiency</a>
    </li>
    <li>
      <a href="../articles/art-030-timely-completion.html">Timely completion</a>
    </li>
    <li>
      <a href="../articles/art-040-fye-programs.html">FYE programs</a>
    </li>
    <li>
      <a href="../articles/art-050-multiway-graphs.html">Multiway graphs</a>
    </li>
    <li>
      <a href="../articles/art-060-tabulating-data.html">Tabulating data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/MIDFIELDR/midfieldr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="art-020-data-sufficiency_files/header-attrs-2.9/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Data sufficiency</h1>
                        <h4 class="author">Richard Layton</h4>
            
            <h4 class="date">2021-07-01</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/MIDFIELDR/midfieldr/blob/master/vignettes/art-020-data-sufficiency.Rmd"><code>vignettes/art-020-data-sufficiency.Rmd</code></a></small>
      <div class="hidden name"><code>art-020-data-sufficiency.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>The data provided by institutions to MIDFIELD cover a finite span of years, with different starting and ending terms for each institution.</p>
<p>For students admitted too near the upper limit of their institution’s data range, the available data cover an insufficient number of years to fairly assess student performance. Only students for whom the data range is sufficient should be included in any analysis.</p>
<p>In this vignette, we introduce two concepts and their related midfieldr functions:</p>
<dl>
<dt>timely completion (TC) term</dt>
<dd>The last term in which program completion would be considered timely for a given student. For example, the TC term in many cases is defined as the admission term plus 6 years.
</dd>
<dt>data sufficiency criterion</dt>
<dd>A study must be limited to students whose timely completion term is within the range of data provided by their institution.
</dd>
</dl>
<p>In the figure we compare two first-time-in-college students admitted in different terms, both with 6-year spans during which program completion would be considered timely.</p>
<ul>
<li>Student A enters in Fall 1990 with a timely completion (TC) term of Spring 1995.</li>
<li>Student B enters in Fall 1992 with a TC term of Spring 1997.</li>
<li>Institution data is available from 1986 to 1996.</li>
</ul>
<p><br><img src="../man/figures/art-020-data-sufficiency-fig1-1.png" width="70%" style="display: block; margin: auto;"><br></p>
<p>The TC term for Student B is not within the range of data provided by their institution. By the data sufficiency criterion, we exclude student B from the study.</p>
<p>The criterion applies even if Student B were known to have graduated within the data limit. Other students like Student B will graduate after the data limit, but we cannot know if their program completion was timely or not. Because such students must be excluded from the study, so must every student whose TC term is not encompassed by the available data.</p>
<div id="outline" class="section level3">
<h3 class="hasAnchor">
<a href="#outline" class="anchor"></a>Outline</h3>
<ul>
<li>Start with the case study programs (<code>study_program</code>)</li>
<li>Obtain all students ever enrolled in these programs</li>
<li>Determine their timely completion terms</li>
<li>Determine data sufficiency by institution and student</li>
<li>Filter observations for data sufficiency</li>
<li>Result is set of students for further analysis (<code>study_student</code>)</li>
</ul>
</div>
<div id="this-vignette-uses" class="section level3">
<h3 class="hasAnchor">
<a href="#this-vignette-uses" class="anchor"></a>This vignette uses</h3>
<p>midfieldr functions</p>
<ul>
<li><code><a href="../reference/add_data_sufficiency.html">add_data_sufficiency()</a></code></li>
<li><code><a href="../reference/add_institution.html">add_institution()</a></code></li>
<li><code><a href="../reference/add_timely_term.html">add_timely_term()</a></code></li>
<li><code><a href="../reference/filter_match.html">filter_match()</a></code></li>
</ul>
<p>packages</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># packages used</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/MIDFIELDR/midfieldr">"midfieldr"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/MIDFIELDR/midfielddata">"midfielddata"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://r-datatable.com">"data.table"</a></span><span class="op">)</span>

<span class="co"># optional code to format data.table printing</span>
<span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span>
  datatable.print.nrows <span class="op">=</span> <span class="fl">10</span>,
  datatable.print.topn <span class="op">=</span> <span class="fl">5</span>,
  datatable.print.class <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span></code></pre></div>
<p>data</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># load data tables from midfielddata</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">student</span>, <span class="va">term</span>, <span class="va">degree</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="case-study-students" class="section level2">
<h2 class="hasAnchor">
<a href="#case-study-students" class="anchor"></a>Case study students</h2>
<p>Recall that the case study program codes and names are saved in the midfieldr package as the data set <code>study_program</code>. View its help page by running</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">?</span> <span class="va">study_program</span></code></pre></div>
<p>View the data frame,</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">study_program</span>
<span class="co">#&gt;       cip6    program</span>
<span class="co">#&gt;     &lt;char&gt;     &lt;char&gt;</span>
<span class="co">#&gt;  1: 140801      Civil</span>
<span class="co">#&gt;  2: 140802      Civil</span>
<span class="co">#&gt;  3: 140803      Civil</span>
<span class="co">#&gt;  4: 140804      Civil</span>
<span class="co">#&gt;  5: 140805      Civil</span>
<span class="co">#&gt; ---                  </span>
<span class="co">#&gt;  8: 141003 Electrical</span>
<span class="co">#&gt;  9: 141004 Electrical</span>
<span class="co">#&gt; 10: 141099 Electrical</span>
<span class="co">#&gt; 11: 141901 Mechanical</span>
<span class="co">#&gt; 12: 143501 Industrial</span></code></pre></div>
<p>To obtain the students enrolled in the case study programs, we use <code><a href="../reference/filter_match.html">filter_match()</a></code> to access the <code>term</code> table.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">case_students</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_match.html">filter_match</a></span><span class="op">(</span><span class="va">term</span>,
  match_to <span class="op">=</span> <span class="va">study_program</span>,
  by_col <span class="op">=</span> <span class="st">"cip6"</span>,
  select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"mcid"</span>, <span class="st">"cip6"</span><span class="op">)</span>
<span class="op">)</span>
<span class="va">case_students</span>
<span class="co">#&gt;               mcid   cip6</span>
<span class="co">#&gt;             &lt;char&gt; &lt;char&gt;</span>
<span class="co">#&gt;     1: MID25783197 140801</span>
<span class="co">#&gt;     2: MID25783197 140801</span>
<span class="co">#&gt;     3: MID25783197 140801</span>
<span class="co">#&gt;     4: MID25783197 140801</span>
<span class="co">#&gt;     5: MID25783197 140801</span>
<span class="co">#&gt;    ---                   </span>
<span class="co">#&gt; 67089: MID26696429 143501</span>
<span class="co">#&gt; 67090: MID26696429 143501</span>
<span class="co">#&gt; 67091: MID26696429 143501</span>
<span class="co">#&gt; 67092: MID26696429 143501</span>
<span class="co">#&gt; 67093: MID26696429 143501</span></code></pre></div>
<p>Delete duplicate rows, if any,</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">case_students</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/duplicated.html">unique</a></span><span class="op">(</span><span class="va">case_students</span><span class="op">)</span>
<span class="va">case_students</span>
<span class="co">#&gt;               mcid   cip6</span>
<span class="co">#&gt;             &lt;char&gt; &lt;char&gt;</span>
<span class="co">#&gt;     1: MID25783197 140801</span>
<span class="co">#&gt;     2: MID25783441 140801</span>
<span class="co">#&gt;     3: MID25783553 140801</span>
<span class="co">#&gt;     4: MID25783648 140801</span>
<span class="co">#&gt;     5: MID25784209 140801</span>
<span class="co">#&gt;    ---                   </span>
<span class="co">#&gt; 10760: MID26693368 143501</span>
<span class="co">#&gt; 10761: MID26695188 143501</span>
<span class="co">#&gt; 10762: MID26695626 143501</span>
<span class="co">#&gt; 10763: MID26696116 143501</span>
<span class="co">#&gt; 10764: MID26696429 143501</span></code></pre></div>
</div>
<div id="estimate-the-timely-completion-term" class="section level2">
<h2 class="hasAnchor">
<a href="#estimate-the-timely-completion-term" class="anchor"></a>Estimate the timely completion term</h2>
<p>A necessary prerequisite for applying the data sufficiency criterion is to determine a timely completion term for every prospective student in a study. To confirm that the pool of students are all degree-seeking, we use <code><a href="../reference/filter_match.html">filter_match()</a></code> to match to the IDs in the <code>student</code> table.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># limit population to degree-seeking students</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_match.html">filter_match</a></span><span class="op">(</span><span class="va">case_students</span>,
  match_to <span class="op">=</span> <span class="va">student</span>,
  by_col <span class="op">=</span> <span class="st">"mcid"</span>
<span class="op">)</span>

<span class="co"># examine the result</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/duplicated.html">unique</a></span><span class="op">(</span><span class="va">DT</span><span class="op">)</span>
<span class="va">DT</span>
<span class="co">#&gt;               mcid   cip6</span>
<span class="co">#&gt;             &lt;char&gt; &lt;char&gt;</span>
<span class="co">#&gt;     1: MID25783178 143501</span>
<span class="co">#&gt;     2: MID25783197 140801</span>
<span class="co">#&gt;     3: MID25783388 141901</span>
<span class="co">#&gt;     4: MID25783441 140801</span>
<span class="co">#&gt;     5: MID25783491 141001</span>
<span class="co">#&gt;    ---                   </span>
<span class="co">#&gt; 10760: MID26696967 141901</span>
<span class="co">#&gt; 10761: MID26696979 141901</span>
<span class="co">#&gt; 10762: MID26697163 141901</span>
<span class="co">#&gt; 10763: MID26697444 141901</span>
<span class="co">#&gt; 10764: MID26697447 141001</span></code></pre></div>
<p>We use <code><a href="../reference/add_timely_term.html">add_timely_term()</a></code> to estimate the timely completion term. View its help page by running</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">?</span> <span class="va">add_timely_term</span></code></pre></div>
<p>As the function name suggests, <code><a href="../reference/add_timely_term.html">add_timely_term()</a></code> adds the <code>timely_term</code> column to the input data frame. The new variable contains the estimated timely completion term for each student. The first argument is your working data frame to which the column is to be added; the second argument is <code>term</code> (or your equivalent term-variables data frame). Both are required.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># estimate the timely completion term</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_timely_term.html">add_timely_term</a></span><span class="op">(</span><span class="va">DT</span>, midfield_term <span class="op">=</span> <span class="va">term</span><span class="op">)</span>
<span class="va">DT</span>
<span class="co">#&gt;               mcid   cip6 timely_term</span>
<span class="co">#&gt;             &lt;char&gt; &lt;char&gt;      &lt;char&gt;</span>
<span class="co">#&gt;     1: MID25783178 143501       20003</span>
<span class="co">#&gt;     2: MID25783197 140801       19923</span>
<span class="co">#&gt;     3: MID25783388 141901       19923</span>
<span class="co">#&gt;     4: MID25783441 140801       19973</span>
<span class="co">#&gt;     5: MID25783491 141001       20013</span>
<span class="co">#&gt;    ---                               </span>
<span class="co">#&gt; 10760: MID26696967 141901       20153</span>
<span class="co">#&gt; 10761: MID26696979 141901       20183</span>
<span class="co">#&gt; 10762: MID26697163 141901       20143</span>
<span class="co">#&gt; 10763: MID26697444 141901       20153</span>
<span class="co">#&gt; 10764: MID26697447 141001       20163</span></code></pre></div>
<p>The basic heuristic starts with span number of years for each student (default 6 years) and adjusts the span by subtracting a whole number of years based on the level at which the student is admitted.</p>
<p>For example, a student admitted at the second-year level is assumed to have completed one year of a program, so their span is reduced by one year. Similarly, spans are reduced by two years for students admitted at the 3rd-year level and by three years for students admitted at the fourth-year level. The adjusted span of years added to their starting term produces timely completion term.</p>
<p>Optional arguments are <code>details</code>, <code>span</code>, and <code>sched_span</code>. When used, these arguments must be named.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/add_timely_term.html">add_timely_term</a></span><span class="op">(</span><span class="va">dframe</span>,
                <span class="va">midfield_term</span>,
                <span class="va">...</span>,
                details <span class="op">=</span> <span class="cn">NULL</span>,     <span class="co"># default FALSE</span>
                span <span class="op">=</span> <span class="cn">NULL</span>,        <span class="co"># default 6 years</span>
                sched_span <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span>  <span class="co"># default 4 years</span></code></pre></div>
<ul>
<li>
<code>span</code> must be no less than <code>sched_span</code>.</li>
<li>
<code>sched_span</code> is the number of years the institution schedules for program completion, typically 4 years.</li>
<li>
<code>details</code>, when TRUE, provides additional columns (described next)</li>
</ul>
<p>Setting <code>details</code> to TRUE yields additional columns that were used to determine the timely-term results:</p>
<ul>
<li>
<code>term_i</code> admission term</li>
<li>
<code>level_i</code> level upon being admitted</li>
<li>
<code>adj_span</code> adjusted span</li>
</ul>
<p>The potential use of these data are to implement one’s own heuristic for determining timely completion terms.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># show details</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_timely_term.html">add_timely_term</a></span><span class="op">(</span><span class="va">DT</span>,
  midfield_term <span class="op">=</span> <span class="va">term</span>,
  details <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span>
<span class="va">DT</span>
<span class="co">#&gt;               mcid   cip6 term_i      level_i adj_span timely_term</span>
<span class="co">#&gt;             &lt;char&gt; &lt;char&gt; &lt;char&gt;       &lt;char&gt;    &lt;num&gt;      &lt;char&gt;</span>
<span class="co">#&gt;     1: MID25783178 143501  19946  01 Freshman        6       20003</span>
<span class="co">#&gt;     2: MID25783197 140801  19871  01 Freshman        6       19923</span>
<span class="co">#&gt;     3: MID25783388 141901  19871  01 Freshman        6       19923</span>
<span class="co">#&gt;     4: MID25783441 140801  19921  01 Freshman        6       19973</span>
<span class="co">#&gt;     5: MID25783491 141001  19961  01 Freshman        6       20013</span>
<span class="co">#&gt;    ---                                                            </span>
<span class="co">#&gt; 10760: MID26696967 141901  20101  01 Freshman        6       20153</span>
<span class="co">#&gt; 10761: MID26696979 141901  20154    04 Senior        3       20183</span>
<span class="co">#&gt; 10762: MID26697163 141901  20101 02 Sophomore        5       20143</span>
<span class="co">#&gt; 10763: MID26697444 141901  20101  01 Freshman        6       20153</span>
<span class="co">#&gt; 10764: MID26697447 141001  20111  01 Freshman        6       20163</span></code></pre></div>
<p>If the input data frame has an existing column name matching any of the added column names, the existing columns are deleted. For example, having examined the details, you can delete them (especially useful in an interactive session) by running the same code with details set to FALSE.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># remove details</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_timely_term.html">add_timely_term</a></span><span class="op">(</span><span class="va">DT</span>,
  midfield_term <span class="op">=</span> <span class="va">term</span>,
  details <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span>
<span class="va">DT</span>
<span class="co">#&gt;               mcid   cip6 timely_term</span>
<span class="co">#&gt;             &lt;char&gt; &lt;char&gt;      &lt;char&gt;</span>
<span class="co">#&gt;     1: MID25783178 143501       20003</span>
<span class="co">#&gt;     2: MID25783197 140801       19923</span>
<span class="co">#&gt;     3: MID25783388 141901       19923</span>
<span class="co">#&gt;     4: MID25783441 140801       19973</span>
<span class="co">#&gt;     5: MID25783491 141001       20013</span>
<span class="co">#&gt;    ---                               </span>
<span class="co">#&gt; 10760: MID26696967 141901       20153</span>
<span class="co">#&gt; 10761: MID26696979 141901       20183</span>
<span class="co">#&gt; 10762: MID26697163 141901       20143</span>
<span class="co">#&gt; 10763: MID26697444 141901       20153</span>
<span class="co">#&gt; 10764: MID26697447 141001       20163</span></code></pre></div>
<div id="exercises" class="section level3">
<h3 class="hasAnchor">
<a href="#exercises" class="anchor"></a>Exercises</h3>
<p>If we start with a data frame with details shown</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_timely_term.html">add_timely_term</a></span><span class="op">(</span><span class="va">DT</span>, <span class="va">term</span>, details <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>then the following code chunk,</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span><span class="op">[</span><span class="va">adj_span</span> <span class="op">==</span> <span class="fl">6</span>, <span class="va">.SD</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, by <span class="op">=</span> <span class="va">cip6</span><span class="op">]</span></code></pre></div>
<p>subsets <code>x</code> as follows:</p>
<ul>
<li>
<code>adj_span == 6</code> subsets rows for a 6 year span</li>
<li>
<code>by = cip6</code> groups the data by the four CIP codes</li>
<li>
<code>.SD[1]</code> retains the first row of each group</li>
</ul>
<p>with the resulting 4 rows (one for each CIP):</p>
<pre><code>#&gt;      cip6        mcid term_i     level_i adj_span timely_term
#&gt;    &lt;char&gt;      &lt;char&gt; &lt;char&gt;      &lt;char&gt;    &lt;num&gt;      &lt;char&gt;
#&gt; 1: 143501 MID25783178  19946 01 Freshman        6       20003
#&gt; 2: 140801 MID25783197  19871 01 Freshman        6       19923
#&gt; 3: 141901 MID25783388  19871 01 Freshman        6       19923
#&gt; 4: 141001 MID25783491  19961 01 Freshman        6       20013</code></pre>
<ol style="list-style-type: decimal">
<li>Recall (from the <code>term</code> help page) that all terms of an academic year are encoded with the same YYYY value. Choose any row. Confirm that a student starting in the initial term shown and graduating a full 6 academic years later would graduate in the term reported in the timely-term column.</li>
<li>Reuse the code chunk but change the adjusted span to 4 or 5 years. Select one row and repeat the assessment.</li>
</ol>
</div>
</div>
<div id="determine-data-sufficiency" class="section level2">
<h2 class="hasAnchor">
<a href="#determine-data-sufficiency" class="anchor"></a>Determine data sufficiency</h2>
<p>Data sufficiency depends on the range of data from an institution, so our first step is to add a column for institution keyed by the student ID. We use the <code><a href="../reference/add_institution.html">add_institution()</a></code>. View its help page by running</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">?</span> <span class="va">add_institution</span></code></pre></div>
<p>The function has two arguments, the data frame to which the new variable is added and the <code>term</code> MIDFIELD data table (or equivalent). In the event that a student were admitted to more than one institution over their history in the data, the function reports the institution at which the student was enrolled for the greatest number of terms.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># add institutions</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_institution.html">add_institution</a></span><span class="op">(</span><span class="va">DT</span>,
  midfield_term <span class="op">=</span> <span class="va">term</span>
<span class="op">)</span>

<span class="co"># examine the result</span>
<span class="va">DT</span>
<span class="co">#&gt;               mcid   institution   cip6 timely_term</span>
<span class="co">#&gt;             &lt;char&gt;        &lt;char&gt; &lt;char&gt;      &lt;char&gt;</span>
<span class="co">#&gt;     1: MID25783178 Institution M 143501       20003</span>
<span class="co">#&gt;     2: MID25783197 Institution M 140801       19923</span>
<span class="co">#&gt;     3: MID25783388 Institution M 141901       19923</span>
<span class="co">#&gt;     4: MID25783441 Institution M 140801       19973</span>
<span class="co">#&gt;     5: MID25783491 Institution M 141001       20013</span>
<span class="co">#&gt;    ---                                             </span>
<span class="co">#&gt; 10760: MID26696967 Institution L 141901       20153</span>
<span class="co">#&gt; 10761: MID26696979 Institution L 141901       20183</span>
<span class="co">#&gt; 10762: MID26697163 Institution L 141901       20143</span>
<span class="co">#&gt; 10763: MID26697444 Institution L 141901       20153</span>
<span class="co">#&gt; 10764: MID26697447 Institution L 141001       20163</span></code></pre></div>
<p>Like the other midfieldr <code>add_</code> functions, existing columns are deleted or overwritten if they have the same name as the variables to be added (here, <code>institution</code>).</p>
<p>Now that our working data frame has <code>timely_term</code> and <code>institution</code> columns, we can use <code><a href="../reference/add_data_sufficiency.html">add_data_sufficiency()</a></code> to add a logical variable (TRUE/FALSE) that answers the question, “Is the data sufficiency constraint satisfied?” View its help page by running,</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">?</span> <span class="va">add_data_sufficiency</span></code></pre></div>
<p>Similar to <code><a href="../reference/add_timely_term.html">add_timely_term()</a></code>, this function has two required arguments and one optional <code>details</code> argument. The details, in this case, add one extra column to show the institution’s upper data limit.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># add column with details</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_data_sufficiency.html">add_data_sufficiency</a></span><span class="op">(</span><span class="va">DT</span>,
  midfield_term <span class="op">=</span> <span class="va">term</span>,
  details <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span>
<span class="co"># examine the result</span>
<span class="va">DT</span>
<span class="co">#&gt;               mcid   institution   cip6 timely_term inst_limit data_sufficiency</span>
<span class="co">#&gt;             &lt;char&gt;        &lt;char&gt; &lt;char&gt;      &lt;char&gt;     &lt;char&gt;           &lt;lgcl&gt;</span>
<span class="co">#&gt;     1: MID25783178 Institution M 143501       20003      20096             TRUE</span>
<span class="co">#&gt;     2: MID25783197 Institution M 140801       19923      20096             TRUE</span>
<span class="co">#&gt;     3: MID25783388 Institution M 141901       19923      20096             TRUE</span>
<span class="co">#&gt;     4: MID25783441 Institution M 140801       19973      20096             TRUE</span>
<span class="co">#&gt;     5: MID25783491 Institution M 141001       20013      20096             TRUE</span>
<span class="co">#&gt;    ---                                                                         </span>
<span class="co">#&gt; 10760: MID26696967 Institution L 141901       20153      20164             TRUE</span>
<span class="co">#&gt; 10761: MID26696979 Institution L 141901       20183      20164            FALSE</span>
<span class="co">#&gt; 10762: MID26697163 Institution L 141901       20143      20164             TRUE</span>
<span class="co">#&gt; 10763: MID26697444 Institution L 141901       20153      20164             TRUE</span>
<span class="co">#&gt; 10764: MID26697447 Institution L 141001       20163      20164             TRUE</span></code></pre></div>
<p>With details FALSE, only the <code>data_sufficieny</code> column is added.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># without details</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_data_sufficiency.html">add_data_sufficiency</a></span><span class="op">(</span><span class="va">DT</span>,
  midfield_term <span class="op">=</span> <span class="va">term</span>,
  details <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span>
<span class="co"># examine the result</span>
<span class="va">DT</span>
<span class="co">#&gt;               mcid   institution   cip6 timely_term data_sufficiency</span>
<span class="co">#&gt;             &lt;char&gt;        &lt;char&gt; &lt;char&gt;      &lt;char&gt;           &lt;lgcl&gt;</span>
<span class="co">#&gt;     1: MID25783178 Institution M 143501       20003             TRUE</span>
<span class="co">#&gt;     2: MID25783197 Institution M 140801       19923             TRUE</span>
<span class="co">#&gt;     3: MID25783388 Institution M 141901       19923             TRUE</span>
<span class="co">#&gt;     4: MID25783441 Institution M 140801       19973             TRUE</span>
<span class="co">#&gt;     5: MID25783491 Institution M 141001       20013             TRUE</span>
<span class="co">#&gt;    ---                                                              </span>
<span class="co">#&gt; 10760: MID26696967 Institution L 141901       20153             TRUE</span>
<span class="co">#&gt; 10761: MID26696979 Institution L 141901       20183            FALSE</span>
<span class="co">#&gt; 10762: MID26697163 Institution L 141901       20143             TRUE</span>
<span class="co">#&gt; 10763: MID26697444 Institution L 141901       20153             TRUE</span>
<span class="co">#&gt; 10764: MID26697447 Institution L 141001       20163             TRUE</span></code></pre></div>
<div id="exercises-1" class="section level3">
<h3 class="hasAnchor">
<a href="#exercises-1" class="anchor"></a>Exercises</h3>
<p>If we start with the <code>term</code> data table, select two columns, and order its rows by institution and term,</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># select columns from term</span>
<span class="va">cols_we_want</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"institution"</span>, <span class="st">"term"</span><span class="op">)</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="va">term</span><span class="op">[</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html">order</a></span><span class="op">(</span><span class="va">institution</span>, <span class="va">term</span><span class="op">)</span>, <span class="va">..cols_we_want</span><span class="op">]</span></code></pre></div>
<p>then the following code chunk,</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># optional code to format data.table printing</span>
<span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span>datatable.print.nrows <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>

<span class="co"># filter for last term grouped by instititution</span>
<span class="va">x</span><span class="op">[</span>, <span class="va">.SD</span><span class="op">[</span><span class="va">.N</span><span class="op">]</span>, by <span class="op">=</span> <span class="va">institution</span><span class="op">]</span></code></pre></div>
<p>subsets <code>x</code> as follows:</p>
<ul>
<li>
<code>by = institution</code> groups the data by the 12 institutions</li>
<li>
<code>.SD[.N]</code> retains the last row of each group (having previously ordered the rows by term within each institution)</li>
</ul>
<p>yielding a data frame (not shown) giving the last term in the data for each institution. Obtain the data frame for yourself by running the code chunks above. Then run:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_data_sufficiency.html">add_data_sufficiency</a></span><span class="op">(</span><span class="va">DT</span>,
  midfield_term <span class="op">=</span> <span class="va">term</span>,
  details <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span></code></pre></div>
<p>Filter for one institution using</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">y</span><span class="op">[</span><span class="va">institution</span> <span class="op">==</span> <span class="st">"Institution A"</span>, <span class="va">.SD</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span><span class="op">]</span></code></pre></div>
<p>where</p>
<ul>
<li>
<code>institution == "Institution A"</code> filters for Institution A only</li>
<li>
<code>.SD[1:5]</code> pulls out the first 5 rows,</li>
</ul>
<ol style="list-style-type: decimal">
<li>Confirm that the last term for Institution A found earlier is a match to the <code>inst_limit</code> reported by <code><a href="../reference/add_data_sufficiency.html">add_data_sufficiency()</a></code>.</li>
<li>Repeat the last code chunk for another institution and confirm the result.</li>
</ol>
</div>
</div>
<div id="subset-data-for-data-sufficiency" class="section level2">
<h2 class="hasAnchor">
<a href="#subset-data-for-data-sufficiency" class="anchor"></a>Subset data for data sufficiency</h2>
<p>Observations (rows) satisfying the data sufficiency criterion are labeled TRUE in the <code>data_sufficiency</code> column; those that do not are labeled FALSE. Limiting the population to students satisfying the criterion is straightforward—we retain the TRUE data sufficiency rows.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># limit population to data sufficient</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="va">data_sufficiency</span> <span class="op">==</span> <span class="cn">TRUE</span><span class="op">]</span>

<span class="co"># examine the result</span>
<span class="va">DT</span>
<span class="co">#&gt;              mcid   institution   cip6 timely_term data_sufficiency</span>
<span class="co">#&gt;            &lt;char&gt;        &lt;char&gt; &lt;char&gt;      &lt;char&gt;           &lt;lgcl&gt;</span>
<span class="co">#&gt;    1: MID25783178 Institution M 143501       20003             TRUE</span>
<span class="co">#&gt;    2: MID25783197 Institution M 140801       19923             TRUE</span>
<span class="co">#&gt;    3: MID25783388 Institution M 141901       19923             TRUE</span>
<span class="co">#&gt;    4: MID25783441 Institution M 140801       19973             TRUE</span>
<span class="co">#&gt;    5: MID25783491 Institution M 141001       20013             TRUE</span>
<span class="co">#&gt;   ---                                                              </span>
<span class="co">#&gt; 8215: MID26696958 Institution L 141901       20163             TRUE</span>
<span class="co">#&gt; 8216: MID26696967 Institution L 141901       20153             TRUE</span>
<span class="co">#&gt; 8217: MID26697163 Institution L 141901       20143             TRUE</span>
<span class="co">#&gt; 8218: MID26697444 Institution L 141901       20153             TRUE</span>
<span class="co">#&gt; 8219: MID26697447 Institution L 141001       20163             TRUE</span></code></pre></div>
<p>Having performed the subset, the working columns we used to get to this point can be deleted. We retain the two columns with which we started this vignette, <code>mcid</code> and <code>cip6</code>.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">cip6</span><span class="op">)</span><span class="op">]</span></code></pre></div>
<p>Again, we suggest saving intermediate results like these. This data frame of IDs and CIP codes is saved in midfieldr as the data set <code>study_student</code>. View its help page by running</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">?</span> <span class="va">study_student</span></code></pre></div>
<p>View the data frame,</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">study_student</span>
<span class="co">#&gt;              mcid   institution   cip6    program          race    sex</span>
<span class="co">#&gt;            &lt;char&gt;        &lt;char&gt; &lt;char&gt;     &lt;char&gt;        &lt;char&gt; &lt;char&gt;</span>
<span class="co">#&gt;    1: MID25783197 Institution M 140801      Civil         White   Male</span>
<span class="co">#&gt;    2: MID25783441 Institution M 140801      Civil         White   Male</span>
<span class="co">#&gt;    3: MID25783553 Institution M 140801      Civil         White   Male</span>
<span class="co">#&gt;    4: MID25784209 Institution M 140801      Civil International   Male</span>
<span class="co">#&gt;    5: MID25784489 Institution M 140801      Civil         Asian Female</span>
<span class="co">#&gt;   ---                                                                 </span>
<span class="co">#&gt; 8215: MID26692926 Institution L 143501 Industrial         White   Male</span>
<span class="co">#&gt; 8216: MID26693368 Institution L 143501 Industrial         White   Male</span>
<span class="co">#&gt; 8217: MID26695626 Institution L 143501 Industrial         White   Male</span>
<span class="co">#&gt; 8218: MID26696116 Institution L 143501 Industrial         White Female</span>
<span class="co">#&gt; 8219: MID26696429 Institution L 143501 Industrial         White Female</span>
<span class="co">#&gt;       timely_term data_sufficiency</span>
<span class="co">#&gt;            &lt;char&gt;           &lt;lgcl&gt;</span>
<span class="co">#&gt;    1:       19923             TRUE</span>
<span class="co">#&gt;    2:       19973             TRUE</span>
<span class="co">#&gt;    3:       20073             TRUE</span>
<span class="co">#&gt;    4:       20003             TRUE</span>
<span class="co">#&gt;    5:       19943             TRUE</span>
<span class="co">#&gt;   ---                             </span>
<span class="co">#&gt; 8215:       20153             TRUE</span>
<span class="co">#&gt; 8216:       20143             TRUE</span>
<span class="co">#&gt; 8217:       20143             TRUE</span>
<span class="co">#&gt; 8218:       20153             TRUE</span>
<span class="co">#&gt; 8219:       20153             TRUE</span></code></pre></div>
<p>Confirm the two are the same.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html">order</a></span><span class="op">(</span><span class="va">mcid</span><span class="op">)</span><span class="op">]</span>
<span class="va">study_student</span> <span class="op">&lt;-</span> <span class="va">study_student</span><span class="op">[</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html">order</a></span><span class="op">(</span><span class="va">mcid</span><span class="op">)</span><span class="op">]</span>
<span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/all.equal.data.table.html">all.equal</a></span><span class="op">(</span><span class="va">DT</span>, <span class="va">study_student</span><span class="op">)</span>
<span class="co">#&gt; [1] "Different number of columns" "Different column names"</span></code></pre></div>
</div>
<div id="conclusion" class="section level2">
<h2 class="hasAnchor">
<a href="#conclusion" class="anchor"></a>Conclusion</h2>
<p>The data sufficiency criterion must be applied whenever a study incorporates program completion (graduation) as part of a metric. Different heuristics might be used to determine the term of timely completion (discussed in a separate vignette), but once the timely term is determined, the sufficiency of the data available immediately determines whether the student remains in the study.</p>
</div>
<div id="appendix" class="section level2">
<h2 class="hasAnchor">
<a href="#appendix" class="anchor"></a>Appendix</h2>
<div id="complete-script" class="section level3">
<h3 class="hasAnchor">
<a href="#complete-script" class="anchor"></a>Complete script</h3>
<p>The vignette code chunks are collected below in a single, condensed script.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># packages used</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/MIDFIELDR/midfieldr">"midfieldr"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/MIDFIELDR/midfielddata">"midfielddata"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://r-datatable.com">"data.table"</a></span><span class="op">)</span>

<span class="co"># load data tables from midfielddata</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">student</span>, <span class="va">term</span>, <span class="va">degree</span><span class="op">)</span>

<span class="co"># Case study students</span>
<span class="va">case_students</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_match.html">filter_match</a></span><span class="op">(</span><span class="va">term</span>,
  match_to <span class="op">=</span> <span class="va">study_program</span>,
  by_col <span class="op">=</span> <span class="st">"cip6"</span>,
  select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"mcid"</span>, <span class="st">"cip6"</span><span class="op">)</span>
<span class="op">)</span>
<span class="va">case_students</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/duplicated.html">unique</a></span><span class="op">(</span><span class="va">case_students</span><span class="op">)</span>

<span class="co"># Estimate the timely completion term</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_match.html">filter_match</a></span><span class="op">(</span><span class="va">case_students</span>,
  match_to <span class="op">=</span> <span class="va">student</span>,
  by_col <span class="op">=</span> <span class="st">"mcid"</span>
<span class="op">)</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/duplicated.html">unique</a></span><span class="op">(</span><span class="va">DT</span><span class="op">)</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_timely_term.html">add_timely_term</a></span><span class="op">(</span><span class="va">DT</span>, midfield_term <span class="op">=</span> <span class="va">term</span><span class="op">)</span>

<span class="co"># Determine data sufficiency</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_institution.html">add_institution</a></span><span class="op">(</span><span class="va">DT</span>, midfield_term <span class="op">=</span> <span class="va">term</span><span class="op">)</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_data_sufficiency.html">add_data_sufficiency</a></span><span class="op">(</span><span class="va">DT</span>,
  midfield_term <span class="op">=</span> <span class="va">term</span>,
  details <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span>

<span class="co"># Subset data for data sufficiency</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="va">data_sufficiency</span> <span class="op">==</span> <span class="cn">TRUE</span><span class="op">]</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">cip6</span><span class="op">)</span><span class="op">]</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://github.com/graphdr">Richard Layton</a>, Russell Long, Matthew Ohland, US National Science Foundation.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
