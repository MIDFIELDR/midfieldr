<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="midfieldr">
<title>Multiway graphs • midfieldr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="../deps/bs3compat-0.2.5.1/tabs.js"></script><script src="../deps/bs3compat-0.2.5.1/bs3compat.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<link href="../syntax-highlighting.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Multiway graphs">
<meta property="og:description" content="midfieldr">
<meta property="og:image" content="https://midfieldr.github.io/midfieldr/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc" data-headroom>
    

      <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a class="navbar-brand mb-0 h1" href="../index.html">midfieldr</a>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <button type="button" id="version-badge" class="badge badge-default d-none d-lg-block" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Released version">1.0.0.9020</button>

    <div id="navbar" class="collapse navbar-collapse">
      <ul class="navbar-nav mr-auto ml-3">
<li class="nav-item">
  <a class="nav-link" href="../articles/art-000-getting-started.html">Getting started</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-case-study">Case study</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-case-study">
    <a class="dropdown-item" href="../articles/art-002-case-study-programs.html">Programs</a>
    <a class="dropdown-item" href="../articles/art-004-case-study-students.html">Students</a>
    <a class="dropdown-item" href="../articles/art-006-case-study-stickiness.html">Stickiness</a>
    <a class="dropdown-item" href="../articles/art-008-case-study-grad-rate.html">Graduation rate</a>
  </div>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-vignettes">Vignettes</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-vignettes">
    <a class="dropdown-item" href="../articles/art-010-program-codes.html">Program codes and names</a>
    <a class="dropdown-item" href="../articles/art-015-subsetting-midfield-data.html">Subsetting MIDFIELD data</a>
    <a class="dropdown-item" href="../articles/art-020-data-sufficiency.html">Data sufficiency</a>
    <a class="dropdown-item" href="../articles/art-030-timely-completion.html">Timely completion</a>
    <a class="dropdown-item" href="../articles/art-040-fye-programs.html">FYE programs</a>
    <a class="dropdown-item" href="../articles/art-050-multiway-graphs.html">Multiway graphs</a>
    <a class="dropdown-item" href="../articles/art-060-tabulating-data.html">Tabulating data</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control mr-sm-2" aria-label="Search" name="search-input" data-search-index="/search.json" id="search-input" placeholder="Search..." autocomplete="off">
</form>

      <ul class="navbar-nav ml-1">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/MIDFIELDR/midfieldr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
  </div>
</nav><div class="container template-article">
<script src="art-050-multiway-graphs_files/header-attrs-2.9/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <img src="../package-logo.png" class="pkg-logo" alt=""><div class="page-header pb-2 mt-4 mb-2 border-bottom toc-ignore">
      <h1 class="display-4" data-toc-skip>Multiway graphs</h1>
                        <h4 data-toc-skip class="author">Richard Layton</h4>
            
            <h4 data-toc-skip class="date">2021-07-11</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/MIDFIELDR/midfieldr/blob/master/vignettes/art-050-multiway-graphs.Rmd" class="external-link"><code>vignettes/art-050-multiway-graphs.Rmd</code></a></small>
      <div class="d-none name"><code>art-050-multiway-graphs.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor" aria-hidden="true"></a>Introduction</h2>
<p>We introduce graphs of <em>multiway data</em> in which there is is one quantitative variable and two categorical variables. As explained by Cleveland <span class="citation"><a href="#ref-Cleveland:1993" role="doc-biblioref">[1]</a></span>,</p>
<blockquote>
<p>… the quantitative variable is a response, and the goal is to study how it depends on the categorical variables, which are factors. What distinguishes multiway data is the cross-classification of the categorical variables; there is a value of the response for each combination of levels of the two categorical variables.</p>
</blockquote>
<p>Multiway data have a specific structure: a categorical variable with <span class="math inline">\(m\)</span> levels; an independent categorical variable with <span class="math inline">\(n\)</span> levels; and a single quantitative value associated with every combinations of levels of the two categories. Multiway data are typically organized as three columns with <span class="math inline">\(m \times n\)</span> rows.</p>
<p>Note that “multiway” in our context refers to the data structure and graph design defined by Cleveland, not to the methods of analysis described by Kroonenberg <span class="citation"><a href="#ref-Kroonenberg:2008" role="doc-biblioref">[2]</a></span>.</p>
<div id="outline" class="section level3">
<h3 class="hasAnchor">
<a href="#outline" class="anchor" aria-hidden="true"></a>Outline</h3>
<ul>
<li>Start with the case study stickiness results (<code>study_stickiness</code>)</li>
<li>Practice conditioning multiway data for display</li>
<li>Practice creating multiway graphs and their duals</li>
<li>Practice different options for ordering rows and panels</li>
</ul>
</div>
<div id="in-this-vignette" class="section level3">
<h3 class="hasAnchor">
<a href="#in-this-vignette" class="anchor" aria-hidden="true"></a>In this vignette</h3>
<p>midfieldr functions</p>
<ul>
<li><a href="../reference/condition_multiway.html"><code>condition_multiway()</code></a></li>
</ul>
<p>packages</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># packages used</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/MIDFIELDR/midfieldr" class="external-link">"midfieldr"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/MIDFIELDR/midfielddata" class="external-link">"midfielddata"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://r-datatable.com" class="external-link">"data.table"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://ggplot2.tidyverse.org" class="external-link">"ggplot2"</a></span><span class="op">)</span></code></pre></div>
<p>We can control how a data.table is printed to the screen with the following options.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># optional code to control data.table printing</span>
<span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>
  datatable.print.nrows <span class="op">=</span> <span class="fl">10</span>,
  datatable.print.topn <span class="op">=</span> <span class="fl">5</span>,
  datatable.print.class <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span></code></pre></div>
</div>
</div>
<div id="prepare-data" class="section level2">
<h2 class="hasAnchor">
<a href="#prepare-data" class="anchor" aria-hidden="true"></a>Prepare data</h2>
<p>Longitudinal “stickiness” is the ratio of the number of students graduating in a program to the number of students ever enrolled in that program <span class="citation"><a href="#ref-Ohland+Orr+others:2012" role="doc-biblioref">[3]</a></span>. The stickiness metric is developed in a separate vignette—here we focus on graphing a result.</p>
<p>We computed stickiness for a case study in Civil, Electrical, Industrial, and Mechanical Engineering and saved the results as the data set, <code>study_stickiness</code>. You may view its help page by running</p>
<pre><code><a href="../reference/study_stickiness.html">? study_stickiness</a></code></pre>
<p>The data is loaded with midfieldr (we don’t have to use <code><a href="https://rdrr.io/r/utils/data.html" class="external-link">data()</a></code> to access it.)</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># examine the built-in data</span>
<span class="va">study_stickiness</span>
<span class="co">#&gt;        program               race_sex  ever  grad stick</span>
<span class="co">#&gt;         &lt;char&gt;                 &lt;char&gt; &lt;int&gt; &lt;int&gt; &lt;num&gt;</span>
<span class="co">#&gt;  1:      Civil           Asian Female    17    12  70.6</span>
<span class="co">#&gt;  2:      Civil             Asian Male    37    24  64.9</span>
<span class="co">#&gt;  3:      Civil           Black Female    54    28  51.9</span>
<span class="co">#&gt;  4:      Civil             Black Male    98    43  43.9</span>
<span class="co">#&gt;  5:      Civil Hispanic/Latinx Female    10     5  50.0</span>
<span class="co">#&gt; ---                                                    </span>
<span class="co">#&gt; 51: Mechanical   Native American Male    14     8  57.1</span>
<span class="co">#&gt; 52: Mechanical   Other/Unknown Female     8     7  87.5</span>
<span class="co">#&gt; 53: Mechanical     Other/Unknown Male    48    28  58.3</span>
<span class="co">#&gt; 54: Mechanical           White Female   291   195  67.0</span>
<span class="co">#&gt; 55: Mechanical             White Male  1940  1265  65.2</span></code></pre></div>
<p>Categorical variables are often provided as character variables. Without ordering the levels, the rows and panels of the multiway graph are ordered alphabetically—not the best design for gaining insights from the graph.</p>
<p>To condition the categorical variables, we use <code><a href="../reference/condition_multiway.html">condition_multiway()</a></code> to convert them to factors with levels ordered by the quantitative response variable in some fashion, To see its help page, run</p>
<pre><code>? condition_multiway()</code></pre>
<p>The function requires two categorical variables and one quantitative variable. In this data frame, the two categorical columns are <code>program</code> and <code>race_sex</code>. the quantitative variable is <code>stick</code> (for longitudinal stickiness). Before conditioning, the categorical variables are characters,</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create a new memory location</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">study_stickiness</span><span class="op">)</span>

<span class="co"># first category is a character</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">DT</span><span class="op">$</span><span class="va">program</span><span class="op">)</span>
<span class="co">#&gt; [1] "character"</span>

<span class="co"># second category is a character</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">DT</span><span class="op">$</span><span class="va">race_sex</span><span class="op">)</span>
<span class="co">#&gt; [1] "character"</span></code></pre></div>
<p>We do some data conditioning before presenting the results. Even with students and institutions de-identified, privacy is at risk for small populations, so we omit observations with fewer than 10 students ever enrolled.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Omit before graphing</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="va">ever</span> <span class="op">&gt;=</span> <span class="fl">10</span><span class="op">]</span></code></pre></div>
<p>We also omit rows with ambiguous values for race/ethnicity (International and Other/Unknown). Having graphed the results in advance, we find that the small population subset removed Native American students from all but one of the disciplines—so we add them to the list of observations to omit.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># data table printing option</span>
<span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>datatable.print.topn <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>

<span class="co"># Omit before graphing</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="op">!</span><span class="va">race_sex</span> <span class="op"><a href="https://Rdatatable.gitlab.io/data.table/reference/like.html" class="external-link">%ilike%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"International|Other|Native"</span><span class="op">)</span><span class="op">]</span>

<span class="co"># Examine the result</span>
<span class="va">DT</span>
<span class="co">#&gt;        program             race_sex  ever  grad stick</span>
<span class="co">#&gt;         &lt;char&gt;               &lt;char&gt; &lt;int&gt; &lt;int&gt; &lt;num&gt;</span>
<span class="co">#&gt;  1:      Civil         Asian Female    17    12  70.6</span>
<span class="co">#&gt;  2:      Civil           Asian Male    37    24  64.9</span>
<span class="co">#&gt;  3:      Civil         Black Female    54    28  51.9</span>
<span class="co">#&gt; ---                                                  </span>
<span class="co">#&gt; 29: Mechanical Hispanic/Latinx Male    76    47  61.8</span>
<span class="co">#&gt; 30: Mechanical         White Female   291   195  67.0</span>
<span class="co">#&gt; 31: Mechanical           White Male  1940  1265  65.2</span>

<span class="va">temp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">DT</span><span class="op">)</span></code></pre></div>
<p>We process the data frame</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># condition as multiway data</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/condition_multiway.html">condition_multiway</a></span><span class="op">(</span>
  dframe <span class="op">=</span> <span class="va">DT</span>, <span class="co"># input data frame</span>
  categ_col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"program"</span>, <span class="st">"race_sex"</span><span class="op">)</span>, <span class="co"># multiway categorical variables</span>
  quant_col <span class="op">=</span> <span class="st">"stick"</span>, <span class="co"># multiway quantitative variable</span>
  detail <span class="op">=</span> <span class="cn">FALSE</span>, <span class="co"># do not return columns of details</span>
  order_by <span class="op">=</span> <span class="st">"percent"</span>, <span class="co"># row and panel ordering method</span>
  param_col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"grad"</span>, <span class="st">"ever"</span><span class="op">)</span> <span class="co"># parameters used for ordering</span>
<span class="op">)</span></code></pre></div>
<p>No change to the row and column structure, but as you can see, the previous character variables have been converted to factors,</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">DT</span>
<span class="co">#&gt;        program             race_sex  ever  grad stick</span>
<span class="co">#&gt;         &lt;fctr&gt;               &lt;fctr&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt;</span>
<span class="co">#&gt;  1:      Civil         Asian Female    17    12  70.6</span>
<span class="co">#&gt;  2:      Civil           Asian Male    37    24  64.9</span>
<span class="co">#&gt;  3:      Civil         Black Female    54    28  51.9</span>
<span class="co">#&gt; ---                                                  </span>
<span class="co">#&gt; 29: Mechanical Hispanic/Latinx Male    76    47  61.8</span>
<span class="co">#&gt; 30: Mechanical         White Female   291   195  67.0</span>
<span class="co">#&gt; 31: Mechanical           White Male  1940  1265  65.2</span></code></pre></div>
<p>The levels of the factors are ordered non-alphabetically. <code>program</code> is now a factor with 4 levels; <code>race_sex</code> is a factor with 8 levels.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># first category is now a factor</span>
<span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">DT</span><span class="op">$</span><span class="va">program</span><span class="op">)</span>
<span class="co">#&gt; [1] "Electrical" "Industrial" "Mechanical" "Civil"</span>

<span class="co"># second category is now a factor</span>
<span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">DT</span><span class="op">$</span><span class="va">race_sex</span><span class="op">)</span>
<span class="co">#&gt; [1] "Black Male"             "Black Female"           "Hispanic/Latinx Male"  </span>
<span class="co">#&gt; [4] "Asian Male"             "White Male"             "Hispanic/Latinx Female"</span>
<span class="co">#&gt; [7] "White Female"           "Asian Female"</span></code></pre></div>
<p>The values that determine the order of the levels can be obtained by using the <code>detail</code> argument.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># return stickiness by category</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/condition_multiway.html">condition_multiway</a></span><span class="op">(</span>
  dframe <span class="op">=</span> <span class="va">DT</span>, <span class="co"># input data frame</span>
  categ_col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"program"</span>, <span class="st">"race_sex"</span><span class="op">)</span>, <span class="co"># multiway categorical variables</span>
  quant_col <span class="op">=</span> <span class="st">"stick"</span>, <span class="co"># multiway quantitative variable</span>
  detail <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># return columns of details</span>
  order_by <span class="op">=</span> <span class="st">"percent"</span>, <span class="co"># row and panel ordering method</span>
  param_col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"grad"</span>, <span class="st">"ever"</span><span class="op">)</span> <span class="co"># parameters used for ordering</span>
<span class="op">)</span></code></pre></div>
<p>By ordering the data by <code>program</code>, you can see that a given program has a single value of <code>program_stick</code> copied as many times as needed.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># optional code to control data.table printing</span>
<span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>datatable.print.topn <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>

<span class="co"># programs have a median stickiness across race-sex groups</span>
<span class="va">DT</span><span class="op">[</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html" class="external-link">order</a></span><span class="op">(</span><span class="va">program</span><span class="op">)</span><span class="op">]</span>
<span class="co">#&gt;        program               race_sex  grad  ever stick program_grad</span>
<span class="co">#&gt;         &lt;fctr&gt;                 &lt;fctr&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt;        &lt;num&gt;</span>
<span class="co">#&gt;  1: Electrical           Asian Female    27    38  71.1         1425</span>
<span class="co">#&gt;  2: Electrical             Asian Male   127   197  64.5         1425</span>
<span class="co">#&gt;  3: Electrical           Black Female    95   154  61.7         1425</span>
<span class="co">#&gt;  4: Electrical             Black Male   137   304  45.1         1425</span>
<span class="co">#&gt;  5: Electrical Hispanic/Latinx Female    10    14  71.4         1425</span>
<span class="co">#&gt;  6: Electrical   Hispanic/Latinx Male    37    67  55.2         1425</span>
<span class="co">#&gt;  7: Electrical           White Female   122   193  63.2         1425</span>
<span class="co">#&gt;  8: Electrical             White Male   870  1366  63.7         1425</span>
<span class="co">#&gt;  9: Industrial           Asian Female    20    40  50.0          655</span>
<span class="co">#&gt; 10: Industrial             Asian Male    38    60  63.3          655</span>
<span class="co">#&gt; ---                                                                 </span>
<span class="co">#&gt; 22: Mechanical           White Female   195   291  67.0         1757</span>
<span class="co">#&gt; 23: Mechanical             White Male  1265  1940  65.2         1757</span>
<span class="co">#&gt; 24:      Civil           Asian Female    12    17  70.6         1160</span>
<span class="co">#&gt; 25:      Civil             Asian Male    24    37  64.9         1160</span>
<span class="co">#&gt; 26:      Civil           Black Female    28    54  51.9         1160</span>
<span class="co">#&gt; 27:      Civil             Black Male    43    98  43.9         1160</span>
<span class="co">#&gt; 28:      Civil Hispanic/Latinx Female     5    10  50.0         1160</span>
<span class="co">#&gt; 29:      Civil   Hispanic/Latinx Male    33    56  58.9         1160</span>
<span class="co">#&gt; 30:      Civil           White Female   232   329  70.5         1160</span>
<span class="co">#&gt; 31:      Civil             White Male   783  1147  68.3         1160</span>
<span class="co">#&gt;     program_ever race_sex_grad race_sex_ever program_stick race_sex_stick</span>
<span class="co">#&gt;            &lt;num&gt;         &lt;num&gt;         &lt;num&gt;         &lt;num&gt;          &lt;num&gt;</span>
<span class="co">#&gt;  1:         2333            78           118          61.1           66.1</span>
<span class="co">#&gt;  2:         2333           266           416          61.1           63.9</span>
<span class="co">#&gt;  3:         2333           224           385          61.1           58.2</span>
<span class="co">#&gt;  4:         2333           337           722          61.1           46.7</span>
<span class="co">#&gt;  5:         2333            23            35          61.1           65.7</span>
<span class="co">#&gt;  6:         2333           139           224          61.1           62.1</span>
<span class="co">#&gt;  7:         2333           691          1047          61.1           66.0</span>
<span class="co">#&gt;  8:         2333          3239          4947          61.1           65.5</span>
<span class="co">#&gt;  9:         1053            78           118          62.2           66.1</span>
<span class="co">#&gt; 10:         1053           266           416          62.2           63.9</span>
<span class="co">#&gt; ---                                                                      </span>
<span class="co">#&gt; 22:         2760           691          1047          63.7           66.0</span>
<span class="co">#&gt; 23:         2760          3239          4947          63.7           65.5</span>
<span class="co">#&gt; 24:         1748            78           118          66.4           66.1</span>
<span class="co">#&gt; 25:         1748           266           416          66.4           63.9</span>
<span class="co">#&gt; 26:         1748           224           385          66.4           58.2</span>
<span class="co">#&gt; 27:         1748           337           722          66.4           46.7</span>
<span class="co">#&gt; 28:         1748            23            35          66.4           65.7</span>
<span class="co">#&gt; 29:         1748           139           224          66.4           62.1</span>
<span class="co">#&gt; 30:         1748           691          1047          66.4           66.0</span>
<span class="co">#&gt; 31:         1748          3239          4947          66.4           65.5</span></code></pre></div>
<p>Similarly, by ordering the data by <code>race_sex</code>, you can see that a given demographic group has a single value of <code>race_sex_stick</code> copied as many times as needed.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># race_sex groupings have a median stickiness across programs</span>
<span class="va">DT</span><span class="op">[</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html" class="external-link">order</a></span><span class="op">(</span><span class="va">race_sex</span><span class="op">)</span><span class="op">]</span>
<span class="co">#&gt;        program               race_sex  grad  ever stick program_grad</span>
<span class="co">#&gt;         &lt;fctr&gt;                 &lt;fctr&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt;        &lt;num&gt;</span>
<span class="co">#&gt;  1:      Civil             Black Male    43    98  43.9         1160</span>
<span class="co">#&gt;  2: Electrical             Black Male   137   304  45.1         1425</span>
<span class="co">#&gt;  3: Industrial             Black Male    57   106  53.8          655</span>
<span class="co">#&gt;  4: Mechanical             Black Male   100   214  46.7         1757</span>
<span class="co">#&gt;  5:      Civil           Black Female    28    54  51.9         1160</span>
<span class="co">#&gt;  6: Electrical           Black Female    95   154  61.7         1425</span>
<span class="co">#&gt;  7: Industrial           Black Female    55    94  58.5          655</span>
<span class="co">#&gt;  8: Mechanical           Black Female    46    83  55.4         1757</span>
<span class="co">#&gt;  9:      Civil   Hispanic/Latinx Male    33    56  58.9         1160</span>
<span class="co">#&gt; 10: Electrical   Hispanic/Latinx Male    37    67  55.2         1425</span>
<span class="co">#&gt; ---                                                                 </span>
<span class="co">#&gt; 22: Electrical Hispanic/Latinx Female    10    14  71.4         1425</span>
<span class="co">#&gt; 23: Mechanical Hispanic/Latinx Female     8    11  72.7         1757</span>
<span class="co">#&gt; 24:      Civil           White Female   232   329  70.5         1160</span>
<span class="co">#&gt; 25: Electrical           White Female   122   193  63.2         1425</span>
<span class="co">#&gt; 26: Industrial           White Female   142   234  60.7          655</span>
<span class="co">#&gt; 27: Mechanical           White Female   195   291  67.0         1757</span>
<span class="co">#&gt; 28:      Civil           Asian Female    12    17  70.6         1160</span>
<span class="co">#&gt; 29: Electrical           Asian Female    27    38  71.1         1425</span>
<span class="co">#&gt; 30: Industrial           Asian Female    20    40  50.0          655</span>
<span class="co">#&gt; 31: Mechanical           Asian Female    19    23  82.6         1757</span>
<span class="co">#&gt;     program_ever race_sex_grad race_sex_ever program_stick race_sex_stick</span>
<span class="co">#&gt;            &lt;num&gt;         &lt;num&gt;         &lt;num&gt;         &lt;num&gt;          &lt;num&gt;</span>
<span class="co">#&gt;  1:         1748           337           722          66.4           46.7</span>
<span class="co">#&gt;  2:         2333           337           722          61.1           46.7</span>
<span class="co">#&gt;  3:         1053           337           722          62.2           46.7</span>
<span class="co">#&gt;  4:         2760           337           722          63.7           46.7</span>
<span class="co">#&gt;  5:         1748           224           385          66.4           58.2</span>
<span class="co">#&gt;  6:         2333           224           385          61.1           58.2</span>
<span class="co">#&gt;  7:         1053           224           385          62.2           58.2</span>
<span class="co">#&gt;  8:         2760           224           385          63.7           58.2</span>
<span class="co">#&gt;  9:         1748           139           224          66.4           62.1</span>
<span class="co">#&gt; 10:         2333           139           224          61.1           62.1</span>
<span class="co">#&gt; ---                                                                      </span>
<span class="co">#&gt; 22:         2333            23            35          61.1           65.7</span>
<span class="co">#&gt; 23:         2760            23            35          63.7           65.7</span>
<span class="co">#&gt; 24:         1748           691          1047          66.4           66.0</span>
<span class="co">#&gt; 25:         2333           691          1047          61.1           66.0</span>
<span class="co">#&gt; 26:         1053           691          1047          62.2           66.0</span>
<span class="co">#&gt; 27:         2760           691          1047          63.7           66.0</span>
<span class="co">#&gt; 28:         1748            78           118          66.4           66.1</span>
<span class="co">#&gt; 29:         2333            78           118          61.1           66.1</span>
<span class="co">#&gt; 30:         1053            78           118          62.2           66.1</span>
<span class="co">#&gt; 31:         2760            78           118          63.7           66.1</span></code></pre></div>
<div id="exercises" class="section level3">
<h3 class="hasAnchor">
<a href="#exercises" class="anchor" aria-hidden="true"></a>Exercises</h3>
<ol style="list-style-type: decimal">
<li>Determine the class of the categorical variables in the built-in data set <code>study_grad_rate</code>.</li>
<li>Apply <code><a href="../reference/condition_multiway.html">condition_multiway()</a></code>. Confirm that the categorical variables are factors.</li>
<li>Determine the order of the factor levels.</li>
</ol>
</div>
</div>
<div id="create-a-multiway-graph" class="section level2">
<h2 class="hasAnchor">
<a href="#create-a-multiway-graph" class="anchor" aria-hidden="true"></a>Create a multiway graph</h2>
<p>We use conventional ggplot2 functions to create the multiway graphs.</p>
<p>By previously ordering the levels of the factors, we have structured the data so that the rows and panels of the multiway graph are ordered by the method we selected. here we used the “percent” method. Program stickiness is drawn as a vertical reference line in each panel.</p>
<p><em>Reminder:</em> These are practice data, not suitable for drawing inferences about student performance, i.e., not for research.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create one multiway graph</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">DT</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">stick</span>, y <span class="op">=</span> <span class="va">race_sex</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">program</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">1</span>, as.table <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="va">program_stick</span><span class="op">)</span>,
    linetype <span class="op">=</span> <span class="fl">2</span>,
    color <span class="op">=</span> <span class="st">"gray70"</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>
    x <span class="op">=</span> <span class="st">"Stickiness (%)"</span>,
    y <span class="op">=</span> <span class="st">""</span>,
    title <span class="op">=</span> <span class="st">"Practice data (not for research)"</span>,
    caption <span class="op">=</span> <span class="st">"Source: midfielddata"</span>
  <span class="op">)</span></code></pre></div>
<p><img src="../man/figures/art-050-multiway-graphs-fig1-1.png" width="70%" style="display: block; margin: auto;"><br></p>
<p>This graph permits a direct visual comparison of how stickiness varies by race and sex within a particular major.</p>
<p>Reading a multiway graph</p>
<ul>
<li>We can more effectively compare values within a panel than between panels.</li>
<li>Because rows are ordered, one expects a generally increasing trend within a panel. A response greater or smaller than expected creates a visual asymmetry. The interesting stories are often in these visual anomalies.</li>
<li>To explore the comparison between panels, we swap the row and panel categories, creating the dual multiway.</li>
</ul>
<div id="exercise" class="section level3">
<h3 class="hasAnchor">
<a href="#exercise" class="anchor" aria-hidden="true"></a>Exercise</h3>
<ol style="list-style-type: decimal">
<li>Create a multiway graph using the conditioned <code>study_grad_rate</code> data</li>
</ol>
</div>
</div>
<div id="create-the-dual-multiway-graph" class="section level2">
<h2 class="hasAnchor">
<a href="#create-the-dual-multiway-graph" class="anchor" aria-hidden="true"></a>Create the dual multiway graph</h2>
<p>The previous graph does not facilitate visual comparisons of members of the same race-sex group. As Cleveland says,</p>
<blockquote>
<p>Because of this asymmetry, it is often important to explore multiway data by as many multiway dot plots as there are categorical variables, with each variable assigned once to the levels.</p>
</blockquote>
<p>To create the <em>dual multiway</em> graph, we swap the roles of the rows and panels.</p>
<ul>
<li>
<code>y = race_sex</code> becomes <code>y = program</code>
</li>
<li>
<code>facet_wrap(vars(program) ...</code> becomes <code>facet_wrap(vars(race_sex) ...</code>
</li>
</ul>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create the dual multiway graph</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">DT</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">stick</span>, y <span class="op">=</span> <span class="va">program</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">race_sex</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">1</span>, as.table <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="va">race_sex_stick</span><span class="op">)</span>,
    linetype <span class="op">=</span> <span class="fl">2</span>,
    color <span class="op">=</span> <span class="st">"gray70"</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>
    x <span class="op">=</span> <span class="st">"Stickiness (%)"</span>,
    y <span class="op">=</span> <span class="st">""</span>,
    title <span class="op">=</span> <span class="st">"Practice data (not for research)"</span>,
    caption <span class="op">=</span> <span class="st">"Source: midfielddata"</span>
  <span class="op">)</span></code></pre></div>
<p><img src="../man/figures/art-050-multiway-graphs-fig2-1.png" width="70%" style="display: block; margin: auto;"><br></p>
<p>This graph permits a direct visual comparison of how stickiness varies by major for one group of students. Race/ethnicity/sex group stickiness is drawn as a vertical reference line in each panel.</p>
<p>Both multiways should be created for discussion. Usually one or the other will convey a more compelling visual story that gets included in the published findings.</p>
<div id="exercise-1" class="section level3">
<h3 class="hasAnchor">
<a href="#exercise-1" class="anchor" aria-hidden="true"></a>Exercise</h3>
<ol style="list-style-type: decimal">
<li>Create the dual multiway graph using the conditioned <code>study_grad_rate</code> data</li>
</ol>
</div>
</div>
<div id="panel-and-row-ordering-options" class="section level2">
<h2 class="hasAnchor">
<a href="#panel-and-row-ordering-options" class="anchor" aria-hidden="true"></a>Panel and row ordering options</h2>
<p>The <code>order_by</code> argument in <code><a href="../reference/condition_multiway.html">condition_multiway()</a></code> provides options for ordering the two categorical variables (panel order and row order) in a multiway graph.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create a common graph framework to use in the example below</span>
<span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">temp</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">stick</span>, y <span class="op">=</span> <span class="va">race_sex</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">program</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">1</span>, as.table <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>
    x <span class="op">=</span> <span class="st">"Longitudinal stickiness (%)"</span>,
    y <span class="op">=</span> <span class="st">""</span>,
    caption <span class="op">=</span> <span class="st">"Source: midfielddata"</span>
  <span class="op">)</span></code></pre></div>
<p>The following values of <code>order_by</code> are possible:</p>
<dl>
<dt>percent</dt>
<dd>Orders by ratios computed by category. Used when the quantitative response variable is the ratio (in percent) of two columns of integer counts (the two columns are the numerator and denominator of the ratio), such as the ratio of graduates to ever-enrolled (stickiness) or the ratio of graduates to starters (graduation rate). The counts in the two columns are summed by category and ratios for that category are computed. These grouped ratios are used to order the levels of the categories.
</dd>
<dd>
<p>The graphs shown above are representative of this type of ordering.</p>
</dd>
<dd>
<p>Requires the optional <code>param_col</code> argument with the names of the columns of the two terms of the ratio.</p>
</dd>
<dt>median</dt>
<dd>(default) Orders by the median of values in the quantitative column grouped by category. Here, the only quantity manipulated is the
</dd>
</dl>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dtf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/condition_multiway.html">condition_multiway</a></span><span class="op">(</span>
  dframe <span class="op">=</span> <span class="va">temp</span>,
  categ_col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"program"</span>, <span class="st">"race_sex"</span><span class="op">)</span>,
  quant_col <span class="op">=</span> <span class="st">"stick"</span>,
  detail <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span>
<span class="va">p</span> <span class="op"><a href="https://ggplot2.tidyverse.org/reference/gg-add.html" class="external-link">%+%</a></span> <span class="va">dtf</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Levels ordered by median values"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="va">program_stick</span><span class="op">)</span>,
    linetype <span class="op">=</span> <span class="fl">2</span>,
    col <span class="op">=</span> <span class="st">"gray50"</span>
  <span class="op">)</span></code></pre></div>
<p><img src="../man/figures/art-050-multiway-graphs-fig3-1.png" width="70%" style="display: block; margin: auto;"></p>
<dl>
<dt>mean</dt>
<dd>Orders by the mean of values in the quantitative column grouped by category.
</dd>
</dl>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dtf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/condition_multiway.html">condition_multiway</a></span><span class="op">(</span>
  dframe <span class="op">=</span> <span class="va">temp</span>,
  categ_col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"program"</span>, <span class="st">"race_sex"</span><span class="op">)</span>,
  quant_col <span class="op">=</span> <span class="st">"stick"</span>,
  order_by <span class="op">=</span> <span class="st">"mean"</span>,
  detail <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span>
<span class="va">p</span> <span class="op"><a href="https://ggplot2.tidyverse.org/reference/gg-add.html" class="external-link">%+%</a></span> <span class="va">dtf</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Levels ordered by mean values"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="va">program_stick</span><span class="op">)</span>,
    linetype <span class="op">=</span> <span class="fl">2</span>,
    col <span class="op">=</span> <span class="st">"gray50"</span>
  <span class="op">)</span></code></pre></div>
<p><img src="../man/figures/art-050-multiway-graphs-fig4-1.png" width="70%" style="display: block; margin: auto;"></p>
<dl>
<dt>sum</dt>
<dd>Orders by the sum of values in the quantitative column grouped by category. Useful when the response variable is a count or frequency.
</dd>
</dl>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dtf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/condition_multiway.html">condition_multiway</a></span><span class="op">(</span>
  dframe <span class="op">=</span> <span class="va">temp</span>,
  categ_col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"program"</span>, <span class="st">"race_sex"</span><span class="op">)</span>,
  quant_col <span class="op">=</span> <span class="st">"ever"</span>,
  order_by <span class="op">=</span> <span class="st">"sum"</span>,
  detail <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dtf</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">ever</span>, y <span class="op">=</span> <span class="va">race_sex</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">program</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">1</span>, as.table <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span>trans <span class="op">=</span> <span class="st">"log2"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="va">program_ever</span><span class="op">)</span>,
    linetype <span class="op">=</span> <span class="fl">2</span>,
    col <span class="op">=</span> <span class="st">"gray50"</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>
    x <span class="op">=</span> <span class="st">"Number of students ever enrolled (log-2 scale)"</span>,
    y <span class="op">=</span> <span class="st">""</span>,
    title <span class="op">=</span> <span class="st">"Levels ordered by count totals"</span>,
    caption <span class="op">=</span> <span class="st">"Source: midfielddata"</span>
  <span class="op">)</span></code></pre></div>
<p><img src="../man/figures/art-050-multiway-graphs-fig5-1.png" width="70%" style="display: block; margin: auto;"></p>
<dl>
<dt>alphabet</dt>
<dd>Orders the levels of the categorical variables alphabetically. Rarely useful for perceiving effects, but can be useful for value look up.
</dd>
</dl>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dtf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/condition_multiway.html">condition_multiway</a></span><span class="op">(</span>
  dframe <span class="op">=</span> <span class="va">temp</span>,
  categ_col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"program"</span>, <span class="st">"race_sex"</span><span class="op">)</span>,
  quant_col <span class="op">=</span> <span class="st">"stick"</span>,
  order_by <span class="op">=</span> <span class="st">"alphabet"</span>
<span class="op">)</span>
<span class="va">p</span> <span class="op"><a href="https://ggplot2.tidyverse.org/reference/gg-add.html" class="external-link">%+%</a></span> <span class="va">dtf</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Levels ordered alphbetically"</span><span class="op">)</span></code></pre></div>
<p><img src="../man/figures/art-050-multiway-graphs-fig6-1.png" width="70%" style="display: block; margin: auto;"></p>
</div>
<div id="references" class="section level2">
<h2 class="hasAnchor">
<a href="#references" class="anchor" aria-hidden="true"></a>References</h2>
<div id="refs" class="references csl-bib-body references csl-bib-body">
<div id="ref-Cleveland:1993" class="csl-entry">
<div class="csl-left-margin">[1] </div>
<div class="csl-right-inline">W. S. Cleveland, <em><span>Visualizing Data</span></em>. Summit, NJ: <span>Hobart Press</span>, 1993. </div>
</div>
<div id="ref-Kroonenberg:2008" class="csl-entry">
<div class="csl-left-margin">[2] </div>
<div class="csl-right-inline">P. M. Kroonenberg, <em><span>Applied Multiway Data Analysis</span></em>. Hoboken, NJ: <span>Wiley</span>, 2008. </div>
</div>
<div id="ref-Ohland+Orr+others:2012" class="csl-entry">
<div class="csl-left-margin">[3] </div>
<div class="csl-right-inline">M. Ohland, M. Orr, R. Layton, S. Lord, and R. Long, <span>“<span class="nocase">Introducing stickiness as a versatile metric of engineering persistence</span>,”</span> in <em><span class="nocase">Proceedings of the Frontiers in Education Conference</span></em>, 2012, pp. 1–5. </div>
</div>
</div>
</div>
<div id="appendix" class="section level2">
<h2 class="hasAnchor">
<a href="#appendix" class="anchor" aria-hidden="true"></a>Appendix</h2>
<div id="complete-script" class="section level3">
<h3 class="hasAnchor">
<a href="#complete-script" class="anchor" aria-hidden="true"></a>Complete script</h3>
<p>The vignette code chunks are collected below in a single, condensed script.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># packages used</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/MIDFIELDR/midfieldr" class="external-link">"midfieldr"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://r-datatable.com" class="external-link">"data.table"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://ggplot2.tidyverse.org" class="external-link">"ggplot2"</a></span><span class="op">)</span>

<span class="co"># optional code to control data.table printing</span>
<span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>
  datatable.print.nrows <span class="op">=</span> <span class="fl">10</span>,
  datatable.print.topn <span class="op">=</span> <span class="fl">5</span>,
  datatable.print.class <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span></code></pre></div>
<style type="text/css">
blockquote {
    padding: 10px 20px;
    margin: 0 0 20px;
    font-size: 12px;
    border-left: 0px solid
}
</style>
</div>
</div>
  </div>
 <div class="col-md-3 d-none d-md-block" id="pkgdown-sidebar">
        <div class="sticky-top">
    <nav id="toc"><h2 data-toc-skip>Contents</h2>

    </nav>
</div>
      </div>

</div>



      <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://github.com/graphdr" class="external-link external-link">Richard Layton</a>, Russell Long, Matthew Ohland, US National Science Foundation.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link external-link">pkgdown</a> 1.6.1.9001.</p>
</div>

      </footer>
</div>

  

  

  </body>
</html>
