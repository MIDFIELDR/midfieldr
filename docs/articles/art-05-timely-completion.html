<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="midfieldr">
<title>Timely completion • midfieldr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="../deps/bs3compat-0.2.5.1/tabs.js"></script><script src="../deps/bs3compat-0.2.5.1/bs3compat.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<link href="../syntax-highlighting.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Timely completion">
<meta property="og:description" content="midfieldr">
<meta property="og:image" content="https://midfieldr.github.io/midfieldr/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc" data-headroom>
    

      <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a class="navbar-brand mb-0 h1" href="../index.html">midfieldr</a>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <button type="button" id="version-badge" class="badge badge-default d-none d-lg-block" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Released version">1.0.0.9018</button>

    <div id="navbar" class="collapse navbar-collapse">
      <ul class="navbar-nav mr-auto ml-3">
<li class="nav-item">
  <a class="nav-link" href="../articles/art-00-midfield-data.html">Getting started</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-vignettes">Vignettes</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-vignettes">
    <a class="dropdown-item" href="../articles/art-01-multiway.html">Multiway graphs and tables</a>
    <a class="dropdown-item" href="../articles/art-02-program-codes.html">Program codes</a>
    <a class="dropdown-item" href="../articles/art-03-case-selection.html">Case selection</a>
    <a class="dropdown-item" href="../articles/art-04-data-sufficiency.html">Data sufficiency</a>
    <a class="dropdown-item" href="../articles/art-05-timely-completion.html">Timely completion</a>
    <a class="dropdown-item" href="../articles/art-06-stickiness.html">Stickiness</a>
    <a class="dropdown-item" href="../articles/art-07-fye-programs.html">FYE programs</a>
    <a class="dropdown-item" href="../articles/art-08-graduation-rate.html">Graduation rate</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control mr-sm-2" aria-label="Search" name="search-input" data-search-index="/search.json" id="search-input" placeholder="Search..." autocomplete="off">
</form>

      <ul class="navbar-nav ml-1">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/MIDFIELDR/midfieldr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
  </div>
</nav><div class="container template-article">
<script src="art-05-timely-completion_files/header-attrs-2.9/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <img src="../package-logo.png" class="pkg-logo" alt=""><div class="page-header pb-2 mt-4 mb-2 border-bottom toc-ignore">
      <h1 class="display-4" data-toc-skip>Timely completion</h1>
                        <h4 data-toc-skip class="author">Richard Layton</h4>
            
            <h4 data-toc-skip class="date">2021-06-26</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/MIDFIELDR/midfieldr/blob/master/vignettes/art-05-timely-completion.Rmd" class="external-link"><code>vignettes/art-05-timely-completion.Rmd</code></a></small>
      <div class="d-none name"><code>art-05-timely-completion.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor" aria-hidden="true"></a>Introduction</h2>
<p>Program completion—a key component of most persistence measures—must be timely, that is, occur within a specific span of years. Our default set point is six years—150% of the typical “scheduled” span of four years.</p>
<p>Students who complete their programs later than their <em>timely completion term</em> (introduced in the <a href="art-04-data-sufficiency.html">Data sufficiency vignette</a>). are reclassified as non-graduates in most persistence metrics.</p>
<p>In this vignette, we introduce the <em>timely completion criterion</em> and related midfieldr functions.</p>
<dl>
<dt>timely completion (<em>TC</em>) term</dt>
<dd>The last term in which program completion would be considered timely for a given student. For example, the <em>TC</em> term in many cases is defined as the admission term plus 6 years.
</dd>
<dt>timely completion criterion</dt>
<dd>Graduates completing their program later than their <em>TC</em> term are grouped with non-graduates for purposes of computing a persistence metric.
</dd>
</dl>
<p>In the figure we compare the history of two students: both enter in Fall 2010 and both graduate in Spring 2015. We assume a basis of 6 years for timely completion.</p>
<ul>
<li>Student A is a first-time-in-college student. Their <em>TC</em> term is 6 academic years later, in Spring 2016.</li>
<li>Student B is a transfer student, entering as a junior. Having already satisfied 2 years of program requirements, their <em>TC</em> term is 4 years later, in Spring 2014.</li>
</ul>
<p><br><img src="../man/figures/art-05-timely-completion-fig1-1.png" width="70%" style="display: block; margin: auto;"><br></p>
<p>Student A’s degree term is before their <em>TC</em> term. Their completion is timely and they would be counted among the program graduates.</p>
<p>However, Student B’s degree term is after their <em>TC</em> term. Their completion is not timely and their graduation classification (for purposes of computing the persistence metric only) would be converted from graduate to non-graduate.</p>
<div id="outline" class="section level3">
<h3 class="hasAnchor">
<a href="#outline" class="anchor" aria-hidden="true"></a>Outline</h3>
<ul>
<li>Start with the case study students (<code>study_students</code>)</li>
<li>Determine whether completion is timely</li>
<li>Summarize the pre-metric criteria</li>
<li>Explore: Compare programs by completion status</li>
</ul>
</div>
<div id="this-vignette-uses" class="section level3">
<h3 class="hasAnchor">
<a href="#this-vignette-uses" class="anchor" aria-hidden="true"></a>This vignette uses</h3>
<p>midfieldr functions</p>
<ul>
<li>
<code><a href="../reference/add_completion_timely.html">add_completion_timely()</a></code><br>
</li>
<li><code><a href="../reference/add_timely_term.html">add_timely_term()</a></code></li>
<li><code><a href="../reference/condition_multiway.html">condition_multiway()</a></code></li>
</ul>
<p>packages</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Packages used</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/MIDFIELDR/midfieldr" class="external-link">"midfieldr"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/MIDFIELDR/midfielddata" class="external-link">"midfielddata"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://r-datatable.com" class="external-link">"data.table"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://ggplot2.tidyverse.org" class="external-link">"ggplot2"</a></span><span class="op">)</span>

<span class="co"># Optional code to control data.table printing</span>
<span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>
  datatable.print.nrows <span class="op">=</span> <span class="fl">10</span>,
  datatable.print.topn <span class="op">=</span> <span class="fl">5</span>,
  datatable.print.class <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span></code></pre></div>
<p>data</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Load data tables from midfielddata</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">student</span>, <span class="va">term</span>, <span class="va">degree</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="case-study-students" class="section level2">
<h2 class="hasAnchor">
<a href="#case-study-students" class="anchor" aria-hidden="true"></a>Case study students</h2>
<p>Having applied the data sufficiency criterion to our case study programs, we saved the result in the midfieldr package as the data set <code>study_students</code>. These students all have timely completion terms within the range of data provided by their institutions.</p>
<p>Review its help page by running</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">?</span> <span class="va">study_students</span></code></pre></div>
<p>Review the data frame,</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">study_students</span>
<span class="co">#&gt;               mcid   cip6</span>
<span class="co">#&gt;             &lt;char&gt; &lt;char&gt;</span>
<span class="co">#&gt;     1: MID25783178 143501</span>
<span class="co">#&gt;     2: MID25783178 143501</span>
<span class="co">#&gt;     3: MID25783178 143501</span>
<span class="co">#&gt;     4: MID25783178 143501</span>
<span class="co">#&gt;     5: MID25783178 143501</span>
<span class="co">#&gt;    ---                   </span>
<span class="co">#&gt; 57096: MID26697447 141001</span>
<span class="co">#&gt; 57097: MID26697447 141001</span>
<span class="co">#&gt; 57098: MID26697447 141001</span>
<span class="co">#&gt; 57099: MID26697447 141001</span>
<span class="co">#&gt; 57100: MID26697447 141001</span></code></pre></div>
</div>
<div id="determine-whether-completion-is-timely" class="section level2">
<h2 class="hasAnchor">
<a href="#determine-whether-completion-is-timely" class="anchor" aria-hidden="true"></a>Determine whether completion is timely</h2>
<p>We use <code><a href="../reference/add_timely_term.html">add_timely_term()</a></code> to estimate the timely completion term. See the <a href="art-04-data-sufficiency.html">Data sufficiency vignette</a> for additional details about this function.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Estimate the timely completion term</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_timely_term.html">add_timely_term</a></span><span class="op">(</span><span class="va">study_students</span>, midfield_term <span class="op">=</span> <span class="va">term</span><span class="op">)</span>
<span class="va">DT</span>
<span class="co">#&gt;               mcid   cip6 timely_term</span>
<span class="co">#&gt;             &lt;char&gt; &lt;char&gt;      &lt;char&gt;</span>
<span class="co">#&gt;     1: MID25783178 143501       20003</span>
<span class="co">#&gt;     2: MID25783178 143501       20003</span>
<span class="co">#&gt;     3: MID25783178 143501       20003</span>
<span class="co">#&gt;     4: MID25783178 143501       20003</span>
<span class="co">#&gt;     5: MID25783178 143501       20003</span>
<span class="co">#&gt;    ---                               </span>
<span class="co">#&gt; 57096: MID26697447 141001       20163</span>
<span class="co">#&gt; 57097: MID26697447 141001       20163</span>
<span class="co">#&gt; 57098: MID26697447 141001       20163</span>
<span class="co">#&gt; 57099: MID26697447 141001       20163</span>
<span class="co">#&gt; 57100: MID26697447 141001       20163</span></code></pre></div>
<p>Now that our working data frame has a <code>timely_term</code> column, we use <code><a href="../reference/add_completion_timely.html">add_completion_timely()</a></code> to add a logical variable (TRUE/FALSE) that answers the question, “Is a program completion timely?” View its help page by running,</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">?</span> <span class="va">add_completion_timely</span></code></pre></div>
<p>This function has two required arguments and one optional <code>details</code> argument. The input <code>dframe</code> must have a <code>timely_term</code> column. The details, in this case, add two extra columns to show whether a program was completed, and if so, in what term.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Add the completion timely column</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_completion_timely.html">add_completion_timely</a></span><span class="op">(</span>
  dframe <span class="op">=</span> <span class="va">DT</span>,
  midfield_degree <span class="op">=</span> <span class="va">degree</span>,
  details <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span>

<span class="co"># Examine the result</span>
<span class="va">DT</span>
<span class="co">#&gt;               mcid   cip6 timely_term term_degree completion completion_timely</span>
<span class="co">#&gt;             &lt;char&gt; &lt;char&gt;      &lt;char&gt;      &lt;char&gt;     &lt;lgcl&gt;            &lt;lgcl&gt;</span>
<span class="co">#&gt;     1: MID25783178 143501       20003       20001       TRUE              TRUE</span>
<span class="co">#&gt;     2: MID25783178 143501       20003       20001       TRUE              TRUE</span>
<span class="co">#&gt;     3: MID25783178 143501       20003       20001       TRUE              TRUE</span>
<span class="co">#&gt;     4: MID25783178 143501       20003       20001       TRUE              TRUE</span>
<span class="co">#&gt;     5: MID25783178 143501       20003       20001       TRUE              TRUE</span>
<span class="co">#&gt;    ---                                                                        </span>
<span class="co">#&gt; 57096: MID26697447 141001       20163       20154       TRUE              TRUE</span>
<span class="co">#&gt; 57097: MID26697447 141001       20163       20154       TRUE              TRUE</span>
<span class="co">#&gt; 57098: MID26697447 141001       20163       20154       TRUE              TRUE</span>
<span class="co">#&gt; 57099: MID26697447 141001       20163       20154       TRUE              TRUE</span>
<span class="co">#&gt; 57100: MID26697447 141001       20163       20154       TRUE              TRUE</span></code></pre></div>
<p>Interpreting the result:</p>
<ul>
<li>
<code>TRUE</code> in the <code>completion_timely</code> column indicates that a student completed their program (<code>completion = TRUE</code>) and their degree term is no later than their timely completion term (<code>term_degree &lt;= timely_term</code>).</li>
<li>
<code>FALSE</code> in the <code>completion_timely</code> column indicates non-completion (<code>completion = FALSE</code>) or a degree term later than the timely completion term (<code>term_degree &gt; timely_term</code>).</li>
</ul>
<p>With details FALSE, only the <code>completion_timely</code> column is added.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># With details FALSE</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_completion_timely.html">add_completion_timely</a></span><span class="op">(</span>
  dframe <span class="op">=</span> <span class="va">DT</span>,
  midfield_degree <span class="op">=</span> <span class="va">degree</span>,
  details <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span>

<span class="co"># Examine the result</span>
<span class="va">DT</span>
<span class="co">#&gt;               mcid   cip6 timely_term completion_timely</span>
<span class="co">#&gt;             &lt;char&gt; &lt;char&gt;      &lt;char&gt;            &lt;lgcl&gt;</span>
<span class="co">#&gt;     1: MID25783178 143501       20003              TRUE</span>
<span class="co">#&gt;     2: MID25783178 143501       20003              TRUE</span>
<span class="co">#&gt;     3: MID25783178 143501       20003              TRUE</span>
<span class="co">#&gt;     4: MID25783178 143501       20003              TRUE</span>
<span class="co">#&gt;     5: MID25783178 143501       20003              TRUE</span>
<span class="co">#&gt;    ---                                                 </span>
<span class="co">#&gt; 57096: MID26697447 141001       20163              TRUE</span>
<span class="co">#&gt; 57097: MID26697447 141001       20163              TRUE</span>
<span class="co">#&gt; 57098: MID26697447 141001       20163              TRUE</span>
<span class="co">#&gt; 57099: MID26697447 141001       20163              TRUE</span>
<span class="co">#&gt; 57100: MID26697447 141001       20163              TRUE</span></code></pre></div>
<p>Like the other midfieldr <code>add_*</code> functions, existing columns are deleted or overwritten if they have the same name as the variables to be added. In this case, the <code>term_degree</code> and <code>completion</code> columns are deleted and the <code>completion_timely</code> column is overwritten.</p>
<div id="exercises" class="section level3">
<h3 class="hasAnchor">
<a href="#exercises" class="anchor" aria-hidden="true"></a>Exercises</h3>
<p>If we start with the result from above and add the details,</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Assign a new memory location</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">DT</span><span class="op">)</span>

<span class="co"># Add the details</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_completion_timely.html">add_completion_timely</a></span><span class="op">(</span>
  dframe <span class="op">=</span> <span class="va">x</span>,
  midfield_degree <span class="op">=</span> <span class="va">degree</span>,
  details <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span></code></pre></div>
<p>Then order the rows and examine the last 20 rows only,</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Examine the final 20 rows</span>
<span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>datatable.print.topn <span class="op">=</span> <span class="fl">20</span><span class="op">)</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">[</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html" class="external-link">order</a></span><span class="op">(</span><span class="va">cip6</span><span class="op">)</span><span class="op">]</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">[</span><span class="fl">8180</span><span class="op">:</span><span class="fl">8199</span><span class="op">]</span></code></pre></div>
<ol style="list-style-type: decimal">
<li>Find a row in which <code>completion_timely</code> is TRUE. Confirm that the student completed their program and that their degree term precedes their <em>TC</em> term.</li>
<li>Find a row in which <code>term_degree</code> is NA, that is, the student did not complete their program. Confirm that their <code>completion_timely</code> value is FALSE.<br>
</li>
<li>Find a row with <code>completion</code> TRUE but <code>completion_timely</code> FALSE. Confirm that the student’s degree term overshoots their <em>TC</em> term.</li>
</ol>
</div>
</div>
<div id="summarize-the-pre-metric-criteria" class="section level2">
<h2 class="hasAnchor">
<a href="#summarize-the-pre-metric-criteria" class="anchor" aria-hidden="true"></a>Summarize the pre-metric criteria</h2>
<p>At this point in the case study example, we have illustrated the two criteria typically applied before developing any persistence metric, i.e., “pre-metric” criteria. Both depend on the estimate of the timely completion (<em>TC</em>) term:</p>
<dl>
<dt>data sufficiency criterion</dt>
<dd>Excludes some students, limiting the study to those whose <em>TC</em> terms are within the range of data provided by their institution.
</dd>
<dt>timely completion criterion</dt>
<dd>Retains all students but reclassifies completers whose degree terms overshoot their <em>TC</em> terms as non-graduates.
</dd>
</dl>
<p>Having applied both criteria, our data are ready for use in a persistence metric.</p>
</div>
<div id="explore-compare-programs-by-completion-status" class="section level2">
<h2 class="hasAnchor">
<a href="#explore-compare-programs-by-completion-status" class="anchor" aria-hidden="true"></a>Explore: Compare programs by completion status</h2>
<p>In a typical persistence metric, the untimely graduates and the non-completers are grouped together as non-graduates. However, we keep them separate in this example to explore the data. We construct a new <code>status</code> column with three possible values:</p>
<ul>
<li>Timely grad</li>
<li>Untimely grad</li>
<li>Non-completer</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Need the completion column for this application</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_completion_timely.html">add_completion_timely</a></span><span class="op">(</span>
  dframe <span class="op">=</span> <span class="va">DT</span>,
  midfield_degree <span class="op">=</span> <span class="va">degree</span>,
  details <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span></code></pre></div>
<p>A timely graduate completed their program no later than their timely completion term.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Timely grads</span>
<span class="va">DT</span><span class="op">[</span>
  <span class="va">completion</span> <span class="op">==</span> <span class="cn">TRUE</span> <span class="op">&amp;</span> <span class="va">completion_timely</span> <span class="op">==</span> <span class="cn">TRUE</span>,
  <span class="va">status</span> <span class="op">:=</span> <span class="st">"Timely grad"</span>
<span class="op">]</span></code></pre></div>
<p>A untimely graduate completed their program after their timely completion term.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Untimely grads</span>
<span class="va">DT</span><span class="op">[</span>
  <span class="va">completion</span> <span class="op">==</span> <span class="cn">TRUE</span> <span class="op">&amp;</span> <span class="va">completion_timely</span> <span class="op">==</span> <span class="cn">FALSE</span>,
  <span class="va">status</span> <span class="op">:=</span> <span class="st">"Untimely grad"</span>
<span class="op">]</span></code></pre></div>
<p>A non-completer did not complete their program.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Non-completers</span>
<span class="va">DT</span><span class="op">[</span><span class="va">completion</span> <span class="op">==</span> <span class="cn">FALSE</span>, <span class="va">status</span> <span class="op">:=</span> <span class="st">"Non-completer"</span><span class="op">]</span></code></pre></div>
<p>Remove some unnecessary columns for less cluttered viewing.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Improve viewing</span>
<span class="va">cols_we_want</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cip6"</span>, <span class="st">"completion"</span>, <span class="st">"completion_timely"</span>, <span class="st">"status"</span><span class="op">)</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html" class="external-link">order</a></span><span class="op">(</span><span class="va">cip6</span><span class="op">)</span>, <span class="va">..cols_we_want</span><span class="op">]</span>

<span class="co"># Examine the result</span>
<span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>datatable.print.topn <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>
<span class="va">DT</span>
<span class="co">#&gt;          cip6 completion completion_timely        status</span>
<span class="co">#&gt;        &lt;char&gt;     &lt;lgcl&gt;            &lt;lgcl&gt;        &lt;char&gt;</span>
<span class="co">#&gt;     1: 140801       TRUE              TRUE   Timely grad</span>
<span class="co">#&gt;     2: 140801       TRUE              TRUE   Timely grad</span>
<span class="co">#&gt;     3: 140801       TRUE              TRUE   Timely grad</span>
<span class="co">#&gt;     4: 140801       TRUE              TRUE   Timely grad</span>
<span class="co">#&gt;     5: 140801       TRUE              TRUE   Timely grad</span>
<span class="co">#&gt;     6: 140801       TRUE              TRUE   Timely grad</span>
<span class="co">#&gt;     7: 140801       TRUE              TRUE   Timely grad</span>
<span class="co">#&gt;     8: 140801       TRUE              TRUE   Timely grad</span>
<span class="co">#&gt;     9: 140801       TRUE              TRUE   Timely grad</span>
<span class="co">#&gt;    10: 140801       TRUE              TRUE   Timely grad</span>
<span class="co">#&gt;    11: 140801       TRUE              TRUE   Timely grad</span>
<span class="co">#&gt;    12: 140801      FALSE             FALSE Non-completer</span>
<span class="co">#&gt;    ---                                                  </span>
<span class="co">#&gt; 57089: 143501       TRUE              TRUE   Timely grad</span>
<span class="co">#&gt; 57090: 143501       TRUE              TRUE   Timely grad</span>
<span class="co">#&gt; 57091: 143501       TRUE              TRUE   Timely grad</span>
<span class="co">#&gt; 57092: 143501       TRUE              TRUE   Timely grad</span>
<span class="co">#&gt; 57093: 143501       TRUE              TRUE   Timely grad</span>
<span class="co">#&gt; 57094: 143501       TRUE              TRUE   Timely grad</span>
<span class="co">#&gt; 57095: 143501       TRUE              TRUE   Timely grad</span>
<span class="co">#&gt; 57096: 143501       TRUE              TRUE   Timely grad</span>
<span class="co">#&gt; 57097: 143501       TRUE              TRUE   Timely grad</span>
<span class="co">#&gt; 57098: 143501       TRUE              TRUE   Timely grad</span>
<span class="co">#&gt; 57099: 143501       TRUE              TRUE   Timely grad</span>
<span class="co">#&gt; 57100: 143501       TRUE              TRUE   Timely grad</span></code></pre></div>
<p>Recall that we have a data frame of case-study program CIP codes and names in the <code>study_programs</code> data set. To review its hep page, run</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">?</span> <span class="va">study_programs</span></code></pre></div>
<p>Join the program names to our working data frame and drop unnecessary columns,</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Join program names</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">DT</span>, <span class="va">study_programs</span>, by <span class="op">=</span> <span class="st">"cip6"</span>, all.x <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="co"># Keep columns we need for grouping and summarizing</span>
<span class="va">cols_we_want</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"status"</span>, <span class="st">"program"</span><span class="op">)</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span>, <span class="va">..cols_we_want</span><span class="op">]</span>

<span class="co"># Examine the result</span>
<span class="va">DT</span>
<span class="co">#&gt;               status                program</span>
<span class="co">#&gt;               &lt;char&gt;                 &lt;char&gt;</span>
<span class="co">#&gt;     1:   Timely grad      Civil Engineering</span>
<span class="co">#&gt;     2:   Timely grad      Civil Engineering</span>
<span class="co">#&gt;     3:   Timely grad      Civil Engineering</span>
<span class="co">#&gt;     4:   Timely grad      Civil Engineering</span>
<span class="co">#&gt;     5:   Timely grad      Civil Engineering</span>
<span class="co">#&gt;     6:   Timely grad      Civil Engineering</span>
<span class="co">#&gt;     7:   Timely grad      Civil Engineering</span>
<span class="co">#&gt;     8:   Timely grad      Civil Engineering</span>
<span class="co">#&gt;     9:   Timely grad      Civil Engineering</span>
<span class="co">#&gt;    10:   Timely grad      Civil Engineering</span>
<span class="co">#&gt;    11:   Timely grad      Civil Engineering</span>
<span class="co">#&gt;    12: Non-completer      Civil Engineering</span>
<span class="co">#&gt;    ---                                     </span>
<span class="co">#&gt; 57089:   Timely grad Industrial Engineering</span>
<span class="co">#&gt; 57090:   Timely grad Industrial Engineering</span>
<span class="co">#&gt; 57091:   Timely grad Industrial Engineering</span>
<span class="co">#&gt; 57092:   Timely grad Industrial Engineering</span>
<span class="co">#&gt; 57093:   Timely grad Industrial Engineering</span>
<span class="co">#&gt; 57094:   Timely grad Industrial Engineering</span>
<span class="co">#&gt; 57095:   Timely grad Industrial Engineering</span>
<span class="co">#&gt; 57096:   Timely grad Industrial Engineering</span>
<span class="co">#&gt; 57097:   Timely grad Industrial Engineering</span>
<span class="co">#&gt; 57098:   Timely grad Industrial Engineering</span>
<span class="co">#&gt; 57099:   Timely grad Industrial Engineering</span>
<span class="co">#&gt; 57100:   Timely grad Industrial Engineering</span></code></pre></div>
<p>Group and summarize,</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Count students by program and completion status</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span>N_group <span class="op">=</span> <span class="va">.N</span><span class="op">)</span>, by <span class="op">=</span> <span class="fu">.</span><span class="op">(</span><span class="va">program</span>, <span class="va">status</span><span class="op">)</span><span class="op">]</span>
<span class="va">DT</span>
<span class="co">#&gt;                    program        status N_group</span>
<span class="co">#&gt;                     &lt;char&gt;        &lt;char&gt;   &lt;int&gt;</span>
<span class="co">#&gt;  1:      Civil Engineering   Timely grad    7975</span>
<span class="co">#&gt;  2:      Civil Engineering Non-completer    1951</span>
<span class="co">#&gt;  3:      Civil Engineering Untimely grad    1331</span>
<span class="co">#&gt;  4: Electrical Engineering   Timely grad   11287</span>
<span class="co">#&gt;  5: Electrical Engineering Non-completer    3199</span>
<span class="co">#&gt;  6: Electrical Engineering Untimely grad    2903</span>
<span class="co">#&gt;  7: Mechanical Engineering Non-completer    3818</span>
<span class="co">#&gt;  8: Mechanical Engineering Untimely grad    2461</span>
<span class="co">#&gt;  9: Mechanical Engineering   Timely grad   13823</span>
<span class="co">#&gt; 10: Industrial Engineering   Timely grad    5501</span>
<span class="co">#&gt; 11: Industrial Engineering Non-completer    1194</span>
<span class="co">#&gt; 12: Industrial Engineering Untimely grad    1657</span></code></pre></div>
<p>In anticipation of the graph, we condition these multiway data with the categorical columns converted to factors with levels ordered by the median values of <code>N_group</code>.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Create factors with ordered levels</span>
<span class="va">mw</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/condition_multiway.html">condition_multiway</a></span><span class="op">(</span><span class="va">DT</span><span class="op">)</span>
<span class="va">mw</span>
<span class="co">#&gt;                    program        status N_group</span>
<span class="co">#&gt;                     &lt;fctr&gt;        &lt;fctr&gt;   &lt;num&gt;</span>
<span class="co">#&gt;  1:      Civil Engineering   Timely grad    7975</span>
<span class="co">#&gt;  2:      Civil Engineering Non-completer    1951</span>
<span class="co">#&gt;  3:      Civil Engineering Untimely grad    1331</span>
<span class="co">#&gt;  4: Electrical Engineering   Timely grad   11287</span>
<span class="co">#&gt;  5: Electrical Engineering Non-completer    3199</span>
<span class="co">#&gt;  6: Electrical Engineering Untimely grad    2903</span>
<span class="co">#&gt;  7: Mechanical Engineering Non-completer    3818</span>
<span class="co">#&gt;  8: Mechanical Engineering Untimely grad    2461</span>
<span class="co">#&gt;  9: Mechanical Engineering   Timely grad   13823</span>
<span class="co">#&gt; 10: Industrial Engineering   Timely grad    5501</span>
<span class="co">#&gt; 11: Industrial Engineering Non-completer    1194</span>
<span class="co">#&gt; 12: Industrial Engineering Untimely grad    1657</span></code></pre></div>
<p>Graph the numbers of students by completion status and program.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Graph the counts</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mw</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">N_group</span>, y <span class="op">=</span> <span class="va">status</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">program</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">1</span>, as.table <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span>limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2000</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>
    x <span class="op">=</span> <span class="st">"Number of students"</span>,
    y <span class="op">=</span> <span class="st">""</span>,
    title <span class="op">=</span> <span class="st">"Practice data (not for research)"</span>,
    caption <span class="op">=</span> <span class="st">"Source: midfielddata"</span>
  <span class="op">)</span></code></pre></div>
<p><img src="../man/figures/art-05-timely-completion-fig2-1.png" width="70%" style="display: block; margin: auto;"><br></p>
<p>A more useful comparison might be as a percentage of the total number in each program (panel).</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Compute percentage of total in a program</span>
<span class="va">mw</span><span class="op">[</span>, <span class="va">N_program</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">N_group</span><span class="op">)</span>, by <span class="op">=</span> <span class="fu">.</span><span class="op">(</span><span class="va">program</span><span class="op">)</span><span class="op">]</span>
<span class="va">mw</span><span class="op">[</span>, <span class="va">pct_of_program</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fl">100</span> <span class="op">*</span> <span class="va">N_group</span> <span class="op">/</span> <span class="va">N_program</span>, <span class="fl">1</span><span class="op">)</span><span class="op">]</span>
<span class="va">mw</span>
<span class="co">#&gt;                    program        status N_group N_program pct_of_program</span>
<span class="co">#&gt;                     &lt;fctr&gt;        &lt;fctr&gt;   &lt;num&gt;     &lt;num&gt;          &lt;num&gt;</span>
<span class="co">#&gt;  1:      Civil Engineering   Timely grad    7975     11257           70.8</span>
<span class="co">#&gt;  2:      Civil Engineering Non-completer    1951     11257           17.3</span>
<span class="co">#&gt;  3:      Civil Engineering Untimely grad    1331     11257           11.8</span>
<span class="co">#&gt;  4: Electrical Engineering   Timely grad   11287     17389           64.9</span>
<span class="co">#&gt;  5: Electrical Engineering Non-completer    3199     17389           18.4</span>
<span class="co">#&gt;  6: Electrical Engineering Untimely grad    2903     17389           16.7</span>
<span class="co">#&gt;  7: Mechanical Engineering Non-completer    3818     20102           19.0</span>
<span class="co">#&gt;  8: Mechanical Engineering Untimely grad    2461     20102           12.2</span>
<span class="co">#&gt;  9: Mechanical Engineering   Timely grad   13823     20102           68.8</span>
<span class="co">#&gt; 10: Industrial Engineering   Timely grad    5501      8352           65.9</span>
<span class="co">#&gt; 11: Industrial Engineering Non-completer    1194      8352           14.3</span>
<span class="co">#&gt; 12: Industrial Engineering Untimely grad    1657      8352           19.8</span></code></pre></div>
<p>Repeat the graph, but with percentage of program instead of numbers per program. The rows and panels remain ordered by the factor levels.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Graph percentages</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mw</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">pct_of_program</span>, y <span class="op">=</span> <span class="va">status</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">program</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">1</span>, as.table <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span>limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span><span class="op">)</span>, breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span>, <span class="fl">20</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>
    x <span class="op">=</span> <span class="st">"Percentage of N students in the major"</span>,
    y <span class="op">=</span> <span class="st">""</span>,
    title <span class="op">=</span> <span class="st">"Practice data (not for research)"</span>,
    caption <span class="op">=</span> <span class="st">"Source: midfielddata"</span>
  <span class="op">)</span></code></pre></div>
<p><img src="../man/figures/art-05-timely-completion-fig3-1.png" width="70%" style="display: block; margin: auto;"><br></p>
<p>We can see that while the four programs have about the same percentage of timely graduates (just over 60%), Industrial Engineering has the lowest fraction of non-completers and a higher fraction of untimely graduates.</p>
<p>The graph can’t tell us why this is, but it does raise the question. While this particular question may not be significant, it does illustrate how exploratory data graphics can raise new research questions.</p>
<p><br><br><br><a href="art-04-data-sufficiency.html">ᐸ <em>Data sufficiency</em></a>       <a href="art-06-stickiness.html"><em>Longitudinal stickiness</em> ᐳ</a><br><br><br></p>
</div>
<div id="appendix" class="section level2">
<h2 class="hasAnchor">
<a href="#appendix" class="anchor" aria-hidden="true"></a>Appendix</h2>
<div id="complete-script" class="section level3">
<h3 class="hasAnchor">
<a href="#complete-script" class="anchor" aria-hidden="true"></a>Complete script</h3>
<p>The vignette code chunks are collected below in a single, condensed script.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Packages used</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/MIDFIELDR/midfieldr" class="external-link">"midfieldr"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/MIDFIELDR/midfielddata" class="external-link">"midfielddata"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://r-datatable.com" class="external-link">"data.table"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://ggplot2.tidyverse.org" class="external-link">"ggplot2"</a></span><span class="op">)</span>

<span class="co"># Timely completion</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">student</span>, <span class="va">term</span>, <span class="va">degree</span><span class="op">)</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_timely_term.html">add_timely_term</a></span><span class="op">(</span><span class="va">study_students</span>, midfield_term <span class="op">=</span> <span class="va">term</span><span class="op">)</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_completion_timely.html">add_completion_timely</a></span><span class="op">(</span>
  dframe <span class="op">=</span> <span class="va">DT</span>,
  midfield_degree <span class="op">=</span> <span class="va">degree</span>,
  details <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span>

<span class="co"># Compare programs by completion status</span>
<span class="va">DT</span><span class="op">[</span>
  <span class="va">completion</span> <span class="op">==</span> <span class="cn">TRUE</span> <span class="op">&amp;</span> <span class="va">completion_timely</span> <span class="op">==</span> <span class="cn">TRUE</span>,
  <span class="va">status</span> <span class="op">:=</span> <span class="st">"Timely grad"</span>
<span class="op">]</span>
<span class="va">DT</span><span class="op">[</span>
  <span class="va">completion</span> <span class="op">==</span> <span class="cn">TRUE</span> <span class="op">&amp;</span> <span class="va">completion_timely</span> <span class="op">==</span> <span class="cn">FALSE</span>,
  <span class="va">status</span> <span class="op">:=</span> <span class="st">"Untimely grad"</span>
<span class="op">]</span>
<span class="va">DT</span><span class="op">[</span><span class="va">completion</span> <span class="op">==</span> <span class="cn">FALSE</span>, <span class="va">status</span> <span class="op">:=</span> <span class="st">"Non-completer"</span><span class="op">]</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">DT</span>, <span class="va">study_programs</span>, by <span class="op">=</span> <span class="st">"cip6"</span>, all.x <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span>N_group <span class="op">=</span> <span class="va">.N</span><span class="op">)</span>, by <span class="op">=</span> <span class="fu">.</span><span class="op">(</span><span class="va">program</span>, <span class="va">status</span><span class="op">)</span><span class="op">]</span>

<span class="co"># Graph counts</span>
<span class="va">mw</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/condition_multiway.html">condition_multiway</a></span><span class="op">(</span><span class="va">DT</span><span class="op">)</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mw</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">N_group</span>, y <span class="op">=</span> <span class="va">status</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">program</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">1</span>, as.table <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span>limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2000</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>
    x <span class="op">=</span> <span class="st">"Number of students"</span>,
    y <span class="op">=</span> <span class="st">""</span>,
    title <span class="op">=</span> <span class="st">"Practice data (not for research)"</span>,
    caption <span class="op">=</span> <span class="st">"Source: midfielddata"</span>
  <span class="op">)</span>

<span class="co"># Graph percentages</span>
<span class="va">mw</span><span class="op">[</span>, <span class="va">N_program</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">N_group</span><span class="op">)</span>, by <span class="op">=</span> <span class="fu">.</span><span class="op">(</span><span class="va">program</span><span class="op">)</span><span class="op">]</span>
<span class="va">mw</span><span class="op">[</span>, <span class="va">pct_of_program</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fl">100</span> <span class="op">*</span> <span class="va">N_group</span> <span class="op">/</span> <span class="va">N_program</span>, <span class="fl">1</span><span class="op">)</span><span class="op">]</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">mw</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">pct_of_program</span>, y <span class="op">=</span> <span class="va">status</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">program</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">1</span>, as.table <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span>limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span><span class="op">)</span>, breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span>, <span class="fl">20</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>
    x <span class="op">=</span> <span class="st">"Percentage of N students in the major"</span>,
    y <span class="op">=</span> <span class="st">""</span>,
    title <span class="op">=</span> <span class="st">"Practice data (not for research)"</span>,
    caption <span class="op">=</span> <span class="st">"Source: midfielddata"</span>
  <span class="op">)</span></code></pre></div>
</div>
</div>
  </div>
 <div class="col-md-3 d-none d-md-block" id="pkgdown-sidebar">
        <div class="sticky-top">
    <nav id="toc"><h2 data-toc-skip>Contents</h2>

    </nav>
</div>
      </div>

</div>



      <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://github.com/graphdr" class="external-link external-link">Richard Layton</a>, Russell Long, Matthew Ohland, US National Science Foundation.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link external-link">pkgdown</a> 1.6.1.9001.</p>
</div>

      </footer>
</div>

  

  

  </body>
</html>
