<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Computing stickiness • midfieldr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">midfieldr</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/data.html">Data</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/filter_cip.html">Filter CIP codes</a>
    </li>
    <li>
      <a href="../articles/compute_gradrate.html">Compute grad rates</a>
    </li>
    <li>
      <a href="../articles/graph_gradrate_case.html">Graph grad rates</a>
    </li>
    <li>
      <a href="../articles/compute_stickiness.html">Compute stickiness</a>
    </li>
    <li>
      <a href="../articles/graph_stickiness_case.html">Graph stickiness</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../articles/about_midfield.html">About</a>
</li>
<li>
  <a href="https://github.com/graphdr/midfieldr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Computing stickiness</h1>
            
          </div>

    
    
<div class="contents">
<p>Program “stickiness” is the percentage of all students ever enrolled in a program that graduate in that program. Unlike the graduation rate metric, stickiness includes graduates who start in other programs<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># packages used in the vignette</span>
<span class="kw">library</span>(midfieldr)
<span class="kw">library</span>(midfieldstudent)
<span class="kw">library</span>(midfieldterm)

<span class="co"># from the tidyverse</span>
<span class="kw">library</span>(stringr)
<span class="kw">library</span>(dplyr)</code></pre></div>
<div id="select-the-programs-to-study" class="section level2">
<h2 class="hasAnchor">
<a href="#select-the-programs-to-study" class="anchor"></a>Select the programs to study</h2>
<p>Filter CIP program data by type and series. In the example, I select the largest engineering disciplines as shown in the <code><a href="../reference/filter_cip.html">filter_cip()</a></code> <a href="filter_cip.html">vignette</a></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># obtain all Engineering programs using 4-digit codes</span>
engr_cip4 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/filter_cip.html">filter_cip</a></span>(<span class="dv">4</span>,  series_engr)

<span class="co"># the largest engineering disciplines by numbers employed</span>
big_name &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Civil"</span>, <span class="st">"Electrical"</span>, <span class="st">"Industrial"</span>, <span class="st">"Mechanical"</span>)
big_name_c &lt;-<span class="st"> </span><span class="kw">str_c</span>(big_name, <span class="dt">collapse =</span> <span class="st">"|"</span>)

<span class="co"># filter for big names only  </span>
engr_cip4 &lt;-<span class="st"> </span>engr_cip4 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">filter</span>(<span class="kw">str_detect</span>(name, big_name_c)) 

engr_cip4
<span class="co">#&gt; # A tibble: 4 x 2</span>
<span class="co">#&gt;    code                                                  name</span>
<span class="co">#&gt;   &lt;chr&gt;                                                 &lt;chr&gt;</span>
<span class="co">#&gt; 1  1408                                     Civil Engineering</span>
<span class="co">#&gt; 2  1410 Electrical/Electronics and Communications Engineering</span>
<span class="co">#&gt; 3  1419                                Mechanical Engineering</span>
<span class="co">#&gt; 4  1435                                Industrial Engineering</span></code></pre></div>
</div>
<div id="gather-graduates" class="section level2">
<h2 class="hasAnchor">
<a href="#gather-graduates" class="anchor"></a>Gather graduates</h2>
<p>The midfieldstudent data package includes degree attributes of 89 886 unique students. <code><a href="../reference/gather_grad.html">gather_grad()</a></code> accesses the <code>degree</code> data for students graduating from the programs in the CIP list.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">grad &lt;-<span class="st"> </span><span class="kw"><a href="../reference/gather_grad.html">gather_grad</a></span>(engr_cip4)
<span class="kw">glimpse</span>(grad)
<span class="co">#&gt; Observations: 4,342</span>
<span class="co">#&gt; Variables: 14</span>
<span class="co">#&gt; $ MID         &lt;dbl&gt; 821367863, 823388749, 822806902, 823732750, 821427...</span>
<span class="co">#&gt; $ GYEAR       &lt;dbl&gt; 1993, 1994, 1993, 1993, 1993, 1993, 1993, 1992, 19...</span>
<span class="co">#&gt; $ DEGREE      &lt;chr&gt; "BS", "BS", "BS", "BS", "BS", "BS", "BS", "BS", "B...</span>
<span class="co">#&gt; $ GDESC       &lt;chr&gt; "Civil Engineering", "Electrical Engineering", "Me...</span>
<span class="co">#&gt; $ GTERM       &lt;chr&gt; "SP", "SP", "SP", "SP", "SP", "SP", "SP", "FA", "S...</span>
<span class="co">#&gt; $ INSTITUTION &lt;chr&gt; "Institution 1", "Institution 1", "Institution 1",...</span>
<span class="co">#&gt; $ CIP         &lt;chr&gt; "140801", "141001", "141901", "141901", "141901", ...</span>
<span class="co">#&gt; $ GCODE       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span>
<span class="co">#&gt; $ GCIP2       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span>
<span class="co">#&gt; $ GDESC2      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span>
<span class="co">#&gt; $ GCODE2      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span>
<span class="co">#&gt; $ GCIP3       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span>
<span class="co">#&gt; $ GDESC3      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span>
<span class="co">#&gt; $ GCODE3      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span></code></pre></div>
<p>The example yields 4342 unique students with degrees in the selected programs. The CIP codes in the degree data are the 6-digit versions of the codes we selected.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># CIP codes in the degree data</span>
<span class="kw">sort</span>(<span class="kw">unique</span>(grad<span class="op">$</span>CIP))
<span class="co">#&gt; [1] "140801" "141001" "141901" "143501"</span></code></pre></div>
<p>The program names in the degree data are recognizable disciplines of the CIP codes we selected (Civil, Electrical, Industrial, Mechanical).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># program names as described the institution</span>
<span class="kw">sort</span>(<span class="kw">unique</span>(grad<span class="op">$</span>GDESC))
<span class="co">#&gt; [1] "Civil Engineering"                  </span>
<span class="co">#&gt; [2] "Electrical Engineering"             </span>
<span class="co">#&gt; [3] "Industrial Engineering"             </span>
<span class="co">#&gt; [4] "Industrial Engineering Management"  </span>
<span class="co">#&gt; [5] "Lasers and Optical Engineering"     </span>
<span class="co">#&gt; [6] "Mechanical Engineering"             </span>
<span class="co">#&gt; [7] "Soil and Water Resource Engineering"</span></code></pre></div>
<p>Last, we join the demographics from <code><a href="http://www.rdocumentation.org/packages/midfieldstudent/topics/student">midfieldstudent::student</a></code> data to add variables for matriculation year and term, ethnicity (or race), and sex.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">grad &lt;-<span class="st"> </span><span class="kw"><a href="../reference/join_demographics.html">join_demographics</a></span>(grad)
<span class="kw">glimpse</span>(grad)
<span class="co">#&gt; Observations: 4,342</span>
<span class="co">#&gt; Variables: 18</span>
<span class="co">#&gt; $ MID         &lt;dbl&gt; 821367863, 823388749, 822806902, 823732750, 821427...</span>
<span class="co">#&gt; $ GYEAR       &lt;dbl&gt; 1993, 1994, 1993, 1993, 1993, 1993, 1993, 1992, 19...</span>
<span class="co">#&gt; $ DEGREE      &lt;chr&gt; "BS", "BS", "BS", "BS", "BS", "BS", "BS", "BS", "B...</span>
<span class="co">#&gt; $ GDESC       &lt;chr&gt; "Civil Engineering", "Electrical Engineering", "Me...</span>
<span class="co">#&gt; $ GTERM       &lt;chr&gt; "SP", "SP", "SP", "SP", "SP", "SP", "SP", "FA", "S...</span>
<span class="co">#&gt; $ INSTITUTION &lt;chr&gt; "Institution 1", "Institution 1", "Institution 1",...</span>
<span class="co">#&gt; $ CIP         &lt;chr&gt; "140801", "141001", "141901", "141901", "141901", ...</span>
<span class="co">#&gt; $ GCODE       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span>
<span class="co">#&gt; $ GCIP2       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span>
<span class="co">#&gt; $ GDESC2      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span>
<span class="co">#&gt; $ GCODE2      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span>
<span class="co">#&gt; $ GCIP3       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span>
<span class="co">#&gt; $ GDESC3      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span>
<span class="co">#&gt; $ GCODE3      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...</span>
<span class="co">#&gt; $ MYEAR       &lt;dbl&gt; 1991, 1992, 1991, 1991, 1990, 1991, 1990, 1990, 19...</span>
<span class="co">#&gt; $ ETHNIC      &lt;chr&gt; "White", "International", "White", "No Response", ...</span>
<span class="co">#&gt; $ SEX         &lt;chr&gt; "M", "M", "M", "M", "M", "F", "M", "F", "M", "M", ...</span>
<span class="co">#&gt; $ MTERM       &lt;chr&gt; "FA", "FA", "FA", "FA", "FA", "FA", "FA", "FA", "F...</span></code></pre></div>
</div>
<div id="gather-ever-enrolled" class="section level2">
<h2 class="hasAnchor">
<a href="#gather-ever-enrolled" class="anchor"></a>Gather ever enrolled</h2>
<p>Here we gather students ever enrolled in a program.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ever &lt;-<span class="st"> </span><span class="kw"><a href="../reference/gather_ever.html">gather_ever</a></span>(engr_cip4)
<span class="kw">glimpse</span>(ever)
<span class="co">#&gt; Observations: 58,524</span>
<span class="co">#&gt; Variables: 22</span>
<span class="co">#&gt; $ MID              &lt;dbl&gt; 820101136, 820102025, 820102025, 820102025, 8...</span>
<span class="co">#&gt; $ TYEAR            &lt;dbl&gt; 2001, 2004, 2003, 2004, 2004, 2005, 1992, 199...</span>
<span class="co">#&gt; $ ENRSTAT          &lt;chr&gt; "NEW", "CONT", "TRNS", "CONT", "CONT", "CONT"...</span>
<span class="co">#&gt; $ TDESC            &lt;chr&gt; "Electrical Engineering", "Civil Engineering"...</span>
<span class="co">#&gt; $ INSTCODE         &lt;chr&gt; "EE01", "CE01", "CE01", "CE01", "CE01", "CE01...</span>
<span class="co">#&gt; $ TERMGPA          &lt;dbl&gt; 3.666, 3.411, 3.067, 3.314, 0.003, 3.750, 3.3...</span>
<span class="co">#&gt; $ CUMGPA           &lt;dbl&gt; 3.7, 3.3, 3.1, 3.2, 3.2, 3.3, 3.4, 3.2, 3.3, ...</span>
<span class="co">#&gt; $ COOP             &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N...</span>
<span class="co">#&gt; $ ONOFFCAMPUS      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N...</span>
<span class="co">#&gt; $ TTERM            &lt;chr&gt; "FA", "SP", "FA", "FA", "SM", "SP", "SP", "FA...</span>
<span class="co">#&gt; $ INSTITUTION      &lt;chr&gt; "Institution 1", "Institution 1", "Institutio...</span>
<span class="co">#&gt; $ CIP              &lt;chr&gt; "141001", "140801", "140801", "140801", "1408...</span>
<span class="co">#&gt; $ STULEVEL         &lt;chr&gt; "FR", "SR", "JR", "SR", "SR", "SR", "FR", "SO...</span>
<span class="co">#&gt; $ ACADEMICSTANDING &lt;chr&gt; "Good Standing", "Good Standing", "Good Stand...</span>
<span class="co">#&gt; $ TCODE            &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N...</span>
<span class="co">#&gt; $ TCIP2            &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N...</span>
<span class="co">#&gt; $ TDESC2           &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N...</span>
<span class="co">#&gt; $ TCODE2           &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N...</span>
<span class="co">#&gt; $ TCIP3            &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N...</span>
<span class="co">#&gt; $ TDESC3           &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N...</span>
<span class="co">#&gt; $ TCODE3           &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N...</span>
<span class="co">#&gt; $ </span><span class="re">BEGIN</span><span class="co">YEAR        &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N...</span></code></pre></div>
<p>Check the set of CIPs.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sort</span>(<span class="kw">unique</span>(ever<span class="op">$</span>CIP))
<span class="co">#&gt; [1] "140801" "141001" "141901" "143501"</span></code></pre></div>
<p>Again, join the demographics from <code><a href="http://www.rdocumentation.org/packages/midfieldstudent/topics/student">midfieldstudent::student</a></code> data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ever &lt;-<span class="st"> </span><span class="kw"><a href="../reference/join_demographics.html">join_demographics</a></span>(ever)
<span class="kw">glimpse</span>(ever)
<span class="co">#&gt; Observations: 58,524</span>
<span class="co">#&gt; Variables: 26</span>
<span class="co">#&gt; $ MID              &lt;dbl&gt; 820101136, 820102025, 820102025, 820102025, 8...</span>
<span class="co">#&gt; $ TYEAR            &lt;dbl&gt; 2001, 2004, 2003, 2004, 2004, 2005, 1992, 199...</span>
<span class="co">#&gt; $ ENRSTAT          &lt;chr&gt; "NEW", "CONT", "TRNS", "CONT", "CONT", "CONT"...</span>
<span class="co">#&gt; $ TDESC            &lt;chr&gt; "Electrical Engineering", "Civil Engineering"...</span>
<span class="co">#&gt; $ INSTCODE         &lt;chr&gt; "EE01", "CE01", "CE01", "CE01", "CE01", "CE01...</span>
<span class="co">#&gt; $ TERMGPA          &lt;dbl&gt; 3.666, 3.411, 3.067, 3.314, 0.003, 3.750, 3.3...</span>
<span class="co">#&gt; $ CUMGPA           &lt;dbl&gt; 3.7, 3.3, 3.1, 3.2, 3.2, 3.3, 3.4, 3.2, 3.3, ...</span>
<span class="co">#&gt; $ COOP             &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N...</span>
<span class="co">#&gt; $ ONOFFCAMPUS      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N...</span>
<span class="co">#&gt; $ TTERM            &lt;chr&gt; "FA", "SP", "FA", "FA", "SM", "SP", "SP", "FA...</span>
<span class="co">#&gt; $ INSTITUTION      &lt;chr&gt; "Institution 1", "Institution 1", "Institutio...</span>
<span class="co">#&gt; $ CIP              &lt;chr&gt; "141001", "140801", "140801", "140801", "1408...</span>
<span class="co">#&gt; $ STULEVEL         &lt;chr&gt; "FR", "SR", "JR", "SR", "SR", "SR", "FR", "SO...</span>
<span class="co">#&gt; $ ACADEMICSTANDING &lt;chr&gt; "Good Standing", "Good Standing", "Good Stand...</span>
<span class="co">#&gt; $ TCODE            &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N...</span>
<span class="co">#&gt; $ TCIP2            &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N...</span>
<span class="co">#&gt; $ TDESC2           &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N...</span>
<span class="co">#&gt; $ TCODE2           &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N...</span>
<span class="co">#&gt; $ TCIP3            &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N...</span>
<span class="co">#&gt; $ TDESC3           &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N...</span>
<span class="co">#&gt; $ TCODE3           &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N...</span>
<span class="co">#&gt; $ </span><span class="re">BEGIN</span><span class="co">YEAR        &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N...</span>
<span class="co">#&gt; $ MYEAR            &lt;dbl&gt; 2001, 2003, 2003, 2003, 2003, 2003, 1991, 199...</span>
<span class="co">#&gt; $ ETHNIC           &lt;chr&gt; "White", "No Response", "No Response", "No Re...</span>
<span class="co">#&gt; $ SEX              &lt;chr&gt; "F", "M", "M", "M", "M", "M", "M", "M", "M", ...</span>
<span class="co">#&gt; $ MTERM            &lt;chr&gt; "FA", "FA", "FA", "FA", "FA", "FA", "FA", "FA...</span></code></pre></div>
</div>
<div id="tally-stickiness" class="section level2">
<h2 class="hasAnchor">
<a href="#tally-stickiness" class="anchor"></a>Tally stickiness</h2>
<p>By tallying we mean counting the number of unique students in a specific intersection of categories. The categories we use most often in our research are sex, ethnicity (includes “race”), and the instructional program (academic major). The default tally function uses these categories.</p>
<p>For example, we could tally the number of Black male students in the dataset graduating in Mechanical Engineering.</p>
<p>Tallying stickiness entails three steps:</p>
<ol style="list-style-type: decimal">
<li>group and summarize the number of graduates</li>
<li>group and summarize the number of students ever enrolled in a program</li>
<li>join “grads” and “evers” and compute stickiness</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tally_stickiness &lt;-<span class="st"> </span><span class="cf">function</span>(grad, ever, <span class="dt">type =</span> <span class="ot">NULL</span>) {
    
    <span class="cf">if</span> (<span class="kw">is.null</span>(type)) {type =<span class="st"> </span><span class="dv">4</span>}
    
    count_cip_ethnic_sex &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">count_name =</span> <span class="ot">NULL</span>, <span class="dt">type =</span> <span class="ot">NULL</span>){
        
        <span class="cf">if</span> (<span class="kw">is.null</span>(count_name)) {count_name =<span class="st"> "N"</span>}

        x &lt;-<span class="st"> </span>x <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">            </span><span class="kw">mutate</span>(<span class="dt">CIP =</span> <span class="kw">str_sub</span>(CIP, <span class="dv">1</span>, type)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">            </span><span class="kw">filter</span>(<span class="op">!</span>ETHNIC <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">"International"</span>, <span class="st">"No Response"</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">            </span><span class="kw">group_by</span>(CIP, ETHNIC, SEX) <span class="op">%&gt;%</span>
<span class="st">            </span><span class="kw">summarise</span>(<span class="op">!!</span>count_name <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="kw">n</span>())
        
    }
    
    grad_count &lt;-<span class="st"> </span><span class="kw">count_cip_ethnic_sex</span>(grad, <span class="st">"GRAD"</span>, <span class="dt">type =</span> type)
    ever_count &lt;-<span class="st"> </span><span class="kw">count_cip_ethnic_sex</span>(ever, <span class="st">"EVER"</span>, <span class="dt">type =</span> type)
    
    <span class="co"># if EVER exists but GRAD does not, full_join puts NA in GRAD</span>
    stickiness &lt;-<span class="st"> </span><span class="kw">full_join</span>(grad_count, ever_count, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">"CIP"</span>, <span class="st">"ETHNIC"</span>, <span class="st">"SEX"</span>))
    
    <span class="co"># recode NA in GRAD to zero.</span>
    stickiness<span class="op">$</span>GRAD[<span class="kw">is.na</span>(stickiness<span class="op">$</span>GRAD)] &lt;-<span class="st"> </span><span class="dv">0</span>
    
    stickiness &lt;-<span class="st"> </span>stickiness <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">        </span><span class="kw">arrange</span>(CIP, SEX, ETHNIC) <span class="op">%&gt;%</span>
<span class="st">        </span><span class="kw">mutate</span>(<span class="dt">STICK =</span> <span class="kw">round</span>(GRAD <span class="op">/</span><span class="st"> </span>EVER <span class="op">*</span><span class="st"> </span><span class="dv">100</span>, <span class="dv">1</span>))
    
    <span class="kw">return</span>(stickiness)
    
}


stickiness &lt;-<span class="st"> </span><span class="kw">tally_stickiness</span>(grad, ever, <span class="dt">type =</span> <span class="dv">4</span>)

<span class="kw">kable</span>(stickiness)</code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">CIP</th>
<th align="left">ETHNIC</th>
<th align="left">SEX</th>
<th align="right">GRAD</th>
<th align="right">EVER</th>
<th align="right">STICK</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1408</td>
<td align="left">Asian</td>
<td align="left">F</td>
<td align="right">14</td>
<td align="right">158</td>
<td align="right">8.9</td>
</tr>
<tr class="even">
<td align="left">1408</td>
<td align="left">Black</td>
<td align="left">F</td>
<td align="right">3</td>
<td align="right">55</td>
<td align="right">5.5</td>
</tr>
<tr class="odd">
<td align="left">1408</td>
<td align="left">Hawaiian/Pac. Islander</td>
<td align="left">F</td>
<td align="right">0</td>
<td align="right">9</td>
<td align="right">0.0</td>
</tr>
<tr class="even">
<td align="left">1408</td>
<td align="left">Hispanic/Latino</td>
<td align="left">F</td>
<td align="right">15</td>
<td align="right">167</td>
<td align="right">9.0</td>
</tr>
<tr class="odd">
<td align="left">1408</td>
<td align="left">Multi-Racial</td>
<td align="left">F</td>
<td align="right">2</td>
<td align="right">44</td>
<td align="right">4.5</td>
</tr>
<tr class="even">
<td align="left">1408</td>
<td align="left">Native American</td>
<td align="left">F</td>
<td align="right">1</td>
<td align="right">10</td>
<td align="right">10.0</td>
</tr>
<tr class="odd">
<td align="left">1408</td>
<td align="left">White</td>
<td align="left">F</td>
<td align="right">261</td>
<td align="right">3080</td>
<td align="right">8.5</td>
</tr>
<tr class="even">
<td align="left">1408</td>
<td align="left">Asian</td>
<td align="left">M</td>
<td align="right">25</td>
<td align="right">258</td>
<td align="right">9.7</td>
</tr>
<tr class="odd">
<td align="left">1408</td>
<td align="left">Black</td>
<td align="left">M</td>
<td align="right">3</td>
<td align="right">54</td>
<td align="right">5.6</td>
</tr>
<tr class="even">
<td align="left">1408</td>
<td align="left">Hawaiian/Pac. Islander</td>
<td align="left">M</td>
<td align="right">1</td>
<td align="right">6</td>
<td align="right">16.7</td>
</tr>
<tr class="odd">
<td align="left">1408</td>
<td align="left">Hispanic/Latino</td>
<td align="left">M</td>
<td align="right">55</td>
<td align="right">791</td>
<td align="right">7.0</td>
</tr>
<tr class="even">
<td align="left">1408</td>
<td align="left">Multi-Racial</td>
<td align="left">M</td>
<td align="right">17</td>
<td align="right">172</td>
<td align="right">9.9</td>
</tr>
<tr class="odd">
<td align="left">1408</td>
<td align="left">Native American</td>
<td align="left">M</td>
<td align="right">9</td>
<td align="right">82</td>
<td align="right">11.0</td>
</tr>
<tr class="even">
<td align="left">1408</td>
<td align="left">White</td>
<td align="left">M</td>
<td align="right">1016</td>
<td align="right">11146</td>
<td align="right">9.1</td>
</tr>
<tr class="odd">
<td align="left">1410</td>
<td align="left">Asian</td>
<td align="left">F</td>
<td align="right">4</td>
<td align="right">71</td>
<td align="right">5.6</td>
</tr>
<tr class="even">
<td align="left">1410</td>
<td align="left">Black</td>
<td align="left">F</td>
<td align="right">1</td>
<td align="right">43</td>
<td align="right">2.3</td>
</tr>
<tr class="odd">
<td align="left">1410</td>
<td align="left">Hispanic/Latino</td>
<td align="left">F</td>
<td align="right">11</td>
<td align="right">124</td>
<td align="right">8.9</td>
</tr>
<tr class="even">
<td align="left">1410</td>
<td align="left">Multi-Racial</td>
<td align="left">F</td>
<td align="right">0</td>
<td align="right">39</td>
<td align="right">0.0</td>
</tr>
<tr class="odd">
<td align="left">1410</td>
<td align="left">Native American</td>
<td align="left">F</td>
<td align="right">1</td>
<td align="right">12</td>
<td align="right">8.3</td>
</tr>
<tr class="even">
<td align="left">1410</td>
<td align="left">White</td>
<td align="left">F</td>
<td align="right">75</td>
<td align="right">961</td>
<td align="right">7.8</td>
</tr>
<tr class="odd">
<td align="left">1410</td>
<td align="left">Asian</td>
<td align="left">M</td>
<td align="right">25</td>
<td align="right">348</td>
<td align="right">7.2</td>
</tr>
<tr class="even">
<td align="left">1410</td>
<td align="left">Black</td>
<td align="left">M</td>
<td align="right">6</td>
<td align="right">115</td>
<td align="right">5.2</td>
</tr>
<tr class="odd">
<td align="left">1410</td>
<td align="left">Hawaiian/Pac. Islander</td>
<td align="left">M</td>
<td align="right">1</td>
<td align="right">20</td>
<td align="right">5.0</td>
</tr>
<tr class="even">
<td align="left">1410</td>
<td align="left">Hispanic/Latino</td>
<td align="left">M</td>
<td align="right">36</td>
<td align="right">662</td>
<td align="right">5.4</td>
</tr>
<tr class="odd">
<td align="left">1410</td>
<td align="left">Multi-Racial</td>
<td align="left">M</td>
<td align="right">9</td>
<td align="right">126</td>
<td align="right">7.1</td>
</tr>
<tr class="even">
<td align="left">1410</td>
<td align="left">Native American</td>
<td align="left">M</td>
<td align="right">5</td>
<td align="right">67</td>
<td align="right">7.5</td>
</tr>
<tr class="odd">
<td align="left">1410</td>
<td align="left">White</td>
<td align="left">M</td>
<td align="right">563</td>
<td align="right">8029</td>
<td align="right">7.0</td>
</tr>
<tr class="even">
<td align="left">1419</td>
<td align="left">Asian</td>
<td align="left">F</td>
<td align="right">5</td>
<td align="right">67</td>
<td align="right">7.5</td>
</tr>
<tr class="odd">
<td align="left">1419</td>
<td align="left">Black</td>
<td align="left">F</td>
<td align="right">1</td>
<td align="right">21</td>
<td align="right">4.8</td>
</tr>
<tr class="even">
<td align="left">1419</td>
<td align="left">Hawaiian/Pac. Islander</td>
<td align="left">F</td>
<td align="right">1</td>
<td align="right">11</td>
<td align="right">9.1</td>
</tr>
<tr class="odd">
<td align="left">1419</td>
<td align="left">Hispanic/Latino</td>
<td align="left">F</td>
<td align="right">11</td>
<td align="right">213</td>
<td align="right">5.2</td>
</tr>
<tr class="even">
<td align="left">1419</td>
<td align="left">Multi-Racial</td>
<td align="left">F</td>
<td align="right">5</td>
<td align="right">77</td>
<td align="right">6.5</td>
</tr>
<tr class="odd">
<td align="left">1419</td>
<td align="left">Native American</td>
<td align="left">F</td>
<td align="right">0</td>
<td align="right">7</td>
<td align="right">0.0</td>
</tr>
<tr class="even">
<td align="left">1419</td>
<td align="left">White</td>
<td align="left">F</td>
<td align="right">165</td>
<td align="right">2573</td>
<td align="right">6.4</td>
</tr>
<tr class="odd">
<td align="left">1419</td>
<td align="left">Asian</td>
<td align="left">M</td>
<td align="right">33</td>
<td align="right">477</td>
<td align="right">6.9</td>
</tr>
<tr class="even">
<td align="left">1419</td>
<td align="left">Black</td>
<td align="left">M</td>
<td align="right">5</td>
<td align="right">117</td>
<td align="right">4.3</td>
</tr>
<tr class="odd">
<td align="left">1419</td>
<td align="left">Hawaiian/Pac. Islander</td>
<td align="left">M</td>
<td align="right">2</td>
<td align="right">24</td>
<td align="right">8.3</td>
</tr>
<tr class="even">
<td align="left">1419</td>
<td align="left">Hispanic/Latino</td>
<td align="left">M</td>
<td align="right">79</td>
<td align="right">1302</td>
<td align="right">6.1</td>
</tr>
<tr class="odd">
<td align="left">1419</td>
<td align="left">Multi-Racial</td>
<td align="left">M</td>
<td align="right">26</td>
<td align="right">435</td>
<td align="right">6.0</td>
</tr>
<tr class="even">
<td align="left">1419</td>
<td align="left">Native American</td>
<td align="left">M</td>
<td align="right">5</td>
<td align="right">84</td>
<td align="right">6.0</td>
</tr>
<tr class="odd">
<td align="left">1419</td>
<td align="left">White</td>
<td align="left">M</td>
<td align="right">1474</td>
<td align="right">21092</td>
<td align="right">7.0</td>
</tr>
<tr class="even">
<td align="left">1435</td>
<td align="left">White</td>
<td align="left">F</td>
<td align="right">5</td>
<td align="right">27</td>
<td align="right">18.5</td>
</tr>
<tr class="odd">
<td align="left">1435</td>
<td align="left">Hispanic/Latino</td>
<td align="left">M</td>
<td align="right">0</td>
<td align="right">7</td>
<td align="right">0.0</td>
</tr>
<tr class="even">
<td align="left">1435</td>
<td align="left">White</td>
<td align="left">M</td>
<td align="right">18</td>
<td align="right">122</td>
<td align="right">14.8</td>
</tr>
</tbody>
</table>
</div>
<div id="rename-and-recode-for-graphs" class="section level1">
<h1 class="hasAnchor">
<a href="#rename-and-recode-for-graphs" class="anchor"></a>Rename and recode for graphs</h1>
<ol style="list-style-type: decimal">
<li>Change CIP to a readable abbreviation for the program</li>
<li>Recode “F” and “M” to “Female” and “Male”</li>
<li>Combine sex and ethnicity into a new variable</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
new_names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"CVE"</span>, <span class="st">"ELE"</span>, <span class="st">"MCE"</span>, <span class="st">"ISE"</span>)
 
    

<span class="co"># assumes that CIP, ETHNIC, and SEX are variables</span>

<span class="co"># rename_cip_ethnic_sex &lt;- function(x) {</span>
<span class="co">#   </span>
<span class="co">#   x &lt;- x %&gt;% </span>
<span class="co">#       </span>
<span class="co">#   </span>
<span class="co">#   </span>
<span class="co">#   </span>
<span class="co"># }</span></code></pre></div>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>Ohland MW, Orr MK, Layton RA, Lord SM, &amp; Long RA (2012, October) Introducing stickiness as a versatile metric of engineering persistence, in proc <em>2012 Frontiers in Education Conference</em>, Seattle, WA.<a href="#fnref1">↩</a></p></li>
</ol>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#select-the-programs-to-study">Select the programs to study</a></li>
      <li><a href="#gather-graduates">Gather graduates</a></li>
      <li><a href="#gather-ever-enrolled">Gather ever enrolled</a></li>
      <li><a href="#tally-stickiness">Tally stickiness</a></li>
      <li><a href="#rename-and-recode-for-graphs">Rename and recode for graphs</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Richard Layton, Russell Long.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
