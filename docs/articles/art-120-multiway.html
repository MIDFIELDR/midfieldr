<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="midfieldr">
<title>Multiway data and charts • midfieldr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Multiway data and charts">
<meta property="og:description" content="midfieldr">
<meta property="og:image" content="https://midfieldr.github.io/midfieldr/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">midfieldr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0.9028</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/art-000-getting-started.html">Getting started</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-case-study">Case study</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-case-study">
    <a class="dropdown-item" href="../articles/art-001-case-goals.html">Goals</a>
    <a class="dropdown-item" href="../articles/art-002-case-data.html">Data</a>
    <a class="dropdown-item" href="../articles/art-003-case-results.html">Results</a>
  </div>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-vignettes">Vignettes</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-vignettes">
    <a class="dropdown-item" href="../articles/art-010-planning.html">Planning</a>
    <a class="dropdown-item" href="../articles/art-020-data-sufficiency.html">Data sufficiency</a>
    <a class="dropdown-item" href="../articles/art-030-degree-seeking.html">Degree seeking</a>
    <a class="dropdown-item" href="../articles/art-040-programs.html">Programs</a>
    <a class="dropdown-item" href="../articles/art-050-blocs.html">Blocs</a>
    <a class="dropdown-item" href="../articles/art-060-fye-proxies.html">FYE proxies</a>
    <a class="dropdown-item" href="../articles/art-070-starters.html">Starters</a>
    <a class="dropdown-item" href="../articles/art-080-graduates.html">Graduates</a>
    <a class="dropdown-item" href="../articles/art-090-groupings.html">Groupings</a>
    <a class="dropdown-item" href="../articles/art-100-grad-rate.html">Graduation rate</a>
    <a class="dropdown-item" href="../articles/art-120-multiway.html">Multiway data and charts</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/MIDFIELDR/midfieldr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="art-120-multiway_files/kePrint-0.0.1/kePrint.js"></script><link href="art-120-multiway_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Multiway data and charts</h1>
            
            <h4 data-toc-skip class="date">2022-11-10</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/MIDFIELDR/midfieldr/blob/HEAD/vignettes/art-120-multiway.Rmd" class="external-link"><code>vignettes/art-120-multiway.Rmd</code></a></small>
      <div class="d-none name"><code>art-120-multiway.Rmd</code></div>
    </div>

    
    
<p>In working with longitudinal Student Unit Records (SURs), we
regularly encounter data structured as <em>multiway data</em>. We
explore that data visually using <em>multiway dot plots</em> as
described by William Cleveland <span class="citation">(<a href="#ref-Cleveland:1993" role="doc-biblioref">1993, pp.
302–306</a>)</span>. Quotations, unless noted otherwise, are from this
source.</p>
<p>Note that “multiway” in our context refers to the data structure and
chart design defined by Cleveland, not to the methods of analysis
described by Kroonenberg <span class="citation">(<a href="#ref-Kroonenberg:2008" role="doc-biblioref">2008</a>)</span>.</p>
<p>This vignette in the MIDFIELD workflow.</p>
<ol style="list-style-type: decimal">
<li>Planning<br>
</li>
<li>Initial processing<br>
</li>
<li>Blocs<br>
</li>
<li>Groupings</li>
<li>Metrics<br>
</li>
<li>
<span style=" font-weight: bold;    color: #b35806 !important;">Displays</span>
<ul>
<li>
<span style=" font-weight: bold;    color: #b35806 !important;">Multiway
charts</span><br>
</li>
<li><span style=" font-weight: bold;    color: #b35806 !important;">Tables</span></li>
</ul>
</li>
</ol>
<div class="section level2">
<h2 id="definitions">Definitions<a class="anchor" aria-label="anchor" href="#definitions"></a>
</h2>
<dl>
<dt>multiway data</dt>
<dd>
<p>A data set of three variables: a category with <em>m</em> levels; a
second independent category with <em>n</em> levels; and a quantitative
variable (the <em>response</em>) of length <em>mn</em> such that “there
is a value of the response for each combination of levels of the two
categorical variables.”</p>
</dd>
<dt>multiway chart</dt>
<dd>
<p>A multi-panel dot plot: horizontal, quantitative scales; rows that
encode one category; and panels that encode the second category. All
panels have identical axes. The ordering of the rows and panels is
“crucial to the perception of effects.”</p>
</dd>
<dt>multiway superposition</dt>
<dd>
<p>Multiway data can be extended to include a third category of
<em>p</em> levels; the quantitative response has length <em>mnp</em>,
one for each combination of levels of <em>three</em> categories; the
rows and panels encode the first two categories as usual; <em>p</em>
data markers encode the third category on each row. Clarity usually
requires that <em>p = 2</em> but not more.</p>
</dd>
<dt>program stickiness</dt>
<dd>
<p>The ratio <span class="math inline">\((S)\)</span> of the number of
students graduating from a program <span class="math inline">\((N_g)\)</span> to the number of students ever
enrolled in the program <span class="math inline">\((N_e)\)</span>.
<span class="math display">\[
S=\frac{N_g}{N_e}
\]</span></p>
</dd>
</dl>
</div>
<div class="section level2">
<h2 id="method">Method<a class="anchor" aria-label="anchor" href="#method"></a>
</h2>
<p>We start with the results data frame from the <a href="art-003-case-results.html">Case study: Results</a> vignette,
containing data from four engineering programs (Civil, Electrical,
Industrial/Systems, and Mechanical Engineering) grouped by program,
race/ethnicity, and sex. These data have been filtered for data
sufficiency, degree seeking, and program, and graduates are filtered for
timely completion.</p>
<p>We prepare the data for use as input to <code><a href="../reference/order_multiway.html">order_multiway()</a></code>
and use the results to construct multiway charts ordered by category
median values and by category percentage values.</p>
<p><em>Caveat:</em>   The Student Unit Records included with midfieldr
and midfielddata are practice data, not research data, suitable for
practice working with SURs but not for drawing inferences about program
attributes or student experiences.</p>
</div>
<div class="section level2">
<h2 id="load-data">Load data<a class="anchor" aria-label="anchor" href="#load-data"></a>
</h2>
<p><em>Open.</em>   If you are writing your own script to follow along,
we use these packages in this vignette:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># midfieldr: Multiway data and charts</span></span>
<span></span>
<span><span class="co"># Packages</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/MIDFIELDR/midfieldr" class="external-link">"midfieldr"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://r-datatable.com" class="external-link">"data.table"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://ggplot2.tidyverse.org" class="external-link">"ggplot2"</a></span><span class="op">)</span></span></code></pre></div>
<p><em>Loads with midfieldr.</em></p>
<ul>
<li>
<code>study_results</code> (derived in <a href="art-003-case-results.html">Case study: Results</a>).</li>
</ul>
</div>
<div class="section level2">
<h2 id="initial-processing">Initial processing<a class="anchor" aria-label="anchor" href="#initial-processing"></a>
</h2>
<p><em>Work.</em>   Using <code><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy()</a></code> avoids
<em>by-reference</em> effects <span class="citation">(<a href="#ref-data.table-reference-semantics" role="doc-biblioref">Dowle
&amp; Srinivasan, 2022</a>)</span>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Working data frame</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">study_results</span><span class="op">)</span></span></code></pre></div>
<p><em>Filter.</em>   Human subject privacy is potentially at risk for
small populations even with anonymized observations. Therefore, before
tabulating or graphing the data for dissemination, we omit observations
with fewer than 10 students ever enrolled. The magnitude of the bound
(<code>ever &gt;= 10</code>) can vary depending on one’s data.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Protecting privacy of small populations</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="va">ever</span> <span class="op">&gt;=</span> <span class="fl">10</span><span class="op">]</span></span></code></pre></div>
<p><em>Filter.</em>   Having reviewed these specific results in advance,
we find that the small-population filter (in this case) removes Native
American students from all but one of the programs—so we omit them as
well.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Optional filter</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="op">!</span><span class="va">race</span> <span class="op"><a href="https://Rdatatable.gitlab.io/data.table/reference/chmatch.html" class="external-link">%chin%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Native American"</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<p><em>Filter.</em>   In many studies we also omit rows in which
race/ethnicity values are ambiguous.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Ambiguous race/ethnicity values</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="op">!</span><span class="va">race</span> <span class="op"><a href="https://Rdatatable.gitlab.io/data.table/reference/chmatch.html" class="external-link">%chin%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"International"</span>, <span class="st">"Other/Unknown"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">DT</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;     program    sex   race  ever  grad stick</span></span>
<span><span class="co">#&gt;      &lt;char&gt; &lt;char&gt; &lt;char&gt; &lt;int&gt; &lt;int&gt; &lt;num&gt;</span></span>
<span><span class="co">#&gt;  1:      CE Female  Asian    16     9  56.2</span></span>
<span><span class="co">#&gt;  2:      CE Female  Black    49    15  30.6</span></span>
<span><span class="co">#&gt;  3:      CE Female Latine    10     5  50.0</span></span>
<span><span class="co">#&gt; ---                                        </span></span>
<span><span class="co">#&gt; 30:      ME   Male  Black   202    65  32.2</span></span>
<span><span class="co">#&gt; 31:      ME   Male Latine    76    29  38.2</span></span>
<span><span class="co">#&gt; 32:      ME   Male  White  1776   918  51.7</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="preparing-the-categorical-variables">Preparing the categorical variables<a class="anchor" aria-label="anchor" href="#preparing-the-categorical-variables"></a>
</h2>
<p>Before we apply the <code><a href="../reference/order_multiway.html">order_multiway()</a></code> function, we edit
the categorical variables to create the forms we want in the final
charts or tables.</p>
<p><em>Recode.</em>   The first multiway categorical variable is
<code>program</code>. To improve the readability of the charts, we
recode the program abbreviations.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Recode for panel and row labels</span></span>
<span><span class="va">DT</span><span class="op">[</span>, <span class="va">program</span> <span class="op">:=</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/fcase.html" class="external-link">fcase</a></span><span class="op">(</span></span>
<span>  <span class="va">program</span> <span class="op"><a href="https://Rdatatable.gitlab.io/data.table/reference/like.html" class="external-link">%like%</a></span> <span class="st">"CE"</span>, <span class="st">"Civil"</span>,</span>
<span>  <span class="va">program</span> <span class="op"><a href="https://Rdatatable.gitlab.io/data.table/reference/like.html" class="external-link">%like%</a></span> <span class="st">"EE"</span>, <span class="st">"Electrical"</span>,</span>
<span>  <span class="va">program</span> <span class="op"><a href="https://Rdatatable.gitlab.io/data.table/reference/like.html" class="external-link">%like%</a></span> <span class="st">"ME"</span>, <span class="st">"Mechanical"</span>,</span>
<span>  <span class="va">program</span> <span class="op"><a href="https://Rdatatable.gitlab.io/data.table/reference/like.html" class="external-link">%like%</a></span> <span class="st">"ISE"</span>, <span class="st">"Industrial/Systems"</span></span>
<span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<p><em>Create a variable.</em>   We combine <code>race</code> and
<code>sex</code> into a single categorical variable (denoted
<code>people</code>) as our second, independent categorical
variable.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a new category</span></span>
<span><span class="va">DT</span><span class="op">[</span>, <span class="va">people</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">race</span>, <span class="va">sex</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setcolorder.html" class="external-link">setcolorder</a></span><span class="op">(</span><span class="va">DT</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"program"</span>, <span class="st">"people"</span>, <span class="st">"race"</span>, <span class="st">"sex"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">DT</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;        program        people   race    sex  ever  grad stick</span></span>
<span><span class="co">#&gt;         &lt;char&gt;        &lt;char&gt; &lt;char&gt; &lt;char&gt; &lt;int&gt; &lt;int&gt; &lt;num&gt;</span></span>
<span><span class="co">#&gt;  1:      Civil  Asian Female  Asian Female    16     9  56.2</span></span>
<span><span class="co">#&gt;  2:      Civil  Black Female  Black Female    49    15  30.6</span></span>
<span><span class="co">#&gt;  3:      Civil Latine Female Latine Female    10     5  50.0</span></span>
<span><span class="co">#&gt; ---                                                         </span></span>
<span><span class="co">#&gt; 30: Mechanical    Black Male  Black   Male   202    65  32.2</span></span>
<span><span class="co">#&gt; 31: Mechanical   Latine Male Latine   Male    76    29  38.2</span></span>
<span><span class="co">#&gt; 32: Mechanical    White Male  White   Male  1776   918  51.7</span></span></code></pre>
<p>At this point, the multiway categories (<code>programs</code> and
<code>people</code>) are “character” class.</p>
</div>
<div class="section level2">
<h2 id="order_multiway">
<code>order_multiway()</code><a class="anchor" aria-label="anchor" href="#order_multiway"></a>
</h2>
<p>Converts the categorical variables to factors ordered by the
quantitative variable.</p>
<p><em>Arguments.</em></p>
<ul>
<li><p><strong><code>dframe</code></strong>   Data frame with multiway
data in columns. Two additional numeric columns required when using the
percentage ordering method.</p></li>
<li><p><strong><code>quantity</code></strong>   Name (in quotes) of the
single multiway quantitative variable.</p></li>
<li><p><strong><code>categories</code></strong>   Vector of names (in
quotes) of the two multiway categorical variables.</p></li>
<li><p><strong><code>method</code></strong>   “median” (default) or
“percent”, method of ordering the levels of the categories. Argument to
be used by name.</p></li>
<li><p><strong><code>ratio_of</code></strong>   Vector with the names
(in quotes) of the numerator and denominator columns that produced the
quantitative variable, required when using percentage ordering method.
Argument to be used by name.</p></li>
</ul>
<p><em>Equivalent usage.</em>   The following implementations yield
identical results,</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Required arguments in order and explicitly named</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/order_multiway.html">order_multiway</a></span><span class="op">(</span></span>
<span>  dframe <span class="op">=</span> <span class="va">DT</span>,</span>
<span>  quantity <span class="op">=</span> <span class="st">"grad"</span>,</span>
<span>  categories <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"program"</span>, <span class="st">"people"</span><span class="op">)</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"median"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Required arguments in order, but not named</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/order_multiway.html">order_multiway</a></span><span class="op">(</span><span class="va">DT</span>, <span class="st">"grad"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"program"</span>, <span class="st">"people"</span><span class="op">)</span>, method <span class="op">=</span> <span class="st">"median"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Using the implicit default for method</span></span>
<span><span class="va">z</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/order_multiway.html">order_multiway</a></span><span class="op">(</span><span class="va">DT</span>, <span class="st">"grad"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"program"</span>, <span class="st">"people"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Demonstrate equivalence</span></span>
<span><span class="fu"><a href="../reference/same_content.html">same_content</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="../reference/same_content.html">same_content</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">z</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p><em>Output.</em>   Adds two columns to the data frame containing the
computed values that determine the ordering of factors. The column names
and values depend on the ordering method:</p>
<ul>
<li><p><strong><code>method = "median"</code></strong>   Yields medians
of the quantitative variable grouped by the categorical
variables.</p></li>
<li><p><strong><code>method = "percent"</code></strong>   Yields
percentages based on the same ratio that produces the quantitative
variable but grouped by the categorical variables.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="median-ordered-data">Median-ordered data<a class="anchor" aria-label="anchor" href="#median-ordered-data"></a>
</h2>
<p>For this example, we select the count of graduates
(<code>grad</code>) as our quantitative variable and use
<code><a href="../reference/order_multiway.html">order_multiway()</a></code> to order the categories by median numbers
of graduates.</p>
<p>To minimize the number of columns in the printout, we select the
three multiway variables and drop other columns.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Select multiway variables when quantity is count</span></span>
<span><span class="va">DT_count</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">DT</span><span class="op">)</span></span>
<span><span class="va">DT_count</span> <span class="op">&lt;-</span> <span class="va">DT_count</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">program</span>, <span class="va">people</span>, <span class="va">grad</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">DT_count</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;        program        people  grad</span></span>
<span><span class="co">#&gt;         &lt;char&gt;        &lt;char&gt; &lt;int&gt;</span></span>
<span><span class="co">#&gt;  1:      Civil  Asian Female     9</span></span>
<span><span class="co">#&gt;  2:      Civil  Black Female    15</span></span>
<span><span class="co">#&gt;  3:      Civil Latine Female     5</span></span>
<span><span class="co">#&gt; ---                               </span></span>
<span><span class="co">#&gt; 30: Mechanical    Black Male    65</span></span>
<span><span class="co">#&gt; 31: Mechanical   Latine Male    29</span></span>
<span><span class="co">#&gt; 32: Mechanical    White Male   918</span></span></code></pre>
<p>Applying <code><a href="../reference/order_multiway.html">order_multiway()</a></code>, we specify
<code>"grad"</code> as the quantitative column, <code>"program"</code>
and <code>"people"</code> as the two categorical columns, and
<code>"median"</code> as the method of ordering levels.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Convert categories to factors ordered by median</span></span>
<span><span class="va">DT_count</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/order_multiway.html">order_multiway</a></span><span class="op">(</span><span class="va">DT_count</span>,</span>
<span>  quantity <span class="op">=</span> <span class="st">"grad"</span>,</span>
<span>  categories <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"program"</span>, <span class="st">"people"</span><span class="op">)</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"median"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">DT_count</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;        program        people  grad program_median people_median</span></span>
<span><span class="co">#&gt;         &lt;fctr&gt;        &lt;fctr&gt; &lt;int&gt;          &lt;num&gt;         &lt;num&gt;</span></span>
<span><span class="co">#&gt;  1:      Civil  Asian Female     9           19.5          13.5</span></span>
<span><span class="co">#&gt;  2:      Civil  Black Female    15           19.5          33.0</span></span>
<span><span class="co">#&gt;  3:      Civil Latine Female     5           19.5           5.5</span></span>
<span><span class="co">#&gt; ---                                                            </span></span>
<span><span class="co">#&gt; 30: Mechanical    Black Male    65           43.5          55.5</span></span>
<span><span class="co">#&gt; 31: Mechanical   Latine Male    29           43.5          22.0</span></span>
<span><span class="co">#&gt; 32: Mechanical    White Male   918           43.5         533.5</span></span></code></pre>
<p>The function adds two columns (<code>program_median</code> and
<code>people_median</code>) to display the computed median values used
to order the factors. In the median method, the new column names are a
combination of the category variable names (from
<code>categories</code>) plus <code>median</code>.</p>
<p>For example, the results show that the median number of Civil
Engineering graduates is 19.5 and that the median number of Asian Female
graduates is 13.5. We confirm these results by computing the median
values independently.</p>
<p>The following values agree with those in the
<code>program_median</code> variable above,</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Verify order_multiway() output</span></span>
<span><span class="va">temp</span> <span class="op">&lt;-</span> <span class="va">DT_count</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">.SD</span>, <span class="va">median</span><span class="op">)</span>, .SDcols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"grad"</span><span class="op">)</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"program"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">temp</span><span class="op">[</span><span class="op">]</span></span>
<span><span class="co">#&gt;               program  grad</span></span>
<span><span class="co">#&gt;                &lt;fctr&gt; &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:              Civil  19.5</span></span>
<span><span class="co">#&gt; 2:         Electrical  56.5</span></span>
<span><span class="co">#&gt; 3: Industrial/Systems  38.5</span></span>
<span><span class="co">#&gt; 4:         Mechanical  43.5</span></span></code></pre></div>
<p>And the next result agrees with the values in
<code>people_median</code>.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Verify order_multiway() output</span></span>
<span><span class="va">temp</span> <span class="op">&lt;-</span> <span class="va">DT_count</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">.SD</span>, <span class="va">median</span><span class="op">)</span>, .SDcols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"grad"</span><span class="op">)</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"people"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">temp</span><span class="op">[</span><span class="op">]</span></span>
<span><span class="co">#&gt;            people  grad</span></span>
<span><span class="co">#&gt;            &lt;fctr&gt; &lt;num&gt;</span></span>
<span><span class="co">#&gt;  1:  Asian Female  13.5</span></span>
<span><span class="co">#&gt;  2:  Black Female  33.0</span></span>
<span><span class="co">#&gt;  3: Latine Female   5.5</span></span>
<span><span class="co">#&gt; ---                    </span></span>
<span><span class="co">#&gt;  6:    Black Male  55.5</span></span>
<span><span class="co">#&gt;  7:   Latine Male  22.0</span></span>
<span><span class="co">#&gt;  8:    White Male 533.5</span></span></code></pre></div>
<p>In the output, you can see that both categories are “factor” class:
<code>program</code> is a factor with 4 levels; <code>people</code> is a
factor with 8 levels; and neither is ordered alphabetically—ordering is
by increasing median value as expected.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Verify first category is a factor</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">DT_count</span><span class="op">$</span><span class="va">program</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Civil"              "Industrial/Systems" "Mechanical"        </span></span>
<span><span class="co">#&gt; [4] "Electrical"</span></span>
<span></span>
<span><span class="co"># Verify second category is a factor</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">DT_count</span><span class="op">$</span><span class="va">people</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Latine Female" "Asian Female"  "Latine Male"   "Black Female" </span></span>
<span><span class="co">#&gt; [5] "Asian Male"    "Black Male"    "White Female"  "White Male"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="median-ordered-charts">Median-ordered charts<a class="anchor" aria-label="anchor" href="#median-ordered-charts"></a>
</h2>
<p>We use conventional ggplot2 functions to create the multiway
graphs.</p>
<p>We create a set of axis labels and scale specifications for a series
of median-ordered charts. We use a logarithmic scale in this case
because the numbers span three orders of magnitude.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Common x-scale and axis labels for median-ordered charts</span></span>
<span><span class="va">common_scale_x_log10</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_log10</a></span><span class="op">(</span></span>
<span>  limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">1000</span><span class="op">)</span>,</span>
<span>  breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">10</span>, <span class="fl">30</span>, <span class="fl">100</span>, <span class="fl">300</span>, <span class="fl">1000</span><span class="op">)</span>,</span>
<span>  minor_breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">10</span>, <span class="fl">1</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">100</span>, <span class="fl">10</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">200</span>, <span class="fl">1000</span>, <span class="fl">100</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">common_labs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="st">"Number of graduates (log base 10 scale)"</span>,</span>
<span>  y <span class="op">=</span> <span class="st">""</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Engineering graduates"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Draw vertical lines in panels</span></span>
<span><span class="va">common_geom_vline</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="va">x</span><span class="op">)</span>,</span>
<span>    linetype <span class="op">=</span> <span class="fl">2</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"gray70"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>The first of two multiway charts encodes <em>programs by rows</em>
and <em>people by panels</em>. The <code>as.table = FALSE</code>
argument places rows and panels in “graphical order”, that is,
increasing from left to right and from bottom to top. The panel median
value is drawn as a vertical reference line in each panel.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Two columns of panels</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">DT_count</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">grad</span>, y <span class="op">=</span> <span class="va">program</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">people</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">2</span>, as.table <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">common_geom_vline</span><span class="op">(</span><span class="va">DT_count</span><span class="op">$</span><span class="va">people_median</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="va">common_scale_x_log10</span> <span class="op">+</span></span>
<span>  <span class="va">common_labs</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="../reference/figures/art-120-multiway-median-two-columns-1.png" alt="Figure 1. Rows and columns ordered by median values." width="70%"><p class="caption">
Figure 1. Rows and columns ordered by median values.
</p>
</div>
<p><br>The programs are assigned to rows such that the program medians
increase from bottom to top. Civil Engineering has the smallest median;
Electrical Engineering the largest.</p>
<p>We drew the chart above in two columns to illustrate the graph order
of panels. Hispanic/LatinX Female students have the smallest median
number of graduates, followed by Asian Female students, Hispanic/LatinX
Male students, Black Female students, etc.</p>
<p>When space permits, however, laying out the panels in a single column
can be useful for seeing effects. Here, we redraw the panels in one
column.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Programs encoded by rows</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">DT_count</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">grad</span>, y <span class="op">=</span> <span class="va">program</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">people</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">1</span>, as.table <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">common_geom_vline</span><span class="op">(</span><span class="va">DT_count</span><span class="op">$</span><span class="va">people_median</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="va">common_scale_x_log10</span> <span class="op">+</span></span>
<span>  <span class="va">common_labs</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="../reference/figures/art-120-multiway-median-one-column-1.png" alt="Figure 2. Redraw the panels in one column." width="70%"><p class="caption">
Figure 2. Redraw the panels in one column.
</p>
</div>
<p><br>Reading a multiway graph</p>
<ul>
<li>We can more effectively compare values within a panel than between
panels.</li>
<li>Because rows are ordered, one expects a generally increasing trend
within a panel. A response greater or smaller than expected creates a
visual asymmetry. The interesting stories are often in these visual
anomalies.</li>
</ul>
<p>For example, the top panel clearly shows the variability of the White
Male data across four programs; the White Female panel shows a clear
counter-trend—their numbers decrease as the program medians
increase.</p>
<p>However, this chart does not permit us to effectively compare the
eight values for a given program. For that we create a second multiway
in which we switch the aesthetic roles of the categories—in this example
by encoding <em>people by rows</em> and <em>programs by panels</em>.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># People encoded by rows</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">DT_count</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">grad</span>, y <span class="op">=</span> <span class="va">people</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">program</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">1</span>, as.table <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">common_geom_vline</span><span class="op">(</span><span class="va">DT_count</span><span class="op">$</span><span class="va">program_median</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="va">common_scale_x_log10</span> <span class="op">+</span></span>
<span>  <span class="va">common_labs</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="../reference/figures/art-120-multiway-people-encoded-rows-1.png" alt="Figure 3. Switching the row and column assignments of categorical variables." width="70%"><p class="caption">
Figure 3. Switching the row and column assignments of categorical
variables.
</p>
</div>
<p><br>In this chart, the visual asymmetries that stand out are</p>
<ul>
<li>Electrical Engineering, White Female, low given their overall
rank</li>
<li>Mechanical Engineering, Black Female, low given their overall
rank</li>
<li>Industrial/Systems Engineering, Black Female, high given their
overall rank</li>
<li>Civil Engineering, Hispanic/LatinX Male, high given their overall
rank</li>
</ul>
</div>
<div class="section level2">
<h2 id="avoid-alphabetical-order">Avoid alphabetical order<a class="anchor" aria-label="anchor" href="#avoid-alphabetical-order"></a>
</h2>
<p>In the next figure, the same data are plotted in alphabetical
order.</p>
<p>The effects seen in the previous chart are not revealed.</p>
<ul>
<li>That White Female graduates are fewer than expected in Electrical
Engineering is not apparent</li>
<li>That Hispanic/LatinX Male graduates are higher than expected in
Civil Engineering is not apparent</li>
<li>etc.</li>
</ul>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create alphabetical ordering</span></span>
<span><span class="va">DT_alpha</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">DT</span><span class="op">)</span></span>
<span><span class="va">DT_alpha</span><span class="op">[</span>, <span class="va">people</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">people</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">people</span><span class="op">)</span>, decreasing <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># People encoded by rows, alphabetically</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">DT_alpha</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">grad</span>, y <span class="op">=</span> <span class="va">people</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">program</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">1</span>, as.table <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="va">common_scale_x_log10</span> <span class="op">+</span></span>
<span>  <span class="va">common_labs</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="../reference/figures/art-120-multiway-avoid-alphbetical-1.png" alt="Figure 4. Alphabetical ordering conceals patterns in the data." width="70%"><p class="caption">
Figure 4. Alphabetical ordering conceals patterns in the data.
</p>
</div>
<p><br>An ordering scheme based on the values of the quantitative
variable is necessary if a multiway chart is to reveal how the response
is affected by the categories.</p>
</div>
<div class="section level2">
<h2 id="multiway-superposition">Multiway superposition<a class="anchor" aria-label="anchor" href="#multiway-superposition"></a>
</h2>
<p>To illustrate superposing data, we return to the data set with
separate columns for race/ethnicity and sex. Let’s use <code>grad</code>
as our quantitative variable and omit unnecessary variables.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Select multiway variables with a superposed category</span></span>
<span><span class="va">DT_count</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">DT</span><span class="op">)</span></span>
<span><span class="va">DT_count</span> <span class="op">&lt;-</span> <span class="va">DT_count</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">program</span>, <span class="va">race</span>, <span class="va">sex</span>, <span class="va">grad</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">DT_count</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;        program   race    sex  grad</span></span>
<span><span class="co">#&gt;         &lt;char&gt; &lt;char&gt; &lt;char&gt; &lt;int&gt;</span></span>
<span><span class="co">#&gt;  1:      Civil  Asian Female     9</span></span>
<span><span class="co">#&gt;  2:      Civil  Black Female    15</span></span>
<span><span class="co">#&gt;  3:      Civil Latine Female     5</span></span>
<span><span class="co">#&gt; ---                               </span></span>
<span><span class="co">#&gt; 30: Mechanical  Black   Male    65</span></span>
<span><span class="co">#&gt; 31: Mechanical Latine   Male    29</span></span>
<span><span class="co">#&gt; 32: Mechanical  White   Male   918</span></span></code></pre>
<p>The superposed category is <code>sex</code>. The multiway data to be
conditioned are <code>grad</code>, the quantitative variable, and
<code>program</code> and <code>race</code>, the two categorical
variables.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Convert categories to factors ordered by median</span></span>
<span><span class="va">DT_count</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/order_multiway.html">order_multiway</a></span><span class="op">(</span><span class="va">DT_count</span>,</span>
<span>  quantity <span class="op">=</span> <span class="st">"grad"</span>,</span>
<span>  categories <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"program"</span>, <span class="st">"race"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">DT_count</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;        program   race  grad    sex program_median race_median</span></span>
<span><span class="co">#&gt;         &lt;fctr&gt; &lt;fctr&gt; &lt;int&gt; &lt;char&gt;          &lt;num&gt;       &lt;num&gt;</span></span>
<span><span class="co">#&gt;  1:      Civil  Asian     9 Female           19.5        16.0</span></span>
<span><span class="co">#&gt;  2:      Civil  Black    15 Female           19.5        44.5</span></span>
<span><span class="co">#&gt;  3:      Civil Latine     5 Female           19.5        14.0</span></span>
<span><span class="co">#&gt; ---                                                          </span></span>
<span><span class="co">#&gt; 30: Mechanical  Black    65   Male           43.5        44.5</span></span>
<span><span class="co">#&gt; 31: Mechanical Latine    29   Male           43.5        14.0</span></span>
<span><span class="co">#&gt; 32: Mechanical  White   918   Male           43.5       209.5</span></span></code></pre>
<p>In this example, <code>program</code> and <code>race</code> are
factors, ordered by median number of graduates while <code>sex</code>
remains an unordered character variable.</p>
<p>Using conventional ggplot syntax, the aesthetics include
<code>x</code> and <code>y</code> as before. We superpose data markers
for sex in rows by assigning <code>color = sex</code> inside the
<code><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes()</a></code> function.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Race/ethnicity encoded by rows, sex superposed</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">DT_count</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">grad</span>, y <span class="op">=</span> <span class="va">race</span>, color <span class="op">=</span> <span class="va">sex</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">program</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">1</span>, as.table <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">common_geom_vline</span><span class="op">(</span><span class="va">DT_count</span><span class="op">$</span><span class="va">program_median</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="va">common_scale_x_log10</span> <span class="op">+</span></span>
<span>  <span class="va">common_labs</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#762A83"</span>, <span class="st">"#1B7837"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="../reference/figures/art-120-multiway-race-sex-superposed-1.png" alt="Figure 5. Using superposition to display three categories." width="70%"><p class="caption">
Figure 5. Using superposition to display three categories.
</p>
</div>
<p><br>By superposing data by sex, we facilitate a direct comparison of
Male and Female students within a program and by race.</p>
<p>Swapping rows and panels yields the next chart, in which we can
directly compare Male and Female students within their race/ethnicity
category across programs. Because men tend to outnumber women in
engineering programs, this chart clearly shows clusters by sex.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Program encoded by rows, sex superposed</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">DT_count</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">grad</span>, y <span class="op">=</span> <span class="va">program</span>, color <span class="op">=</span> <span class="va">sex</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">race</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">1</span>, as.table <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">common_geom_vline</span><span class="op">(</span><span class="va">DT_count</span><span class="op">$</span><span class="va">race_median</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="va">common_scale_x_log10</span> <span class="op">+</span></span>
<span>  <span class="va">common_labs</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#762A83"</span>, <span class="st">"#1B7837"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="../reference/figures/art-120-multiway-program-sex-superposed-1.png" alt="Figure 6. Switching the row and column assignments of two categorical variables." width="70%"><p class="caption">
Figure 6. Switching the row and column assignments of two categorical
variables.
</p>
</div>
</div>
<div class="section level2">
<h2 id="percentage-ordered-data">Percentage-ordered data<a class="anchor" aria-label="anchor" href="#percentage-ordered-data"></a>
</h2>
<p>For persistence metrics such as stickiness or graduation rate, the
quantitative variable is a ratio or percentage. Here, we return to the
original case study results and select stickiness (<code>stick</code>)
as the quantitative variable.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Select multiway variables when quantity is a percentage</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>datatable.print.topn <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">DT_ratio</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">DT</span><span class="op">)</span></span>
<span><span class="va">DT_ratio</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"race"</span>, <span class="st">"sex"</span><span class="op">)</span> <span class="op">:=</span> <span class="cn">NULL</span><span class="op">]</span></span>
<span><span class="va">DT_ratio</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;        program        people  ever  grad stick</span></span>
<span><span class="co">#&gt;         &lt;char&gt;        &lt;char&gt; &lt;int&gt; &lt;int&gt; &lt;num&gt;</span></span>
<span><span class="co">#&gt;  1:      Civil  Asian Female    16     9  56.2</span></span>
<span><span class="co">#&gt;  2:      Civil  Black Female    49    15  30.6</span></span>
<span><span class="co">#&gt;  3:      Civil Latine Female    10     5  50.0</span></span>
<span><span class="co">#&gt; ---                                           </span></span>
<span><span class="co">#&gt; 30: Mechanical    Black Male   202    65  32.2</span></span>
<span><span class="co">#&gt; 31: Mechanical   Latine Male    76    29  38.2</span></span>
<span><span class="co">#&gt; 32: Mechanical    White Male  1776   918  51.7</span></span></code></pre>
<p>Because stickiness is a ratio, we set <code>method</code> to
“percent” and assign <code>grad</code> and <code>ever</code> to the
<code>ratio_of</code> argument. <code><a href="../reference/order_multiway.html">order_multiway()</a></code> then sums
the <code>ever</code> and <code>grad</code> counts by category and
produces grouped percentages to order the category levels.</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Convert categories to factors ordered by group percentages</span></span>
<span><span class="va">DT_ratio</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/order_multiway.html">order_multiway</a></span><span class="op">(</span><span class="va">DT_ratio</span>,</span>
<span>  quantity <span class="op">=</span> <span class="st">"stick"</span>,</span>
<span>  categories <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"program"</span>, <span class="st">"people"</span><span class="op">)</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"percent"</span>,</span>
<span>  ratio_of <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"grad"</span>, <span class="st">"ever"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">DT_ratio</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;        program        people  grad  ever stick program_stick people_stick</span></span>
<span><span class="co">#&gt;         &lt;fctr&gt;        &lt;fctr&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt;         &lt;num&gt;        &lt;num&gt;</span></span>
<span><span class="co">#&gt;  1:      Civil  Asian Female     9    16  56.2          50.5         44.0</span></span>
<span><span class="co">#&gt;  2:      Civil  Black Female    15    49  30.6          50.5         38.4</span></span>
<span><span class="co">#&gt;  3:      Civil Latine Female     5    10  50.0          50.5         48.9</span></span>
<span><span class="co">#&gt; ---                                                                      </span></span>
<span><span class="co">#&gt; 30: Mechanical    Black Male    65   202  32.2          48.0         34.2</span></span>
<span><span class="co">#&gt; 31: Mechanical   Latine Male    29    76  38.2          48.0         41.5</span></span>
<span><span class="co">#&gt; 32: Mechanical    White Male   918  1776  51.7          48.0         49.5</span></span></code></pre>
<p>The function again converts the categories to factors and adds two
columns (<code>program_stick</code> and <code>people_stick</code>) to
display the computed percentages used to order the factors. In the
percentage method, the new column names are a combination of the
category variable names (from <code>categories</code>) plus the
quantitative column name (from <code>x</code>).</p>
<p>For example, the results show that the stickiness of Civil
Engineering (<code>program_stick</code>) is 50.5%, and of Asian Females,
44% (<code>people_stick</code>). We confirm these results by computing
the group stickiness values independently.</p>
<p>The following values agree with those in the
<code>program_stick</code> variable above,</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Verify order_multiway() output</span></span>
<span><span class="va">temp</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">.SD</span>, <span class="va">sum</span><span class="op">)</span>, .SDcols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ever"</span>, <span class="st">"grad"</span><span class="op">)</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"program"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">temp</span><span class="op">[</span>, <span class="va">stick</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fl">100</span> <span class="op">*</span> <span class="va">grad</span> <span class="op">/</span> <span class="va">ever</span>, <span class="fl">1</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">temp</span><span class="op">[</span><span class="op">]</span></span>
<span><span class="co">#&gt;               program  ever  grad stick</span></span>
<span><span class="co">#&gt;                &lt;char&gt; &lt;int&gt; &lt;int&gt; &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:              Civil  1599   807  50.5</span></span>
<span><span class="co">#&gt; 2:         Electrical  2134   847  39.7</span></span>
<span><span class="co">#&gt; 3: Industrial/Systems  1076   555  51.6</span></span>
<span><span class="co">#&gt; 4:         Mechanical  2540  1219  48.0</span></span></code></pre></div>
<p>And the next result agrees with the values in
<code>people_stick</code>.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Verify order_multiway() output</span></span>
<span><span class="va">temp</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">.SD</span>, <span class="va">sum</span><span class="op">)</span>, .SDcols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ever"</span>, <span class="st">"grad"</span><span class="op">)</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"people"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">temp</span><span class="op">[</span>, <span class="va">stick</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fl">100</span> <span class="op">*</span> <span class="va">grad</span> <span class="op">/</span> <span class="va">ever</span>, <span class="fl">1</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">temp</span><span class="op">[</span><span class="op">]</span></span>
<span><span class="co">#&gt;            people  ever  grad stick</span></span>
<span><span class="co">#&gt;            &lt;char&gt; &lt;int&gt; &lt;int&gt; &lt;num&gt;</span></span>
<span><span class="co">#&gt;  1:  Asian Female   116    51  44.0</span></span>
<span><span class="co">#&gt;  2:  Black Female   362   139  38.4</span></span>
<span><span class="co">#&gt;  3: Latine Female    47    23  48.9</span></span>
<span><span class="co">#&gt; ---                                </span></span>
<span><span class="co">#&gt;  6:    Black Male   682   233  34.2</span></span>
<span><span class="co">#&gt;  7:   Latine Male   224    93  41.5</span></span>
<span><span class="co">#&gt;  8:    White Male  4540  2248  49.5</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="percentage-ordered-charts">Percentage-ordered charts<a class="anchor" aria-label="anchor" href="#percentage-ordered-charts"></a>
</h2>
<p>Here the quantitative variable is group stickiness. The first chart
encodes <em>programs by rows</em> and <em>people by panels</em>.
Row-order is determined by program stickiness computed over all
students; panel order is determined by people stickiness computed over
all programs.</p>
<p>The order of rows and panels has changed from the earlier charts.</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Programs encoded by rows</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">DT_ratio</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">stick</span>, y <span class="op">=</span> <span class="va">program</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">people</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">1</span>, as.table <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">common_geom_vline</span><span class="op">(</span><span class="va">DT_ratio</span><span class="op">$</span><span class="va">people_stick</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Stickiness"</span>, y <span class="op">=</span> <span class="st">""</span>, title <span class="op">=</span> <span class="st">"Engineering stickiness"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="../reference/figures/art-120-multiway-engr-stick-program-1.png" alt="Figure 7. Rows and column ordered by percentages." width="70%"><p class="caption">
Figure 7. Rows and column ordered by percentages.
</p>
</div>
<p><br>The visual asymmetries in this chart that stand out are</p>
<ul>
<li>Electrical Engineering, White Female, low given their overall
rank</li>
<li>Hispanic/LatinX Female, Mechanical Engineering, low given their
overall rank</li>
<li>Asian Female, Industrial/Systems Engineering, low given their
overall rank</li>
<li>Black Female and Male in Civil and Mechanical Engineering, low given
their overall rank</li>
</ul>
<p>Again, we cannot compare the eight values for a given program as
effectively. This is done far better in the second chart that encodes
<em>people by rows</em> and <em>programs by panels</em>.</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># People encoded by rows</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">DT_ratio</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">stick</span>, y <span class="op">=</span> <span class="va">people</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">program</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">1</span>, as.table <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">common_geom_vline</span><span class="op">(</span><span class="va">DT_ratio</span><span class="op">$</span><span class="va">program_stick</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Stickiness"</span>, y <span class="op">=</span> <span class="st">""</span>, title <span class="op">=</span> <span class="st">"Engineering stickiness"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="../reference/figures/art-120-multiway-engr-stick-people-1.png" alt="Figure 8. Switching the row and column assignments of categorical variables." width="70%"><p class="caption">
Figure 8. Switching the row and column assignments of categorical
variables.
</p>
</div>
<p><br>This chart shows a lot of variability. The visual asymmetries
that stand out are</p>
<ul>
<li>Hispanic/LatinX Female and Male, Industrial/Systems Engineering,
high given their overall rank</li>
<li>Asian Female, Civil and Mechanical Engineering, high given their
overall rank</li>
<li>White Female, Electrical Engineering, low given their overall
rank</li>
<li>Asian Male, Electrical Engineering, high given their overall
rank</li>
</ul>
</div>
<div class="section level2">
<h2 id="tabulating-counts">Tabulating counts<a class="anchor" aria-label="anchor" href="#tabulating-counts"></a>
</h2>
<p>Readers and reviewers of charts often want to see the exact numbers
represented by data markers. To serve that need, we tabulate multiway
data after transforming it from block-record form (convenient for use
with ggplot2) to row-record form, that is, from “long” to “wide”
form.</p>
<p>To illustrate, let’s tabulate the number of graduates by people and
program. Start by selecting the desired variables only.</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Select the desired variables</span></span>
<span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">DT</span><span class="op">)</span></span>
<span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="va">tbl</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">program</span>, <span class="va">people</span>, <span class="va">grad</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">tbl</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;        program        people  grad</span></span>
<span><span class="co">#&gt;         &lt;char&gt;        &lt;char&gt; &lt;int&gt;</span></span>
<span><span class="co">#&gt;  1:      Civil  Asian Female     9</span></span>
<span><span class="co">#&gt;  2:      Civil  Black Female    15</span></span>
<span><span class="co">#&gt;  3:      Civil Latine Female     5</span></span>
<span><span class="co">#&gt; ---                               </span></span>
<span><span class="co">#&gt; 30: Mechanical    Black Male    65</span></span>
<span><span class="co">#&gt; 31: Mechanical   Latine Male    29</span></span>
<span><span class="co">#&gt; 32: Mechanical    White Male   918</span></span></code></pre>
<p>Use <code><a href="https://Rdatatable.gitlab.io/data.table/reference/dcast.data.table.html" class="external-link">dcast()</a></code> to transform the block records to row
records.</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Transform shape to row-record form</span></span>
<span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/dcast.data.table.html" class="external-link">dcast</a></span><span class="op">(</span><span class="va">tbl</span>, <span class="va">people</span> <span class="op">~</span> <span class="va">program</span>, value.var <span class="op">=</span> <span class="st">"grad"</span><span class="op">)</span></span>
<span><span class="va">tbl</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;           people Civil Electrical Industrial/Systems Mechanical</span></span>
<span><span class="co">#&gt;           &lt;char&gt; &lt;int&gt;      &lt;int&gt;              &lt;int&gt;      &lt;int&gt;</span></span>
<span><span class="co">#&gt;  1: Asian Female     9         14                 15         13</span></span>
<span><span class="co">#&gt;  2:   Asian Male    17         86                 34         58</span></span>
<span><span class="co">#&gt;  3: Black Female    15         58                 43         23</span></span>
<span><span class="co">#&gt; ---                                                            </span></span>
<span><span class="co">#&gt;  6:  Latine Male    22         22                 20         29</span></span>
<span><span class="co">#&gt;  7: White Female   156         55                126        109</span></span>
<span><span class="co">#&gt;  8:   White Male   558        509                263        918</span></span></code></pre>
<p>Edit one column name and print the table.</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Edit column header</span></span>
<span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setattr.html" class="external-link">setnames</a></span><span class="op">(</span><span class="va">tbl</span>, old <span class="op">=</span> <span class="st">"people"</span>, new <span class="op">=</span> <span class="st">"Group"</span>, skip_absent <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<table class="table  lightable-paper" style='font-family: "Arial Narrow", arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;'>
<caption>
Table 1: Number of engineering graduates
</caption>
<thead><tr>
<th style="text-align:left;background-color: #c7eae5 !important;">
Group
</th>
<th style="text-align:right;background-color: #c7eae5 !important;">
Civil
</th>
<th style="text-align:right;background-color: #c7eae5 !important;">
Electrical
</th>
<th style="text-align:right;background-color: #c7eae5 !important;">
Industrial/Systems
</th>
<th style="text-align:right;background-color: #c7eae5 !important;">
Mechanical
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;color: black !important;background-color: white !important;">
Asian Female
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
9
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
14
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
15
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
13
</td>
</tr>
<tr>
<td style="text-align:left;color: black !important;background-color: white !important;">
Asian Male
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
17
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
86
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
34
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
58
</td>
</tr>
<tr>
<td style="text-align:left;color: black !important;background-color: white !important;">
Black Female
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
15
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
58
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
43
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
23
</td>
</tr>
<tr>
<td style="text-align:left;color: black !important;background-color: white !important;">
Black Male
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
25
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
97
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
46
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
65
</td>
</tr>
<tr>
<td style="text-align:left;color: black !important;background-color: white !important;">
Latine Female
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
5
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
6
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
8
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
4
</td>
</tr>
<tr>
<td style="text-align:left;color: black !important;background-color: white !important;">
Latine Male
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
22
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
22
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
20
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
29
</td>
</tr>
<tr>
<td style="text-align:left;color: black !important;background-color: white !important;">
White Female
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
156
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
55
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
126
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
109
</td>
</tr>
<tr>
<td style="text-align:left;color: black !important;background-color: white !important;">
White Male
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
558
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
509
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
263
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
918
</td>
</tr>
</tbody>
</table>
<p>Multiway data structure lends itself to tables of this type. The
levels of one category are in the first column; the levels of the second
category are in the table header; and the quantitative variable fills
the cells—a response value for each combination of levels of the two
categories.</p>
</div>
<div class="section level2">
<h2 id="tabulating-percentages">Tabulating percentages<a class="anchor" aria-label="anchor" href="#tabulating-percentages"></a>
</h2>
<p>When tabulating percentages, readers and reviewers are likely to want
the percentage values as well as the underlying ratios of integers. In
this example, we suggest one way these values can be presented in a
single table.</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Select the desired variables</span></span>
<span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">DT</span><span class="op">)</span></span>
<span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="va">tbl</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">program</span>, <span class="va">people</span>, <span class="va">grad</span>, <span class="va">ever</span>, <span class="va">stick</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">tbl</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;        program        people  grad  ever stick</span></span>
<span><span class="co">#&gt;         &lt;char&gt;        &lt;char&gt; &lt;int&gt; &lt;int&gt; &lt;num&gt;</span></span>
<span><span class="co">#&gt;  1:      Civil  Asian Female     9    16  56.2</span></span>
<span><span class="co">#&gt;  2:      Civil  Black Female    15    49  30.6</span></span>
<span><span class="co">#&gt;  3:      Civil Latine Female     5    10  50.0</span></span>
<span><span class="co">#&gt; ---                                           </span></span>
<span><span class="co">#&gt; 30: Mechanical    Black Male    65   202  32.2</span></span>
<span><span class="co">#&gt; 31: Mechanical   Latine Male    29    76  38.2</span></span>
<span><span class="co">#&gt; 32: Mechanical    White Male   918  1776  51.7</span></span></code></pre>
<p>In this step, we concatenate a character string with the ratio of
integers in parentheses followed by the resulting percentage value.
e.g., <code>(9/16) 56.2</code>.</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Construct new cell values</span></span>
<span><span class="va">tbl</span><span class="op">[</span>, <span class="va">results</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"("</span>, <span class="va">grad</span>, <span class="st">"/"</span>, <span class="va">ever</span>, <span class="st">") "</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">stick</span>, nsmall <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">tbl</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;        program        people  grad  ever stick         results</span></span>
<span><span class="co">#&gt;         &lt;char&gt;        &lt;char&gt; &lt;int&gt; &lt;int&gt; &lt;num&gt;          &lt;char&gt;</span></span>
<span><span class="co">#&gt;  1:      Civil  Asian Female     9    16  56.2     (9/16) 56.2</span></span>
<span><span class="co">#&gt;  2:      Civil  Black Female    15    49  30.6    (15/49) 30.6</span></span>
<span><span class="co">#&gt;  3:      Civil Latine Female     5    10  50.0     (5/10) 50.0</span></span>
<span><span class="co">#&gt; ---                                                           </span></span>
<span><span class="co">#&gt; 30: Mechanical    Black Male    65   202  32.2   (65/202) 32.2</span></span>
<span><span class="co">#&gt; 31: Mechanical   Latine Male    29    76  38.2    (29/76) 38.2</span></span>
<span><span class="co">#&gt; 32: Mechanical    White Male   918  1776  51.7 (918/1776) 51.7</span></span></code></pre>
<p>Now we can perform the transformation from block records to row
records as we did above.</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Transform shape to row-record form</span></span>
<span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/dcast.data.table.html" class="external-link">dcast</a></span><span class="op">(</span><span class="va">tbl</span>, <span class="va">people</span> <span class="op">~</span> <span class="va">program</span>, value.var <span class="op">=</span> <span class="st">"results"</span><span class="op">)</span></span>
<span><span class="va">tbl</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;           people           Civil      Electrical Industrial/Systems</span></span>
<span><span class="co">#&gt;           &lt;char&gt;          &lt;char&gt;          &lt;char&gt;             &lt;char&gt;</span></span>
<span><span class="co">#&gt;  1: Asian Female     (9/16) 56.2    (14/36) 38.9       (15/42) 35.7</span></span>
<span><span class="co">#&gt;  2:   Asian Male    (17/34) 50.0   (86/189) 45.5       (34/65) 52.3</span></span>
<span><span class="co">#&gt;  3: Black Female    (15/49) 30.6   (58/145) 40.0       (43/93) 46.2</span></span>
<span><span class="co">#&gt; ---                                                                </span></span>
<span><span class="co">#&gt;  6:  Latine Male    (22/53) 41.5    (22/63) 34.9       (20/32) 62.5</span></span>
<span><span class="co">#&gt;  7: White Female  (156/304) 51.3   (55/173) 31.8     (126/234) 53.8</span></span>
<span><span class="co">#&gt;  8:   White Male (558/1043) 53.5 (509/1227) 41.5     (263/494) 53.2</span></span>
<span><span class="co">#&gt;          Mechanical</span></span>
<span><span class="co">#&gt;              &lt;char&gt;</span></span>
<span><span class="co">#&gt;  1:    (13/22) 59.1</span></span>
<span><span class="co">#&gt;  2:   (58/118) 49.2</span></span>
<span><span class="co">#&gt;  3:    (23/75) 30.7</span></span>
<span><span class="co">#&gt; ---                </span></span>
<span><span class="co">#&gt;  6:    (29/76) 38.2</span></span>
<span><span class="co">#&gt;  7:  (109/261) 41.8</span></span>
<span><span class="co">#&gt;  8: (918/1776) 51.7</span></span></code></pre>
<p>Edit one column name and print the table.</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Edit column header</span></span>
<span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setattr.html" class="external-link">setnames</a></span><span class="op">(</span><span class="va">tbl</span>, old <span class="op">=</span> <span class="st">"people"</span>, new <span class="op">=</span> <span class="st">"Group"</span>, skip_absent <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<table class="table  lightable-paper" style='font-family: "Arial Narrow", arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;border-bottom: 0;'>
<caption>
Table 2: Percent stickiness of four engineering programs
</caption>
<thead><tr>
<th style="text-align:left;background-color: #c7eae5 !important;">
Group
</th>
<th style="text-align:right;background-color: #c7eae5 !important;">
Civil
</th>
<th style="text-align:right;background-color: #c7eae5 !important;">
Electrical
</th>
<th style="text-align:right;background-color: #c7eae5 !important;">
Industrial/Systems
</th>
<th style="text-align:right;background-color: #c7eae5 !important;">
Mechanical
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;color: black !important;background-color: white !important;">
Asian Female
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
(9/16) 56.2
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
(14/36) 38.9
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
(15/42) 35.7
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
(13/22) 59.1
</td>
</tr>
<tr>
<td style="text-align:left;color: black !important;background-color: white !important;">
Asian Male
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
(17/34) 50.0
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
(86/189) 45.5
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
(34/65) 52.3
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
(58/118) 49.2
</td>
</tr>
<tr>
<td style="text-align:left;color: black !important;background-color: white !important;">
Black Female
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
(15/49) 30.6
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
(58/145) 40.0
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
(43/93) 46.2
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
(23/75) 30.7
</td>
</tr>
<tr>
<td style="text-align:left;color: black !important;background-color: white !important;">
Black Male
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
(25/90) 27.8
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
(97/287) 33.8
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
(46/103) 44.7
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
(65/202) 32.2
</td>
</tr>
<tr>
<td style="text-align:left;color: black !important;background-color: white !important;">
Latine Female
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
(5/10) 50.0
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
(6/14) 42.9
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
(8/13) 61.5
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
(4/10) 40.0
</td>
</tr>
<tr>
<td style="text-align:left;color: black !important;background-color: white !important;">
Latine Male
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
(22/53) 41.5
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
(22/63) 34.9
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
(20/32) 62.5
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
(29/76) 38.2
</td>
</tr>
<tr>
<td style="text-align:left;color: black !important;background-color: white !important;">
White Female
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
(156/304) 51.3
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
(55/173) 31.8
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
(126/234) 53.8
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
(109/261) 41.8
</td>
</tr>
<tr>
<td style="text-align:left;color: black !important;background-color: white !important;">
White Male
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
(558/1043) 53.5
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
(509/1227) 41.5
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
(263/494) 53.2
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
(918/1776) 51.7
</td>
</tr>
</tbody>
<tfoot>
<tr>
<td style="padding: 0; " colspan="100%">
<span style="font-style: italic;">Note: </span>
</td>
</tr>
<tr>
<td style="padding: 0; " colspan="100%">
<sup></sup> Integers in parentheses give the ratio of students
graduating to those ever enrolled that produces the percentage shown.
</td>
</tr>
</tfoot>
</table>
</div>
<div class="section level2">
<h2 id="closing">Closing<a class="anchor" aria-label="anchor" href="#closing"></a>
</h2>
<p>We used longitudinal SURs to illustrate the structure of multiway
data and create multiway charts and tables of several types. We
demonstrated filtering data before dissemination to preserve
anonymity.</p>
<p>We used two methods of ordering the rows and panels of multiway
charts: by grouped medians when data are summary counts and by grouped
percentages when data are ratios or percentages.</p>
<p>We illustrated that visual perception of effects is more practicable
within a panel than between panels. Our advice (and Cleveland’s) is to
encode the levels of each category by rows in at least one chart. Thus
the minimum number of exploratory charts is the number of independent
categorical variables.</p>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" line-spacing="2">
<div id="ref-Cleveland:1993" class="csl-entry">
Cleveland, W. S. (1993). <em><span>Visualizing Data</span></em>.
<span>Hobart Press</span>.
</div>
<div id="ref-Dowle+Srinivasan:2021:data.table" class="csl-entry">
Dowle, M., &amp; Srinivasan, A. (2021). <em><span class="nocase">data.table: Extension of data.frame</span></em>.
R package version 1.14.2. <a href="https://CRAN.R-project.org/package=data.table" class="external-link">https://CRAN.R-project.org/package=data.table</a>
</div>
<div id="ref-data.table-reference-semantics" class="csl-entry">
Dowle, M., &amp; Srinivasan, A. (2022). <em><span class="nocase">Reference semantics [data.table]</span></em>. <a href="https://rdatatable.gitlab.io/data.table/articles/datatable-reference-semantics.html" class="external-link">https://rdatatable.gitlab.io/data.table/articles/datatable-reference-semantics.html</a>
</div>
<div id="ref-Kroonenberg:2008" class="csl-entry">
Kroonenberg, P. M. (2008). <em><span>Applied Multiway Data
Analysis</span></em>. <span>Wiley</span>.
</div>
<div id="ref-Wickham:2016:ggplot2" class="csl-entry">
Wickham, H. (2016). <em><span class="nocase">ggplot2: Elegant Graphics
for Data Analysis</span></em>. <span>ISBN 978-3-319-24277-4</span>;
Springer-Verlag New York. <a href="https://ggplot2.tidyverse.org" class="external-link">https://ggplot2.tidyverse.org</a>
</div>
</div>
<style type="text/css">
blockquote {
    padding:     10px 20px;
    margin:      0 0 20px;
    border-left: 0px
}
caption {
    color:       #525252;
    text-align:  left;
    font-weight: normal;
    font-size:   medium;
    line-height: 1.5;
}
</style>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://github.com/graphdr" class="external-link">Richard Layton</a>, Russell Long, Matthew Ohland, Marisa Orr, Susan Lord, US National Science Foundation.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
