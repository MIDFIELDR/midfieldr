<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="midfieldr">
<title>Stickiness • midfieldr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Stickiness">
<meta property="og:description" content="midfieldr">
<meta property="og:image" content="https://midfieldr.github.io/midfieldr/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">midfieldr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0.9028</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/art-000-getting-started.html">Getting started</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-case-study">Case study</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-case-study">
    <a class="dropdown-item" href="../articles/art-001-case-goals.html">Goals</a>
    <a class="dropdown-item" href="../articles/art-002-case-data.html">Data</a>
    <a class="dropdown-item" href="../articles/art-003-case-results.html">Results</a>
  </div>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-vignettes">Vignettes</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-vignettes">
    <a class="dropdown-item" href="../articles/art-010-planning.html">Planning</a>
    <a class="dropdown-item" href="../articles/art-020-data-sufficiency.html">Data sufficiency</a>
    <a class="dropdown-item" href="../articles/art-030-degree-seeking.html">Degree seeking</a>
    <a class="dropdown-item" href="../articles/art-040-programs.html">Programs</a>
    <a class="dropdown-item" href="../articles/art-050-blocs.html">Blocs</a>
    <a class="dropdown-item" href="../articles/art-060-fye-proxies.html">FYE proxies</a>
    <a class="dropdown-item" href="../articles/art-070-starters.html">Starters</a>
    <a class="dropdown-item" href="../articles/art-080-graduates.html">Graduates</a>
    <a class="dropdown-item" href="../articles/art-090-groupings.html">Groupings</a>
    <a class="dropdown-item" href="../articles/art-100-grad-rate.html">Graduation rate</a>
    <a class="dropdown-item" href="../articles/art-110-stickiness.html">Stickiness</a>
    <a class="dropdown-item" href="../articles/art-120-multiway.html">Multiway data and charts</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/MIDFIELDR/midfieldr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Stickiness</h1>
            
            <h4 data-toc-skip class="date">2022-11-11</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/MIDFIELDR/midfieldr/blob/HEAD/vignettes/art-110-stickiness.Rmd" class="external-link"><code>vignettes/art-110-stickiness.Rmd</code></a></small>
      <div class="d-none name"><code>art-110-stickiness.Rmd</code></div>
    </div>

    
    
<p>Stickiness is a more-inclusive alternative to graduation rate as a
measure of a program’s success in attracting, keeping, and graduating
their undergraduates. All students excluded by a conventional graduation
rate metric–including migrators—are included in the stickiness metric
<span class="citation">(<a href="#ref-Ohland+Orr+others:2012" role="doc-biblioref">Ohland et al., 2012</a>)</span>.</p>
<p>This vignette in the MIDFIELD workflow.</p>
<ol style="list-style-type: decimal">
<li>Planning<br>
</li>
<li>Initial processing<br>
</li>
<li>Blocs<br>
</li>
<li>Groupings<br>
</li>
<li>
<span style=" font-weight: bold;    color: #b35806 !important;">Metrics</span>
<ul>
<li>Graduation rate<br>
</li>
<li>
<span style=" font-weight: bold;    color: #b35806 !important;">Stickiness</span><br>
</li>
</ul>
</li>
<li>Displays</li>
</ol>
<div class="section level2">
<h2 id="definitions">Definitions<a class="anchor" aria-label="anchor" href="#definitions"></a>
</h2>
<dl>
<dt>stickiness</dt>
<dd>
<p>Stickiness <span class="math inline">\((S)\)</span> is the ratio of
the number of graduates <span class="math inline">\((N_g)\)</span> of a
program to the number ever enrolled <span class="math inline">\((N_e)\)</span> in the program,</p>
</dd>
</dl>
<p><span class="math display">\[
S = \frac{N_g}{N_e}
\]</span></p>
<dl>
<dt>bloc</dt>
<dd>
<p>A grouping of SURs dealt with as a unit, for example, starters,
ever-enrolled, graduates, transfers, traditional, non-traditional,
migrators, etc.</p>
</dd>
<dt>ever-enrolled</dt>
<dd>
<p>Bloc of all degree-seeking students enrolled in a program for at
least one term, without regard to their starting programs.</p>
</dd>
<dt>graduates</dt>
<dd>
<p>Bloc of all graduates (timely completers) from a program, without
regard to their starting programs.</p>
</dd>
<dt>timely completion criterion</dt>
<dd>
<p>Completing a program in no more than a specified span of years, in
many cases, within 6 years after admission (150% of the “normal” 4-year
span), or possibly less for some transfer students.</p>
</dd>
<dt>migrators</dt>
<dd>
<p>Bloc of students who leave one program to enroll in another at the
same institution. Also called <em>switchers.</em></p>
</dd>
</dl>
</div>
<div class="section level2">
<h2 id="a-more-inclusive-metric">A more inclusive metric<a class="anchor" aria-label="anchor" href="#a-more-inclusive-metric"></a>
</h2>
<p>Stickiness, in comparison to <a href="art-100-grad-rate.html">graduation rate</a>, has these
characteristics:</p>
<ul>
<li><p>Includes migrators, where graduation rate does not.</p></li>
<li><p>Is based on the bloc of ever enrolled rather than starters, so
there is no need for <a href="art-060-fye-proxies.html">FYE
proxies</a>.</p></li>
<li><p>Counts all graduates (timely completers) in a program,
eliminating the need to filter graduates based on their starting
program.</p></li>
<li><p>Like the MIDFIELD definition of graduation rate (in contrast to
the IPEDS definition), includes students who attend college part-time,
who transfer between institutions, and who start in any term.</p></li>
</ul>
<p>As they pertain to the stickiness metric, relationships among
starters, migrators, and graduates (timely completers) of a given
program <em>P</em> are illustrated in Figure 1.</p>
<ul>
<li><p>The interior rectangle represents the stickiness numerator <span class="math inline">\((N_g)\)</span>, the set of graduates (timely
completers) of program <em>P</em>.</p></li>
<li><p>The overall rectangle represents the stickiness denominator <span class="math inline">\((N_e)\)</span>, the set of students ever enrolled
in program <em>P</em>.</p></li>
</ul>
<div class="figure">
<img src="../reference/figures/art-110-venn-diagram.png" style="width:100.0%" alt=""><p class="caption">Figure 1. Stickiness metric. Starters, migrators, and
timely completers.</p>
</div>
<p><br></p>
</div>
<div class="section level2">
<h2 id="method">Method<a class="anchor" aria-label="anchor" href="#method"></a>
</h2>
<p>Demonstrating the following elements of a MIDFIELD workflow.</p>
<ol style="list-style-type: decimal">
<li><p><em>Planning.</em>   The metric is stickiness. Required blocs are
ever-enrolled and graduates. Grouping variables are program,
race/ethnicity, and sex. Programs are the four Engineering programs used
throughout.</p></li>
<li><p><em>Initial processing.</em>   Filter the source SURs for data
sufficiency and degree-seeking.</p></li>
<li><p><em>Blocs.</em>   Gather ever enrolled, filter by program. Gather
graduates, filter by program.</p></li>
<li><p><em>Groupings.</em>   Add grouping variables.</p></li>
<li><p><em>Metrics</em>   Summarize by grouping variables and compute
stickiness.</p></li>
<li><p><em>Displays</em>   Create multiway chart and results
table.</p></li>
</ol>
<p><em>Caveat:</em> The Student Unit Records included with midfieldr and
midfielddata are practice data, not research data, suitable for practice
working with SURs but not for drawing inferences about program
attributes or student experiences.</p>
</div>
<div class="section level2">
<h2 id="load-data">Load data<a class="anchor" aria-label="anchor" href="#load-data"></a>
</h2>
<p><em>Open.</em>   If you are writing your own script to follow along,
we use these packages in this vignette:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># midfieldr: Stickiness</span></span>
<span></span>
<span><span class="co"># Packages</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/MIDFIELDR/midfieldr" class="external-link">"midfieldr"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/MIDFIELDR/midfielddata" class="external-link">"midfielddata"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://r-datatable.com" class="external-link">"data.table"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://ggplot2.tidyverse.org" class="external-link">"ggplot2"</a></span><span class="op">)</span></span></code></pre></div>
<p><em>Load.</em>   MIDFIELD practice data tables. Described in <a href="art-000-getting-started.html">Getting started</a>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load practice data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">student</span>, <span class="va">term</span>, <span class="va">degree</span>, package <span class="op">=</span> <span class="st">"midfielddata"</span><span class="op">)</span></span></code></pre></div>
<p><em>Loads with midfieldr.</em></p>
<ul>
<li>
<code>study_programs</code> (derived in <a href="art-040-programs.html#reusable-code">Programs</a>).</li>
</ul>
</div>
<div class="section level2">
<h2 id="initial-processing">Initial processing<a class="anchor" aria-label="anchor" href="#initial-processing"></a>
</h2>
<p><em>(Optional) Select.</em>   Columns required by midfieldr
functions. Code reproduced from <a href="art-000-getting-started.html#reusable-code">Getting
started</a>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Optional. Copy of source files with all variables</span></span>
<span><span class="va">source_student</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">student</span><span class="op">)</span></span>
<span><span class="va">source_term</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">term</span><span class="op">)</span></span>
<span><span class="va">source_degree</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">degree</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Optional. Select variables required by midfieldr functions</span></span>
<span><span class="va">student</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/select_required.html">select_required</a></span><span class="op">(</span><span class="va">source_student</span><span class="op">)</span></span>
<span><span class="va">term</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/select_required.html">select_required</a></span><span class="op">(</span><span class="va">source_term</span><span class="op">)</span></span>
<span><span class="va">degree</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/select_required.html">select_required</a></span><span class="op">(</span><span class="va">source_degree</span><span class="op">)</span></span></code></pre></div>
<p><em>Work.</em>   Using <code><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy()</a></code> avoids
<em>by-reference</em> effects <span class="citation">(<a href="#ref-data.table-reference-semantics" role="doc-biblioref">Dowle
&amp; Srinivasan, 2022</a>)</span>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Working data frame</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">term</span><span class="op">)</span></span></code></pre></div>
<p><em>Data sufficiency.</em> Obtain the IDs of all students for whom
the data sufficiency criteria are satisfied. Code reproduced from <a href="art-020-data-sufficiency.html#reusable-code">Data
sufficiency</a>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Filter for data sufficiency</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_timely_term.html">add_timely_term</a></span><span class="op">(</span><span class="va">DT</span>, <span class="va">term</span><span class="op">)</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_data_sufficiency.html">add_data_sufficiency</a></span><span class="op">(</span><span class="va">DT</span>, <span class="va">term</span><span class="op">)</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="va">data_sufficiency</span> <span class="op">==</span> <span class="st">"include"</span><span class="op">]</span></span></code></pre></div>
<p><em>Degree seeking.</em> Filter to retain degree-seeking students
only. Code reproduced from <a href="art-030-data-seeking.html#reusable-code">Degree seeking</a>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Filter for degree seeking</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">DT</span><span class="op">)</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">student</span><span class="op">[</span><span class="va">DT</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span><span class="op">)</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span>, nomatch <span class="op">=</span> <span class="cn">NULL</span><span class="op">]</span></span>
<span><span class="va">DT</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;               mcid</span></span>
<span><span class="co">#&gt;             &lt;char&gt;</span></span>
<span><span class="co">#&gt;     1: MID25783135</span></span>
<span><span class="co">#&gt;     2: MID25783162</span></span>
<span><span class="co">#&gt;     3: MID25783178</span></span>
<span><span class="co">#&gt;    ---            </span></span>
<span><span class="co">#&gt; 63950: MID26697599</span></span>
<span><span class="co">#&gt; 63951: MID26697615</span></span>
<span><span class="co">#&gt; 63952: MID26697623</span></span></code></pre>
<p>We preserve this data frame as a baseline for examples in the
vignette.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">baseline</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">DT</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="ever-enrolled">Ever enrolled<a class="anchor" aria-label="anchor" href="#ever-enrolled"></a>
</h2>
<p><em>Preparation.</em>   The baseline data frame we preserved earlier
is the intake for this section.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Reset the working data frame</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">baseline</span><span class="op">)</span></span></code></pre></div>
<p><em>Ever enrolled.</em>   The summary code chunk from <a href="art-050-blocs.html#reusable-code-blocs">Blocs</a>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Ever-enrolled bloc</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">term</span><span class="op">[</span><span class="va">DT</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">cip6</span><span class="op">)</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">DT</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Filter by program</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">study_programs</span><span class="op">[</span><span class="va">DT</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cip6"</span><span class="op">)</span>, nomatch <span class="op">=</span> <span class="cn">NULL</span><span class="op">]</span></span>
<span><span class="va">DT</span><span class="op">[</span>, <span class="va">cip6</span> <span class="op">:=</span> <span class="cn">NULL</span><span class="op">]</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">DT</span><span class="op">)</span></span>
<span><span class="va">DT</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;       program        mcid</span></span>
<span><span class="co">#&gt;        &lt;char&gt;      &lt;char&gt;</span></span>
<span><span class="co">#&gt;    1:     ISE MID25783178</span></span>
<span><span class="co">#&gt;    2:      CE MID25783441</span></span>
<span><span class="co">#&gt;    3:      EE MID25783491</span></span>
<span><span class="co">#&gt;   ---                    </span></span>
<span><span class="co">#&gt; 7658:      ME MID26697163</span></span>
<span><span class="co">#&gt; 7659:      ME MID26697444</span></span>
<span><span class="co">#&gt; 7660:      EE MID26697447</span></span></code></pre>
<p><em>Copy.</em>   To prepare for joining with graduates.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Prepare for joining</span></span>
<span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setcolorder.html" class="external-link">setcolorder</a></span><span class="op">(</span><span class="va">DT</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">ever_enrolled</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">DT</span><span class="op">)</span></span>
<span><span class="va">ever_enrolled</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;              mcid program</span></span>
<span><span class="co">#&gt;            &lt;char&gt;  &lt;char&gt;</span></span>
<span><span class="co">#&gt;    1: MID25783178     ISE</span></span>
<span><span class="co">#&gt;    2: MID25783441      CE</span></span>
<span><span class="co">#&gt;    3: MID25783491      EE</span></span>
<span><span class="co">#&gt;   ---                    </span></span>
<span><span class="co">#&gt; 7658: MID26697163      ME</span></span>
<span><span class="co">#&gt; 7659: MID26697444      ME</span></span>
<span><span class="co">#&gt; 7660: MID26697447      EE</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="graduates">Graduates<a class="anchor" aria-label="anchor" href="#graduates"></a>
</h2>
<p><em>Preparation.</em>   The baseline data frame we preserved earlier
is the intake for this section.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Reset the working data frame</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">baseline</span><span class="op">)</span></span></code></pre></div>
<p><em>Graduates</em>   The summary code chunk from <a href="art-080-graduates.html#reusable-code">Graduates</a></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Gather graduates and their degree CIPs</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_timely_term.html">add_timely_term</a></span><span class="op">(</span><span class="va">DT</span>, <span class="va">term</span><span class="op">)</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_completion_status.html">add_completion_status</a></span><span class="op">(</span><span class="va">DT</span>, <span class="va">degree</span><span class="op">)</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="va">completion_status</span> <span class="op">==</span> <span class="st">"timely"</span><span class="op">]</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">degree</span><span class="op">[</span><span class="va">DT</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">cip6</span><span class="op">)</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Filter by program</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">study_programs</span><span class="op">[</span><span class="va">DT</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cip6"</span><span class="op">)</span>, nomatch <span class="op">=</span> <span class="cn">NULL</span><span class="op">]</span></span>
<span><span class="va">DT</span><span class="op">[</span>, <span class="va">cip6</span> <span class="op">:=</span> <span class="cn">NULL</span><span class="op">]</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">DT</span><span class="op">)</span></span>
<span><span class="va">DT</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;       program        mcid</span></span>
<span><span class="co">#&gt;        &lt;char&gt;      &lt;char&gt;</span></span>
<span><span class="co">#&gt;    1:     ISE MID25783178</span></span>
<span><span class="co">#&gt;    2:      CE MID25783441</span></span>
<span><span class="co">#&gt;    3:      EE MID25783491</span></span>
<span><span class="co">#&gt;   ---                    </span></span>
<span><span class="co">#&gt; 3620:      ME MID26696967</span></span>
<span><span class="co">#&gt; 3621:      ME MID26697163</span></span>
<span><span class="co">#&gt; 3622:      EE MID26697447</span></span></code></pre>
<p><em>Copy.</em>   To prepare for joining with ever enrolled</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Prepare for joining</span></span>
<span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setcolorder.html" class="external-link">setcolorder</a></span><span class="op">(</span><span class="va">DT</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">graduates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">DT</span><span class="op">)</span></span>
<span><span class="va">graduates</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;              mcid program</span></span>
<span><span class="co">#&gt;            &lt;char&gt;  &lt;char&gt;</span></span>
<span><span class="co">#&gt;    1: MID25783178     ISE</span></span>
<span><span class="co">#&gt;    2: MID25783441      CE</span></span>
<span><span class="co">#&gt;    3: MID25783491      EE</span></span>
<span><span class="co">#&gt;   ---                    </span></span>
<span><span class="co">#&gt; 3620: MID26696967      ME</span></span>
<span><span class="co">#&gt; 3621: MID26697163      ME</span></span>
<span><span class="co">#&gt; 3622: MID26697447      EE</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="groupings">Groupings<a class="anchor" aria-label="anchor" href="#groupings"></a>
</h2>
<p>One of our grouping variables (<code>program</code>) is already
included in the data frames. The next grouping variable is
<code>bloc</code> to distinguish starters from graduates when the two
data frames are combined.</p>
<p><em>Add a variable.</em>   Label eve enrolled and graduates.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># For grouping by bloc</span></span>
<span><span class="va">ever_enrolled</span><span class="op">[</span>, <span class="va">bloc</span> <span class="op">:=</span> <span class="st">"ever_enrolled"</span><span class="op">]</span></span>
<span><span class="va">graduates</span><span class="op">[</span>, <span class="va">bloc</span> <span class="op">:=</span> <span class="st">"graduates"</span><span class="op">]</span></span></code></pre></div>
<p><em>Join.</em>   Combine the two blocs to prepare for summarizing. A
graduate has two observations in these data: one as ever enrolled and
one as a graduate.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Prepare for summarizing</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/rbindlist.html" class="external-link">rbindlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">ever_enrolled</span>, <span class="va">graduates</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">DT</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;               mcid program          bloc</span></span>
<span><span class="co">#&gt;             &lt;char&gt;  &lt;char&gt;        &lt;char&gt;</span></span>
<span><span class="co">#&gt;     1: MID25783178     ISE ever_enrolled</span></span>
<span><span class="co">#&gt;     2: MID25783441      CE ever_enrolled</span></span>
<span><span class="co">#&gt;     3: MID25783491      EE ever_enrolled</span></span>
<span><span class="co">#&gt;    ---                                  </span></span>
<span><span class="co">#&gt; 11280: MID26696967      ME     graduates</span></span>
<span><span class="co">#&gt; 11281: MID26697163      ME     graduates</span></span>
<span><span class="co">#&gt; 11282: MID26697447      EE     graduates</span></span></code></pre>
<p><em>Add variables.</em>   Demographics from <a href="art-090-groupings.html#reusable-code">Groupings</a></p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Join race/ethnicity and sex</span></span>
<span><span class="va">cols_we_want</span> <span class="op">&lt;-</span> <span class="va">student</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">race</span>, <span class="va">sex</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">cols_we_want</span><span class="op">[</span><span class="va">DT</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">DT</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;               mcid   race    sex program          bloc</span></span>
<span><span class="co">#&gt;             &lt;char&gt; &lt;char&gt; &lt;char&gt;  &lt;char&gt;        &lt;char&gt;</span></span>
<span><span class="co">#&gt;     1: MID25783178  Black   Male     ISE ever_enrolled</span></span>
<span><span class="co">#&gt;     2: MID25783441  White   Male      CE ever_enrolled</span></span>
<span><span class="co">#&gt;     3: MID25783491  White   Male      EE ever_enrolled</span></span>
<span><span class="co">#&gt;    ---                                                </span></span>
<span><span class="co">#&gt; 11280: MID26696967  White   Male      ME     graduates</span></span>
<span><span class="co">#&gt; 11281: MID26697163 Latine   Male      ME     graduates</span></span>
<span><span class="co">#&gt; 11282: MID26697447  Asian   Male      EE     graduates</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="stickiness">Stickiness<a class="anchor" aria-label="anchor" href="#stickiness"></a>
</h2>
<p><em>Summarize.</em>   Count the numbers of observations for each
combination of the grouping variables.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Count observations by group</span></span>
<span><span class="va">grouping_variables</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bloc"</span>, <span class="st">"program"</span>, <span class="st">"sex"</span>, <span class="st">"race"</span><span class="op">)</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span>, <span class="va">.N</span>, by <span class="op">=</span> <span class="va">grouping_variables</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html" class="external-link">setorderv</a></span><span class="op">(</span><span class="va">DT</span>, <span class="va">grouping_variables</span><span class="op">)</span></span>
<span><span class="va">DT</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;               bloc program    sex            race     N</span></span>
<span><span class="co">#&gt;             &lt;char&gt;  &lt;char&gt; &lt;char&gt;          &lt;char&gt; &lt;int&gt;</span></span>
<span><span class="co">#&gt;   1: ever_enrolled      CE Female           Asian    16</span></span>
<span><span class="co">#&gt;   2: ever_enrolled      CE Female           Black    49</span></span>
<span><span class="co">#&gt;   3: ever_enrolled      CE Female   International     1</span></span>
<span><span class="co">#&gt;   4: ever_enrolled      CE Female          Latine    10</span></span>
<span><span class="co">#&gt;   5: ever_enrolled      CE Female   Other/Unknown     6</span></span>
<span><span class="co">#&gt;   6: ever_enrolled      CE Female           White   304</span></span>
<span><span class="co">#&gt;   7: ever_enrolled      CE   Male           Asian    34</span></span>
<span><span class="co">#&gt;  ---                                                   </span></span>
<span><span class="co">#&gt;  99:     graduates      ME   Male           Asian    59</span></span>
<span><span class="co">#&gt; 100:     graduates      ME   Male           Black    65</span></span>
<span><span class="co">#&gt; 101:     graduates      ME   Male   International    17</span></span>
<span><span class="co">#&gt; 102:     graduates      ME   Male          Latine    29</span></span>
<span><span class="co">#&gt; 103:     graduates      ME   Male Native American     4</span></span>
<span><span class="co">#&gt; 104:     graduates      ME   Male   Other/Unknown    21</span></span>
<span><span class="co">#&gt; 105:     graduates      ME   Male           White   936</span></span></code></pre>
<p><em>Reshape.</em>   Transform to row-record form to set up the
stickiness metric calculation. Transform the <em>N</em> column into two
columns, one for ever-enrolled and one for graduates.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Prepare to compute metric</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/dcast.data.table.html" class="external-link">dcast</a></span><span class="op">(</span><span class="va">DT</span>, <span class="va">program</span> <span class="op">+</span> <span class="va">sex</span> <span class="op">+</span> <span class="va">race</span> <span class="op">~</span> <span class="va">bloc</span>, value.var <span class="op">=</span> <span class="st">"N"</span>, fill <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span><span class="va">DT</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;     program    sex            race ever_enrolled graduates</span></span>
<span><span class="co">#&gt;      &lt;char&gt; &lt;char&gt;          &lt;char&gt;         &lt;int&gt;     &lt;int&gt;</span></span>
<span><span class="co">#&gt;  1:      CE Female           Asian            16         9</span></span>
<span><span class="co">#&gt;  2:      CE Female           Black            49        15</span></span>
<span><span class="co">#&gt;  3:      CE Female   International             1         0</span></span>
<span><span class="co">#&gt;  4:      CE Female          Latine            10         5</span></span>
<span><span class="co">#&gt;  5:      CE Female   Other/Unknown             6         2</span></span>
<span><span class="co">#&gt;  6:      CE Female           White           304       160</span></span>
<span><span class="co">#&gt;  7:      CE   Male           Asian            34        17</span></span>
<span><span class="co">#&gt; ---                                                       </span></span>
<span><span class="co">#&gt; 49:      ME   Male           Asian           118        59</span></span>
<span><span class="co">#&gt; 50:      ME   Male           Black           202        65</span></span>
<span><span class="co">#&gt; 51:      ME   Male   International            36        17</span></span>
<span><span class="co">#&gt; 52:      ME   Male          Latine            76        29</span></span>
<span><span class="co">#&gt; 53:      ME   Male Native American            14         4</span></span>
<span><span class="co">#&gt; 54:      ME   Male   Other/Unknown            43        21</span></span>
<span><span class="co">#&gt; 55:      ME   Male           White          1776       936</span></span></code></pre>
<p><em>Create a variable.</em>   Compute the metric.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Compute metric</span></span>
<span><span class="va">DT</span><span class="op">[</span>, <span class="va">stickiness</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fl">100</span> <span class="op">*</span> <span class="va">graduates</span> <span class="op">/</span> <span class="va">ever_enrolled</span>, <span class="fl">1</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">DT</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;     program    sex            race ever_enrolled graduates stickiness</span></span>
<span><span class="co">#&gt;      &lt;char&gt; &lt;char&gt;          &lt;char&gt;         &lt;int&gt;     &lt;int&gt;      &lt;num&gt;</span></span>
<span><span class="co">#&gt;  1:      CE Female           Asian            16         9       56.2</span></span>
<span><span class="co">#&gt;  2:      CE Female           Black            49        15       30.6</span></span>
<span><span class="co">#&gt;  3:      CE Female   International             1         0        0.0</span></span>
<span><span class="co">#&gt;  4:      CE Female          Latine            10         5       50.0</span></span>
<span><span class="co">#&gt;  5:      CE Female   Other/Unknown             6         2       33.3</span></span>
<span><span class="co">#&gt;  6:      CE Female           White           304       160       52.6</span></span>
<span><span class="co">#&gt;  7:      CE   Male           Asian            34        17       50.0</span></span>
<span><span class="co">#&gt; ---                                                                  </span></span>
<span><span class="co">#&gt; 49:      ME   Male           Asian           118        59       50.0</span></span>
<span><span class="co">#&gt; 50:      ME   Male           Black           202        65       32.2</span></span>
<span><span class="co">#&gt; 51:      ME   Male   International            36        17       47.2</span></span>
<span><span class="co">#&gt; 52:      ME   Male          Latine            76        29       38.2</span></span>
<span><span class="co">#&gt; 53:      ME   Male Native American            14         4       28.6</span></span>
<span><span class="co">#&gt; 54:      ME   Male   Other/Unknown            43        21       48.8</span></span>
<span><span class="co">#&gt; 55:      ME   Male           White          1776       936       52.7</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="prepare-for-dissemination">Prepare for dissemination<a class="anchor" aria-label="anchor" href="#prepare-for-dissemination"></a>
</h2>
<p><em>Filter.</em>   Let us assume that our study focuses on “domestic”
students of known race/ethnicity. In that case, we omit observations
labeled “International” and “Other/Unknown”.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Study design assumption</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="op">!</span><span class="va">race</span> <span class="op"><a href="https://Rdatatable.gitlab.io/data.table/reference/chmatch.html" class="external-link">%chin%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"International"</span>, <span class="st">"Other/Unknown"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">DT</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;     program    sex            race ever_enrolled graduates stickiness</span></span>
<span><span class="co">#&gt;      &lt;char&gt; &lt;char&gt;          &lt;char&gt;         &lt;int&gt;     &lt;int&gt;      &lt;num&gt;</span></span>
<span><span class="co">#&gt;  1:      CE Female           Asian            16         9       56.2</span></span>
<span><span class="co">#&gt;  2:      CE Female           Black            49        15       30.6</span></span>
<span><span class="co">#&gt;  3:      CE Female          Latine            10         5       50.0</span></span>
<span><span class="co">#&gt; ---                                                                  </span></span>
<span><span class="co">#&gt; 37:      ME   Male          Latine            76        29       38.2</span></span>
<span><span class="co">#&gt; 38:      ME   Male Native American            14         4       28.6</span></span>
<span><span class="co">#&gt; 39:      ME   Male           White          1776       936       52.7</span></span></code></pre>
<p><em>Filter.</em>   To preserve the anonymity of the people involved,
we remove observations with fewer than <code>N_threshold</code>
graduates. With the research data, we typically set this threshold to
10; with the practice data, we demonstrate the procedure using a
threshold of 5.</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Preserve anonymity</span></span>
<span><span class="va">N_threshold</span> <span class="op">&lt;-</span> <span class="fl">5</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="va">graduates</span> <span class="op">&gt;=</span> <span class="va">N_threshold</span><span class="op">]</span></span>
<span><span class="va">DT</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;     program    sex   race ever_enrolled graduates stickiness</span></span>
<span><span class="co">#&gt;      &lt;char&gt; &lt;char&gt; &lt;char&gt;         &lt;int&gt;     &lt;int&gt;      &lt;num&gt;</span></span>
<span><span class="co">#&gt;  1:      CE Female  Asian            16         9       56.2</span></span>
<span><span class="co">#&gt;  2:      CE Female  Black            49        15       30.6</span></span>
<span><span class="co">#&gt;  3:      CE Female Latine            10         5       50.0</span></span>
<span><span class="co">#&gt; ---                                                         </span></span>
<span><span class="co">#&gt; 29:      ME   Male  Black           202        65       32.2</span></span>
<span><span class="co">#&gt; 30:      ME   Male Latine            76        29       38.2</span></span>
<span><span class="co">#&gt; 31:      ME   Male  White          1776       936       52.7</span></span></code></pre>
<p><em>Add a variable.</em>   We combine race/ethnicity and sex to
create a combined grouping variable.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a combined category</span></span>
<span><span class="va">DT</span><span class="op">[</span>, <span class="va">people</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">race</span>, <span class="va">sex</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">DT</span><span class="op">[</span>, <span class="fu">`:=`</span><span class="op">(</span>race <span class="op">=</span> <span class="cn">NULL</span>, sex <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setcolorder.html" class="external-link">setcolorder</a></span><span class="op">(</span><span class="va">DT</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"program"</span>, <span class="st">"people"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">DT</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;     program        people ever_enrolled graduates stickiness</span></span>
<span><span class="co">#&gt;      &lt;char&gt;        &lt;char&gt;         &lt;int&gt;     &lt;int&gt;      &lt;num&gt;</span></span>
<span><span class="co">#&gt;  1:      CE  Asian Female            16         9       56.2</span></span>
<span><span class="co">#&gt;  2:      CE  Black Female            49        15       30.6</span></span>
<span><span class="co">#&gt;  3:      CE Latine Female            10         5       50.0</span></span>
<span><span class="co">#&gt; ---                                                         </span></span>
<span><span class="co">#&gt; 29:      ME    Black Male           202        65       32.2</span></span>
<span><span class="co">#&gt; 30:      ME   Latine Male            76        29       38.2</span></span>
<span><span class="co">#&gt; 31:      ME    White Male          1776       936       52.7</span></span></code></pre>
<p><em>Recode.</em>   Readers can more readily interpret our charts and
tables if the programs are unabbreviated.</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Recode values for chart and table readability</span></span>
<span><span class="va">DT</span><span class="op">[</span>, <span class="va">program</span> <span class="op">:=</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/fcase.html" class="external-link">fcase</a></span><span class="op">(</span></span>
<span>  <span class="va">program</span> <span class="op"><a href="https://Rdatatable.gitlab.io/data.table/reference/like.html" class="external-link">%like%</a></span> <span class="st">"CE"</span>, <span class="st">"Civil"</span>,</span>
<span>  <span class="va">program</span> <span class="op"><a href="https://Rdatatable.gitlab.io/data.table/reference/like.html" class="external-link">%like%</a></span> <span class="st">"EE"</span>, <span class="st">"Electrical"</span>,</span>
<span>  <span class="va">program</span> <span class="op"><a href="https://Rdatatable.gitlab.io/data.table/reference/like.html" class="external-link">%like%</a></span> <span class="st">"ME"</span>, <span class="st">"Mechanical"</span>,</span>
<span>  <span class="va">program</span> <span class="op"><a href="https://Rdatatable.gitlab.io/data.table/reference/like.html" class="external-link">%like%</a></span> <span class="st">"ISE"</span>, <span class="st">"Industrial/Systems"</span></span>
<span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">DT</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;        program        people ever_enrolled graduates stickiness</span></span>
<span><span class="co">#&gt;         &lt;char&gt;        &lt;char&gt;         &lt;int&gt;     &lt;int&gt;      &lt;num&gt;</span></span>
<span><span class="co">#&gt;  1:      Civil  Asian Female            16         9       56.2</span></span>
<span><span class="co">#&gt;  2:      Civil  Black Female            49        15       30.6</span></span>
<span><span class="co">#&gt;  3:      Civil Latine Female            10         5       50.0</span></span>
<span><span class="co">#&gt; ---                                                            </span></span>
<span><span class="co">#&gt; 29: Mechanical    Black Male           202        65       32.2</span></span>
<span><span class="co">#&gt; 30: Mechanical   Latine Male            76        29       38.2</span></span>
<span><span class="co">#&gt; 31: Mechanical    White Male          1776       936       52.7</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="displays">Displays<a class="anchor" aria-label="anchor" href="#displays"></a>
</h2>
<p><em>Order factors.</em>   Order the levels of the categories. Code
adapted from <a href="art-120-multiway.html#percentage-ordered-data">Multiway data and
charts</a>.</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Order the categories</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/order_multiway.html">order_multiway</a></span><span class="op">(</span><span class="va">DT</span>,</span>
<span>  quantity   <span class="op">=</span> <span class="st">"stickiness"</span>,</span>
<span>  categories <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"program"</span>, <span class="st">"people"</span><span class="op">)</span>,</span>
<span>  method     <span class="op">=</span> <span class="st">"percent"</span>,</span>
<span>  ratio_of   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"graduates"</span>, <span class="st">"ever_enrolled"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">DT</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;        program        people graduates ever_enrolled stickiness</span></span>
<span><span class="co">#&gt;         &lt;fctr&gt;        &lt;fctr&gt;     &lt;num&gt;         &lt;num&gt;      &lt;num&gt;</span></span>
<span><span class="co">#&gt;  1:      Civil  Asian Female         9            16       56.2</span></span>
<span><span class="co">#&gt;  2:      Civil  Black Female        15            49       30.6</span></span>
<span><span class="co">#&gt;  3:      Civil Latine Female         5            10       50.0</span></span>
<span><span class="co">#&gt; ---                                                            </span></span>
<span><span class="co">#&gt; 29: Mechanical    Black Male        65           202       32.2</span></span>
<span><span class="co">#&gt; 30: Mechanical   Latine Male        29            76       38.2</span></span>
<span><span class="co">#&gt; 31: Mechanical    White Male       936          1776       52.7</span></span>
<span><span class="co">#&gt;     program_stickiness people_stickiness</span></span>
<span><span class="co">#&gt;                  &lt;num&gt;             &lt;num&gt;</span></span>
<span><span class="co">#&gt;  1:               51.6              44.0</span></span>
<span><span class="co">#&gt;  2:               51.6              39.5</span></span>
<span><span class="co">#&gt;  3:               51.6              51.4</span></span>
<span><span class="co">#&gt; ---                                     </span></span>
<span><span class="co">#&gt; 29:               48.9              34.2</span></span>
<span><span class="co">#&gt; 30:               48.9              41.5</span></span>
<span><span class="co">#&gt; 31:               48.9              50.7</span></span></code></pre>
<p><em>Multiway chart.</em>   Code adapted from <a href="art-120-multiway.html#percentage-ordered-charts">Multiway data and
charts</a>.</p>
<p>The vertical reference line is the aggregate stickiness of the
program, independent of race/ethnicity and sex.</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">DT</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">stickiness</span>, y <span class="op">=</span> <span class="va">people</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">program</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">1</span>, as.table <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="va">program_stickiness</span><span class="op">)</span>, linetype <span class="op">=</span> <span class="fl">2</span>, linewidth <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Stickiness (%)"</span>, y <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span>limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">65</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="../reference/figures/art-110-stickiness-fig2-1.png" alt="Figure 2: Stickiness of four Engineering majors." width="80%"><p class="caption">
Figure 2: Stickiness of four Engineering majors.
</p>
</div>
<p><br></p>
<p><em>Results table.</em>   Code adapted from <a href="art-120-multiway.html#tabulating-counts">Multiway data and
charts</a>.</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Select variables and remove factors</span></span>
<span><span class="va">display_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">DT</span><span class="op">)</span></span>
<span><span class="va">display_table</span> <span class="op">&lt;-</span> <span class="va">display_table</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">program</span>, <span class="va">people</span>, <span class="va">stickiness</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">display_table</span><span class="op">[</span>, <span class="va">people</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">people</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">display_table</span><span class="op">[</span>, <span class="va">program</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">program</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Construct table</span></span>
<span><span class="va">display_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/dcast.data.table.html" class="external-link">dcast</a></span><span class="op">(</span><span class="va">display_table</span>, <span class="va">people</span> <span class="op">~</span> <span class="va">program</span>, value.var <span class="op">=</span> <span class="st">"stickiness"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setattr.html" class="external-link">setnames</a></span><span class="op">(</span><span class="va">display_table</span>,</span>
<span>  old <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"people"</span><span class="op">)</span>,</span>
<span>  new <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"People"</span><span class="op">)</span>,</span>
<span>  skip_absent <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="va">display_table</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;           People Civil Electrical Industrial/Systems Mechanical</span></span>
<span><span class="co">#&gt;           &lt;char&gt; &lt;num&gt;      &lt;num&gt;              &lt;num&gt;      &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:  Asian Female  56.2       38.9               35.7       59.1</span></span>
<span><span class="co">#&gt; 2:    Asian Male  50.0       46.0               52.3       50.0</span></span>
<span><span class="co">#&gt; 3:  Black Female  30.6       40.7               48.4       32.0</span></span>
<span><span class="co">#&gt; 4:    Black Male  27.8       33.8               44.7       32.2</span></span>
<span><span class="co">#&gt; 5: Latine Female  50.0       42.9               61.5         NA</span></span>
<span><span class="co">#&gt; 6:   Latine Male  41.5       34.9               62.5       38.2</span></span>
<span><span class="co">#&gt; 7:  White Female  52.6       32.4               54.7       42.5</span></span>
<span><span class="co">#&gt; 8:    White Male  54.8       42.5               54.7       52.7</span></span></code></pre>
<p>(Optional) Format the table nearer to publication quality. Here I use
<code>kable()</code> from the knitr package.</p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">display_table</span>,</span>
<span>  align <span class="op">=</span> <span class="st">"lrrrr"</span>,</span>
<span>  caption <span class="op">=</span> <span class="st">"Table 2: Stickiness (%) of four Engineering majors."</span></span>
<span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>
Table 2: Stickiness (%) of four Engineering majors.
</caption>
<thead><tr>
<th style="text-align:left;">
People
</th>
<th style="text-align:right;">
Civil
</th>
<th style="text-align:right;">
Electrical
</th>
<th style="text-align:right;">
Industrial/Systems
</th>
<th style="text-align:right;">
Mechanical
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Asian Female
</td>
<td style="text-align:right;">
56.2
</td>
<td style="text-align:right;">
38.9
</td>
<td style="text-align:right;">
35.7
</td>
<td style="text-align:right;">
59.1
</td>
</tr>
<tr>
<td style="text-align:left;">
Asian Male
</td>
<td style="text-align:right;">
50.0
</td>
<td style="text-align:right;">
46.0
</td>
<td style="text-align:right;">
52.3
</td>
<td style="text-align:right;">
50.0
</td>
</tr>
<tr>
<td style="text-align:left;">
Black Female
</td>
<td style="text-align:right;">
30.6
</td>
<td style="text-align:right;">
40.7
</td>
<td style="text-align:right;">
48.4
</td>
<td style="text-align:right;">
32.0
</td>
</tr>
<tr>
<td style="text-align:left;">
Black Male
</td>
<td style="text-align:right;">
27.8
</td>
<td style="text-align:right;">
33.8
</td>
<td style="text-align:right;">
44.7
</td>
<td style="text-align:right;">
32.2
</td>
</tr>
<tr>
<td style="text-align:left;">
Latine Female
</td>
<td style="text-align:right;">
50.0
</td>
<td style="text-align:right;">
42.9
</td>
<td style="text-align:right;">
61.5
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Latine Male
</td>
<td style="text-align:right;">
41.5
</td>
<td style="text-align:right;">
34.9
</td>
<td style="text-align:right;">
62.5
</td>
<td style="text-align:right;">
38.2
</td>
</tr>
<tr>
<td style="text-align:left;">
White Female
</td>
<td style="text-align:right;">
52.6
</td>
<td style="text-align:right;">
32.4
</td>
<td style="text-align:right;">
54.7
</td>
<td style="text-align:right;">
42.5
</td>
</tr>
<tr>
<td style="text-align:left;">
White Male
</td>
<td style="text-align:right;">
54.8
</td>
<td style="text-align:right;">
42.5
</td>
<td style="text-align:right;">
54.7
</td>
<td style="text-align:right;">
52.7
</td>
</tr>
</tbody>
</table>
<p>A value of NA indicates a group removed because the number of
graduates was below the threshold set to preserve anonymity.</p>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" line-spacing="2">
<div id="ref-Dowle+Srinivasan:2021:data.table" class="csl-entry">
Dowle, M., &amp; Srinivasan, A. (2021). <em><span class="nocase">data.table: Extension of data.frame</span></em>.
R package version 1.14.2. <a href="https://CRAN.R-project.org/package=data.table" class="external-link">https://CRAN.R-project.org/package=data.table</a>
</div>
<div id="ref-data.table-reference-semantics" class="csl-entry">
Dowle, M., &amp; Srinivasan, A. (2022). <em><span class="nocase">Reference semantics [data.table]</span></em>. <a href="https://rdatatable.gitlab.io/data.table/articles/datatable-reference-semantics.html" class="external-link">https://rdatatable.gitlab.io/data.table/articles/datatable-reference-semantics.html</a>
</div>
<div id="ref-Ohland+Orr+others:2012" class="csl-entry">
Ohland, M., Orr, M., Layton, R., Lord, S., &amp; Long, R. (2012). <span class="nocase">Introducing stickiness as a versatile metric of
engineering persistence</span>. <em><span class="nocase">Proceedings of
the Frontiers in Education Conference</span></em>, 1–5.
</div>
<div id="ref-Wickham:2016:ggplot2" class="csl-entry">
Wickham, H. (2016). <em><span class="nocase">ggplot2: Elegant Graphics
for Data Analysis</span></em>. <span>ISBN 978-3-319-24277-4</span>;
Springer-Verlag New York. <a href="https://ggplot2.tidyverse.org" class="external-link">https://ggplot2.tidyverse.org</a>
</div>
</div>
<style type="text/css">
blockquote {
    padding:     10px 20px;
    margin:      0 0 20px;
    border-left: 0px
}
caption {
    color:       #525252;
    text-align:  left;
    font-weight: normal;
    font-size:   medium;
    line-height: 1.5;
}
</style>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://github.com/graphdr" class="external-link">Richard Layton</a>, Russell Long, Matthew Ohland, Marisa Orr, Susan Lord, US National Science Foundation.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
