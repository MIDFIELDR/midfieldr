<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Multiway graphs and tables • midfieldr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Multiway graphs and tables">
<meta property="og:description" content="midfieldr">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">midfieldr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0.9010</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/get_started.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/data_basics.html">Data basics</a>
    </li>
    <li>
      <a href="../articles/multiway_graphs.html">Multiway graphs and tables</a>
    </li>
    <li>
      <a href="../articles/identify_programs.html">Identify programs</a>
    </li>
    <li>
      <a href="../articles/handle_fye.html">Handle FYE programs</a>
    </li>
    <li>
      <a href="../articles/feasible_completion.html">Feasible completion</a>
    </li>
    <li>
      <a href="../articles/timely-completion.html">Timely completion</a>
    </li>
    <li>
      <a href="../articles/graduation_rate.html">Graduation rate</a>
    </li>
    <li>
      <a href="../articles/stickiness_metric.html">Stickiness metric</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../articles/pages/get_session.html">Session info</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../articles/pages/about_midfield.html">About</a>
</li>
<li>
  <a href="https://github.com/MIDFIELDR/midfieldr">
    <span class="fas fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="multiway_graphs_files/header-attrs-2.7/header-attrs.js"></script><script src="multiway_graphs_files/kePrint-0.0.1/kePrint.js"></script><link href="multiway_graphs_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Multiway graphs and tables</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/MIDFIELDR/midfieldr/blob/master/vignettes/multiway_graphs.Rmd"><code>vignettes/multiway_graphs.Rmd</code></a></small>
      <div class="hidden name"><code>multiway_graphs.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>For initial exploration of possible stories in the data, the most common graph design used by the MIDFIELD team is the multiway graph. We examine multiway data here, in this initial tutorial, because as Wickham states <span class="citation">(<a href="#ref-Wickham+Grolemund:2017" role="doc-biblioref">Wickham and Grolemund, 2017</a>)</span>,</p>
<blockquote>
<p>Visualization is a great place to start with R programming, because the payoff is so clear; you get to make elegant and informative plots that help you understand the data.</p>
</blockquote>
<p>Many persistence metrics can be organized as <em>multiway data</em> in which there is is one quantitative variable and two categorical variables. As explained by its inventor <span class="citation">(<a href="#ref-Cleveland:1993" role="doc-biblioref">Cleveland, 1993</a>)</span>,</p>
<blockquote>
<p>… the quantitative variable is a response, and the goal is to study how it depends on the categorical variables, which are factors. What distinguishes multiway data is the cross-classification of the categorical variables; there is a value of the response for each combination of levels of the two categorical variables.</p>
</blockquote>
<p>The structure of multiway data is specific: one categorical variable with <span class="math inline">\(m\)</span> levels, an independent second categorical variable with <span class="math inline">\(n\)</span> levels, and a single quantitative value associated with every combinations of levels of the two categories. Multiway data are typically organized as three columns with <span class="math inline">\(m \times n\)</span> rows.</p>
<p>The categorical variables can also be considered keys to the values of the quantitative variable.</p>
<div id="this-vignette-uses" class="section level3">
<h3 class="hasAnchor">
<a href="#this-vignette-uses" class="anchor"></a>This vignette uses</h3>
<p>midfieldr functions</p>
<ul>
<li>
<code><a href="../reference/prepare_multiway.html">prepare_multiway()</a></code> described in this vignette</li>
</ul>
<p>midfieldr built-in data sets</p>
<ul>
<li>
<code>rep_stickiness</code> described in <a href="stickiness_metric.html">Stickiness metric</a>
</li>
</ul>
<p>packages</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># packages used</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/MIDFIELDR/midfieldr">midfieldr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com">data.table</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>

<span class="co"># print max 20 rows, otherwise 10 rows each head/tail</span>
<span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span>datatable.print.nrows <span class="op">=</span> <span class="fl">20</span>, datatable.print.topn <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="conditioning-multiway-data" class="section level2">
<h2 class="hasAnchor">
<a href="#conditioning-multiway-data" class="anchor"></a>Conditioning multiway data</h2>
<p>Longitudinal “stickiness” is the ratio of the number of students graduating in a program to the number of students ever enrolled in that program <span class="citation">(<a href="#ref-Ohland+Orr+others:2012" role="doc-biblioref">Ohland et al., 2012</a>)</span>.</p>
<p>The stickiness data in this case study are available as the built-in data set <code>rep_stickiness</code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># examine the built-in data </span>
<span class="va">rep_stickiness</span>
<span class="co">#&gt;                    program            race    sex ever grad stick</span>
<span class="co">#&gt;  1:      Civil Engineering           Asian Female   22   11  0.50</span>
<span class="co">#&gt;  2:      Civil Engineering           Asian   Male   52   24  0.46</span>
<span class="co">#&gt;  3:      Civil Engineering           Black Female   57   21  0.37</span>
<span class="co">#&gt;  4:      Civil Engineering           Black   Male  106   39  0.37</span>
<span class="co">#&gt;  5:      Civil Engineering        Hispanic Female   12    5  0.42</span>
<span class="co">#&gt;  6:      Civil Engineering        Hispanic   Male   66   30  0.45</span>
<span class="co">#&gt;  7:      Civil Engineering           White Female  415  192  0.46</span>
<span class="co">#&gt;  8:      Civil Engineering           White   Male 1410  708  0.50</span>
<span class="co">#&gt;  9: Electrical Engineering           Asian Female   46   22  0.48</span>
<span class="co">#&gt; 10: Electrical Engineering           Asian   Male  226  120  0.53</span>
<span class="co">#&gt; ---                                                              </span>
<span class="co">#&gt; 23: Industrial Engineering           White   Male  619  354  0.57</span>
<span class="co">#&gt; 24: Mechanical Engineering           Asian Female   24   15  0.62</span>
<span class="co">#&gt; 25: Mechanical Engineering           Asian   Male  140   82  0.59</span>
<span class="co">#&gt; 26: Mechanical Engineering           Black Female   96   34  0.35</span>
<span class="co">#&gt; 27: Mechanical Engineering           Black   Male  237   87  0.37</span>
<span class="co">#&gt; 28: Mechanical Engineering        Hispanic Female   13    5  0.38</span>
<span class="co">#&gt; 29: Mechanical Engineering        Hispanic   Male   88   39  0.44</span>
<span class="co">#&gt; 30: Mechanical Engineering Native American   Male   15    5  0.33</span>
<span class="co">#&gt; 31: Mechanical Engineering           White Female  352  141  0.40</span>
<span class="co">#&gt; 32: Mechanical Engineering           White   Male 2470 1166  0.47</span></code></pre></div>
<p>You may view its help page by running</p>
<pre><code><a href="../reference/rep_stickiness.html">? rep_stickiness</a></code></pre>
<p>In general, data like these—ready to be conditioned as multiway data—can be considered “pre-multiway”, denoted by the new name assignment, <code>pre_mw</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create a new memory location </span>
<span class="va">pre_mw</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html">copy</a></span><span class="op">(</span><span class="va">rep_stickiness</span><span class="op">)</span></code></pre></div>
<p>The quantitative variable is <code>stick</code> (stickiness); the first categorical variable is <code>program</code>; the second categorical variable is race/ethnicity/sex. We construct the <code>race_sex</code> variable by combining two columns.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create a combined race/ethnicity/sex variable</span>
<span class="va">pre_mw</span><span class="op">[</span>, <span class="va">race_sex</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">race</span>, <span class="va">sex</span><span class="op">)</span><span class="op">]</span></code></pre></div>
<p>We select the three multiway variables, dropping the other columns.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># select columns</span>
<span class="va">columns_we_want</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"program"</span>, <span class="st">"race_sex"</span>, <span class="st">"stick"</span><span class="op">)</span>
<span class="va">pre_mw</span> <span class="op">&lt;-</span> <span class="va">pre_mw</span><span class="op">[</span>, <span class="va">..columns_we_want</span><span class="op">]</span>

<span class="co"># examine the result</span>
<span class="va">pre_mw</span>
<span class="co">#&gt;                    program             race_sex stick</span>
<span class="co">#&gt;  1:      Civil Engineering         Asian Female  0.50</span>
<span class="co">#&gt;  2:      Civil Engineering           Asian Male  0.46</span>
<span class="co">#&gt;  3:      Civil Engineering         Black Female  0.37</span>
<span class="co">#&gt;  4:      Civil Engineering           Black Male  0.37</span>
<span class="co">#&gt;  5:      Civil Engineering      Hispanic Female  0.42</span>
<span class="co">#&gt;  6:      Civil Engineering        Hispanic Male  0.45</span>
<span class="co">#&gt;  7:      Civil Engineering         White Female  0.46</span>
<span class="co">#&gt;  8:      Civil Engineering           White Male  0.50</span>
<span class="co">#&gt;  9: Electrical Engineering         Asian Female  0.48</span>
<span class="co">#&gt; 10: Electrical Engineering           Asian Male  0.53</span>
<span class="co">#&gt; ---                                                  </span>
<span class="co">#&gt; 23: Industrial Engineering           White Male  0.57</span>
<span class="co">#&gt; 24: Mechanical Engineering         Asian Female  0.62</span>
<span class="co">#&gt; 25: Mechanical Engineering           Asian Male  0.59</span>
<span class="co">#&gt; 26: Mechanical Engineering         Black Female  0.35</span>
<span class="co">#&gt; 27: Mechanical Engineering           Black Male  0.37</span>
<span class="co">#&gt; 28: Mechanical Engineering      Hispanic Female  0.38</span>
<span class="co">#&gt; 29: Mechanical Engineering        Hispanic Male  0.44</span>
<span class="co">#&gt; 30: Mechanical Engineering Native American Male  0.33</span>
<span class="co">#&gt; 31: Mechanical Engineering         White Female  0.40</span>
<span class="co">#&gt; 32: Mechanical Engineering           White Male  0.47</span></code></pre></div>
<p>To confirm that the data are in the form we want,</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># number of levels of the two categories</span>
<span class="va">m_levels_program</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/duplicated.html">unique</a></span><span class="op">(</span><span class="va">pre_mw</span><span class="op">$</span><span class="va">program</span><span class="op">)</span><span class="op">)</span>
<span class="va">n_levels_race_sex</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/duplicated.html">unique</a></span><span class="op">(</span><span class="va">pre_mw</span><span class="op">$</span><span class="va">race_sex</span><span class="op">)</span><span class="op">)</span>

<span class="co"># examine the result</span>
<span class="va">m_levels_program</span>
<span class="co">#&gt; [1] 4</span>
<span class="va">n_levels_race_sex</span>
<span class="co">#&gt; [1] 9</span></code></pre></div>
<p>Thus we expect <span class="math inline">\(m \times n\)</span> = 36 observations. Instead, as described in the stickiness vignette, some rows are omitted to preserve confidentiality, leaving us with 32 observations.</p>
<p>Now we apply <code><a href="../reference/prepare_multiway.html">prepare_multiway()</a></code> to argument <code>pre_mw</code> to transform the data such that the two categorical variables are factors with levels ordered by medians of the quantitative variable.</p>
<p>You may view its help page by running</p>
<pre><code>? prepare_multiway()</code></pre>
<p>The result is ready for multiway graphing, so we name it <code>ready_mw</code>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># convert pre-multiway data to multiway data </span>
<span class="va">ready_mw</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/prepare_multiway.html">prepare_multiway</a></span><span class="op">(</span><span class="va">pre_mw</span><span class="op">)</span>

<span class="co"># examine the result</span>
<span class="va">ready_mw</span>
<span class="co">#&gt;                    program             race_sex stick</span>
<span class="co">#&gt;  1:      Civil Engineering         Asian Female  0.50</span>
<span class="co">#&gt;  2:      Civil Engineering           Asian Male  0.46</span>
<span class="co">#&gt;  3:      Civil Engineering         Black Female  0.37</span>
<span class="co">#&gt;  4:      Civil Engineering           Black Male  0.37</span>
<span class="co">#&gt;  5:      Civil Engineering      Hispanic Female  0.42</span>
<span class="co">#&gt;  6:      Civil Engineering        Hispanic Male  0.45</span>
<span class="co">#&gt;  7:      Civil Engineering         White Female  0.46</span>
<span class="co">#&gt;  8:      Civil Engineering           White Male  0.50</span>
<span class="co">#&gt;  9: Electrical Engineering         Asian Female  0.48</span>
<span class="co">#&gt; 10: Electrical Engineering           Asian Male  0.53</span>
<span class="co">#&gt; ---                                                  </span>
<span class="co">#&gt; 23: Industrial Engineering           White Male  0.57</span>
<span class="co">#&gt; 24: Mechanical Engineering         Asian Female  0.62</span>
<span class="co">#&gt; 25: Mechanical Engineering           Asian Male  0.59</span>
<span class="co">#&gt; 26: Mechanical Engineering         Black Female  0.35</span>
<span class="co">#&gt; 27: Mechanical Engineering           Black Male  0.37</span>
<span class="co">#&gt; 28: Mechanical Engineering      Hispanic Female  0.38</span>
<span class="co">#&gt; 29: Mechanical Engineering        Hispanic Male  0.44</span>
<span class="co">#&gt; 30: Mechanical Engineering Native American Male  0.33</span>
<span class="co">#&gt; 31: Mechanical Engineering         White Female  0.40</span>
<span class="co">#&gt; 32: Mechanical Engineering           White Male  0.47</span></code></pre></div>
<p>Confirming that the categorical variables are factors.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># categorical variables are factors</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">ready_mw</span><span class="op">$</span><span class="va">program</span><span class="op">)</span>
<span class="co">#&gt; [1] "factor"</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">ready_mw</span><span class="op">$</span><span class="va">race_sex</span><span class="op">)</span>
<span class="co">#&gt; [1] "factor"</span></code></pre></div>
<p>Confirming that the factor levels are ordered by stickiness (not alphabetically).</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># the levels are from low stickiness to high stickiness</span>
<span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">ready_mw</span><span class="op">$</span><span class="va">program</span><span class="op">)</span>
<span class="co">#&gt; [1] "Mechanical Engineering" "Electrical Engineering" "Civil Engineering"     </span>
<span class="co">#&gt; [4] "Industrial Engineering"</span>
<span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">ready_mw</span><span class="op">$</span><span class="va">race_sex</span><span class="op">)</span>
<span class="co">#&gt; [1] "Native American Male" "Black Male"           "Hispanic Female"     </span>
<span class="co">#&gt; [4] "Black Female"         "White Female"         "Hispanic Male"       </span>
<span class="co">#&gt; [7] "White Male"           "Asian Female"         "Asian Male"</span></code></pre></div>
</div>
<div id="creating-a-multiway-graph" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-a-multiway-graph" class="anchor"></a>Creating a multiway graph</h2>
<p>We use conventional ggplot2 functions to create the multiway graphs. By previously ordering the levels of the factors, we have structured the data so that the rows and panels of the multiway graph are ordered by the appropriate medians.</p>
<p><em>Reminder:</em> These are practice data, not suitable for drawing inferences about student performance, i.e., not for research.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create one multiway graph</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">ready_mw</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">stick</span>, y <span class="op">=</span> <span class="va">race_sex</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html">vars</a></span><span class="op">(</span><span class="va">program</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">1</span>, as.table <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Stickiness"</span>, 
       y <span class="op">=</span> <span class="st">""</span>, 
       title <span class="op">=</span> <span class="st">"Practice data (not for research)"</span>, 
       caption <span class="op">=</span> <span class="st">"Source: midfielddata"</span><span class="op">)</span></code></pre></div>
<p><img src="../man/figures/vignette-multiway-graphs-fig1-1.png" width="70%" style="display: block; margin: auto;"><br></p>
<p>This graph permits a direct visual comparison of how stickiness varies by race and sex within a particular major.</p>
<p>Reading a multiway graph</p>
<ul>
<li>We can more effectively compare values within a panel than between panels.</li>
<li>Because rows are ordered, one expects a generally increasing trend within a panel. A response greater or smaller than expected creates a visual asymmetry. The interesting stories are often in these visual anomalies.</li>
<li>To explore the comparison between panels, we swap the row and panel categories, creating the dual multiway.</li>
</ul>
</div>
<div id="creating-the-dual-multiway-graph" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-the-dual-multiway-graph" class="anchor"></a>Creating the dual multiway graph</h2>
<p>The previous graph does not facilitate visual comparisons of members of the same race-sex group. As Cleveland says,</p>
<blockquote>
<p>Because of this asymmetry, it is often important to explore multiway data by as many multiway dot plots as there are categorical variables, with each variable assigned once to the levels.</p>
</blockquote>
<p>To create the <em>dual multiway</em> graph, we swap the roles of the rows and panels.</p>
<ul>
<li>
<code>y = race_sex</code> becomes <code>y = program</code>
</li>
<li>
<code>facet_wrap(vars(program) ...</code> becomes <code>facet_wrap(vars(race_sex) ...</code>
</li>
</ul>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create the dual multiway graph</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">ready_mw</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">stick</span>, y <span class="op">=</span> <span class="va">program</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html">vars</a></span><span class="op">(</span><span class="va">race_sex</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">1</span>, as.table <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Stickiness"</span>, 
       y <span class="op">=</span> <span class="st">""</span>, 
       title <span class="op">=</span> <span class="st">"Practice data (not for research)"</span>, 
       caption <span class="op">=</span> <span class="st">"Source: midfielddata"</span><span class="op">)</span></code></pre></div>
<p><img src="../man/figures/vignette-multiway-graphs-fig2-1.png" width="70%" style="display: block; margin: auto;"><br></p>
<p>This graph permits a direct visual comparison of how stickiness varies by major for one group of students.</p>
<p>Both multiways should be created for discussion. Usually one or the other will convey a more compelling visual story that gets included in the published findings.</p>
</div>
<div id="data-tables-two-formats" class="section level2">
<h2 class="hasAnchor">
<a href="#data-tables-two-formats" class="anchor"></a>Data tables: two formats</h2>
<p>Data tables are useful in discussions with one’s research team and are often included in publications for editors or reviewers who want to see the values underlying the data graphics.</p>
<p>Our data are currently laid out in “block record” form <span class="citation">(<a href="#ref-Mount+Zumel:2019:fluid-data" role="doc-biblioref">Mount and Zumel, 2019</a>)</span>, where the <code>race_sex</code> key and the <code>program</code> key are both in columns and the finding is in the last column. This layout is also called “tidy data” <span class="citation">(<a href="#ref-Wickham+Grolemund:2017" role="doc-biblioref">Wickham and Grolemund, 2017</a>)</span>.</p>
<p>The graphing package we use, ggplot2, is designed to work most effectively with block-record data, thus the block-record (“long”) form is the default layout in midfieldr.</p>
<table class="table table">
<caption style="font-size: initial !important;">
Table 1: Stickiness (block records)
</caption>
<thead><tr>
<th style="text-align:left;">
program
</th>
<th style="text-align:left;">
race_sex
</th>
<th style="text-align:right;">
stick
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Civil Engineering
</td>
<td style="text-align:left;">
Asian Female
</td>
<td style="text-align:right;">
0.50
</td>
</tr>
<tr>
<td style="text-align:left;">
Civil Engineering
</td>
<td style="text-align:left;">
Asian Male
</td>
<td style="text-align:right;">
0.46
</td>
</tr>
<tr>
<td style="text-align:left;">
Civil Engineering
</td>
<td style="text-align:left;">
Black Female
</td>
<td style="text-align:right;">
0.37
</td>
</tr>
<tr>
<td style="text-align:left;">
Civil Engineering
</td>
<td style="text-align:left;">
Black Male
</td>
<td style="text-align:right;">
0.37
</td>
</tr>
<tr>
<td style="text-align:left;">
Civil Engineering
</td>
<td style="text-align:left;">
Hispanic Female
</td>
<td style="text-align:right;">
0.42
</td>
</tr>
<tr>
<td style="text-align:left;">
Civil Engineering
</td>
<td style="text-align:left;">
Hispanic Male
</td>
<td style="text-align:right;">
0.45
</td>
</tr>
<tr>
<td style="text-align:left;">
Civil Engineering
</td>
<td style="text-align:left;">
White Female
</td>
<td style="text-align:right;">
0.46
</td>
</tr>
<tr>
<td style="text-align:left;">
Civil Engineering
</td>
<td style="text-align:left;">
White Male
</td>
<td style="text-align:right;">
0.50
</td>
</tr>
<tr>
<td style="text-align:left;">
Electrical Engineering
</td>
<td style="text-align:left;">
Asian Female
</td>
<td style="text-align:right;">
0.48
</td>
</tr>
<tr>
<td style="text-align:left;">
Electrical Engineering
</td>
<td style="text-align:left;">
Asian Male
</td>
<td style="text-align:right;">
0.53
</td>
</tr>
<tr>
<td style="text-align:left;">
Electrical Engineering
</td>
<td style="text-align:left;">
Black Female
</td>
<td style="text-align:right;">
0.44
</td>
</tr>
<tr>
<td style="text-align:left;">
Electrical Engineering
</td>
<td style="text-align:left;">
Black Male
</td>
<td style="text-align:right;">
0.38
</td>
</tr>
<tr>
<td style="text-align:left;">
Electrical Engineering
</td>
<td style="text-align:left;">
Hispanic Female
</td>
<td style="text-align:right;">
0.40
</td>
</tr>
<tr>
<td style="text-align:left;">
Electrical Engineering
</td>
<td style="text-align:left;">
Hispanic Male
</td>
<td style="text-align:right;">
0.45
</td>
</tr>
<tr>
<td style="text-align:left;">
Electrical Engineering
</td>
<td style="text-align:left;">
White Female
</td>
<td style="text-align:right;">
0.32
</td>
</tr>
<tr>
<td style="text-align:left;">
Electrical Engineering
</td>
<td style="text-align:left;">
White Male
</td>
<td style="text-align:right;">
0.43
</td>
</tr>
<tr>
<td style="text-align:left;">
Industrial Engineering
</td>
<td style="text-align:left;">
Asian Female
</td>
<td style="text-align:right;">
0.54
</td>
</tr>
<tr>
<td style="text-align:left;">
Industrial Engineering
</td>
<td style="text-align:left;">
Asian Male
</td>
<td style="text-align:right;">
0.65
</td>
</tr>
<tr>
<td style="text-align:left;">
Industrial Engineering
</td>
<td style="text-align:left;">
Black Female
</td>
<td style="text-align:right;">
0.52
</td>
</tr>
<tr>
<td style="text-align:left;">
Industrial Engineering
</td>
<td style="text-align:left;">
Black Male
</td>
<td style="text-align:right;">
0.47
</td>
</tr>
<tr>
<td style="text-align:left;">
Industrial Engineering
</td>
<td style="text-align:left;">
Hispanic Male
</td>
<td style="text-align:right;">
0.73
</td>
</tr>
<tr>
<td style="text-align:left;">
Industrial Engineering
</td>
<td style="text-align:left;">
White Female
</td>
<td style="text-align:right;">
0.59
</td>
</tr>
<tr>
<td style="text-align:left;">
Industrial Engineering
</td>
<td style="text-align:left;">
White Male
</td>
<td style="text-align:right;">
0.57
</td>
</tr>
<tr>
<td style="text-align:left;">
Mechanical Engineering
</td>
<td style="text-align:left;">
Asian Female
</td>
<td style="text-align:right;">
0.62
</td>
</tr>
<tr>
<td style="text-align:left;">
Mechanical Engineering
</td>
<td style="text-align:left;">
Asian Male
</td>
<td style="text-align:right;">
0.59
</td>
</tr>
<tr>
<td style="text-align:left;">
Mechanical Engineering
</td>
<td style="text-align:left;">
Black Female
</td>
<td style="text-align:right;">
0.35
</td>
</tr>
<tr>
<td style="text-align:left;">
Mechanical Engineering
</td>
<td style="text-align:left;">
Black Male
</td>
<td style="text-align:right;">
0.37
</td>
</tr>
<tr>
<td style="text-align:left;">
Mechanical Engineering
</td>
<td style="text-align:left;">
Hispanic Female
</td>
<td style="text-align:right;">
0.38
</td>
</tr>
<tr>
<td style="text-align:left;">
Mechanical Engineering
</td>
<td style="text-align:left;">
Hispanic Male
</td>
<td style="text-align:right;">
0.44
</td>
</tr>
<tr>
<td style="text-align:left;">
Mechanical Engineering
</td>
<td style="text-align:left;">
Native American Male
</td>
<td style="text-align:right;">
0.33
</td>
</tr>
<tr>
<td style="text-align:left;">
Mechanical Engineering
</td>
<td style="text-align:left;">
White Female
</td>
<td style="text-align:right;">
0.40
</td>
</tr>
<tr>
<td style="text-align:left;">
Mechanical Engineering
</td>
<td style="text-align:left;">
White Male
</td>
<td style="text-align:right;">
0.47
</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>However, the visual convention preferred by publishers and readers is a row-record (“wide”) form, as illustrated by Table 2. The <code>race_sex</code> key is in the left column and the <code>program</code> key is in the column names. The stickiness findings lie at the row-column intersections. Note that in this form, the four NA observations we mentioned earlier are explicitly shown.</p>
<table class="table table">
<caption style="font-size: initial !important;">
Table 2: Stickiness (row records)
</caption>
<thead><tr>
<th style="text-align:left;">
Race/ethnicity/sex
</th>
<th style="text-align:right;">
Civil
</th>
<th style="text-align:right;">
Electrical
</th>
<th style="text-align:right;">
Industrial
</th>
<th style="text-align:right;">
Mechanical
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Asian Female
</td>
<td style="text-align:right;">
0.50
</td>
<td style="text-align:right;">
0.48
</td>
<td style="text-align:right;">
0.54
</td>
<td style="text-align:right;">
0.62
</td>
</tr>
<tr>
<td style="text-align:left;">
Asian Male
</td>
<td style="text-align:right;">
0.46
</td>
<td style="text-align:right;">
0.53
</td>
<td style="text-align:right;">
0.65
</td>
<td style="text-align:right;">
0.59
</td>
</tr>
<tr>
<td style="text-align:left;">
Black Female
</td>
<td style="text-align:right;">
0.37
</td>
<td style="text-align:right;">
0.44
</td>
<td style="text-align:right;">
0.52
</td>
<td style="text-align:right;">
0.35
</td>
</tr>
<tr>
<td style="text-align:left;">
Black Male
</td>
<td style="text-align:right;">
0.37
</td>
<td style="text-align:right;">
0.38
</td>
<td style="text-align:right;">
0.47
</td>
<td style="text-align:right;">
0.37
</td>
</tr>
<tr>
<td style="text-align:left;">
Hispanic Female
</td>
<td style="text-align:right;">
0.42
</td>
<td style="text-align:right;">
0.40
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
0.38
</td>
</tr>
<tr>
<td style="text-align:left;">
Hispanic Male
</td>
<td style="text-align:right;">
0.45
</td>
<td style="text-align:right;">
0.45
</td>
<td style="text-align:right;">
0.73
</td>
<td style="text-align:right;">
0.44
</td>
</tr>
<tr>
<td style="text-align:left;">
Native American Male
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
0.33
</td>
</tr>
<tr>
<td style="text-align:left;">
White Female
</td>
<td style="text-align:right;">
0.46
</td>
<td style="text-align:right;">
0.32
</td>
<td style="text-align:right;">
0.59
</td>
<td style="text-align:right;">
0.40
</td>
</tr>
<tr>
<td style="text-align:left;">
White Male
</td>
<td style="text-align:right;">
0.50
</td>
<td style="text-align:right;">
0.43
</td>
<td style="text-align:right;">
0.57
</td>
<td style="text-align:right;">
0.47
</td>
</tr>
</tbody>
</table>
<p>Depending on your software background, you may have encountered a block-record/row-record transformation using any of these function pairs—a list adapted from <span class="citation">(<a href="#ref-Mount+Zumel:2019:fluid-data" role="doc-biblioref">Mount and Zumel, 2019</a>)</span>.</p>
<ul>
<li>pivot / anti-pivot or crosstab / shred (databases)</li>
<li>pivot_to_rowrecs / unpivot_to_blocks (cdata)</li>
<li>reshape “wide” / reshape “long” (R)</li>
<li>pivot_wider / pivot_longer (tidyr)</li>
<li>pivot / unpivot (Microsoft Excel)</li>
<li>dcast / melt (data.table)</li>
<li>cast / melt (reshape2)</li>
</ul>
</div>
<div id="creating-a-table-for-publication" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-a-table-for-publication" class="anchor"></a>Creating a table for publication</h2>
<p>The first thing to do before tabulating is to limit the significant figures of floating-point numbers.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create a new memory location  </span>
<span class="va">block_form</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html">copy</a></span><span class="op">(</span><span class="va">ready_mw</span><span class="op">)</span>

<span class="co"># limit significant digits</span>
<span class="va">block_form</span><span class="op">[</span>, <span class="va">stick</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">stick</span>, <span class="fl">2</span><span class="op">)</span><span class="op">]</span></code></pre></div>
<p>Before reshaping, we convert factors to characters so that the rows and columns are in alphabetical order after reshaping.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create a new memory location </span>
<span class="va">row_form</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html">copy</a></span><span class="op">(</span><span class="va">block_form</span><span class="op">)</span>

<span class="co"># convert factors to characters</span>
<span class="va">row_form</span><span class="op">[</span>, <span class="va">race_sex</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="va">race_sex</span><span class="op">)</span><span class="op">]</span>
<span class="va">row_form</span><span class="op">[</span>, <span class="va">program</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="va">program</span><span class="op">)</span><span class="op">]</span></code></pre></div>
<p><code><a href="https://Rdatatable.gitlab.io/data.table/reference/dcast.data.table.html">dcast()</a></code> is used to reshape the data frame from block-record form to row-record form.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># reshape</span>
<span class="va">row_form</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/dcast.data.table.html">dcast</a></span><span class="op">(</span><span class="va">row_form</span>, <span class="va">race_sex</span> <span class="op">~</span> <span class="va">program</span>, value.var <span class="op">=</span> <span class="st">"stick"</span><span class="op">)</span></code></pre></div>
<p>Lastly, we edit the new column names.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># edit column names</span>
<span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setattr.html">setnames</a></span><span class="op">(</span><span class="va">row_form</span>, 
         old <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"race_sex"</span>, 
                 <span class="st">"Civil Engineering"</span>, 
                 <span class="st">"Electrical Engineering"</span>, 
                 <span class="st">"Industrial Engineering"</span>, 
                 <span class="st">"Mechanical Engineering"</span><span class="op">)</span>, 
         new <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Race/ethnicity/sex"</span>, 
                 <span class="st">"Civil"</span>, 
                 <span class="st">"Electrical"</span>, 
                 <span class="st">"Industrial"</span>, 
                 <span class="st">"Mechanical"</span><span class="op">)</span><span class="op">)</span>

<span class="co"># examine the result</span>
<span class="va">row_form</span>
<span class="co">#&gt;      Race/ethnicity/sex Civil Electrical Industrial Mechanical</span>
<span class="co">#&gt; 1:         Asian Female  0.50       0.48       0.54       0.62</span>
<span class="co">#&gt; 2:           Asian Male  0.46       0.53       0.65       0.59</span>
<span class="co">#&gt; 3:         Black Female  0.37       0.44       0.52       0.35</span>
<span class="co">#&gt; 4:           Black Male  0.37       0.38       0.47       0.37</span>
<span class="co">#&gt; 5:      Hispanic Female  0.42       0.40         NA       0.38</span>
<span class="co">#&gt; 6:        Hispanic Male  0.45       0.45       0.73       0.44</span>
<span class="co">#&gt; 7: Native American Male    NA         NA         NA       0.33</span>
<span class="co">#&gt; 8:         White Female  0.46       0.32       0.59       0.40</span>
<span class="co">#&gt; 9:           White Male  0.50       0.43       0.57       0.47</span></code></pre></div>
<p>This result is the source for Table 2 above.</p>
<p>Other good tools for reshaping are provided in packages such as cdata <span class="citation">(<a href="#ref-Mount+Zumel:2020:cdata" role="doc-biblioref">Mount and Zumel, 2020</a>)</span>, tidyr <span class="citation">(<a href="#ref-Wickham+Henry:2020:tidyr" role="doc-biblioref">Wickham and Henry, 2020</a>)</span>, and <code><a href="https://rdrr.io/r/stats/reshape.html">reshape()</a></code> in base R.</p>
</div>
<div id="references" class="section level2">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Cleveland:1993" class="csl-entry">
Cleveland, William S. (1993) <em><span>Visualizing Data</span></em>. Summit, NJ: <span>Hobart Press</span>.
</div>
<div id="ref-Mount+Zumel:2019:fluid-data" class="csl-entry">
Mount, John and Zumel, Nina (2019) <span class="nocase">Coordinatized data: A fluid data specification</span>. <span>Win Vector LLC</span>. Available at: <a href="http://winvector.github.io/FluidData/RowsAndColumns.html">http://winvector.github.io/FluidData/RowsAndColumns.html</a>.
</div>
<div id="ref-Mount+Zumel:2020:cdata" class="csl-entry">
Mount, John and Zumel, Nina (2020) <em><span class="nocase">cdata: Fluid Data Transformations</span></em>. R package version 1.1.6. Available at: <a href="https://CRAN.R-project.org/package=cdata">https://CRAN.R-project.org/package=cdata</a>.
</div>
<div id="ref-Ohland+Orr+others:2012" class="csl-entry">
Ohland, Matthew, Orr, Marisa, Layton, Richard, et al. (2012) <span class="nocase">Introducing stickiness as a versatile metric of engineering persistence</span>. In: <em><span class="nocase">Proceedings of the Frontiers in Education Conference</span></em>, 2012, pp. 1–5.
</div>
<div id="ref-Wickham+Grolemund:2017" class="csl-entry">
Wickham, Hadley and Grolemund, Garrett (2017) <em><span class="nocase">R for Data Science</span></em>. Sebastopol, CA: <span>O’Reilly Media, Inc.</span> Available at: <a href="https://r4ds.had.co.nz/">https://r4ds.had.co.nz/</a>.
</div>
<div id="ref-Wickham+Henry:2020:tidyr" class="csl-entry">
Wickham, Hadley and Henry, Lionel (2020) <em><span class="nocase">tidyr: Tidy Messy Data</span></em>. R package version 1.1.0. Available at: <a href="https://CRAN.R-project.org/package=tidyr">https://CRAN.R-project.org/package=tidyr</a>.
</div>
</div>
</div>
<div id="appendix" class="section level2">
<h2 class="hasAnchor">
<a href="#appendix" class="anchor"></a>Appendix</h2>
<div id="complete-script" class="section level3">
<h3 class="hasAnchor">
<a href="#complete-script" class="anchor"></a>Complete script</h3>
<p>The vignette code chunks are collected below in a single, condensed script.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># packages used</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/MIDFIELDR/midfieldr">midfieldr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com">data.table</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>

<span class="co"># conditioning multiway data </span>
<span class="va">pre_mw</span> <span class="op">&lt;-</span> <span class="va">rep_stickiness</span>
<span class="va">pre_mw</span><span class="op">[</span>, <span class="va">race_sex</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">race</span>, <span class="va">sex</span><span class="op">)</span><span class="op">]</span>
<span class="va">columns_we_want</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"program"</span>, <span class="st">"race_sex"</span>, <span class="st">"stick"</span><span class="op">)</span>
<span class="va">pre_mw</span> <span class="op">&lt;-</span> <span class="va">pre_mw</span><span class="op">[</span>, <span class="va">..columns_we_want</span><span class="op">]</span>
<span class="va">ready_mw</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/prepare_multiway.html">prepare_multiway</a></span><span class="op">(</span><span class="va">pre_mw</span><span class="op">)</span>

<span class="co"># creating a multiway graph </span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">ready_mw</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">stick</span>, y <span class="op">=</span> <span class="va">race_sex</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html">vars</a></span><span class="op">(</span><span class="va">program</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">1</span>, as.table <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Stickiness"</span>, 
       y <span class="op">=</span> <span class="st">""</span>, 
       title <span class="op">=</span> <span class="st">"Practice data (not for research)"</span>, 
       caption <span class="op">=</span> <span class="st">"Source: midfielddata"</span><span class="op">)</span>

<span class="co"># creating the dual multiway graph</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">ready_mw</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">stick</span>, y <span class="op">=</span> <span class="va">program</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html">vars</a></span><span class="op">(</span><span class="va">race_sex</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">1</span>, as.table <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Stickiness"</span>, 
       y <span class="op">=</span> <span class="st">""</span>, 
       title <span class="op">=</span> <span class="st">"Practice data (not for research)"</span>, 
       caption <span class="op">=</span> <span class="st">"Source: midfielddata"</span><span class="op">)</span>

<span class="co"># creating a table for publication</span>
<span class="va">block_form</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html">copy</a></span><span class="op">(</span><span class="va">ready_mw</span><span class="op">)</span>
<span class="va">block_form</span><span class="op">[</span>, <span class="va">stick</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">stick</span>, <span class="fl">2</span><span class="op">)</span><span class="op">]</span>
<span class="va">row_form</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html">copy</a></span><span class="op">(</span><span class="va">block_form</span><span class="op">)</span>
<span class="va">row_form</span><span class="op">[</span>, <span class="va">race_sex</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="va">race_sex</span><span class="op">)</span><span class="op">]</span>
<span class="va">row_form</span><span class="op">[</span>, <span class="va">program</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="va">program</span><span class="op">)</span><span class="op">]</span>
<span class="va">row_form</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/dcast.data.table.html">dcast</a></span><span class="op">(</span><span class="va">row_form</span>, <span class="va">race_sex</span> <span class="op">~</span> <span class="va">program</span>, value.var <span class="op">=</span> <span class="st">"stick"</span><span class="op">)</span>
<span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setattr.html">setnames</a></span><span class="op">(</span><span class="va">row_form</span>, 
         old <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"race_sex"</span>, 
                 <span class="st">"Civil Engineering"</span>, 
                 <span class="st">"Electrical Engineering"</span>, 
                 <span class="st">"Industrial Engineering"</span>, 
                 <span class="st">"Mechanical Engineering"</span><span class="op">)</span>, 
         new <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Race/ethnicity/sex"</span>, 
                 <span class="st">"Civil"</span>, 
                 <span class="st">"Electrical"</span>, 
                 <span class="st">"Industrial"</span>, 
                 <span class="st">"Mechanical"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Richard Layton, Russell Long, Matthew Ohland, US National Science Foundation.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
