<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getting started • midfieldr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Getting started">
<meta property="og:description" content="midfieldr">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">midfieldr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/getting_started.html">Getting started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/cip_filter.html">Identifying program CIP codes</a>
    </li>
    <li>
      <a href="../articles/selecting_programs.html">Select and label programs</a>
    </li>
    <li>
      <a href="../articles/imputing_fye.html">Imputing starting majors for FYE students</a>
    </li>
    <li>
      <a href="../articles/grad_rate.html">Computing graduation rate</a>
    </li>
    <li>
      <a href="../articles/stickiness.html">Computing stickiness</a>
    </li>
    <li>
      <a href="../articles/multiway.html">Multiway data, graphs, and tables</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Papers/Talks
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/pages/talks.html">Talks</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../articles/pages/about_midfield.html">About</a>
</li>
<li>
  <a href="https://github.com/MIDFIELDR/midfieldr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="getting_started_files/kePrint-0.0.1/kePrint.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Getting started</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/MIDFIELDR/midfieldr/blob/master/vignettes/getting_started.Rmd"><code>vignettes/getting_started.Rmd</code></a></small>
      <div class="hidden name"><code>getting_started.Rmd</code></div>

    </div>

    
    
<p>This vignette presents an example to illustrate a representative sample of midfieldr functions.</p>
<p>Functions are used without detailed explanations—for greater detail, see the individual <a href="https://midfieldr.github.io/midfieldr/articles/index.html">vignettes</a> or see a function’s help page by running <code>? function_name()</code>, for example, <code>? cip_filter()</code>, <code><a href="../reference/cip6_select.html">? cip6_select</a></code>, etc.</p>
<div id="contents" class="section level2">
<h2 class="hasAnchor">
<a href="#contents" class="anchor"></a>Contents</h2>
<p><a href="#identify-cip-codes">Identify CIP codes</a><br><a href="#select-and-label-programs">Select and label programs</a><br><a href="#group-and-count-students">Group and count students</a><br><a href="#compute-the-metric">Compute the metric</a><br><a href="#graph-the-results">Graph the results</a><br><a href="#references">References</a></p>
</div>
<div id="identify-cip-codes" class="section level2">
<h2 class="hasAnchor">
<a href="#identify-cip-codes" class="anchor"></a>Identify CIP codes</h2>
<p>To introduce midfieldr, we present a brief example that starts with student unit-record data and concludes with a graphical comparison of program “stickiness” with students grouped by program, race, and sex.</p>
<p>Stickiness is the ratio of the number of students graduating from a program to the number ever enrolled in the program <span class="citation">(Ohland et al. <a href="#ref-stickiness2012" role="doc-biblioref">2012</a>)</span>.</p>
<p>We compare the stickiness of three programs: Chemical Engineering, Electrical Engineering, and Industrial Engineering.</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="co"># packages used in the vignette</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"midfieldr"</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"dplyr"</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"seplyr"</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"ggplot2"</span>)</pre></body></html></div>
<p>We use <code><a href="../reference/cip_filter.html">cip_filter()</a></code> to search the <code>cip</code> dataset first for “Engineering” and then filter the result for “Chemical”, “Electrical”, and “Industrial”. We use the <code>except</code> argument to omit technology programs and biochemical programs.</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="no">cip</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/cip_filter.html">cip_filter</a></span>(<span class="no">.</span>, <span class="kw">series</span> <span class="kw">=</span> <span class="st">"engineering"</span>, <span class="kw">except</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"tech"</span>, <span class="st">"bio"</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/cip_filter.html">cip_filter</a></span>(<span class="no">.</span>, <span class="kw">series</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"chemical"</span>, <span class="st">"electrical"</span>, <span class="st">"industrial"</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>() <span class="co"># or View()</span>
<span class="co">#&gt; # A tibble: 7 x 6</span>
<span class="co">#&gt;   cip2  cip2name  cip4  cip4name                 cip6  cip6name                 </span>
<span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;                    &lt;chr&gt; &lt;chr&gt;                    </span>
<span class="co">#&gt; 1 14    Engineer~ 1407  Chemical Engineering     1407~ Chemical Engineering     </span>
<span class="co">#&gt; 2 14    Engineer~ 1407  Chemical Engineering     1407~ Chemical Engineering, Ot~</span>
<span class="co">#&gt; 3 14    Engineer~ 1410  Electrical, Electronics~ 1410~ Electrical, Electronics ~</span>
<span class="co">#&gt; 4 14    Engineer~ 1410  Electrical, Electronics~ 1410~ Laser and Optical Engine~</span>
<span class="co">#&gt; 5 14    Engineer~ 1410  Electrical, Electronics~ 1410~ Telecommunications Engin~</span>
<span class="co">#&gt; 6 14    Engineer~ 1410  Electrical, Electronics~ 1410~ Electrical, Electronics ~</span>
<span class="co">#&gt; 7 14    Engineer~ 1435  Industrial Engineering   1435~ Industrial Engineering</span></pre></body></html></div>
<p>Notes on viewing the results:</p>
<ul>
<li>As seen above, the <code><a href="https://rdrr.io/r/base/print.html">print()</a></code> function sends an abbreviated view of the results to the Console.</li>
<li>In the remaining code chunks, we’ll leave <code><a href="https://rdrr.io/r/base/print.html">print()</a></code> in place but you are welcome to replace it with <code><a href="https://rdrr.io/r/utils/View.html">View()</a></code> to invoke a spreadsheet-like data viewer.</li>
</ul>
<p>For clarity, shorter data frames are printed in the vignette as HTML tables, as shown below.</p>
<table class="table table">
<thead><tr>
<th style="text-align:left;">
cip2
</th>
<th style="text-align:left;">
cip2name
</th>
<th style="text-align:left;">
cip4
</th>
<th style="text-align:left;">
cip4name
</th>
<th style="text-align:left;">
cip6
</th>
<th style="text-align:left;">
cip6name
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
14
</td>
<td style="text-align:left;">
Engineering
</td>
<td style="text-align:left;">
1407
</td>
<td style="text-align:left;">
Chemical Engineering
</td>
<td style="text-align:left;">
140701
</td>
<td style="text-align:left;">
Chemical Engineering
</td>
</tr>
<tr>
<td style="text-align:left;">
14
</td>
<td style="text-align:left;">
Engineering
</td>
<td style="text-align:left;">
1407
</td>
<td style="text-align:left;">
Chemical Engineering
</td>
<td style="text-align:left;">
140799
</td>
<td style="text-align:left;">
Chemical Engineering, Other
</td>
</tr>
<tr>
<td style="text-align:left;">
14
</td>
<td style="text-align:left;">
Engineering
</td>
<td style="text-align:left;">
1410
</td>
<td style="text-align:left;">
Electrical, Electronics and Communications Engineering
</td>
<td style="text-align:left;">
141001
</td>
<td style="text-align:left;">
Electrical, Electronics and Communications Engineering
</td>
</tr>
<tr>
<td style="text-align:left;">
14
</td>
<td style="text-align:left;">
Engineering
</td>
<td style="text-align:left;">
1410
</td>
<td style="text-align:left;">
Electrical, Electronics and Communications Engineering
</td>
<td style="text-align:left;">
141003
</td>
<td style="text-align:left;">
Laser and Optical Engineering
</td>
</tr>
<tr>
<td style="text-align:left;">
14
</td>
<td style="text-align:left;">
Engineering
</td>
<td style="text-align:left;">
1410
</td>
<td style="text-align:left;">
Electrical, Electronics and Communications Engineering
</td>
<td style="text-align:left;">
141004
</td>
<td style="text-align:left;">
Telecommunications Engineering
</td>
</tr>
<tr>
<td style="text-align:left;">
14
</td>
<td style="text-align:left;">
Engineering
</td>
<td style="text-align:left;">
1410
</td>
<td style="text-align:left;">
Electrical, Electronics and Communications Engineering
</td>
<td style="text-align:left;">
141099
</td>
<td style="text-align:left;">
Electrical, Electronics and Communications Engineering, Other
</td>
</tr>
<tr>
<td style="text-align:left;">
14
</td>
<td style="text-align:left;">
Engineering
</td>
<td style="text-align:left;">
1435
</td>
<td style="text-align:left;">
Industrial Engineering
</td>
<td style="text-align:left;">
143501
</td>
<td style="text-align:left;">
Industrial Engineering
</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>The results show that the 4-digit codes we want are 1407, 1410, and 1435.</p>
<p><br><a href="#top">▲ top of page</a></p>
</div>
<div id="select-and-label-programs" class="section level2">
<h2 class="hasAnchor">
<a href="#select-and-label-programs" class="anchor"></a>Select and label programs</h2>
<p>In the MIDFIELD data sets, programs are identified by 6-digit CIP codes.</p>
<p>Knowing the programs we want (in this example, 1407, 1410, and 1435) we use <code><a href="../reference/cip6_select.html">cip6_select()</a></code> to extract all 6-digit codes and names associated with these three groupings (Chemical, Electrical, and Industrial Engineering).</p>
<p>At the same time, we assign a new program variable with deliberately selected program names that are later used for grouping and summarizing the data.</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="co"># chemical engineering </span>
<span class="no">set1</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/cip_filter.html">cip_filter</a></span>(<span class="no">cip</span>, <span class="kw">series</span> <span class="kw">=</span> <span class="st">"^1407"</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/cip6_select.html">cip6_select</a></span>(<span class="kw">program</span> <span class="kw">=</span> <span class="st">"Chemical Engineering"</span>)

<span class="co"># electrical engineering </span>
<span class="no">set2</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/cip_filter.html">cip_filter</a></span>(<span class="no">cip</span>, <span class="kw">series</span> <span class="kw">=</span> <span class="st">"^1410"</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/cip6_select.html">cip6_select</a></span>(<span class="kw">program</span> <span class="kw">=</span> <span class="st">"Electrical Engineering"</span>)

<span class="co"># industrial engineering</span>
<span class="no">set3</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/cip_filter.html">cip_filter</a></span>(<span class="no">cip</span>, <span class="kw">series</span> <span class="kw">=</span> <span class="st">"^1435"</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/cip6_select.html">cip6_select</a></span>(<span class="kw">program</span> <span class="kw">=</span> <span class="st">"Industrial Engineering"</span>)</pre></body></html></div>
<p>Combine the data frames. The <code><a href="../reference/cip6_select.html">cip6_select()</a></code> function retains the original 6-digit program names so that one can confirm that the new <code>program</code> variable is consistent with the original program name.</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="no">program_group</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span>(<span class="no">set1</span>, <span class="no">set2</span>, <span class="no">set3</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>() <span class="co"># or View()</span></pre></body></html></div>
<table class="table table">
<thead><tr>
<th style="text-align:left;">
cip6
</th>
<th style="text-align:left;">
cip6name
</th>
<th style="text-align:left;">
program
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
140701
</td>
<td style="text-align:left;">
Chemical Engineering
</td>
<td style="text-align:left;">
Chemical Engineering
</td>
</tr>
<tr>
<td style="text-align:left;">
140702
</td>
<td style="text-align:left;">
Chemical and Biomolecular Engineering
</td>
<td style="text-align:left;">
Chemical Engineering
</td>
</tr>
<tr>
<td style="text-align:left;">
140799
</td>
<td style="text-align:left;">
Chemical Engineering, Other
</td>
<td style="text-align:left;">
Chemical Engineering
</td>
</tr>
<tr>
<td style="text-align:left;">
141001
</td>
<td style="text-align:left;">
Electrical, Electronics and Communications Engineering
</td>
<td style="text-align:left;">
Electrical Engineering
</td>
</tr>
<tr>
<td style="text-align:left;">
141003
</td>
<td style="text-align:left;">
Laser and Optical Engineering
</td>
<td style="text-align:left;">
Electrical Engineering
</td>
</tr>
<tr>
<td style="text-align:left;">
141004
</td>
<td style="text-align:left;">
Telecommunications Engineering
</td>
<td style="text-align:left;">
Electrical Engineering
</td>
</tr>
<tr>
<td style="text-align:left;">
141099
</td>
<td style="text-align:left;">
Electrical, Electronics and Communications Engineering, Other
</td>
<td style="text-align:left;">
Electrical Engineering
</td>
</tr>
<tr>
<td style="text-align:left;">
143501
</td>
<td style="text-align:left;">
Industrial Engineering
</td>
<td style="text-align:left;">
Industrial Engineering
</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><br><a href="#top">▲ top of page</a></p>
</div>
<div id="group-and-count-students" class="section level2">
<h2 class="hasAnchor">
<a href="#group-and-count-students" class="anchor"></a>Group and count students</h2>
<p>First we extract the 6-digit CIP codes from our program group to use as search terms to identify students in these programs.</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">program_group_cip6</span> <span class="kw">&lt;-</span> <span class="no">program_group</span><span class="kw">[[</span><span class="st">"cip6"</span>]]</pre></body></html></div>
<p>Use <code><a href="../reference/ever_filter.html">ever_filter()</a></code> to access the <code>midfieldterms</code> dataset and extract all students who ever enrolled in these programs. Use <code><a href="../reference/race_sex_join.html">race_sex_join()</a></code> to access the <code>midfieldstudents</code> dataset and append students’ race and sex to the data frame.</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="no">students</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/ever_filter.html">ever_filter</a></span>(<span class="kw">series</span> <span class="kw">=</span> <span class="no">program_group_cip6</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/race_sex_join.html">race_sex_join</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>() <span class="co"># or View()</span>
<span class="co">#&gt; # A tibble: 6,402 x 4</span>
<span class="co">#&gt;    id          cip6   race          sex  </span>
<span class="co">#&gt;    &lt;chr&gt;       &lt;chr&gt;  &lt;chr&gt;         &lt;chr&gt;</span>
<span class="co">#&gt;  1 MID25783178 140701 Black         Male </span>
<span class="co">#&gt;  2 MID25783178 143501 Black         Male </span>
<span class="co">#&gt;  3 MID25783197 140701 White         Male </span>
<span class="co">#&gt;  4 MID25783257 140701 White         Male </span>
<span class="co">#&gt;  5 MID25783491 141001 White         Male </span>
<span class="co">#&gt;  6 MID25783606 141001 White         Male </span>
<span class="co">#&gt;  7 MID25783912 143501 White         Male </span>
<span class="co">#&gt;  8 MID25784118 141001 White         Male </span>
<span class="co">#&gt;  9 MID25784209 141001 International Male </span>
<span class="co">#&gt; 10 MID25784234 143501 White         Male </span>
<span class="co">#&gt; # ... with 6,392 more rows</span></pre></body></html></div>
<p>Next we join our custom program names to the student data.</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="no">students</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span>(<span class="no">students</span>, <span class="no">program_group</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="st">"cip6"</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>() <span class="co"># or View()</span>
<span class="co">#&gt; # A tibble: 6,402 x 6</span>
<span class="co">#&gt;    id       cip6   race      sex   cip6name                       program       </span>
<span class="co">#&gt;    &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;                          &lt;chr&gt;         </span>
<span class="co">#&gt;  1 MID2578~ 140701 Black     Male  Chemical Engineering           Chemical Engi~</span>
<span class="co">#&gt;  2 MID2578~ 143501 Black     Male  Industrial Engineering         Industrial En~</span>
<span class="co">#&gt;  3 MID2578~ 140701 White     Male  Chemical Engineering           Chemical Engi~</span>
<span class="co">#&gt;  4 MID2578~ 140701 White     Male  Chemical Engineering           Chemical Engi~</span>
<span class="co">#&gt;  5 MID2578~ 141001 White     Male  Electrical, Electronics and C~ Electrical En~</span>
<span class="co">#&gt;  6 MID2578~ 141001 White     Male  Electrical, Electronics and C~ Electrical En~</span>
<span class="co">#&gt;  7 MID2578~ 143501 White     Male  Industrial Engineering         Industrial En~</span>
<span class="co">#&gt;  8 MID2578~ 141001 White     Male  Electrical, Electronics and C~ Electrical En~</span>
<span class="co">#&gt;  9 MID2578~ 141001 Internat~ Male  Electrical, Electronics and C~ Electrical En~</span>
<span class="co">#&gt; 10 MID2578~ 143501 White     Male  Industrial Engineering         Industrial En~</span>
<span class="co">#&gt; # ... with 6,392 more rows</span></pre></body></html></div>
<p>We create a vector of grouping variables and use the seplyr <code><a href="https://rdrr.io/pkg/seplyr/man/group_summarize.html">group_summarize()</a></code> function to count the numbers of students ever enrolled in these programs.</p>
<p>At this point, by grouping and summarizing, we lose all but the three grouping variables and add the new variable <code>ever</code> to denote the count.</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="co"># grouping variables for summarizing and later for joining </span>
<span class="no">grouping_variables</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"program"</span>, <span class="st">"race"</span>, <span class="st">"sex"</span>)

<span class="no">ever_enrolled</span> <span class="kw">&lt;-</span> <span class="no">students</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/seplyr/man/group_summarize.html">group_summarize</a></span>(<span class="no">grouping_variables</span>, <span class="kw">ever</span> <span class="kw">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span>()) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>() <span class="co"># or View()</span>
<span class="co">#&gt; # A tibble: 48 x 4</span>
<span class="co">#&gt;    program              race            sex     ever</span>
<span class="co">#&gt;    &lt;chr&gt;                &lt;chr&gt;           &lt;chr&gt;  &lt;int&gt;</span>
<span class="co">#&gt;  1 Chemical Engineering Asian           Female    56</span>
<span class="co">#&gt;  2 Chemical Engineering Asian           Male      98</span>
<span class="co">#&gt;  3 Chemical Engineering Black           Female   147</span>
<span class="co">#&gt;  4 Chemical Engineering Black           Male      98</span>
<span class="co">#&gt;  5 Chemical Engineering Hispanic        Female    37</span>
<span class="co">#&gt;  6 Chemical Engineering Hispanic        Male      57</span>
<span class="co">#&gt;  7 Chemical Engineering International   Female     8</span>
<span class="co">#&gt;  8 Chemical Engineering International   Male      23</span>
<span class="co">#&gt;  9 Chemical Engineering Native American Female     7</span>
<span class="co">#&gt; 10 Chemical Engineering Native American Male       8</span>
<span class="co">#&gt; # ... with 38 more rows</span></pre></body></html></div>
<p>Following similar steps, we use <code><a href="../reference/grad_filter.html">grad_filter()</a></code> to access the <code>midfielddegrees</code> dataset and extract all students who graduated from these programs. We group and summarize the counts using <code>grad</code> as the new count variable.</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="no">graduated</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/grad_filter.html">grad_filter</a></span>(<span class="kw">series</span> <span class="kw">=</span> <span class="no">program_group_cip6</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/race_sex_join.html">race_sex_join</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span>(<span class="no">program_group</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="st">"cip6"</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/seplyr/man/group_summarize.html">group_summarize</a></span>(<span class="no">grouping_variables</span>, <span class="kw">grad</span> <span class="kw">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span>())</pre></body></html></div>
<p><br><a href="#top">▲ top of page</a></p>
</div>
<div id="compute-the-metric" class="section level2">
<h2 class="hasAnchor">
<a href="#compute-the-metric" class="anchor"></a>Compute the metric</h2>
<p>We join the two data frames by the grouping variables.</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="no">stickiness</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span>(<span class="no">ever_enrolled</span>, <span class="no">graduated</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="no">grouping_variables</span>)</pre></body></html></div>
<p>We suggest omitting observations with 5 or fewer students ever enrolled.</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="no">stickiness</span> <span class="kw">&lt;-</span> <span class="no">stickiness</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="no">ever</span> <span class="kw">&gt;</span> <span class="fl">5</span>)</pre></body></html></div>
<p>And we compute stickiness, the ratio of <code>grad</code> to <code>ever</code>.</p>
<div class="sourceCode" id="cb12"><html><body><pre class="r"><span class="no">stickiness</span> <span class="kw">&lt;-</span> <span class="no">stickiness</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="kw">stick</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(<span class="no">grad</span> / <span class="no">ever</span>, <span class="fl">3</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>() <span class="co"># or View()</span>
<span class="co">#&gt; # A tibble: 41 x 6</span>
<span class="co">#&gt;    program              race            sex     ever  grad stick</span>
<span class="co">#&gt;    &lt;chr&gt;                &lt;chr&gt;           &lt;chr&gt;  &lt;int&gt; &lt;int&gt; &lt;dbl&gt;</span>
<span class="co">#&gt;  1 Chemical Engineering Asian           Female    56    26 0.464</span>
<span class="co">#&gt;  2 Chemical Engineering Asian           Male      98    35 0.357</span>
<span class="co">#&gt;  3 Chemical Engineering Black           Female   147    52 0.354</span>
<span class="co">#&gt;  4 Chemical Engineering Black           Male      98    26 0.265</span>
<span class="co">#&gt;  5 Chemical Engineering Hispanic        Female    37    11 0.297</span>
<span class="co">#&gt;  6 Chemical Engineering Hispanic        Male      57    18 0.316</span>
<span class="co">#&gt;  7 Chemical Engineering International   Female     8     4 0.5  </span>
<span class="co">#&gt;  8 Chemical Engineering International   Male      23     7 0.304</span>
<span class="co">#&gt;  9 Chemical Engineering Native American Female     7     1 0.143</span>
<span class="co">#&gt; 10 Chemical Engineering Native American Male       8     3 0.375</span>
<span class="co">#&gt; # ... with 31 more rows</span></pre></body></html></div>
<p><br><a href="#top">▲ top of page</a></p>
</div>
<div id="graph-the-results" class="section level2">
<h2 class="hasAnchor">
<a href="#graph-the-results" class="anchor"></a>Graph the results</h2>
<p>To prepare the stickiness data for graphing, we remove ambiguous levels of race/ethnicity (Unknown, International, or Other) and then combine race and sex into a single variable.</p>
<div class="sourceCode" id="cb13"><html><body><pre class="r"><span class="no">stickiness_mw</span> <span class="kw">&lt;-</span> <span class="no">stickiness</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(!<span class="no">race</span> <span class="kw">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Unknown"</span>, <span class="st">"International"</span>, <span class="st">"Other"</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(!<span class="no">sex</span> <span class="kw">%in%</span> <span class="st">"Unknown"</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="kw">race_sex</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(<span class="no">race</span>, <span class="no">sex</span>))</pre></body></html></div>
<p>We graph these results in a <em>multiway dot plot</em> <span class="citation">(Cleveland <a href="#ref-cleveland1993" role="doc-biblioref">1993</a>)</span>, a display type based on a data structure of two categorical variables (program and race/ethnicity/sex) and one quantitative variable (stickiness).</p>
<p><code><a href="../reference/multiway_order.html">multiway_order()</a></code> converts the two categorical variables to factors and orders their levels by median stickiness.</p>
<div class="sourceCode" id="cb14"><html><body><pre class="r"><span class="no">stickiness_mw</span> <span class="kw">&lt;-</span> <span class="no">stickiness_mw</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="no">program</span>, <span class="no">race_sex</span>, <span class="no">stick</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/multiway_order.html">multiway_order</a></span>(<span class="kw">return_medians</span> <span class="kw">=</span> <span class="fl">TRUE</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>() <span class="co"># or View()</span>
<span class="co">#&gt; # A tibble: 27 x 5</span>
<span class="co">#&gt;    program              race_sex               stick med_program med_race_sex</span>
<span class="co">#&gt;    &lt;fct&gt;                &lt;fct&gt;                  &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;</span>
<span class="co">#&gt;  1 Chemical Engineering Asian Female           0.464       0.356        0.449</span>
<span class="co">#&gt;  2 Chemical Engineering Asian Male             0.357       0.356        0.474</span>
<span class="co">#&gt;  3 Chemical Engineering Black Female           0.354       0.356        0.4  </span>
<span class="co">#&gt;  4 Chemical Engineering Black Male             0.265       0.356        0.331</span>
<span class="co">#&gt;  5 Chemical Engineering Hispanic Female        0.297       0.356        0.297</span>
<span class="co">#&gt;  6 Chemical Engineering Hispanic Male          0.316       0.356        0.36 </span>
<span class="co">#&gt;  7 Chemical Engineering Native American Female 0.143       0.356        0.143</span>
<span class="co">#&gt;  8 Chemical Engineering Native American Male   0.375       0.356        0.229</span>
<span class="co">#&gt;  9 Chemical Engineering White Female           0.368       0.356        0.368</span>
<span class="co">#&gt; 10 Chemical Engineering White Male             0.395       0.356        0.427</span>
<span class="co">#&gt; # ... with 17 more rows</span></pre></body></html></div>
<p>We use conventional ggplot2 functions to graph stickiness in a multiway dot plot. We also apply our own <code><a href="../reference/utils_graph.html">theme_midfield()</a></code> to edit the visual properties of the graph.</p>
<div class="sourceCode" id="cb15"><html><body><pre class="r"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="no">stickiness_mw</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">stick</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">race_sex</span>)) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span>(<span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html">vars</a></span>(<span class="no">program</span>), <span class="kw">ncol</span> <span class="kw">=</span> <span class="fl">1</span>, <span class="kw">as.table</span> <span class="kw">=</span> <span class="fl">FALSE</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>(<span class="kw">na.rm</span> <span class="kw">=</span> <span class="fl">TRUE</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="st">"Stickiness"</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="st">""</span>) +
  <span class="fu"><a href="../reference/utils_graph.html">theme_midfield</a></span>()</pre></body></html></div>
<p><img src="../man/figures/getting-started-fig1-1.png" width="70%" style="display: block; margin: auto;"></p>
<p>The ordering of the rows and panels of the multiway plot tell us that for these three engineering majors, Industrial Engineering has the greatest stickiness and Electrical the least; that Asian men have the greatest stickiness and Native American Women the least. The visual anomalies are White women in Electrical with lower stickiness than expected by the ranking overall and Asian men in Chemical, also lower than expected.</p>
<p>Results will vary depending on the programs one compares. Variations can also be expected if one uses the whole population data available to MIDFIELD member institutions.</p>
<p><br><a href="#top">▲ top of page</a></p>
</div>
<div id="references" class="section level2 unnumbered">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<div id="refs" class="references">
<div id="ref-cleveland1993">
<p>Cleveland, William S. 1993. <em>Visualizing Data</em>. Summit, NJ: Hobart Press.</p>
</div>
<div id="ref-stickiness2012">
<p>Ohland, Matthew, Marisa Orr, Richard Layton, Susan Lord, and Russell Long. 2012. “Introducing Stickiness as a Versatile Metric of Engineering Persistence.” In <em>Proceedings of the Frontiers in Education Conference</em>, 1–5.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Richard Layton, Russell Long, Matthew Ohland, US National Science Foundation.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
