<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="midfieldr">
<title>Using FYE proxies • midfieldr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Using FYE proxies">
<meta property="og:description" content="midfieldr">
<meta property="og:image" content="https://midfieldr.github.io/midfieldr/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">midfieldr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0.9026</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/art-000-getting-started.html">Getting started</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-case-study">Case study</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-case-study">
    <a class="dropdown-item" href="../articles/art-001-case-goals.html">Goals</a>
    <a class="dropdown-item" href="../articles/art-002-case-data.html">Data</a>
    <a class="dropdown-item" href="../articles/art-003-case-results.html">Results</a>
  </div>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-vignettes">Vignettes</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-vignettes">
    <a class="dropdown-item" href="../articles/art-010-data-sufficiency.html">Data sufficiency</a>
    <a class="dropdown-item" href="../articles/art-020-degree-seeking.html">Degree seeking (inner joins)</a>
    <a class="dropdown-item" href="../articles/art-030-programs.html">Programs</a>
    <a class="dropdown-item" href="../articles/art-040-completion.html">Completion status</a>
    <a class="dropdown-item" href="../articles/art-050-demographics.html">Demographics (left outer joins)</a>
    <a class="dropdown-item" href="../articles/art-060-multiway.html">Multiway data and charts</a>
    <a class="dropdown-item" href="../articles/art-070-creating-fye-proxies.html">Creating FYE proxies</a>
    <a class="dropdown-item" href="../articles/art-071-using-fye-proxies.html">Using FYE proxies</a>
    <a class="dropdown-item" href="../articles/art-080-grad-rate.html">Graduation rate</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/MIDFIELDR/midfieldr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Using FYE proxies</h1>
            
            <h4 data-toc-skip class="date">2022-10-10</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/MIDFIELDR/midfieldr/blob/HEAD/vignettes/art-071-using-fye-proxies.Rmd" class="external-link"><code>vignettes/art-071-using-fye-proxies.Rmd</code></a></small>
      <div class="d-none name"><code>art-071-using-fye-proxies.Rmd</code></div>
    </div>

    
    
<p>Part 2 of 2 parts illustrating how we work with First-Year
Engineering (FYE) programs when a count of “starters” is needed.</p>
<ol style="list-style-type: decimal">
<li><p><a href="art-070-creating-fye-proxies.html">Creating FYE
proxies</a> Estimating the 6-digit CIP codes of the degree-granting
engineering programs that FYE students would have declared in their
first term had they not been required to enroll in FYE.</p></li>
<li><p>Using FYE proxies (this page). Incorporating a set of prepared
FYE proxies with other first-term CIP codes when a count of starters in
degree-granting engineering programs is required.</p></li>
</ol>
<div class="section level2">
<h2 id="definitions">Definitions<a class="anchor" aria-label="anchor" href="#definitions"></a>
</h2>
<dl>
<dt>FYE</dt>
<dd>
<p>First-Year Engineering program, a common-first-year curriculum that
is a prerequisite for declaring an engineering major at some US
institutions.</p>
</dd>
<dt>FYE proxy</dt>
<dd>
<p>The degree-granting engineering program we estimate an FYE student
would have declared had they not been required to enroll in FYE. The
proxy, a 6-digit CIP code, acts as a substitute for the FYE CIP code as
needed. Applies only to students enrolled in FYE in their first
term.</p>
</dd>
<dt>multiple imputation</dt>
<dd>
<p>Method of imputing missing categorical data, in this case, the
6-digit CIP codes of FYE proxy programs.</p>
</dd>
</dl>
</div>
<div class="section level2">
<h2 id="method">Method<a class="anchor" aria-label="anchor" href="#method"></a>
</h2>
<p>The procedure in this section requires that you have a prepared data
set of FYE proxies from one of three possible sources:</p>
<ol style="list-style-type: decimal">
<li><p>The <code>fye_proxy</code> data set, included with midfieldr,
contains estimated starting programs for all first-term FYE students in
the midfielddata practice data. Use with the midfielddata practice data
only. This is the simplest case and is used here to illustrate our
procedure.</p></li>
<li><p>A custom FYE proxy data set based on the midfielddata practice
data, created by following the guidelines in <a href="art-070-creating-fye-proxies.html">Creating FYE proxies</a>. Use
with the midfielddata practice data only.</p></li>
<li><p>A custom FYE proxy data set based on MIDFIELD research data to
which you have access, created by following the guidelines in <a href="art-070-creating-fye-proxies.html">Creating FYE proxies</a>. Use
with your MIDFIELD research data only.</p></li>
</ol>
<p>For practice in this section, we use the first case: the
<code>fye_proxy</code> data set included with midfieldr. Our goal is to
identify starters of the case study programs (Civil, Electrical,
Industrial/Systems, and Mechanical Engineering) as if we were preparing
to compute graduation rates.</p>
<p>In this example, the basic steps are to start with all students ever
enrolled in the case study programs, filter for first-term information
only, replace first-term FYE program codes with the prepared FYE
proxies, and filter the result to retain the case study programs
only.</p>
<p>If you are writing your own script to follow along, we start with
these packages:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Packages</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/MIDFIELDR/midfieldr" class="external-link">"midfieldr"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/MIDFIELDR/midfielddata" class="external-link">"midfielddata"</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressPackageStartupMessages</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://r-datatable.com" class="external-link">"data.table"</a></span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Printing options for data.table</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span></span>
<span>  datatable.print.nrows <span class="op">=</span> <span class="fl">17</span>,</span>
<span>  datatable.print.topn <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  datatable.print.class <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h2>
<p><strong>Loading.</strong> Data files included with with
midfieldr.</p>
<dl>
<dt><code>study_mcid</code></dt>
<dd>
<p>IDs of students ever enrolled in four programs (Civil, Electrical,
Industrial/Systems, and Mechanical Engineering) after filtering for data
sufficiency, degree seeking, and program. (Deriving these data from the
source data tables is described in <a href="art-002-case-data.html">Case
study: Data</a>).</p>
</dd>
</dl>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">study_mcid</span></span>
<span><span class="co">#&gt;              mcid</span></span>
<span><span class="co">#&gt;            &lt;char&gt;</span></span>
<span><span class="co">#&gt;    1: MID25783178</span></span>
<span><span class="co">#&gt;    2: MID25783441</span></span>
<span><span class="co">#&gt;    3: MID25783491</span></span>
<span><span class="co">#&gt;    4: MID25783912</span></span>
<span><span class="co">#&gt;    5: MID25784025</span></span>
<span><span class="co">#&gt;   ---            </span></span>
<span><span class="co">#&gt; 7129: MID26696958</span></span>
<span><span class="co">#&gt; 7130: MID26696967</span></span>
<span><span class="co">#&gt; 7131: MID26697163</span></span>
<span><span class="co">#&gt; 7132: MID26697444</span></span>
<span><span class="co">#&gt; 7133: MID26697447</span></span></code></pre></div>
<dl>
<dt><code>study_programs</code></dt>
<dd>
<p>CIP codes and abbreviated labels for the case study programs.
(Deriving these data from the source data tables is described in <a href="art-002-case-data.html">Case study: Data</a>).</p>
</dd>
</dl>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">study_programs</span></span>
<span><span class="co">#&gt;       cip6 program</span></span>
<span><span class="co">#&gt;     &lt;char&gt;  &lt;char&gt;</span></span>
<span><span class="co">#&gt;  1: 140801      CE</span></span>
<span><span class="co">#&gt;  2: 140802      CE</span></span>
<span><span class="co">#&gt;  3: 140803      CE</span></span>
<span><span class="co">#&gt;  4: 140804      CE</span></span>
<span><span class="co">#&gt;  5: 140805      CE</span></span>
<span><span class="co">#&gt;  6: 140899      CE</span></span>
<span><span class="co">#&gt;  7: 141001      EE</span></span>
<span><span class="co">#&gt;  8: 141003      EE</span></span>
<span><span class="co">#&gt;  9: 141004      EE</span></span>
<span><span class="co">#&gt; 10: 141099      EE</span></span>
<span><span class="co">#&gt; 11: 141901      ME</span></span>
<span><span class="co">#&gt; 12: 142701     ISE</span></span>
<span><span class="co">#&gt; 13: 143501     ISE</span></span>
<span><span class="co">#&gt; 14: 143601     ISE</span></span>
<span><span class="co">#&gt; 15: 143701     ISE</span></span></code></pre></div>
<dl>
<dt><code>fye_proxy</code></dt>
<dd>
<p>Proxy programs for all first-term FYE students in the practice data
set. The <code>proxy</code> variable gives the estimateed 6-digit CIP
code. (Deriving these data from the source data tables is described
above in [Creating FYE proxies].)</p>
</dd>
</dl>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fye_proxy</span></span>
<span><span class="co">#&gt;              mcid  proxy</span></span>
<span><span class="co">#&gt;            &lt;char&gt; &lt;char&gt;</span></span>
<span><span class="co">#&gt;    1: MID25783162 140801</span></span>
<span><span class="co">#&gt;    2: MID25783178 140701</span></span>
<span><span class="co">#&gt;    3: MID25783197 140701</span></span>
<span><span class="co">#&gt;    4: MID25783388 141901</span></span>
<span><span class="co">#&gt;    5: MID25783441 140801</span></span>
<span><span class="co">#&gt;   ---                   </span></span>
<span><span class="co">#&gt; 3734: MID26648222 141901</span></span>
<span><span class="co">#&gt; 3735: MID26648283 141901</span></span>
<span><span class="co">#&gt; 3736: MID26648422 142101</span></span>
<span><span class="co">#&gt; 3737: MID26648484 143501</span></span>
<span><span class="co">#&gt; 3738: MID26648553 141901</span></span></code></pre></div>
<p><strong>Importing.</strong> Load the <code>term</code> data table. We
use the <code>term</code> and <code>cip6</code> variables, keyed by
student ID.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load data from midfielddata</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">term</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Display selected columns</span></span>
<span><span class="va">term</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">term</span>, <span class="va">cip6</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;                mcid   term   cip6</span></span>
<span><span class="co">#&gt;              &lt;char&gt; &lt;char&gt; &lt;char&gt;</span></span>
<span><span class="co">#&gt;      1: MID25783135  19911 520101</span></span>
<span><span class="co">#&gt;      2: MID25783135  19913 520101</span></span>
<span><span class="co">#&gt;      3: MID25783156  20011 040201</span></span>
<span><span class="co">#&gt;      4: MID25783156  20013 040201</span></span>
<span><span class="co">#&gt;      5: MID25783156  20021 040201</span></span>
<span><span class="co">#&gt;     ---                          </span></span>
<span><span class="co">#&gt; 710837: MID26697685  20164 521201</span></span>
<span><span class="co">#&gt; 710838: MID26697689  20163 240101</span></span>
<span><span class="co">#&gt; 710839: MID26697702  20161 240101</span></span>
<span><span class="co">#&gt; 710840: MID26697702  20163 240101</span></span>
<span><span class="co">#&gt; 710841: MID26697702  20164 240101</span></span></code></pre>
<p>You can view the help pages (and data dictionaries) by running</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Run in Console</span></span>
<span><span class="op">?</span> <span class="va">study_mcid</span></span>
<span><span class="op">?</span> <span class="va">study_programs</span></span>
<span><span class="op">?</span> <span class="va">fye_proxy</span></span>
<span><span class="op">?</span> <span class="va">term</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="obtain-first-term-records">Obtain first-term records<a class="anchor" aria-label="anchor" href="#obtain-first-term-records"></a>
</h2>
<p><strong>Adding variables.</strong> Starting with the IDs as our
working data frame, we join the <code>term</code> and <code>cip6</code>
columns from the <code>term</code> table, creating one row per term per
student ID.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create working data frame</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">study_mcid</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Left-outer join, term into IDs</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">term</span><span class="op">[</span><span class="va">DT</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">term</span>, <span class="va">cip6</span><span class="op">)</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Display the result</span></span>
<span><span class="va">DT</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;               mcid   term   cip6</span></span>
<span><span class="co">#&gt;             &lt;char&gt; &lt;char&gt; &lt;char&gt;</span></span>
<span><span class="co">#&gt;     1: MID25783178  19946 140102</span></span>
<span><span class="co">#&gt;     2: MID25783178  19951 140102</span></span>
<span><span class="co">#&gt;     3: MID25783178  19953 140102</span></span>
<span><span class="co">#&gt;     4: MID25783178  19956 140102</span></span>
<span><span class="co">#&gt;     5: MID25783178  19961 140102</span></span>
<span><span class="co">#&gt;    ---                          </span></span>
<span><span class="co">#&gt; 74782: MID26697447  20134 141001</span></span>
<span><span class="co">#&gt; 74783: MID26697447  20141 141001</span></span>
<span><span class="co">#&gt; 74784: MID26697447  20143 141001</span></span>
<span><span class="co">#&gt; 74785: MID26697447  20151 141001</span></span>
<span><span class="co">#&gt; 74786: MID26697447  20153 141001</span></span></code></pre>
<p><strong>Filtering.</strong> To identify starters for a graduation
rate calculation, we are interested in the programs to which students
are first admitted. Therefore, we order the rows by ID and term, then
filter to retain their first term only. The resulting <code>cip6</code>
column contains students’ first-term CIP program codes.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Retain initial term</span></span>
<span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html" class="external-link">setorderv</a></span><span class="op">(</span><span class="va">DT</span>, cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span>, <span class="st">"term"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span>, <span class="va">.SD</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Display the result</span></span>
<span><span class="va">DT</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;              mcid   term   cip6</span></span>
<span><span class="co">#&gt;            &lt;char&gt; &lt;char&gt; &lt;char&gt;</span></span>
<span><span class="co">#&gt;    1: MID25783178  19946 140102</span></span>
<span><span class="co">#&gt;    2: MID25783441  19921 140102</span></span>
<span><span class="co">#&gt;    3: MID25783491  19961 140102</span></span>
<span><span class="co">#&gt;    4: MID25783912  19971 140102</span></span>
<span><span class="co">#&gt;    5: MID25784025  19891 140102</span></span>
<span><span class="co">#&gt;   ---                          </span></span>
<span><span class="co">#&gt; 7129: MID26696958  20111 141901</span></span>
<span><span class="co">#&gt; 7130: MID26696967  20101 141901</span></span>
<span><span class="co">#&gt; 7131: MID26697163  20101 140101</span></span>
<span><span class="co">#&gt; 7132: MID26697444  20101 141901</span></span>
<span><span class="co">#&gt; 7133: MID26697447  20111 140701</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="create-start-variable">Create start variable<a class="anchor" aria-label="anchor" href="#create-start-variable"></a>
</h2>
<p><strong>Merging.</strong> Merge <code>fye_proxy</code> with the
working data frame <code>DT</code> and drop the <code>term</code>
variable. Because a proxy is associated with first-term FYE students
only, the left-outer join introduces NA values in the <code>proxy</code>
column for all other students.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Join the proxies to the working data frame</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">fye_proxy</span><span class="op">[</span><span class="va">DT</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">cip6</span>, <span class="va">proxy</span><span class="op">)</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Display the result</span></span>
<span><span class="va">DT</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;              mcid   cip6  proxy</span></span>
<span><span class="co">#&gt;            &lt;char&gt; &lt;char&gt; &lt;char&gt;</span></span>
<span><span class="co">#&gt;    1: MID25783178 140102 140701</span></span>
<span><span class="co">#&gt;    2: MID25783441 140102 140801</span></span>
<span><span class="co">#&gt;    3: MID25783491 140102 141001</span></span>
<span><span class="co">#&gt;    4: MID25783912 140102 143501</span></span>
<span><span class="co">#&gt;    5: MID25784025 140102 141901</span></span>
<span><span class="co">#&gt;   ---                          </span></span>
<span><span class="co">#&gt; 7129: MID26696958 141901   &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 7130: MID26696967 141901   &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 7131: MID26697163 140101   &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 7132: MID26697444 141901   &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 7133: MID26697447 140701   &lt;NA&gt;</span></span></code></pre>
<p><strong>Creating a variable.</strong> Estimated starting programs for
FYE students are in the <code>proxy</code> column. Actual, recorded
starting programs for non-FYE students are in the <code>cip6</code>
column. Create the <code>start</code> column to combine the two.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Combine all starting CIPs</span></span>
<span><span class="va">DT</span><span class="op">[</span>, <span class="va">start</span> <span class="op">:=</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/fcase.html" class="external-link">fcase</a></span><span class="op">(</span></span>
<span>  <span class="va">cip6</span> <span class="op">==</span> <span class="st">"140102"</span>, <span class="va">proxy</span>,</span>
<span>  <span class="va">cip6</span> <span class="op">!=</span> <span class="st">"140102"</span>, <span class="va">cip6</span></span>
<span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Display the result</span></span>
<span><span class="va">DT</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;              mcid   cip6  proxy  start</span></span>
<span><span class="co">#&gt;            &lt;char&gt; &lt;char&gt; &lt;char&gt; &lt;char&gt;</span></span>
<span><span class="co">#&gt;    1: MID25783178 140102 140701 140701</span></span>
<span><span class="co">#&gt;    2: MID25783441 140102 140801 140801</span></span>
<span><span class="co">#&gt;    3: MID25783491 140102 141001 141001</span></span>
<span><span class="co">#&gt;    4: MID25783912 140102 143501 143501</span></span>
<span><span class="co">#&gt;    5: MID25784025 140102 141901 141901</span></span>
<span><span class="co">#&gt;   ---                                 </span></span>
<span><span class="co">#&gt; 7129: MID26696958 141901   &lt;NA&gt; 141901</span></span>
<span><span class="co">#&gt; 7130: MID26696967 141901   &lt;NA&gt; 141901</span></span>
<span><span class="co">#&gt; 7131: MID26697163 140101   &lt;NA&gt; 140101</span></span>
<span><span class="co">#&gt; 7132: MID26697444 141901   &lt;NA&gt; 141901</span></span>
<span><span class="co">#&gt; 7133: MID26697447 140701   &lt;NA&gt; 140701</span></span></code></pre>
<p><strong>Adding variables.</strong> Add the case study program labels
and drop unnecessary columns. The left-outer join introduces NA values
in the <code>program</code> column for students not enrolled in one of
the four study programs.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># New memory location for labels</span></span>
<span><span class="va">join_labels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">study_programs</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Left-outer join, match by the CIPs in start</span></span>
<span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setattr.html" class="external-link">setnames</a></span><span class="op">(</span><span class="va">join_labels</span>, old <span class="op">=</span> <span class="st">"cip6"</span>, new <span class="op">=</span> <span class="st">"start"</span><span class="op">)</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">join_labels</span><span class="op">[</span><span class="va">DT</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"start"</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Display the result</span></span>
<span><span class="va">DT</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html" class="external-link">order</a></span><span class="op">(</span><span class="va">program</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;        start program        mcid   cip6  proxy</span></span>
<span><span class="co">#&gt;       &lt;char&gt;  &lt;char&gt;      &lt;char&gt; &lt;char&gt; &lt;char&gt;</span></span>
<span><span class="co">#&gt;    1: 140801      CE MID25783441 140102 140801</span></span>
<span><span class="co">#&gt;    2: 140801      CE MID25784209 140102 140801</span></span>
<span><span class="co">#&gt;    3: 140801      CE MID25784709 140102 140801</span></span>
<span><span class="co">#&gt;    4: 140801      CE MID25784843 140102 140801</span></span>
<span><span class="co">#&gt;    5: 140801      CE MID25784945 140102 140801</span></span>
<span><span class="co">#&gt;   ---                                         </span></span>
<span><span class="co">#&gt; 7129: 270101    &lt;NA&gt; MID26696116 270101   &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 7130: 140101    &lt;NA&gt; MID26696178 140101   &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 7131: 140401    &lt;NA&gt; MID26696771 140401   &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 7132: 140101    &lt;NA&gt; MID26697163 140101   &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 7133: 140701    &lt;NA&gt; MID26697447 140701   &lt;NA&gt;</span></span></code></pre>
<p><strong>Filtering.</strong> We retain students starting in one of the
four majors in the case study. The result is ready to be used as the
starting pool for a graduation rate calculation.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Keep the programs in the study</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">program</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setcolorder.html" class="external-link">setcolorder</a></span><span class="op">(</span><span class="va">DT</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span>, <span class="st">"cip6"</span>, <span class="st">"proxy"</span>, <span class="st">"start"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Display the result</span></span>
<span><span class="va">DT</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html" class="external-link">order</a></span><span class="op">(</span><span class="va">program</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;              mcid   cip6  proxy  start program</span></span>
<span><span class="co">#&gt;            &lt;char&gt; &lt;char&gt; &lt;char&gt; &lt;char&gt;  &lt;char&gt;</span></span>
<span><span class="co">#&gt;    1: MID25783441 140102 140801 140801      CE</span></span>
<span><span class="co">#&gt;    2: MID25784209 140102 140801 140801      CE</span></span>
<span><span class="co">#&gt;    3: MID25784709 140102 140801 140801      CE</span></span>
<span><span class="co">#&gt;    4: MID25784843 140102 140801 140801      CE</span></span>
<span><span class="co">#&gt;    5: MID25784945 140102 140801 140801      CE</span></span>
<span><span class="co">#&gt;   ---                                         </span></span>
<span><span class="co">#&gt; 4892: MID26696484 141901   &lt;NA&gt; 141901      ME</span></span>
<span><span class="co">#&gt; 4893: MID26696738 141901   &lt;NA&gt; 141901      ME</span></span>
<span><span class="co">#&gt; 4894: MID26696958 141901   &lt;NA&gt; 141901      ME</span></span>
<span><span class="co">#&gt; 4895: MID26696967 141901   &lt;NA&gt; 141901      ME</span></span>
<span><span class="co">#&gt; 4896: MID26697444 141901   &lt;NA&gt; 141901      ME</span></span></code></pre>
<p><strong>Data set-aside.</strong> The case study direct matriculants
are set aside for use in <a href="#assessing-fye-proxies">Assessing FYE
proxies</a>.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Direct matriculants</span></span>
<span><span class="va">direct_start</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">proxy</span><span class="op">)</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">start</span>, <span class="va">program</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Display the result</span></span>
<span><span class="va">direct_start</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html" class="external-link">order</a></span><span class="op">(</span><span class="va">start</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;              mcid  start program</span></span>
<span><span class="co">#&gt;            &lt;char&gt; &lt;char&gt;  &lt;char&gt;</span></span>
<span><span class="co">#&gt;    1: MID25787414 140801      CE</span></span>
<span><span class="co">#&gt;    2: MID25796088 140801      CE</span></span>
<span><span class="co">#&gt;    3: MID25801036 140801      CE</span></span>
<span><span class="co">#&gt;    4: MID25801582 140801      CE</span></span>
<span><span class="co">#&gt;    5: MID25803175 140801      CE</span></span>
<span><span class="co">#&gt;   ---                           </span></span>
<span><span class="co">#&gt; 3715: MID26687969 143501     ISE</span></span>
<span><span class="co">#&gt; 3716: MID26690944 143501     ISE</span></span>
<span><span class="co">#&gt; 3717: MID26692128 143501     ISE</span></span>
<span><span class="co">#&gt; 3718: MID26692594 143501     ISE</span></span>
<span><span class="co">#&gt; 3719: MID26696429 143501     ISE</span></span></code></pre>
<p><strong>Drop unnecessary columns.</strong></p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Retain required columns</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">start</span>, <span class="va">program</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Display the result</span></span>
<span><span class="va">DT</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;              mcid  start program</span></span>
<span><span class="co">#&gt;            &lt;char&gt; &lt;char&gt;  &lt;char&gt;</span></span>
<span><span class="co">#&gt;    1: MID25783441 140801      CE</span></span>
<span><span class="co">#&gt;    2: MID25783491 141001      EE</span></span>
<span><span class="co">#&gt;    3: MID25783912 143501     ISE</span></span>
<span><span class="co">#&gt;    4: MID25784025 141901      ME</span></span>
<span><span class="co">#&gt;    5: MID25784209 140801      CE</span></span>
<span><span class="co">#&gt;   ---                           </span></span>
<span><span class="co">#&gt; 4892: MID26696642 141001      EE</span></span>
<span><span class="co">#&gt; 4893: MID26696738 141901      ME</span></span>
<span><span class="co">#&gt; 4894: MID26696958 141901      ME</span></span>
<span><span class="co">#&gt; 4895: MID26696967 141901      ME</span></span>
<span><span class="co">#&gt; 4896: MID26697444 141901      ME</span></span></code></pre>
<p>For convenience, data in this form are included with midfieldr as
<code>study_starters</code>. You can view the help page (and data
dictionary) by running</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Run in Console</span></span>
<span><span class="op">?</span> <span class="va">study_starters</span></span></code></pre></div>
<p><strong>Confirming results.</strong> Verify the results agree with
the data included with midfieldr.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Verify results</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">DT</span>, <span class="va">study_starters</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p><em>This step concludes the procedure for using prepared FYE proxy
data.</em></p>
</div>
<div class="section level2">
<h2 id="assessing-fye-proxies">Assessing FYE proxies<a class="anchor" aria-label="anchor" href="#assessing-fye-proxies"></a>
</h2>
<div class="section level3">
<h3 id="starter-miscounts">Starter miscounts<a class="anchor" aria-label="anchor" href="#starter-miscounts"></a>
</h3>
<p>The main goal of estimateing FYE proxies is to prevent starter
miscounts. Here, we use two data sets developed earlier to assess the
potential for miscounts if FYE records are not treated as recommended.
The data sets are:</p>
<dl>
<dt><code>direct_start</code></dt>
<dd>
<p>First-term direct starters in the case study programs. Excludes FYE
students.</p>
</dd>
<dt><code>study_starters</code></dt>
<dd>
<p>All first-term starters—direct and FYE proxy—in the case study
programs.</p>
</dd>
</dl>
<p><strong>Data set <code>direct_start</code></strong></p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Display the data set</span></span>
<span><span class="va">direct_start</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;              mcid  start program</span></span>
<span><span class="co">#&gt;            &lt;char&gt; &lt;char&gt;  &lt;char&gt;</span></span>
<span><span class="co">#&gt;    1: MID25787166 143501     ISE</span></span>
<span><span class="co">#&gt;    2: MID25787191 141901      ME</span></span>
<span><span class="co">#&gt;    3: MID25787414 140801      CE</span></span>
<span><span class="co">#&gt;    4: MID25788855 141001      EE</span></span>
<span><span class="co">#&gt;    5: MID25789187 141001      EE</span></span>
<span><span class="co">#&gt;   ---                           </span></span>
<span><span class="co">#&gt; 3715: MID26696642 141001      EE</span></span>
<span><span class="co">#&gt; 3716: MID26696738 141901      ME</span></span>
<span><span class="co">#&gt; 3717: MID26696958 141901      ME</span></span>
<span><span class="co">#&gt; 3718: MID26696967 141901      ME</span></span>
<span><span class="co">#&gt; 3719: MID26697444 141901      ME</span></span></code></pre>
<p>Summarizing by program.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Count by program</span></span>
<span><span class="va">direct</span> <span class="op">&lt;-</span> <span class="va">direct_start</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span>direct_start <span class="op">=</span> <span class="va">.N</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">"program"</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Display the result</span></span>
<span><span class="va">direct</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;    program direct_start</span></span>
<span><span class="co">#&gt;     &lt;char&gt;        &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1:     ISE          337</span></span>
<span><span class="co">#&gt; 2:      ME         1294</span></span>
<span><span class="co">#&gt; 3:      CE          763</span></span>
<span><span class="co">#&gt; 4:      EE         1325</span></span></code></pre>
<p><strong>Data set <code>study_starters</code></strong> includes all
direct starters and all FYE proxy starters in the case study.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Display the data set</span></span>
<span><span class="va">study_starters</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;              mcid  start program</span></span>
<span><span class="co">#&gt;            &lt;char&gt; &lt;char&gt;  &lt;char&gt;</span></span>
<span><span class="co">#&gt;    1: MID25783441 140801      CE</span></span>
<span><span class="co">#&gt;    2: MID25783491 141001      EE</span></span>
<span><span class="co">#&gt;    3: MID25783912 143501     ISE</span></span>
<span><span class="co">#&gt;    4: MID25784025 141901      ME</span></span>
<span><span class="co">#&gt;    5: MID25784209 140801      CE</span></span>
<span><span class="co">#&gt;   ---                           </span></span>
<span><span class="co">#&gt; 4892: MID26696642 141001      EE</span></span>
<span><span class="co">#&gt; 4893: MID26696738 141901      ME</span></span>
<span><span class="co">#&gt; 4894: MID26696958 141901      ME</span></span>
<span><span class="co">#&gt; 4895: MID26696967 141901      ME</span></span>
<span><span class="co">#&gt; 4896: MID26697444 141901      ME</span></span></code></pre>
<p>Summarizing the <code>study_starters</code> data set.</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Count by program</span></span>
<span><span class="va">estimated</span> <span class="op">&lt;-</span> <span class="va">study_starters</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span>all_start <span class="op">=</span> <span class="va">.N</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">"program"</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Display the result</span></span>
<span><span class="va">estimated</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;    program all_start</span></span>
<span><span class="co">#&gt;     &lt;char&gt;     &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1:      CE      1055</span></span>
<span><span class="co">#&gt; 2:      EE      1603</span></span>
<span><span class="co">#&gt; 3:     ISE       483</span></span>
<span><span class="co">#&gt; 4:      ME      1755</span></span></code></pre>
<p><strong>Results.</strong> Merging the data frames for comparison.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Join</span></span>
<span><span class="va">starter_subsets</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">direct</span>, <span class="va">estimated</span>, by <span class="op">=</span> <span class="st">"program"</span>, all.x <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Display the result</span></span>
<span><span class="va">starter_subsets</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;    program direct_start all_start</span></span>
<span><span class="co">#&gt;     &lt;char&gt;        &lt;int&gt;     &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1:      CE          763      1055</span></span>
<span><span class="co">#&gt; 2:      EE         1325      1603</span></span>
<span><span class="co">#&gt; 3:     ISE          337       483</span></span>
<span><span class="co">#&gt; 4:      ME         1294      1755</span></span></code></pre>
<p>To quantify the potential for miscounts, we compute the percentage of
starters represented by the FYE proxies.</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># FYE percentage of all starters</span></span>
<span><span class="va">starter_subsets</span><span class="op">[</span>, <span class="va">FYE_pct</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fl">100</span> <span class="op">*</span> <span class="op">(</span><span class="va">all_start</span> <span class="op">-</span> <span class="va">direct_start</span><span class="op">)</span> <span class="op">/</span> <span class="va">all_start</span>, <span class="fl">1</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Display the result</span></span>
<span><span class="va">starter_subsets</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;    program direct_start all_start FYE_pct</span></span>
<span><span class="co">#&gt;     &lt;char&gt;        &lt;int&gt;     &lt;int&gt;   &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:      CE          763      1055    27.7</span></span>
<span><span class="co">#&gt; 2:      EE         1325      1603    17.3</span></span>
<span><span class="co">#&gt; 3:     ISE          337       483    30.2</span></span>
<span><span class="co">#&gt; 4:      ME         1294      1755    26.3</span></span></code></pre>
<p>The results indicate (for these practice data at least) an
under-count of 17% to 30% if FYE proxies are excluded when counting
starters.</p>
</div>
<div class="section level3">
<h3 id="credibility">Credibility<a class="anchor" aria-label="anchor" href="#credibility"></a>
</h3>
<p>Here we summarize the FYE proxy data set to see how many students our
algorithm assigned to which engineering majors. Start by extracting the
unique set of CIP codes from the proxy data set.</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Identify unique CIP codes in the proxy data</span></span>
<span><span class="va">proxy_cips</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">fye_proxy</span><span class="op">$</span><span class="va">proxy</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Display the results</span></span>
<span><span class="va">proxy_cips</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;  [1] "140201" "140301" "140501" "140601" "140701" "140801" "140901" "141001"</span></span>
<span><span class="co">#&gt;  [9] "141101" "141301" "141401" "141801" "141901" "142101" "143301" "143501"</span></span>
<span><span class="co">#&gt; [17] "149999"</span></span></code></pre>
<p>Obtain the program names from the <code>cip</code> data set (provided
with midfieldr). We use the 4-digit names that in engineering generally
represent department-level programs.</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Obtain the 4-digit program names corresponding to these codes</span></span>
<span><span class="va">proxy_program_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_search.html">filter_search</a></span><span class="op">(</span><span class="va">cip</span>, keep_text <span class="op">=</span> <span class="va">proxy_cips</span><span class="op">)</span></span>
<span><span class="va">proxy_program_names</span> <span class="op">&lt;-</span> <span class="va">proxy_program_names</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">cip6</span>, program <span class="op">=</span> <span class="va">cip4name</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">proxy_program_names</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;       cip6                                                 program</span></span>
<span><span class="co">#&gt;     &lt;char&gt;                                                  &lt;char&gt;</span></span>
<span><span class="co">#&gt;  1: 140201   Aerospace, Aeronautical and Astronautical Engineering</span></span>
<span><span class="co">#&gt;  2: 140301 Agricultural, Biological Engineering and Bioengineering</span></span>
<span><span class="co">#&gt;  3: 140501                         Biomedical, Medical Engineering</span></span>
<span><span class="co">#&gt;  4: 140601                        Ceramic Sciences and Engineering</span></span>
<span><span class="co">#&gt;  5: 140701                                    Chemical Engineering</span></span>
<span><span class="co">#&gt;  6: 140801                                       Civil Engineering</span></span>
<span><span class="co">#&gt;  7: 140901                           Computer Engineering, General</span></span>
<span><span class="co">#&gt;  8: 141001  Electrical, Electronics and Communications Engineering</span></span>
<span><span class="co">#&gt;  9: 141101                                   Engineering Mechanics</span></span>
<span><span class="co">#&gt; 10: 141301                                     Engineering Science</span></span>
<span><span class="co">#&gt; 11: 141401         Environmental, Environmental Health Engineering</span></span>
<span><span class="co">#&gt; 12: 141801                                   Materials Engineering</span></span>
<span><span class="co">#&gt; 13: 141901                                  Mechanical Engineering</span></span>
<span><span class="co">#&gt; 14: 142101                          Mining and Mineral Engineering</span></span>
<span><span class="co">#&gt; 15: 143301                                Construction Engineering</span></span>
<span><span class="co">#&gt; 16: 143501                                  Industrial Engineering</span></span>
<span><span class="co">#&gt; 17: 149999                                      Engineering, Other</span></span></code></pre>
<p>Join these names to the proxy data set, summarize by program, and
order the rows by descending N.</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Join these program names to the proxy data</span></span>
<span><span class="va">proxy_programs</span> <span class="op">&lt;-</span> <span class="va">proxy_program_names</span><span class="op">[</span><span class="va">fye_proxy</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span>cip6 <span class="op">=</span> <span class="va">proxy</span><span class="op">)</span><span class="op">]</span>, <span class="fu">.</span><span class="op">(</span><span class="va">program</span><span class="op">)</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cip6"</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Count by program and order rows in descending magnitude</span></span>
<span><span class="va">proxy_programs</span> <span class="op">&lt;-</span> <span class="va">proxy_programs</span><span class="op">[</span>, <span class="va">.N</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"program"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html" class="external-link">setorderv</a></span><span class="op">(</span><span class="va">proxy_programs</span>, order <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>, cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"N"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Display the result</span></span>
<span><span class="va">proxy_programs</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;                                                     program     N</span></span>
<span><span class="co">#&gt;                                                      &lt;char&gt; &lt;int&gt;</span></span>
<span><span class="co">#&gt;  1:                                  Mechanical Engineering   938</span></span>
<span><span class="co">#&gt;  2:                                       Civil Engineering   562</span></span>
<span><span class="co">#&gt;  3:  Electrical, Electronics and Communications Engineering   515</span></span>
<span><span class="co">#&gt;  4:                           Computer Engineering, General   407</span></span>
<span><span class="co">#&gt;  5:                                    Chemical Engineering   339</span></span>
<span><span class="co">#&gt;  6:   Aerospace, Aeronautical and Astronautical Engineering   311</span></span>
<span><span class="co">#&gt;  7:                                  Industrial Engineering   287</span></span>
<span><span class="co">#&gt;  8: Agricultural, Biological Engineering and Bioengineering    85</span></span>
<span><span class="co">#&gt;  9:                          Mining and Mineral Engineering    80</span></span>
<span><span class="co">#&gt; 10:                                   Engineering Mechanics    75</span></span>
<span><span class="co">#&gt; 11:                        Ceramic Sciences and Engineering    63</span></span>
<span><span class="co">#&gt; 12:                                   Materials Engineering    60</span></span>
<span><span class="co">#&gt; 13:                                     Engineering Science     7</span></span>
<span><span class="co">#&gt; 14:         Environmental, Environmental Health Engineering     4</span></span>
<span><span class="co">#&gt; 15:                                Construction Engineering     3</span></span>
<span><span class="co">#&gt; 16:                                      Engineering, Other     1</span></span>
<span><span class="co">#&gt; 17:                         Biomedical, Medical Engineering     1</span></span></code></pre>
<p>For comparison, the National Science Foundation (NSF) reports that in
2012, the top seven US engineering majors ranked by enrollment were
<span class="citation">(<a href="#ref-NSF:2014" role="doc-biblioref">NSF, 2014</a>)</span>:</p>
<ul>
<li>Mechanical</li>
<li>Electrical</li>
<li>Civil</li>
<li>Chemical</li>
<li>Industrial</li>
<li>Aerospace</li>
<li>Materials</li>
</ul>
<p>The NSF data table does not break out Computer Engineering as a
separate observation—if we can assume that Computer Engineering is
combined with Electrical Engineering (a practice followed at many
Engineering colleges), we obtain the following programs in order of
enrollment,</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Combine Electrical and Computer Engineering</span></span>
<span><span class="va">new_row</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span></span>
<span>  program <span class="op">=</span> <span class="st">"Electrical/Computer Engineering"</span>,</span>
<span>  N <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">proxy_programs</span><span class="op">[</span><span class="va">program</span> <span class="op"><a href="https://Rdatatable.gitlab.io/data.table/reference/like.html" class="external-link">%ilike%</a></span> <span class="st">"Electrical|Computer"</span>, <span class="va">N</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># New location in memory</span></span>
<span><span class="va">rev_proxy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">proxy_programs</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Drop the separate Electrical and Computer rows</span></span>
<span><span class="va">rev_proxy</span> <span class="op">&lt;-</span> <span class="va">rev_proxy</span><span class="op">[</span><span class="op">!</span><span class="va">program</span> <span class="op"><a href="https://Rdatatable.gitlab.io/data.table/reference/like.html" class="external-link">%ilike%</a></span> <span class="st">"Electrical|Computer"</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Bind the new row and order</span></span>
<span><span class="va">rev_proxy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/rbindlist.html" class="external-link">rbindlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">rev_proxy</span>, <span class="va">new_row</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html" class="external-link">setorderv</a></span><span class="op">(</span><span class="va">rev_proxy</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"N"</span><span class="op">)</span>, <span class="op">-</span><span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Display the top 7 rows</span></span>
<span><span class="va">rev_proxy</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">7</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;                                                    program     N</span></span>
<span><span class="co">#&gt;                                                     &lt;char&gt; &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1:                                  Mechanical Engineering   938</span></span>
<span><span class="co">#&gt; 2:                         Electrical/Computer Engineering   922</span></span>
<span><span class="co">#&gt; 3:                                       Civil Engineering   562</span></span>
<span><span class="co">#&gt; 4:                                    Chemical Engineering   339</span></span>
<span><span class="co">#&gt; 5:   Aerospace, Aeronautical and Astronautical Engineering   311</span></span>
<span><span class="co">#&gt; 6:                                  Industrial Engineering   287</span></span>
<span><span class="co">#&gt; 7: Agricultural, Biological Engineering and Bioengineering    85</span></span></code></pre>
<p>The NSF results are for a single year while the practice data used in
our analysis span 30 years (1987–2016), so some differences are to be
expected. Nevertheless, this listing matches the top six programs in the
NSF list in nearly the same order (rows 5 and 6 have swapped
places).</p>
<p>We conclude that the imputation is credible at least to the extent
that the ranking of the majors is consistent with expectations.</p>
</div>
</div>
<div class="section level2">
<h2 id="closing">Closing<a class="anchor" aria-label="anchor" href="#closing"></a>
</h2>
<p>For the practice data used in this example, results indicate a
possible under-count of 17% to 30% if FYE proxies are excluded when
counting starters.</p>
<p>The estimation/imputation process is credible at least to the extent
that the ranking of the majors by enrollment is consistent with the 2012
rankings reported by the NSF.</p>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" line-spacing="2">
<div id="ref-NSF:2014" class="csl-entry">
NSF. (2014). <em><span class="nocase">Science and Engineering Indicators
Report</span></em>. <span>National Science Foundation</span>. <a href="https://www.nsf.gov/nsb/sei/edTool/data/engineering-01.html" class="external-link">https://www.nsf.gov/nsb/sei/edTool/data/engineering-01.html</a>
</div>
</div>
</div>
<div class="section level2">
<h2 id="appendix">Appendix<a class="anchor" aria-label="anchor" href="#appendix"></a>
</h2>
<div class="section level3">
<h3 id="complete-script">Complete script<a class="anchor" aria-label="anchor" href="#complete-script"></a>
</h3>
<p>The vignette code chunks are collected below in a single, condensed
script.</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Obtain first-term records</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">study_mcid</span><span class="op">)</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">term</span><span class="op">[</span><span class="va">DT</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">term</span>, <span class="va">cip6</span><span class="op">)</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html" class="external-link">setorderv</a></span><span class="op">(</span><span class="va">DT</span>, cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span>, <span class="st">"term"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span>, <span class="va">.SD</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Merge proxies </span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">fye_proxy</span><span class="op">[</span><span class="va">DT</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">cip6</span>, <span class="va">proxy</span><span class="op">)</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Create start variable</span></span>
<span><span class="va">DT</span><span class="op">[</span>, <span class="va">start</span> <span class="op">:=</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/fcase.html" class="external-link">fcase</a></span><span class="op">(</span></span>
<span>  <span class="va">cip6</span> <span class="op">==</span> <span class="st">"140102"</span>, <span class="va">proxy</span>,</span>
<span>  <span class="va">cip6</span> <span class="op">!=</span> <span class="st">"140102"</span>, <span class="va">cip6</span></span>
<span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Filter desired programs</span></span>
<span><span class="va">join_labels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">study_programs</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setattr.html" class="external-link">setnames</a></span><span class="op">(</span><span class="va">join_labels</span>, old <span class="op">=</span> <span class="st">"cip6"</span>, new <span class="op">=</span> <span class="st">"start"</span><span class="op">)</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">join_labels</span><span class="op">[</span><span class="va">DT</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"start"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">program</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setcolorder.html" class="external-link">setcolorder</a></span><span class="op">(</span><span class="va">DT</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span>, <span class="st">"cip6"</span>, <span class="st">"proxy"</span>, <span class="st">"start"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Data set-aside</span></span>
<span><span class="va">direct_start</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">proxy</span><span class="op">)</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">start</span>, <span class="va">program</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Confirm results</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">start</span>, <span class="va">program</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">DT</span>, <span class="va">study_starters</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Assessing FYE proxies</span></span>
<span><span class="va">direct</span> <span class="op">&lt;-</span> <span class="va">direct_start</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span>direct_start <span class="op">=</span> <span class="va">.N</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">"program"</span><span class="op">]</span></span>
<span><span class="va">estimated</span> <span class="op">&lt;-</span> <span class="va">study_starters</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span>all_start <span class="op">=</span> <span class="va">.N</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">"program"</span><span class="op">]</span></span>
<span><span class="va">starter_subsets</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">direct</span>, <span class="va">estimated</span>, by <span class="op">=</span> <span class="st">"program"</span>, all.x <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">starter_subsets</span><span class="op">[</span>, <span class="va">FYE_pct</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fl">100</span> <span class="op">*</span> <span class="op">(</span><span class="va">all_start</span> <span class="op">-</span> <span class="va">direct_start</span><span class="op">)</span> <span class="op">/</span> <span class="va">all_start</span>, <span class="fl">1</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Credibility</span></span>
<span><span class="va">proxy_cips</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">fye_proxy</span><span class="op">$</span><span class="va">proxy</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">proxy_program_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_search.html">filter_search</a></span><span class="op">(</span><span class="va">cip</span>, keep_text <span class="op">=</span> <span class="va">proxy_cips</span><span class="op">)</span></span>
<span><span class="va">proxy_program_names</span> <span class="op">&lt;-</span> <span class="va">proxy_program_names</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">cip6</span>, program <span class="op">=</span> <span class="va">cip4name</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">proxy_programs</span> <span class="op">&lt;-</span> <span class="va">proxy_program_names</span><span class="op">[</span><span class="va">fye_proxy</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span>cip6 <span class="op">=</span> <span class="va">proxy</span><span class="op">)</span><span class="op">]</span>, <span class="fu">.</span><span class="op">(</span><span class="va">program</span><span class="op">)</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cip6"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">proxy_programs</span> <span class="op">&lt;-</span> <span class="va">proxy_programs</span><span class="op">[</span>, <span class="va">.N</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"program"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html" class="external-link">setorderv</a></span><span class="op">(</span><span class="va">proxy_programs</span>, order <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>, cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"N"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Combine Electrical and Computer Engineering</span></span>
<span><span class="va">new_row</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span></span>
<span>  program <span class="op">=</span> <span class="st">"Electrical/Computer Engineering"</span>,</span>
<span>  N <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">proxy_programs</span><span class="op">[</span><span class="va">program</span> <span class="op"><a href="https://Rdatatable.gitlab.io/data.table/reference/like.html" class="external-link">%ilike%</a></span> <span class="st">"Electrical|Computer"</span>, <span class="va">N</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">rev_proxy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">proxy_programs</span><span class="op">)</span></span>
<span><span class="va">rev_proxy</span> <span class="op">&lt;-</span> <span class="va">rev_proxy</span><span class="op">[</span><span class="op">!</span><span class="va">program</span> <span class="op"><a href="https://Rdatatable.gitlab.io/data.table/reference/like.html" class="external-link">%ilike%</a></span> <span class="st">"Electrical|Computer"</span><span class="op">]</span></span>
<span><span class="va">rev_proxy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/rbindlist.html" class="external-link">rbindlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">rev_proxy</span>, <span class="va">new_row</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html" class="external-link">setorderv</a></span><span class="op">(</span><span class="va">rev_proxy</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"N"</span><span class="op">)</span>, <span class="op">-</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">rev_proxy</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">7</span><span class="op">]</span></span></code></pre></div>
<style type="text/css">
blockquote {
    padding: 10px 20px;
    margin: 0 0 20px;
    border-left: 0px
}
</style>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://github.com/graphdr" class="external-link">Richard Layton</a>, Russell Long, Matthew Ohland, Marisa Orr, Susan Lord, US National Science Foundation.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
