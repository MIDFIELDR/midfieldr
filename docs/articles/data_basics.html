<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Data basics • midfieldr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Data basics">
<meta property="og:description" content="midfieldr">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">midfieldr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0.9008</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/get_started.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/data_basics.html">Data basics</a>
    </li>
    <li>
      <a href="../articles/multiway_graphs.html">Multiway graphs and tables</a>
    </li>
    <li>
      <a href="../articles/identify_programs.html">Identify programs</a>
    </li>
    <li>
      <a href="../articles/handle_fye.html">Handle FYE programs</a>
    </li>
    <li>
      <a href="../articles/feasible_completion.html">Feasible completion</a>
    </li>
    <li>
      <a href="../articles/timely-completion.html">Timely completion</a>
    </li>
    <li>
      <a href="../articles/graduation_rate.html">Graduation rate</a>
    </li>
    <li>
      <a href="../articles/stickiness_metric.html">Stickiness metric</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../articles/pages/get_session.html">Session info</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../articles/pages/about_midfield.html">About</a>
</li>
<li>
  <a href="https://github.com/MIDFIELDR/midfieldr">
    <span class="fas fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="data_basics_files/header-attrs-2.7/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Data basics</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/MIDFIELDR/midfieldr/blob/master/vignettes/data_basics.Rmd"><code>vignettes/data_basics.Rmd</code></a></small>
      <div class="hidden name"><code>data_basics.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>Introduces the four data sets in the midfielddata package and basic data manipulation operations in the data.table package.</p>
<div id="why-data-table" class="section level3">
<h3 class="hasAnchor">
<a href="#why-data-table" class="anchor"></a>Why data.table?</h3>
<p><code>data.table</code> provides “a high-performance version of base R’s <code>data.frame</code> with syntax and feature enhancements for ease of use, convenience and programming speed” <span class="citation">(<a href="#ref-Dowle+Srinivasan:2020:data.table:website" role="doc-biblioref">Dowle and Srinivasan, 2020b</a>)</span>. MIDFIELD data can require a lot of memory (<code>midfieldcourses</code> has 3.5 M rows and requires 348 MB of memory), making data.table’s efficient use of memory potentially an important consideration.</p>
<p>Consequently, the midfieldr and midfielddata data sets are in data.table form and the inner workings of midfieldr functions are written using data.table syntax to take advantage of its features.</p>
<p>However, midfieldr users are not required to adopt data.table syntax if they prefer a different “dialect” such as base R or dplyr—midfieldr functions attempt to preserve data frames and tibbles when used as arguments.</p>
<p>The vignettes, while written using data.table syntax, can be rewritten in base R or dplyr using online resources such as those by van der Laken <span class="citation">(<a href="#ref-vanDerLaken:2020" role="doc-biblioref">2020</a>)</span> or Mercer <span class="citation">(<a href="#ref-Mercer:2020" role="doc-biblioref">2020</a>)</span>. We also highly recommend <span class="citation">(<a href="#ref-Zumel+Mount:2020" role="doc-biblioref">Zumel and Mount, 2020</a>, Ch. 5)</span>.</p>
</div>
<div id="this-vignette-uses" class="section level3">
<h3 class="hasAnchor">
<a href="#this-vignette-uses" class="anchor"></a>This vignette uses</h3>
<p>packages</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># packages used</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/MIDFIELDR/midfieldr">midfieldr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/MIDFIELDR/midfielddata">midfielddata</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com">data.table</a></span><span class="op">)</span>

<span class="co"># print max 10 rows, otherwise 5 rows each head/tail</span>
<span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span>datatable.print.nrows <span class="op">=</span> <span class="fl">10</span>, datatable.print.topn <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="midfielddata" class="section level2">
<h2 class="hasAnchor">
<a href="#midfielddata" class="anchor"></a>midfielddata</h2>
<p>midfielddata <a href="https://midfieldr.github.io/midfielddata/">(link)</a> is an R data package that provides a stratified sample of MIDFIELD data. Contains data for 97,640 undergraduates at 12 institutions from 1987–2016 in four interrelated data sets.</p>
<div id="midfieldstudents" class="section level3">
<h3 class="hasAnchor">
<a href="#midfieldstudents" class="anchor"></a>midfieldstudents</h3>
<ul>
<li>matriculation attributes keyed by student ID</li>
<li>97,640 students over 142 terms</li>
<li>97,640 rows, 15 columns, 19 MB memory</li>
<li>data dictionary <a href="https://midfieldr.github.io/midfielddata/reference/midfieldstudents.html">(link)</a>
</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">midfieldstudents</span>
<span class="co">#&gt;                 id   institution   cip6 term_enter transfer hours_transfer</span>
<span class="co">#&gt;     1: MID25783135 Institution M 511199      19911        N             NA</span>
<span class="co">#&gt;     2: MID25783147 Institution M 131202      20041        N             NA</span>
<span class="co">#&gt;     3: MID25783156 Institution M 040201      20011        N             NA</span>
<span class="co">#&gt;     4: MID25783162 Institution M 14XXXX      19921        N             NA</span>
<span class="co">#&gt;     5: MID25783166 Institution M 14XXXX      20091        N             NA</span>
<span class="co">#&gt;    ---                                                                    </span>
<span class="co">#&gt; 97636: MID26697680 Institution L 300000      20163        N             NA</span>
<span class="co">#&gt; 97637: MID26697682 Institution L 240101      20163        N             NA</span>
<span class="co">#&gt; 97638: MID26697685 Institution L 300000      20151        N             NA</span>
<span class="co">#&gt; 97639: MID26697689 Institution L 240101      20163        Y             47</span>
<span class="co">#&gt; 97640: MID26697702 Institution L 240101      20161        N             NA</span>
<span class="co">#&gt;           sex            race age us_citizen home_zip high_school sat_math</span>
<span class="co">#&gt;     1:   Male           White  17          Y    29485      411900      580</span>
<span class="co">#&gt;     2: Female           White  17          Y    29072      410825      470</span>
<span class="co">#&gt;     3: Female           White  18          Y    43026      210568      750</span>
<span class="co">#&gt;     4:   Male           White  17          Y    29572      411465      560</span>
<span class="co">#&gt;     5:   Male           White  18          Y    29016      410210      670</span>
<span class="co">#&gt;    ---                                                                    </span>
<span class="co">#&gt; 97636: Female           Other  39       &lt;NA&gt;    73119        &lt;NA&gt;       NA</span>
<span class="co">#&gt; 97637:   Male           White  36       &lt;NA&gt;    74104        &lt;NA&gt;      630</span>
<span class="co">#&gt; 97638:   Male           White  32       &lt;NA&gt;    73071        &lt;NA&gt;       NA</span>
<span class="co">#&gt; 97639:   Male Native American  42       &lt;NA&gt;    74857      372378       NA</span>
<span class="co">#&gt; 97640:   Male           White  38       &lt;NA&gt;    73112        &lt;NA&gt;       NA</span>
<span class="co">#&gt;        sat_verbal act_comp</span>
<span class="co">#&gt;     1:        505       21</span>
<span class="co">#&gt;     2:        530       19</span>
<span class="co">#&gt;     3:        627       29</span>
<span class="co">#&gt;     4:        395       18</span>
<span class="co">#&gt;     5:        530       26</span>
<span class="co">#&gt;    ---                    </span>
<span class="co">#&gt; 97636:         NA       14</span>
<span class="co">#&gt; 97637:        620       30</span>
<span class="co">#&gt; 97638:         NA       22</span>
<span class="co">#&gt; 97639:         NA       20</span>
<span class="co">#&gt; 97640:         NA       33</span></code></pre></div>
</div>
<div id="midfielddegrees" class="section level3">
<h3 class="hasAnchor">
<a href="#midfielddegrees" class="anchor"></a>midfielddegrees</h3>
<ul>
<li>degree attributes keyed by student ID</li>
<li>97,640 students of whom 47,499 earn bachelor’s degrees</li>
<li>97,640 rows, 5 columns, 10.2 MB memory</li>
<li>data dictionary <a href="https://midfieldr.github.io/midfielddata/reference/midfielddegrees.html">(link)</a>
</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">midfielddegrees</span>
<span class="co">#&gt;                 id   institution   cip6 term_degree              degree</span>
<span class="co">#&gt;     1: MID25783135 Institution M   &lt;NA&gt;          NA                &lt;NA&gt;</span>
<span class="co">#&gt;     2: MID25783147 Institution M   &lt;NA&gt;          NA                &lt;NA&gt;</span>
<span class="co">#&gt;     3: MID25783156 Institution M   &lt;NA&gt;          NA                &lt;NA&gt;</span>
<span class="co">#&gt;     4: MID25783162 Institution M 521401       19963 Bachelor of Science</span>
<span class="co">#&gt;     5: MID25783166 Institution M   &lt;NA&gt;          NA                &lt;NA&gt;</span>
<span class="co">#&gt;    ---                                                                 </span>
<span class="co">#&gt; 97636: MID26697680 Institution L   &lt;NA&gt;          NA                &lt;NA&gt;</span>
<span class="co">#&gt; 97637: MID26697682 Institution L   &lt;NA&gt;          NA                &lt;NA&gt;</span>
<span class="co">#&gt; 97638: MID26697685 Institution L   &lt;NA&gt;          NA                &lt;NA&gt;</span>
<span class="co">#&gt; 97639: MID26697689 Institution L   &lt;NA&gt;          NA                &lt;NA&gt;</span>
<span class="co">#&gt; 97640: MID26697702 Institution L   &lt;NA&gt;          NA                &lt;NA&gt;</span></code></pre></div>
</div>
<div id="midfieldterms" class="section level3">
<h3 class="hasAnchor">
<a href="#midfieldterms" class="anchor"></a>midfieldterms</h3>
<ul>
<li>term attributes keyed by student ID and academic term</li>
<li>95,995 students in 1190 programs over 148 terms<br>
</li>
<li>727,369 rows, 13 columns, 82 MB memory<br>
</li>
<li>data dictionary <a href="https://midfieldr.github.io/midfielddata/reference/midfieldterms.html">(link)</a>
</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">midfieldterms</span>
<span class="co">#&gt;                  id   institution   cip6  term        level</span>
<span class="co">#&gt;      1: MID25783135 Institution M 520101 19911  01 Freshman</span>
<span class="co">#&gt;      2: MID25783135 Institution M 520101 19913 02 Sophomore</span>
<span class="co">#&gt;      3: MID25783147 Institution M 131202 20041  01 Freshman</span>
<span class="co">#&gt;      4: MID25783147 Institution M 131210 20043 02 Sophomore</span>
<span class="co">#&gt;      5: MID25783147 Institution M 131210 20051 02 Sophomore</span>
<span class="co">#&gt;     ---                                                    </span>
<span class="co">#&gt; 727365: MID26697685 Institution L 521201 20164 02 Sophomore</span>
<span class="co">#&gt; 727366: MID26697689 Institution L 240101 20163    04 Senior</span>
<span class="co">#&gt; 727367: MID26697702 Institution L 240101 20161  01 Freshman</span>
<span class="co">#&gt; 727368: MID26697702 Institution L 240101 20163  01 Freshman</span>
<span class="co">#&gt; 727369: MID26697702 Institution L 240101 20164  01 Freshman</span>
<span class="co">#&gt;                      standing coop hours_term_attempt hours_term gpa_term</span>
<span class="co">#&gt;      1: First Time in College    N                 19         19     2.47</span>
<span class="co">#&gt;      2:         Good Standing    N                 14         14     3.21</span>
<span class="co">#&gt;      3: First Time in College    N                 13         17     3.76</span>
<span class="co">#&gt;      4:         Good Standing    N                 18         18     2.67</span>
<span class="co">#&gt;      5:         Good Standing    N                 15         15     3.20</span>
<span class="co">#&gt;     ---                                                                  </span>
<span class="co">#&gt; 727365:         Good Standing    N                  6          6     3.50</span>
<span class="co">#&gt; 727366:          New Transfer    N                  6          6     3.50</span>
<span class="co">#&gt; 727367: First Time in College    N                 12         12     3.25</span>
<span class="co">#&gt; 727368:         Good Standing    N                  6          6     4.00</span>
<span class="co">#&gt; 727369:         Good Standing    N                  3          3     4.00</span>
<span class="co">#&gt;         hours_cumul_attempt hours_cumul gpa_cumul</span>
<span class="co">#&gt;      1:                  19          19      2.47</span>
<span class="co">#&gt;      2:                  33          33      2.79</span>
<span class="co">#&gt;      3:                  13          17      3.76</span>
<span class="co">#&gt;      4:                  31          35      3.13</span>
<span class="co">#&gt;      5:                  46          50      3.15</span>
<span class="co">#&gt;     ---                                          </span>
<span class="co">#&gt; 727365:                  40          40      3.63</span>
<span class="co">#&gt; 727366:                   6         106      3.50</span>
<span class="co">#&gt; 727367:                  12          12      3.25</span>
<span class="co">#&gt; 727368:                  18          18      3.50</span>
<span class="co">#&gt; 727369:                  21          21      3.57</span></code></pre></div>
</div>
<div id="midfieldcourses" class="section level3">
<h3 class="hasAnchor">
<a href="#midfieldcourses" class="anchor"></a>midfieldcourses</h3>
<ul>
<li>course attributes keyed by student ID, academic term, and course/section identifiers</li>
<li>97,640 students in 59,751 courses over 153 terms</li>
<li>3,540,533 rows, 12 columns, 349 MB memory<br>
</li>
<li>data dictionary <a href="https://midfieldr.github.io/midfielddata/reference/midfieldcourses.html">(link)</a>
</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">midfieldcourses</span>
<span class="co">#&gt;            institution          id term_course                         course</span>
<span class="co">#&gt;       1: Institution M MID25783135       19911                               </span>
<span class="co">#&gt;       2: Institution M MID25783135       19911                               </span>
<span class="co">#&gt;       3: Institution M MID25783135       19911                               </span>
<span class="co">#&gt;       4: Institution M MID25783135       19911                               </span>
<span class="co">#&gt;       5: Institution M MID25783135       19911                               </span>
<span class="co">#&gt;      ---                                                                     </span>
<span class="co">#&gt; 3540529: Institution L MID26697702       20161      Interdisciplinary Inquiry</span>
<span class="co">#&gt; 3540530: Institution L MID26697702       20161    Leadership in Organizations</span>
<span class="co">#&gt; 3540531: Institution L MID26697702       20163    Goal Setting and Attainment</span>
<span class="co">#&gt; 3540532: Institution L MID26697702       20163          Non-Profit Management</span>
<span class="co">#&gt; 3540533: Institution L MID26697702       20164 Quality Initiatives Organiztns</span>
<span class="co">#&gt;          abbrev number section hours_course    type pass_fail grade</span>
<span class="co">#&gt;       1:   SPCH    363     001            3 Lecture        No     A</span>
<span class="co">#&gt;       2:     CH    101     005            4 Lecture        No     C</span>
<span class="co">#&gt;       3:     ED    103     002            1 Lecture        No     A</span>
<span class="co">#&gt;       4:   ENGL    101     050            3 Lecture        No     B</span>
<span class="co">#&gt;       5:  MTHSC    105     009            5 Lecture        No     D</span>
<span class="co">#&gt;      ---                                                           </span>
<span class="co">#&gt; 3540529:   LSTD   3003     105            3  Online        No     B</span>
<span class="co">#&gt; 3540530:   LSAL   3113     202            3  Online        No     B</span>
<span class="co">#&gt; 3540531:   LSAL   3173     301            3  Online        No     A</span>
<span class="co">#&gt; 3540532:   LSAL   4163     403            3  Online        No     A</span>
<span class="co">#&gt; 3540533:   LSAL   4123     501            3  Online        No     A</span>
<span class="co">#&gt;                 faculty_rank</span>
<span class="co">#&gt;       1:                    </span>
<span class="co">#&gt;       2:                    </span>
<span class="co">#&gt;       3:                    </span>
<span class="co">#&gt;       4:                    </span>
<span class="co">#&gt;       5:                    </span>
<span class="co">#&gt;      ---                    </span>
<span class="co">#&gt; 3540529:          Instructor</span>
<span class="co">#&gt; 3540530: Assistant Professor</span>
<span class="co">#&gt; 3540531:          Instructor</span>
<span class="co">#&gt; 3540532:          Instructor</span>
<span class="co">#&gt; 3540533:          Instructor</span></code></pre></div>
</div>
</div>
<div id="basic-data-manipulation-with-data-table" class="section level2">
<h2 class="hasAnchor">
<a href="#basic-data-manipulation-with-data-table" class="anchor"></a>Basic data manipulation with data.table</h2>
<p>In this section, we introduce the data.table syntax most often used in the midfieldr vignettes. For more information on data.table, see <span class="citation">(<a href="#ref-Dowle+Srinivasan:2020:data.table:website" role="doc-biblioref">Dowle and Srinivasan, 2020b</a>)</span>.</p>
<div id="identifying-a-data-table-object" class="section level3">
<h3 class="hasAnchor">
<a href="#identifying-a-data-table-object" class="anchor"></a>Identifying a data.table object</h3>
<p>If you view a data frame in the console, one clue that it is a data.table is the colon that separates the row number from the first column. For example, if I extract the first 10 rows from the degrees data, you can see the colons.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># data.table object</span>
<span class="va">midfielddegrees</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="op">]</span>
<span class="co">#&gt;              id   institution   cip6 term_degree              degree</span>
<span class="co">#&gt;  1: MID25783135 Institution M   &lt;NA&gt;          NA                &lt;NA&gt;</span>
<span class="co">#&gt;  2: MID25783147 Institution M   &lt;NA&gt;          NA                &lt;NA&gt;</span>
<span class="co">#&gt;  3: MID25783156 Institution M   &lt;NA&gt;          NA                &lt;NA&gt;</span>
<span class="co">#&gt;  4: MID25783162 Institution M 521401       19963 Bachelor of Science</span>
<span class="co">#&gt;  5: MID25783166 Institution M   &lt;NA&gt;          NA                &lt;NA&gt;</span>
<span class="co">#&gt;  6: MID25783167 Institution M   &lt;NA&gt;          NA                &lt;NA&gt;</span>
<span class="co">#&gt;  7: MID25783178 Institution M 143501       20001 Bachelor of Science</span>
<span class="co">#&gt;  8: MID25783184 Institution M   &lt;NA&gt;          NA                &lt;NA&gt;</span>
<span class="co">#&gt;  9: MID25783188 Institution M 230101       20023    Bachelor of Arts</span>
<span class="co">#&gt; 10: MID25783195 Institution M 521401       19966 Bachelor of Science</span></code></pre></div>
<p>Of course, we can identify its class directly. The output shows that a <code>data.table</code> is also <code>data.frame</code> thus one can operate on data.table objects using data.frame (base R) syntax.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># confirm classification</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">midfielddegrees</span><span class="op">)</span>
<span class="co">#&gt; [1] "data.table" "data.frame"</span></code></pre></div>
<p>Viewing a data.frame object (base R <code>airquality</code> data), the row numbers are not denoted by colons.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># data.frame object</span>
<span class="va">airquality</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="op">]</span>
<span class="co">#&gt;    Ozone Solar.R Wind Temp Month Day</span>
<span class="co">#&gt; 1     41     190  7.4   67     5   1</span>
<span class="co">#&gt; 2     36     118  8.0   72     5   2</span>
<span class="co">#&gt; 3     12     149 12.6   74     5   3</span>
<span class="co">#&gt; 4     18     313 11.5   62     5   4</span>
<span class="co">#&gt; 5     NA      NA 14.3   56     5   5</span>
<span class="co">#&gt; 6     28      NA 14.9   66     5   6</span>
<span class="co">#&gt; 7     23     299  8.6   65     5   7</span>
<span class="co">#&gt; 8     19      99 13.8   59     5   8</span>
<span class="co">#&gt; 9      8      19 20.1   61     5   9</span>
<span class="co">#&gt; 10    NA     194  8.6   69     5  10</span>

<span class="co"># confirm classification</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">airquality</span><span class="op">)</span>
<span class="co">#&gt; [1] "data.frame"</span></code></pre></div>
</div>
<div id="subset-and-arrange-rows" class="section level3">
<h3 class="hasAnchor">
<a href="#subset-and-arrange-rows" class="anchor"></a>Subset and arrange rows</h3>
<p><strong>Summary</strong></p>
<ul>
<li>
<code>DT[rows_we_want]</code> subset rows</li>
<li>
<code>DT[order(col)]</code> arrange rows by values in column</li>
<li>
<code>DT[]</code> to print the data</li>
</ul>
<p>We start by copying a data.table object. As we discuss later in the vignette, copies are used to avoid changing the source in place.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># start with a fresh copy</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html">copy</a></span><span class="op">(</span><span class="va">midfielddegrees</span><span class="op">)</span></code></pre></div>
<p><strong>Filter rows using a logical expression</strong></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># TRUE/FALSE/NA vector</span>
<span class="va">rows_we_want</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">$</span><span class="va">cip6</span> <span class="op">==</span> <span class="st">"540101"</span>

<span class="co"># subset the data frame</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="va">rows_we_want</span><span class="op">]</span>

<span class="co"># examine the result</span>
<span class="va">DT</span><span class="op">[</span><span class="op">]</span>
<span class="co">#&gt;               id   institution   cip6 term_degree           degree</span>
<span class="co">#&gt;   1: MID25784804 Institution M 540101       19943 Bachelor of Arts</span>
<span class="co">#&gt;   2: MID25785903 Institution M 540101       19983 Bachelor of Arts</span>
<span class="co">#&gt;   3: MID25792918 Institution M 540101       19963 Bachelor of Arts</span>
<span class="co">#&gt;   4: MID25793224 Institution M 540101       19941 Bachelor of Arts</span>
<span class="co">#&gt;   5: MID25795977 Institution M 540101       19993 Bachelor of Arts</span>
<span class="co">#&gt;  ---                                                              </span>
<span class="co">#&gt; 635: MID26692495 Institution L 540101       20141 Bachelor of Arts</span>
<span class="co">#&gt; 636: MID26693361 Institution L 540101       20144 Bachelor of Arts</span>
<span class="co">#&gt; 637: MID26694138 Institution L 540101       20121 Bachelor of Arts</span>
<span class="co">#&gt; 638: MID26695406 Institution L 540101       20133 Bachelor of Arts</span>
<span class="co">#&gt; 639: MID26696157 Institution L 540101       20151 Bachelor of Arts</span></code></pre></div>
<p>We could have written <code>DT[cip6 == "540101"]</code> and obtained the same result. For clarity, however, we use the 2-step process illustrated above: 1) identify the rows (or columns) we want, and 2) subset the data frame in a separate step.</p>
<p>Note too, in data.table syntax we can write</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">DT</span><span class="op">[</span><span class="va">rows_we_want</span><span class="op">]</span></code></pre></div>
<p>instead of the base R syntax,</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">DF</span><span class="op">[</span><span class="va">rows_we_want</span>, , drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">]</span></code></pre></div>
<p><strong>Filter rows using multiple conditions</strong></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># start with a fresh copy</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html">copy</a></span><span class="op">(</span><span class="va">midfielddegrees</span><span class="op">)</span>

<span class="co"># subset the data frame</span>
<span class="va">rows_we_want</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">DT</span><span class="op">$</span><span class="va">cip6</span><span class="op">)</span> <span class="op">&amp;</span> <span class="va">DT</span><span class="op">$</span><span class="va">institution</span> <span class="op">==</span> <span class="st">"Institution D"</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="va">rows_we_want</span><span class="op">]</span>

<span class="co"># examine the result</span>
<span class="va">DT</span><span class="op">[</span><span class="op">]</span>
<span class="co">#&gt;               id   institution cip6 term_degree degree</span>
<span class="co">#&gt;   1: MID26094493 Institution D &lt;NA&gt;          NA   &lt;NA&gt;</span>
<span class="co">#&gt;   2: MID26094544 Institution D &lt;NA&gt;          NA   &lt;NA&gt;</span>
<span class="co">#&gt;   3: MID26094742 Institution D &lt;NA&gt;          NA   &lt;NA&gt;</span>
<span class="co">#&gt;   4: MID26094785 Institution D &lt;NA&gt;          NA   &lt;NA&gt;</span>
<span class="co">#&gt;   5: MID26094801 Institution D &lt;NA&gt;          NA   &lt;NA&gt;</span>
<span class="co">#&gt;  ---                                                  </span>
<span class="co">#&gt; 285: MID26131229 Institution D &lt;NA&gt;          NA   &lt;NA&gt;</span>
<span class="co">#&gt; 286: MID26131231 Institution D &lt;NA&gt;          NA   &lt;NA&gt;</span>
<span class="co">#&gt; 287: MID26131238 Institution D &lt;NA&gt;          NA   &lt;NA&gt;</span>
<span class="co">#&gt; 288: MID26131261 Institution D &lt;NA&gt;          NA   &lt;NA&gt;</span>
<span class="co">#&gt; 289: MID26131268 Institution D &lt;NA&gt;          NA   &lt;NA&gt;</span></code></pre></div>
<p><strong>Discard rows with missing values</strong></p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># start with a fresh copy</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html">copy</a></span><span class="op">(</span><span class="va">midfielddegrees</span><span class="op">)</span>

<span class="co"># subset the data frame</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/na.omit.data.table.html">na.omit</a></span><span class="op">(</span><span class="va">DT</span><span class="op">)</span>

<span class="co"># examine the result</span>
<span class="va">DT</span><span class="op">[</span><span class="op">]</span>
<span class="co">#&gt;                 id   institution   cip6 term_degree</span>
<span class="co">#&gt;     1: MID25783162 Institution M 521401       19963</span>
<span class="co">#&gt;     2: MID25783178 Institution M 143501       20001</span>
<span class="co">#&gt;     3: MID25783188 Institution M 230101       20023</span>
<span class="co">#&gt;     4: MID25783195 Institution M 521401       19966</span>
<span class="co">#&gt;     5: MID25783197 Institution M 140801       19911</span>
<span class="co">#&gt;    ---                                             </span>
<span class="co">#&gt; 47495: MID26697553 Institution L 451001       20133</span>
<span class="co">#&gt; 47496: MID26697574 Institution L 300000       20113</span>
<span class="co">#&gt; 47497: MID26697576 Institution L 521401       20134</span>
<span class="co">#&gt; 47498: MID26697599 Institution L 110401       20143</span>
<span class="co">#&gt; 47499: MID26697623 Institution L 520301       20153</span>
<span class="co">#&gt;                                     degree</span>
<span class="co">#&gt;     1:                 Bachelor of Science</span>
<span class="co">#&gt;     2:                 Bachelor of Science</span>
<span class="co">#&gt;     3:                    Bachelor of Arts</span>
<span class="co">#&gt;     4:                 Bachelor of Science</span>
<span class="co">#&gt;     5:                 Bachelor of Science</span>
<span class="co">#&gt;    ---                                    </span>
<span class="co">#&gt; 47495:                    Bachelor of Arts</span>
<span class="co">#&gt; 47496:                    Bachelor of Arts</span>
<span class="co">#&gt; 47497: Bachelor of Business Administration</span>
<span class="co">#&gt; 47498:                    Bachelor of Arts</span>
<span class="co">#&gt; 47499: Bachelor of Business Administration</span></code></pre></div>
<p><strong>Arrange rows in ascending order</strong></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># subset the data frame</span>
<span class="va">rows_we_want</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">$</span><span class="va">cip6</span> <span class="op">==</span> <span class="st">"540101"</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="va">rows_we_want</span><span class="op">]</span>

<span class="co"># order rows by values in ID column</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html">order</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span><span class="op">]</span>

<span class="co"># examine the result</span>
<span class="va">DT</span><span class="op">[</span><span class="op">]</span>
<span class="co">#&gt;               id   institution   cip6 term_degree           degree</span>
<span class="co">#&gt;   1: MID25784804 Institution M 540101       19943 Bachelor of Arts</span>
<span class="co">#&gt;   2: MID25785903 Institution M 540101       19983 Bachelor of Arts</span>
<span class="co">#&gt;   3: MID25792918 Institution M 540101       19963 Bachelor of Arts</span>
<span class="co">#&gt;   4: MID25793224 Institution M 540101       19941 Bachelor of Arts</span>
<span class="co">#&gt;   5: MID25795977 Institution M 540101       19993 Bachelor of Arts</span>
<span class="co">#&gt;  ---                                                              </span>
<span class="co">#&gt; 635: MID26692495 Institution L 540101       20141 Bachelor of Arts</span>
<span class="co">#&gt; 636: MID26693361 Institution L 540101       20144 Bachelor of Arts</span>
<span class="co">#&gt; 637: MID26694138 Institution L 540101       20121 Bachelor of Arts</span>
<span class="co">#&gt; 638: MID26695406 Institution L 540101       20133 Bachelor of Arts</span>
<span class="co">#&gt; 639: MID26696157 Institution L 540101       20151 Bachelor of Arts</span></code></pre></div>
<p><strong>Arrange rows by more than one column</strong></p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># order rows by values in two columns</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html">order</a></span><span class="op">(</span><span class="va">institution</span>, <span class="va">id</span><span class="op">)</span><span class="op">]</span>

<span class="co"># examine the result</span>
<span class="va">DT</span><span class="op">[</span><span class="op">]</span>
<span class="co">#&gt;               id   institution   cip6 term_degree            degree</span>
<span class="co">#&gt;   1: MID26146754 Institution A 540101       19993 Bachelor's Degree</span>
<span class="co">#&gt;   2: MID26180085 Institution A 540101       19951 Bachelor's Degree</span>
<span class="co">#&gt;   3: MID26185279 Institution A 540101       19964 Bachelor's Degree</span>
<span class="co">#&gt;   4: MID26210454 Institution A 540101       19961 Bachelor's Degree</span>
<span class="co">#&gt;   5: MID26216469 Institution A 540101       19994 Bachelor's Degree</span>
<span class="co">#&gt;  ---                                                               </span>
<span class="co">#&gt; 635: MID25838604 Institution M 540101       19931  Bachelor of Arts</span>
<span class="co">#&gt; 636: MID25841313 Institution M 540101       20023  Bachelor of Arts</span>
<span class="co">#&gt; 637: MID25842943 Institution M 540101       19923  Bachelor of Arts</span>
<span class="co">#&gt; 638: MID25844205 Institution M 540101       19923  Bachelor of Arts</span>
<span class="co">#&gt; 639: MID25845319 Institution M 540101       19923  Bachelor of Arts</span></code></pre></div>
<p><strong>Arrange rows in descending order</strong></p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># order rows by values, one ascending, one descending</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html">order</a></span><span class="op">(</span><span class="va">institution</span>, <span class="op">-</span><span class="va">term_degree</span><span class="op">)</span><span class="op">]</span>

<span class="co"># examine the result</span>
<span class="va">DT</span><span class="op">[</span><span class="op">]</span>
<span class="co">#&gt;               id   institution   cip6 term_degree            degree</span>
<span class="co">#&gt;   1: MID26223740 Institution A 540101       20021 Bachelor's Degree</span>
<span class="co">#&gt;   2: MID26355315 Institution A 540101       20003 Bachelor's Degree</span>
<span class="co">#&gt;   3: MID26216469 Institution A 540101       19994 Bachelor's Degree</span>
<span class="co">#&gt;   4: MID26146754 Institution A 540101       19993 Bachelor's Degree</span>
<span class="co">#&gt;   5: MID26185279 Institution A 540101       19964 Bachelor's Degree</span>
<span class="co">#&gt;  ---                                                               </span>
<span class="co">#&gt; 635: MID25844205 Institution M 540101       19923  Bachelor of Arts</span>
<span class="co">#&gt; 636: MID25845319 Institution M 540101       19923  Bachelor of Arts</span>
<span class="co">#&gt; 637: MID25820147 Institution M 540101       19913  Bachelor of Arts</span>
<span class="co">#&gt; 638: MID25834566 Institution M 540101       19903  Bachelor of Arts</span>
<span class="co">#&gt; 639: MID25838147 Institution M 540101       19891  Bachelor of Arts</span></code></pre></div>
<p><strong>Print a result.</strong> In the examples above, we use <code>DT[]</code> to print the result to the screen. This step is not always necessary. Often, simply typing the object name, e.g., <code>DT</code>, is sufficient. You’ll see both types in the vignettes.</p>
</div>
<div id="select-columns" class="section level3">
<h3 class="hasAnchor">
<a href="#select-columns" class="anchor"></a>Select columns</h3>
<p><strong>Summary</strong></p>
<ul>
<li>
<code>DT[, ..cols_we_want]</code> select columns using a character vector</li>
<li>
<code>DT[, .(col1, col2)]</code> select columns using a list</li>
<li>
<code>DT[, .(col1, new_col = col2)]</code> select columns, rename one</li>
</ul>
<p><strong>Select columns using a character vector.</strong> In this form, the column names are quoted and 2 dots identify the vector name, e.g.,</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">DT</span><span class="op">[</span>, <span class="va">..cols_we_want</span><span class="op">]</span></code></pre></div>
<p>Example</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># start with a fresh copy</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html">copy</a></span><span class="op">(</span><span class="va">midfieldstudents</span><span class="op">)</span>

<span class="co"># column-names vector</span>
<span class="va">cols_we_want</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"id"</span>, <span class="st">"race"</span>, <span class="st">"sex"</span><span class="op">)</span>

<span class="co"># subset the data frame</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span>, <span class="va">..cols_we_want</span><span class="op">]</span>

<span class="co"># examine the result</span>
<span class="va">DT</span>
<span class="co">#&gt;                 id            race    sex</span>
<span class="co">#&gt;     1: MID25783135           White   Male</span>
<span class="co">#&gt;     2: MID25783147           White Female</span>
<span class="co">#&gt;     3: MID25783156           White Female</span>
<span class="co">#&gt;     4: MID25783162           White   Male</span>
<span class="co">#&gt;     5: MID25783166           White   Male</span>
<span class="co">#&gt;    ---                                   </span>
<span class="co">#&gt; 97636: MID26697680           Other Female</span>
<span class="co">#&gt; 97637: MID26697682           White   Male</span>
<span class="co">#&gt; 97638: MID26697685           White   Male</span>
<span class="co">#&gt; 97639: MID26697689 Native American   Male</span>
<span class="co">#&gt; 97640: MID26697702           White   Male</span></code></pre></div>
<p><strong>Select columns using a list.</strong> The list appears with unquoted column names inside the brackets. The syntax <code>.()</code> is data.table shorthand for <code><a href="https://rdrr.io/r/base/list.html">list()</a></code>, thus the two lines are equivalent.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">DT</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">col1</span>, <span class="va">col2</span><span class="op">)</span><span class="op">]</span>
<span class="va">DT</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">col1</span>, <span class="va">col2</span><span class="op">)</span><span class="op">]</span></code></pre></div>
<p>Example</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># start with a fresh copy</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html">copy</a></span><span class="op">(</span><span class="va">midfieldstudents</span><span class="op">)</span>

<span class="co"># subset the data frame</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">id</span>, <span class="va">race</span>, <span class="va">sex</span><span class="op">)</span><span class="op">]</span>

<span class="co"># examine the result</span>
<span class="va">DT</span>
<span class="co">#&gt;                 id            race    sex</span>
<span class="co">#&gt;     1: MID25783135           White   Male</span>
<span class="co">#&gt;     2: MID25783147           White Female</span>
<span class="co">#&gt;     3: MID25783156           White Female</span>
<span class="co">#&gt;     4: MID25783162           White   Male</span>
<span class="co">#&gt;     5: MID25783166           White   Male</span>
<span class="co">#&gt;    ---                                   </span>
<span class="co">#&gt; 97636: MID26697680           Other Female</span>
<span class="co">#&gt; 97637: MID26697682           White   Male</span>
<span class="co">#&gt; 97638: MID26697685           White   Male</span>
<span class="co">#&gt; 97639: MID26697689 Native American   Male</span>
<span class="co">#&gt; 97640: MID26697702           White   Male</span></code></pre></div>
<p><strong>Select columns, rename one.</strong></p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># subset the data frame, rename a column</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">id</span>, race_ethnicity <span class="op">=</span> <span class="va">race</span>, <span class="va">sex</span><span class="op">)</span><span class="op">]</span>

<span class="co"># examine the result</span>
<span class="va">DT</span>
<span class="co">#&gt;                 id  race_ethnicity    sex</span>
<span class="co">#&gt;     1: MID25783135           White   Male</span>
<span class="co">#&gt;     2: MID25783147           White Female</span>
<span class="co">#&gt;     3: MID25783156           White Female</span>
<span class="co">#&gt;     4: MID25783162           White   Male</span>
<span class="co">#&gt;     5: MID25783166           White   Male</span>
<span class="co">#&gt;    ---                                   </span>
<span class="co">#&gt; 97636: MID26697680           Other Female</span>
<span class="co">#&gt; 97637: MID26697682           White   Male</span>
<span class="co">#&gt; 97638: MID26697685           White   Male</span>
<span class="co">#&gt; 97639: MID26697689 Native American   Male</span>
<span class="co">#&gt; 97640: MID26697702           White   Male</span></code></pre></div>
<p>A drawback to this approach is that you must include the names of all columns you want to keep. To rename a column without having to list them all, see <code><a href="https://Rdatatable.gitlab.io/data.table/reference/setattr.html">setnames()</a></code> discussion later in the vignette.</p>
</div>
<div id="combine-row-and-column-operations" class="section level3">
<h3 class="hasAnchor">
<a href="#combine-row-and-column-operations" class="anchor"></a>Combine row and column operations</h3>
<p>In most cases, simply combine the row and column operation in the same set of brackets, i.e., <code>DT[i, j]</code>, where <code>i</code> is the row operation and <code>j</code> is the column operation.</p>
<p>Example</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># start with a fresh copy</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html">copy</a></span><span class="op">(</span><span class="va">midfieldstudents</span><span class="op">)</span>

<span class="co"># subset the data frame</span>
<span class="va">rows_we_want</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">$</span><span class="va">hours_transfer</span> <span class="op">&gt;</span> <span class="fl">11</span> <span class="op">&amp;</span> <span class="va">DT</span><span class="op">$</span><span class="va">hours_transfer</span> <span class="op">&lt;</span> <span class="fl">49</span>
<span class="va">cols_we_want</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"id"</span>, <span class="st">"cip6"</span>, <span class="st">"hours_transfer"</span><span class="op">)</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="va">rows_we_want</span>, <span class="va">..cols_we_want</span><span class="op">]</span>

<span class="co"># examine the result</span>
<span class="va">DT</span>
<span class="co">#&gt;                id   cip6 hours_transfer</span>
<span class="co">#&gt;    1: MID25821313 260502             23</span>
<span class="co">#&gt;    2: MID25852945 090401             46</span>
<span class="co">#&gt;    3: MID25853011 160901             30</span>
<span class="co">#&gt;    4: MID25853123 520201             46</span>
<span class="co">#&gt;    5: MID25853143 520201             43</span>
<span class="co">#&gt;   ---                                  </span>
<span class="co">#&gt; 3177: MID26696701 521003             38</span>
<span class="co">#&gt; 3178: MID26696756 040201             40</span>
<span class="co">#&gt; 3179: MID26696806 090101             44</span>
<span class="co">#&gt; 3180: MID26696919 400601             47</span>
<span class="co">#&gt; 3181: MID26697689 240101             47</span></code></pre></div>
<p>Example</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># order rows and rename columns</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span>
  <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html">order</a></span><span class="op">(</span><span class="op">-</span><span class="va">hours_transfer</span><span class="op">)</span>,
  <span class="fu">.</span><span class="op">(</span>ID <span class="op">=</span> <span class="va">id</span>, CIP <span class="op">=</span> <span class="va">cip6</span>, HOURS <span class="op">=</span> <span class="va">hours_transfer</span><span class="op">)</span>
<span class="op">]</span>

<span class="co"># examine the result</span>
<span class="va">DT</span>
<span class="co">#&gt;                ID    CIP HOURS</span>
<span class="co">#&gt;    1: MID25855267 450701    48</span>
<span class="co">#&gt;    2: MID25856207 540101    48</span>
<span class="co">#&gt;    3: MID25857743 520201    48</span>
<span class="co">#&gt;    4: MID25861482 260406    48</span>
<span class="co">#&gt;    5: MID25862586 260901    48</span>
<span class="co">#&gt;   ---                         </span>
<span class="co">#&gt; 3177: MID26655729 510912    12</span>
<span class="co">#&gt; 3178: MID26675549 521401    12</span>
<span class="co">#&gt; 3179: MID26676567 141901    12</span>
<span class="co">#&gt; 3180: MID26679546 520301    12</span>
<span class="co">#&gt; 3181: MID26688410 160102    12</span></code></pre></div>
</div>
<div id="modify-columns-in-place" class="section level3">
<h3 class="hasAnchor">
<a href="#modify-columns-in-place" class="anchor"></a>Modify columns in place</h3>
<p>Columns are modified by reference (in place) using the column assignment symbol <code>:=</code>. The operation is faster than operations requiring a copy, especially for large data frames.</p>
<p><strong>Summary</strong></p>
<ul>
<li>
<code>DT[, col := NULL]</code> remove a column in place</li>
<li>
<code>DT[, new_col := FUN]</code> add new column in place where FUN is a function or value</li>
<li>
<code>DT[rows_to_edit, col := value]</code> add or modify a column in place for specific rows</li>
</ul>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create a subset to work with</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html">copy</a></span><span class="op">(</span><span class="va">midfielddegrees</span><span class="op">)</span>
<span class="va">rows_we_want</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">$</span><span class="va">institution</span> <span class="op">==</span> <span class="st">"Institution D"</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="va">rows_we_want</span><span class="op">]</span>

<span class="co"># examine the result</span>
<span class="va">DT</span><span class="op">[</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html">order</a></span><span class="op">(</span><span class="va">degree</span><span class="op">)</span><span class="op">]</span>
<span class="co">#&gt;               id   institution   cip6 term_degree           degree</span>
<span class="co">#&gt;   1: MID26094487 Institution D 540101       20073 Bachelor of Arts</span>
<span class="co">#&gt;   2: MID26094762 Institution D 540101       20063 Bachelor of Arts</span>
<span class="co">#&gt;   3: MID26094844 Institution D 450401       20073 Bachelor of Arts</span>
<span class="co">#&gt;   4: MID26095029 Institution D 230101       20083 Bachelor of Arts</span>
<span class="co">#&gt;   5: MID26095126 Institution D 451001       20073 Bachelor of Arts</span>
<span class="co">#&gt;  ---                                                              </span>
<span class="co">#&gt; 678: MID26131229 Institution D   &lt;NA&gt;          NA             &lt;NA&gt;</span>
<span class="co">#&gt; 679: MID26131231 Institution D   &lt;NA&gt;          NA             &lt;NA&gt;</span>
<span class="co">#&gt; 680: MID26131238 Institution D   &lt;NA&gt;          NA             &lt;NA&gt;</span>
<span class="co">#&gt; 681: MID26131261 Institution D   &lt;NA&gt;          NA             &lt;NA&gt;</span>
<span class="co">#&gt; 682: MID26131268 Institution D   &lt;NA&gt;          NA             &lt;NA&gt;</span></code></pre></div>
<p><strong>Remove a column by selection.</strong> Earlier, we saw one approach to omitting columns is to exclude them from a selection vector. For example, by selecting the three columns shown below, we are necessarily omitting the <code>cip6</code> and <code>institution</code> columns. This operation requires the use of the assignment operator <code><a href="https://rdrr.io/r/base/assignOps.html">&lt;-</a></code> to assign the result to an object name.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># omit columns by not selecting them</span>
<span class="va">cols_we_want</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"id"</span>, <span class="st">"degree"</span>, <span class="st">"term_degree"</span><span class="op">)</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span>, <span class="va">..cols_we_want</span><span class="op">]</span>

<span class="co"># examine the result</span>
<span class="va">DT</span><span class="op">[</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html">order</a></span><span class="op">(</span><span class="va">degree</span><span class="op">)</span><span class="op">]</span>
<span class="co">#&gt;               id           degree term_degree</span>
<span class="co">#&gt;   1: MID26094487 Bachelor of Arts       20073</span>
<span class="co">#&gt;   2: MID26094762 Bachelor of Arts       20063</span>
<span class="co">#&gt;   3: MID26094844 Bachelor of Arts       20073</span>
<span class="co">#&gt;   4: MID26095029 Bachelor of Arts       20083</span>
<span class="co">#&gt;   5: MID26095126 Bachelor of Arts       20073</span>
<span class="co">#&gt;  ---                                         </span>
<span class="co">#&gt; 678: MID26131229             &lt;NA&gt;          NA</span>
<span class="co">#&gt; 679: MID26131231             &lt;NA&gt;          NA</span>
<span class="co">#&gt; 680: MID26131238             &lt;NA&gt;          NA</span>
<span class="co">#&gt; 681: MID26131261             &lt;NA&gt;          NA</span>
<span class="co">#&gt; 682: MID26131268             &lt;NA&gt;          NA</span></code></pre></div>
<p><strong>Remove a column in place.</strong> In contrast, we avoid the memory usage entailed by <code><a href="https://rdrr.io/r/base/assignOps.html">&lt;-</a></code> if we omit a column using the data.table <code>:=</code> operator.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># omit a column in place</span>
<span class="va">DT</span><span class="op">[</span>, <span class="va">id</span> <span class="op">:=</span> <span class="cn">NULL</span><span class="op">]</span>

<span class="co"># examine the result</span>
<span class="va">DT</span><span class="op">[</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html">order</a></span><span class="op">(</span><span class="va">degree</span><span class="op">)</span><span class="op">]</span>
<span class="co">#&gt;                degree term_degree</span>
<span class="co">#&gt;   1: Bachelor of Arts       20073</span>
<span class="co">#&gt;   2: Bachelor of Arts       20063</span>
<span class="co">#&gt;   3: Bachelor of Arts       20073</span>
<span class="co">#&gt;   4: Bachelor of Arts       20083</span>
<span class="co">#&gt;   5: Bachelor of Arts       20073</span>
<span class="co">#&gt;  ---                             </span>
<span class="co">#&gt; 678:             &lt;NA&gt;          NA</span>
<span class="co">#&gt; 679:             &lt;NA&gt;          NA</span>
<span class="co">#&gt; 680:             &lt;NA&gt;          NA</span>
<span class="co">#&gt; 681:             &lt;NA&gt;          NA</span>
<span class="co">#&gt; 682:             &lt;NA&gt;          NA</span></code></pre></div>
<p><strong>Add a column in place.</strong> The form is <code>DT[, new_col := FUN]</code> where <code>FUN</code> is a function or value. Here we add a new column that consists of a single value.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># add column in place</span>
<span class="va">DT</span><span class="op">[</span>, <span class="va">inst_size</span> <span class="op">:=</span> <span class="st">"small"</span><span class="op">]</span>

<span class="co"># examine the result</span>
<span class="va">DT</span><span class="op">[</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html">order</a></span><span class="op">(</span><span class="va">degree</span><span class="op">)</span><span class="op">]</span>
<span class="co">#&gt;                degree term_degree inst_size</span>
<span class="co">#&gt;   1: Bachelor of Arts       20073     small</span>
<span class="co">#&gt;   2: Bachelor of Arts       20063     small</span>
<span class="co">#&gt;   3: Bachelor of Arts       20073     small</span>
<span class="co">#&gt;   4: Bachelor of Arts       20083     small</span>
<span class="co">#&gt;   5: Bachelor of Arts       20073     small</span>
<span class="co">#&gt;  ---                                       </span>
<span class="co">#&gt; 678:             &lt;NA&gt;          NA     small</span>
<span class="co">#&gt; 679:             &lt;NA&gt;          NA     small</span>
<span class="co">#&gt; 680:             &lt;NA&gt;          NA     small</span>
<span class="co">#&gt; 681:             &lt;NA&gt;          NA     small</span>
<span class="co">#&gt; 682:             &lt;NA&gt;          NA     small</span></code></pre></div>
<p>Here, we add a new columns <code>year</code> and <code>iterm</code> that are functions of the <code>term</code> column. This operation illustrates one approach to separating the encoded term into separate year and integer-term columns.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># add columns in place</span>
<span class="va">DT</span><span class="op">[</span>, <span class="va">year</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">floor</a></span><span class="op">(</span><span class="va">term_degree</span> <span class="op">/</span> <span class="fl">10</span><span class="op">)</span><span class="op">]</span>
<span class="va">DT</span><span class="op">[</span>, <span class="va">iterm</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">floor</a></span><span class="op">(</span><span class="va">term_degree</span> <span class="op">-</span> <span class="fl">10</span> <span class="op">*</span> <span class="va">year</span><span class="op">)</span><span class="op">]</span>

<span class="co"># examine the result</span>
<span class="va">DT</span><span class="op">[</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html">order</a></span><span class="op">(</span><span class="va">degree</span>, <span class="va">term_degree</span><span class="op">)</span><span class="op">]</span>
<span class="co">#&gt;                degree term_degree inst_size year iterm</span>
<span class="co">#&gt;   1: Bachelor of Arts       20063     small 2006     3</span>
<span class="co">#&gt;   2: Bachelor of Arts       20063     small 2006     3</span>
<span class="co">#&gt;   3: Bachelor of Arts       20073     small 2007     3</span>
<span class="co">#&gt;   4: Bachelor of Arts       20073     small 2007     3</span>
<span class="co">#&gt;   5: Bachelor of Arts       20073     small 2007     3</span>
<span class="co">#&gt;  ---                                                  </span>
<span class="co">#&gt; 678:             &lt;NA&gt;          NA     small   NA    NA</span>
<span class="co">#&gt; 679:             &lt;NA&gt;          NA     small   NA    NA</span>
<span class="co">#&gt; 680:             &lt;NA&gt;          NA     small   NA    NA</span>
<span class="co">#&gt; 681:             &lt;NA&gt;          NA     small   NA    NA</span>
<span class="co">#&gt; 682:             &lt;NA&gt;          NA     small   NA    NA</span></code></pre></div>
<p>The <code><a href="https://rdrr.io/r/base/Round.html">floor()</a></code> function in the first instance purposefully truncates the decimal value to yield an integer year. In the second instance, <code><a href="https://rdrr.io/r/base/Round.html">floor()</a></code> is insurance that the term is a whole number as expected (avoiding any potential floating-point errors).</p>
<p><strong>Add a column in place for specific rows.</strong> Here we create a new <code>status</code> column with the value of “grad” in rows where <code>degree</code> is not NA. In all other rows, the value of the <code>status</code> is automatically NA.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">DT</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">degree</span><span class="op">)</span>, <span class="va">status</span> <span class="op">:=</span> <span class="st">"grad"</span><span class="op">]</span>
<span class="va">DT</span><span class="op">[</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html">order</a></span><span class="op">(</span><span class="va">status</span><span class="op">)</span><span class="op">]</span>
<span class="co">#&gt;                   degree term_degree inst_size year iterm status</span>
<span class="co">#&gt;   1: Bachelor of Science       20081     small 2008     1   grad</span>
<span class="co">#&gt;   2:    Bachelor of Arts       20073     small 2007     3   grad</span>
<span class="co">#&gt;   3: Bachelor of Science       20073     small 2007     3   grad</span>
<span class="co">#&gt;   4: Bachelor of Science       20081     small 2008     1   grad</span>
<span class="co">#&gt;   5: Bachelor of Science       20073     small 2007     3   grad</span>
<span class="co">#&gt;  ---                                                            </span>
<span class="co">#&gt; 678:                &lt;NA&gt;          NA     small   NA    NA   &lt;NA&gt;</span>
<span class="co">#&gt; 679:                &lt;NA&gt;          NA     small   NA    NA   &lt;NA&gt;</span>
<span class="co">#&gt; 680:                &lt;NA&gt;          NA     small   NA    NA   &lt;NA&gt;</span>
<span class="co">#&gt; 681:                &lt;NA&gt;          NA     small   NA    NA   &lt;NA&gt;</span>
<span class="co">#&gt; 682:                &lt;NA&gt;          NA     small   NA    NA   &lt;NA&gt;</span></code></pre></div>
<p><strong>Modify a column in place for specific rows.</strong> Next we can overwrite the NA values in <code>status</code>.</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">DT</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">degree</span><span class="op">)</span>, <span class="va">status</span> <span class="op">:=</span> <span class="st">"nongrad"</span><span class="op">]</span>
<span class="va">DT</span><span class="op">[</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html">order</a></span><span class="op">(</span><span class="va">status</span><span class="op">)</span><span class="op">]</span>
<span class="co">#&gt;                   degree term_degree inst_size year iterm  status</span>
<span class="co">#&gt;   1: Bachelor of Science       20081     small 2008     1    grad</span>
<span class="co">#&gt;   2:    Bachelor of Arts       20073     small 2007     3    grad</span>
<span class="co">#&gt;   3: Bachelor of Science       20073     small 2007     3    grad</span>
<span class="co">#&gt;   4: Bachelor of Science       20081     small 2008     1    grad</span>
<span class="co">#&gt;   5: Bachelor of Science       20073     small 2007     3    grad</span>
<span class="co">#&gt;  ---                                                             </span>
<span class="co">#&gt; 678:                &lt;NA&gt;          NA     small   NA    NA nongrad</span>
<span class="co">#&gt; 679:                &lt;NA&gt;          NA     small   NA    NA nongrad</span>
<span class="co">#&gt; 680:                &lt;NA&gt;          NA     small   NA    NA nongrad</span>
<span class="co">#&gt; 681:                &lt;NA&gt;          NA     small   NA    NA nongrad</span>
<span class="co">#&gt; 682:                &lt;NA&gt;          NA     small   NA    NA nongrad</span></code></pre></div>
</div>
<div id="operations-by-group" class="section level3">
<h3 class="hasAnchor">
<a href="#operations-by-group" class="anchor"></a>Operations by group</h3>
<p><strong>Summary</strong></p>
<ul>
<li>
<code>DT[, .(new_col = .N), by = grouping_variables]</code> frequency by group</li>
<li>
<code>DT[, .SD[FUN(col)], by = grouping_variables]</code> operate on a column by group</li>
</ul>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create a subset to work with</span>
<span class="va">rows_we_want</span> <span class="op">&lt;-</span> <span class="va">midfieldterms</span><span class="op">$</span><span class="va">cip6</span> <span class="op">==</span> <span class="st">"141901"</span>
<span class="va">cols_we_want</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"institution"</span>, <span class="st">"cip6"</span>, <span class="st">"term"</span>, <span class="st">"coop"</span><span class="op">)</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">midfieldterms</span><span class="op">[</span><span class="va">rows_we_want</span>, <span class="va">..cols_we_want</span><span class="op">]</span>

<span class="co"># examine the result</span>
<span class="va">DT</span>
<span class="co">#&gt;          institution   cip6  term coop</span>
<span class="co">#&gt;     1: Institution M 141901 19881    N</span>
<span class="co">#&gt;     2: Institution M 141901 19883    N</span>
<span class="co">#&gt;     3: Institution M 141901 19891    N</span>
<span class="co">#&gt;     4: Institution M 141901 19893    N</span>
<span class="co">#&gt;     5: Institution M 141901 19895    N</span>
<span class="co">#&gt;    ---                                </span>
<span class="co">#&gt; 24142: Institution L 141901 20124    N</span>
<span class="co">#&gt; 24143: Institution L 141901 20131    N</span>
<span class="co">#&gt; 24144: Institution L 141901 20133    N</span>
<span class="co">#&gt; 24145: Institution L 141901 20101    N</span>
<span class="co">#&gt; 24146: Institution L 141901 20103    N</span></code></pre></div>
<p><strong>Frequency by group.</strong> We use this syntax regularly in computing persistence metrics. Once a data set keyed by student ID has been manipulated for the desired form, we count the number of students (or frequency) by group.</p>
<p>First, we count the total number of students by institution. The data.table <code>.N</code> function is the total count. The default column name in <code>N</code>.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># count by institution</span>
<span class="va">DT</span><span class="op">[</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html">order</a></span><span class="op">(</span><span class="va">institution</span><span class="op">)</span>, <span class="va">.N</span>, by <span class="op">=</span> <span class="va">institution</span><span class="op">]</span>
<span class="co">#&gt;       institution    N</span>
<span class="co">#&gt;  1: Institution A  416</span>
<span class="co">#&gt;  2: Institution B 1766</span>
<span class="co">#&gt;  3: Institution C 2506</span>
<span class="co">#&gt;  4: Institution E  499</span>
<span class="co">#&gt;  5: Institution F 6295</span>
<span class="co">#&gt;  6: Institution G 1018</span>
<span class="co">#&gt;  7: Institution H 3364</span>
<span class="co">#&gt;  8: Institution J 3673</span>
<span class="co">#&gt;  9: Institution K 1731</span>
<span class="co">#&gt; 10: Institution L  726</span>
<span class="co">#&gt; 11: Institution M 2152</span>

<span class="co"># count by coop</span>
<span class="va">DT</span><span class="op">[</span>, <span class="va">.N</span>, by <span class="op">=</span> <span class="va">coop</span><span class="op">]</span>
<span class="co">#&gt;    coop     N</span>
<span class="co">#&gt; 1:    N 23102</span>
<span class="co">#&gt; 2:    Y  1044</span></code></pre></div>
<p>Assign a column name to the count</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># column name for the count</span>
<span class="va">DT</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span>N_coop <span class="op">=</span> <span class="va">.N</span><span class="op">)</span>, by <span class="op">=</span> <span class="va">coop</span><span class="op">]</span>
<span class="co">#&gt;    coop N_coop</span>
<span class="co">#&gt; 1:    N  23102</span>
<span class="co">#&gt; 2:    Y   1044</span></code></pre></div>
<p>Our practice in the vignettes is to place the grouping variables in a character vector. For example,</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># edit the printout option</span>
<span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span>datatable.print.nrows <span class="op">=</span> <span class="fl">16</span><span class="op">)</span>

<span class="co"># assign the grouping variables</span>
<span class="va">grouping_variables</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"institution"</span>, <span class="st">"coop"</span><span class="op">)</span>

<span class="co"># count by the groupings</span>
<span class="va">DT</span><span class="op">[</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html">order</a></span><span class="op">(</span><span class="va">institution</span>, <span class="va">coop</span><span class="op">)</span>, <span class="fu">.</span><span class="op">(</span>frequency <span class="op">=</span> <span class="va">.N</span><span class="op">)</span>, by <span class="op">=</span> <span class="va">grouping_variables</span><span class="op">]</span>
<span class="co">#&gt;       institution coop frequency</span>
<span class="co">#&gt;  1: Institution A    N       416</span>
<span class="co">#&gt;  2: Institution B    N      1766</span>
<span class="co">#&gt;  3: Institution C    N      2506</span>
<span class="co">#&gt;  4: Institution E    N       499</span>
<span class="co">#&gt;  5: Institution F    N      5382</span>
<span class="co">#&gt;  6: Institution F    Y       913</span>
<span class="co">#&gt;  7: Institution G    N      1018</span>
<span class="co">#&gt;  8: Institution H    N      3324</span>
<span class="co">#&gt;  9: Institution H    Y        40</span>
<span class="co">#&gt; 10: Institution J    N      3667</span>
<span class="co">#&gt; 11: Institution J    Y         6</span>
<span class="co">#&gt; 12: Institution K    N      1668</span>
<span class="co">#&gt; 13: Institution K    Y        63</span>
<span class="co">#&gt; 14: Institution L    N       726</span>
<span class="co">#&gt; 15: Institution M    N      2130</span>
<span class="co">#&gt; 16: Institution M    Y        22</span>

<span class="co"># reset the printout option</span>
<span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span>datatable.print.nrows <span class="op">=</span> <span class="fl">10</span>, datatable.print.topn <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></code></pre></div>
<p><strong>Operate on a column by group.</strong> The data.table <code>.SD</code> operator can be thought of as a symbol that represents “each group”. We can use it to operate on one column grouped by the values in another column.</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create a subset to work with</span>
<span class="va">rows_we_want</span> <span class="op">&lt;-</span> <span class="va">midfieldterms</span><span class="op">$</span><span class="va">cip6</span> <span class="op">==</span> <span class="st">"141901"</span>
<span class="va">cols_we_want</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"id"</span>, <span class="st">"cip6"</span>, <span class="st">"term"</span><span class="op">)</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">midfieldterms</span><span class="op">[</span><span class="va">rows_we_want</span>, <span class="va">..cols_we_want</span><span class="op">]</span>

<span class="co"># examine the result</span>
<span class="va">DT</span>
<span class="co">#&gt;                 id   cip6  term</span>
<span class="co">#&gt;     1: MID25783388 141901 19881</span>
<span class="co">#&gt;     2: MID25783388 141901 19883</span>
<span class="co">#&gt;     3: MID25783388 141901 19891</span>
<span class="co">#&gt;     4: MID25783388 141901 19893</span>
<span class="co">#&gt;     5: MID25783388 141901 19895</span>
<span class="co">#&gt;    ---                         </span>
<span class="co">#&gt; 24142: MID26697163 141901 20124</span>
<span class="co">#&gt; 24143: MID26697163 141901 20131</span>
<span class="co">#&gt; 24144: MID26697163 141901 20133</span>
<span class="co">#&gt; 24145: MID26697444 141901 20101</span>
<span class="co">#&gt; 24146: MID26697444 141901 20103</span></code></pre></div>
<p>Example. Retain rows with the most recent term by ID.</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># keep the latest term data by ID</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span>, <span class="va">.SD</span><span class="op">[</span><span class="va">term</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">term</span><span class="op">)</span><span class="op">]</span>, by <span class="op">=</span> <span class="va">id</span><span class="op">]</span>

<span class="co"># examine the result</span>
<span class="va">DT</span>
<span class="co">#&gt;                id   cip6  term</span>
<span class="co">#&gt;    1: MID25783388 141901 19905</span>
<span class="co">#&gt;    2: MID25784022 141901 20053</span>
<span class="co">#&gt;    3: MID25784025 141901 19966</span>
<span class="co">#&gt;    4: MID25784056 141901 20053</span>
<span class="co">#&gt;    5: MID25784331 141901 19893</span>
<span class="co">#&gt;   ---                         </span>
<span class="co">#&gt; 3930: MID26696958 141901 20111</span>
<span class="co">#&gt; 3931: MID26696967 141901 20141</span>
<span class="co">#&gt; 3932: MID26696979 141901 20154</span>
<span class="co">#&gt; 3933: MID26697163 141901 20133</span>
<span class="co">#&gt; 3934: MID26697444 141901 20103</span></code></pre></div>
</div>
<div id="modify-in-place" class="section level3">
<h3 class="hasAnchor">
<a href="#modify-in-place" class="anchor"></a>Modify in place</h3>
<p><strong>Summary</strong></p>
<ul>
<li>
<code><a href="https://Rdatatable.gitlab.io/data.table/reference/setDT.html">setDT()</a></code> convert data.frame to data.table in place</li>
<li>
<code><a href="https://Rdatatable.gitlab.io/data.table/reference/setDF.html">setDF()</a></code> convert data.table to data.frame in place</li>
<li>
<code><a href="https://Rdatatable.gitlab.io/data.table/reference/setattr.html">setnames()</a></code> rename columns in place</li>
<li>
<code><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html">copy()</a></code> to avoid modifying the source object</li>
</ul>
<p>When we apply any data.table function that starts with <code>set</code> (or when we use the <code>:=</code> operator), data.table changes the object in place (also called “by reference”). This is an important feature for saving computational expense when working with large data frames such as <code>midfieldcourses</code>.</p>
<p><strong>Side-effects.</strong> Modify in place has side-effects, however, of which the user must be aware. Suppose we start with a data.frame object and we use <code><a href="https://Rdatatable.gitlab.io/data.table/reference/setDT.html">setDT()</a></code> to transform it to a data.table object. We’ll use the base R <code>airquality</code> data set again.</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># the original is a data.frame</span>
<span class="va">DF</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html">copy</a></span><span class="op">(</span><span class="va">airquality</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">DF</span><span class="op">)</span>
<span class="co">#&gt; [1] "data.frame"</span></code></pre></div>
<p>Create a data.table with <code><a href="https://Rdatatable.gitlab.io/data.table/reference/setDT.html">setDT()</a></code>.</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create data.table</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setDT.html">setDT</a></span><span class="op">(</span><span class="va">DF</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">DT</span><span class="op">)</span>
<span class="co">#&gt; [1] "data.table" "data.frame"</span></code></pre></div>
<p><code>DT</code> is a data.table as expected. However, because the transformation was “in place”, it applied to the original <code>DF</code> as well.</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">DF</span><span class="op">)</span>
<span class="co">#&gt; [1] "data.table" "data.frame"</span></code></pre></div>
<p>Using in-place operations, <code>DF</code> and <code>DT</code> point to the same location in memory.</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># both labels refer to the same memory address</span>
<span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/address.html">address</a></span><span class="op">(</span><span class="va">DT</span><span class="op">)</span>
<span class="co">#&gt; [1] "000000001b939980"</span>
<span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/address.html">address</a></span><span class="op">(</span><span class="va">DF</span><span class="op">)</span>
<span class="co">#&gt; [1] "000000001b939980"</span></code></pre></div>
<p>It follows then that a function applied to <code>DT</code> is also applied to <code>DF</code>,</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># edit DT</span>
<span class="va">DT</span><span class="op">[</span>, <span class="va">year</span> <span class="op">:=</span> <span class="fl">1973</span><span class="op">]</span>
<span class="va">DT</span>
<span class="co">#&gt;      Ozone Solar.R Wind Temp Month Day year</span>
<span class="co">#&gt;   1:    41     190  7.4   67     5   1 1973</span>
<span class="co">#&gt;   2:    36     118  8.0   72     5   2 1973</span>
<span class="co">#&gt;   3:    12     149 12.6   74     5   3 1973</span>
<span class="co">#&gt;   4:    18     313 11.5   62     5   4 1973</span>
<span class="co">#&gt;   5:    NA      NA 14.3   56     5   5 1973</span>
<span class="co">#&gt;  ---                                       </span>
<span class="co">#&gt; 149:    30     193  6.9   70     9  26 1973</span>
<span class="co">#&gt; 150:    NA     145 13.2   77     9  27 1973</span>
<span class="co">#&gt; 151:    14     191 14.3   75     9  28 1973</span>
<span class="co">#&gt; 152:    18     131  8.0   76     9  29 1973</span>
<span class="co">#&gt; 153:    20     223 11.5   68     9  30 1973</span>

<span class="co"># and the change applied to DF</span>
<span class="va">DF</span>
<span class="co">#&gt;      Ozone Solar.R Wind Temp Month Day year</span>
<span class="co">#&gt;   1:    41     190  7.4   67     5   1 1973</span>
<span class="co">#&gt;   2:    36     118  8.0   72     5   2 1973</span>
<span class="co">#&gt;   3:    12     149 12.6   74     5   3 1973</span>
<span class="co">#&gt;   4:    18     313 11.5   62     5   4 1973</span>
<span class="co">#&gt;   5:    NA      NA 14.3   56     5   5 1973</span>
<span class="co">#&gt;  ---                                       </span>
<span class="co">#&gt; 149:    30     193  6.9   70     9  26 1973</span>
<span class="co">#&gt; 150:    NA     145 13.2   77     9  27 1973</span>
<span class="co">#&gt; 151:    14     191 14.3   75     9  28 1973</span>
<span class="co">#&gt; 152:    18     131  8.0   76     9  29 1973</span>
<span class="co">#&gt; 153:    20     223 11.5   68     9  30 1973</span></code></pre></div>
<p>To avoid this side effect, we use <code><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html">copy()</a></code>.</p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># the original is a data.frame</span>
<span class="va">DF</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html">copy</a></span><span class="op">(</span><span class="va">airquality</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">DF</span><span class="op">)</span>
<span class="co">#&gt; [1] "data.frame"</span></code></pre></div>
<p>Make a copy and transform to data.table</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># make a copy</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html">copy</a></span><span class="op">(</span><span class="va">DF</span><span class="op">)</span>

<span class="co"># transform</span>
<span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setDT.html">setDT</a></span><span class="op">(</span><span class="va">DT</span><span class="op">)</span>

<span class="co"># DT is a data.table</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">DT</span><span class="op">)</span>
<span class="co">#&gt; [1] "data.table" "data.frame"</span></code></pre></div>
<p><code>DT</code> and <code>DF</code> have different addresses, so <code>DF</code> remains unaffected.</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># the two objects have different addresses in memory</span>
<span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/address.html">address</a></span><span class="op">(</span><span class="va">DT</span><span class="op">)</span>
<span class="co">#&gt; [1] "00000000234a7570"</span>
<span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/address.html">address</a></span><span class="op">(</span><span class="va">DF</span><span class="op">)</span>
<span class="co">#&gt; [1] "000000001b0910d8"</span>

<span class="co"># DF remains a data.frame</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">DF</span><span class="op">)</span>
<span class="co">#&gt; [1] "data.frame"</span></code></pre></div>
<p>Operating on <code>DT</code> no has no side-effect on <code>DF</code>.</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># edit DT</span>
<span class="va">DT</span><span class="op">[</span>, <span class="va">year</span> <span class="op">:=</span> <span class="fl">1973</span><span class="op">]</span>

<span class="co"># examine the result</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">DT</span><span class="op">)</span>
<span class="co">#&gt;    Ozone Solar.R Wind Temp Month Day year</span>
<span class="co">#&gt; 1:    41     190  7.4   67     5   1 1973</span>
<span class="co">#&gt; 2:    36     118  8.0   72     5   2 1973</span>
<span class="co">#&gt; 3:    12     149 12.6   74     5   3 1973</span>
<span class="co">#&gt; 4:    18     313 11.5   62     5   4 1973</span>
<span class="co">#&gt; 5:    NA      NA 14.3   56     5   5 1973</span>
<span class="co">#&gt; 6:    28      NA 14.9   66     5   6 1973</span>

<span class="co"># no change to DF</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">DF</span><span class="op">)</span>
<span class="co">#&gt;   Ozone Solar.R Wind Temp Month Day</span>
<span class="co">#&gt; 1    41     190  7.4   67     5   1</span>
<span class="co">#&gt; 2    36     118  8.0   72     5   2</span>
<span class="co">#&gt; 3    12     149 12.6   74     5   3</span>
<span class="co">#&gt; 4    18     313 11.5   62     5   4</span>
<span class="co">#&gt; 5    NA      NA 14.3   56     5   5</span>
<span class="co">#&gt; 6    28      NA 14.9   66     5   6</span></code></pre></div>
<p><strong>Convert data.frame to data.table in place</strong>. Here we start with the <code>airquality</code> data.frame from base R. Copy and transform to a data.table and compare results. The original is unaffected because we used <code><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html">copy()</a></code>.</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># start with a data.frame</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">airquality</span><span class="op">)</span>
<span class="co">#&gt; [1] "data.frame"</span>

<span class="co"># copy and transform in place</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html">copy</a></span><span class="op">(</span><span class="va">airquality</span><span class="op">)</span>
<span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setDT.html">setDT</a></span><span class="op">(</span><span class="va">DT</span><span class="op">)</span>

<span class="co"># compare results</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">airquality</span><span class="op">)</span>
<span class="co">#&gt; [1] "data.frame"</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">DT</span><span class="op">)</span>
<span class="co">#&gt; [1] "data.table" "data.frame"</span></code></pre></div>
<p><strong>Convert data.table to data.frame in place</strong>. Here we start with the <code>cip</code> data.table from midfieldr. Copy and transform to a data.frame and compare results. Again, because we started with<code><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html">copy()</a></code>, the original is unaffected by the <code><a href="https://Rdatatable.gitlab.io/data.table/reference/setDF.html">setDF()</a></code> operation.</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># start with a data.table</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">cip</span><span class="op">)</span>
<span class="co">#&gt; [1] "data.table" "data.frame"</span>

<span class="co"># copy and transform in place</span>
<span class="va">DF</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html">copy</a></span><span class="op">(</span><span class="va">cip</span><span class="op">)</span>
<span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setDF.html">setDF</a></span><span class="op">(</span><span class="va">DF</span><span class="op">)</span>

<span class="co"># compare results</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">cip</span><span class="op">)</span>
<span class="co">#&gt; [1] "data.table" "data.frame"</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">DF</span><span class="op">)</span>
<span class="co">#&gt; [1] "data.frame"</span></code></pre></div>
<p><strong>Rename columns in place</strong>. <code><a href="https://Rdatatable.gitlab.io/data.table/reference/setattr.html">setnames()</a></code> allows us to edit one or more column names without affecting unnamed columns.</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create a subset to work with</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html">copy</a></span><span class="op">(</span><span class="va">midfielddegrees</span><span class="op">)</span>
<span class="va">rows_we_want</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">$</span><span class="va">institution</span> <span class="op">==</span> <span class="st">"Institution D"</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="va">rows_we_want</span><span class="op">]</span>

<span class="co"># examine the result</span>
<span class="va">DT</span><span class="op">[</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html">order</a></span><span class="op">(</span><span class="va">degree</span><span class="op">)</span><span class="op">]</span>
<span class="co">#&gt;               id   institution   cip6 term_degree           degree</span>
<span class="co">#&gt;   1: MID26094487 Institution D 540101       20073 Bachelor of Arts</span>
<span class="co">#&gt;   2: MID26094762 Institution D 540101       20063 Bachelor of Arts</span>
<span class="co">#&gt;   3: MID26094844 Institution D 450401       20073 Bachelor of Arts</span>
<span class="co">#&gt;   4: MID26095029 Institution D 230101       20083 Bachelor of Arts</span>
<span class="co">#&gt;   5: MID26095126 Institution D 451001       20073 Bachelor of Arts</span>
<span class="co">#&gt;  ---                                                              </span>
<span class="co">#&gt; 678: MID26131229 Institution D   &lt;NA&gt;          NA             &lt;NA&gt;</span>
<span class="co">#&gt; 679: MID26131231 Institution D   &lt;NA&gt;          NA             &lt;NA&gt;</span>
<span class="co">#&gt; 680: MID26131238 Institution D   &lt;NA&gt;          NA             &lt;NA&gt;</span>
<span class="co">#&gt; 681: MID26131261 Institution D   &lt;NA&gt;          NA             &lt;NA&gt;</span>
<span class="co">#&gt; 682: MID26131268 Institution D   &lt;NA&gt;          NA             &lt;NA&gt;</span></code></pre></div>
<p>Edit some column names, leaving others intact</p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># edit column names in place</span>
<span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setattr.html">setnames</a></span><span class="op">(</span><span class="va">DT</span>, old <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"id"</span>, <span class="st">"cip6"</span><span class="op">)</span>, new <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"ID"</span>, <span class="st">"CIP"</span><span class="op">)</span><span class="op">)</span>

<span class="co"># examine the result</span>
<span class="va">DT</span>
<span class="co">#&gt;               ID   institution    CIP term_degree              degree</span>
<span class="co">#&gt;   1: MID26094406 Institution D 270101       20081 Bachelor of Science</span>
<span class="co">#&gt;   2: MID26094487 Institution D 540101       20073    Bachelor of Arts</span>
<span class="co">#&gt;   3: MID26094493 Institution D   &lt;NA&gt;          NA                &lt;NA&gt;</span>
<span class="co">#&gt;   4: MID26094516 Institution D 519999       20073 Bachelor of Science</span>
<span class="co">#&gt;   5: MID26094544 Institution D   &lt;NA&gt;          NA                &lt;NA&gt;</span>
<span class="co">#&gt;  ---                                                                 </span>
<span class="co">#&gt; 678: MID26131229 Institution D   &lt;NA&gt;          NA                &lt;NA&gt;</span>
<span class="co">#&gt; 679: MID26131231 Institution D   &lt;NA&gt;          NA                &lt;NA&gt;</span>
<span class="co">#&gt; 680: MID26131238 Institution D   &lt;NA&gt;          NA                &lt;NA&gt;</span>
<span class="co">#&gt; 681: MID26131261 Institution D   &lt;NA&gt;          NA                &lt;NA&gt;</span>
<span class="co">#&gt; 682: MID26131268 Institution D   &lt;NA&gt;          NA                &lt;NA&gt;</span></code></pre></div>
</div>
</div>
<div id="references" class="section level2">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Dowle+Srinivasan:2020:data-table" class="csl-entry">
Dowle, Matt and Srinivasan, Arun (2020a) <em><span class="nocase">data.table: Extension of data.frame</span></em>. R package version 1.13.0. Available at: <a href="https://CRAN.R-project.org/package=data.table">https://CRAN.R-project.org/package=data.table</a>.
</div>
<div id="ref-Dowle+Srinivasan:2020:data-table:website" class="csl-entry">
Dowle, Matt and Srinivasan, Arun (2020b) <span class="nocase">Introduction to data.table</span>. Available at: <a href="https://tinyurl.com/y4xc94pq">https://tinyurl.com/y4xc94pq</a>.
</div>
<div id="ref-Mercer:2020" class="csl-entry">
Mercer, Jason (2020) <span class="nocase">Base R, the tidyverse, and data.table: A comparison of R dialects to wrangle your data</span>. Available at: <a href="https://tinyurl.com/yy544udn">https://tinyurl.com/yy544udn</a>.
</div>
<div id="ref-vanDerLaken:2020" class="csl-entry">
van der Laken, Paul (2020) <span class="nocase">A data.table and dplyr tour</span>. Available at: <a href="https://tinyurl.com/y6m33fvx">https://tinyurl.com/y6m33fvx</a>.
</div>
<div id="ref-Zumel+Mount:2020" class="csl-entry">
Zumel, Nina and Mount, John (2020) <em><span class="nocase">Practical Data Science with R</span></em>. 2nd ed. Shelter Island. NY: <span>Manning Publications Co.</span> Available at: <a href="https://tinyurl.com/y6mdgfx8">https://tinyurl.com/y6mdgfx8</a>.
</div>
</div>
</div>
<div id="appendix" class="section level2">
<h2 class="hasAnchor">
<a href="#appendix" class="anchor"></a>Appendix</h2>
<div id="complete-script" class="section level3">
<h3 class="hasAnchor">
<a href="#complete-script" class="anchor"></a>Complete script</h3>
<p>The vignette code chunks are collected below in a single, condensed script.</p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># packages used</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/MIDFIELDR/midfieldr">midfieldr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/MIDFIELDR/midfielddata">midfielddata</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com">data.table</a></span><span class="op">)</span>

<span class="co"># view each data set</span>
<span class="va">midfieldstudents</span>
<span class="va">midfielddegrees</span>
<span class="va">midfieldterms</span>
<span class="va">midfieldcourses</span>

<span class="co"># identify objects</span>
<span class="va">midfielddegrees</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="op">]</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">midfielddegrees</span><span class="op">)</span>
<span class="va">airquality</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="op">]</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">airquality</span><span class="op">)</span>

<span class="co"># subset and arrange rows</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html">copy</a></span><span class="op">(</span><span class="va">midfielddegrees</span><span class="op">)</span>
<span class="va">rows_we_want</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">$</span><span class="va">cip6</span> <span class="op">==</span> <span class="st">"540101"</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="va">rows_we_want</span><span class="op">]</span>

<span class="co"># filter rows using multiple conditions</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html">copy</a></span><span class="op">(</span><span class="va">midfielddegrees</span><span class="op">)</span>
<span class="va">rows_we_want</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">DT</span><span class="op">$</span><span class="va">cip6</span><span class="op">)</span> <span class="op">&amp;</span> <span class="va">DT</span><span class="op">$</span><span class="va">institution</span> <span class="op">==</span> <span class="st">"Institution D"</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="va">rows_we_want</span><span class="op">]</span>

<span class="co"># discard rows with missing values</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html">copy</a></span><span class="op">(</span><span class="va">midfielddegrees</span><span class="op">)</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/na.omit.data.table.html">na.omit</a></span><span class="op">(</span><span class="va">DT</span><span class="op">)</span>

<span class="co"># arrange rows</span>
<span class="va">rows_we_want</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">$</span><span class="va">cip6</span> <span class="op">==</span> <span class="st">"540101"</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="va">rows_we_want</span><span class="op">]</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html">order</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span><span class="op">]</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html">order</a></span><span class="op">(</span><span class="va">institution</span>, <span class="va">id</span><span class="op">)</span><span class="op">]</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html">order</a></span><span class="op">(</span><span class="va">institution</span>, <span class="op">-</span><span class="va">term_degree</span><span class="op">)</span><span class="op">]</span>

<span class="co"># select columns using a character vector</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html">copy</a></span><span class="op">(</span><span class="va">midfieldstudents</span><span class="op">)</span>
<span class="va">cols_we_want</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"id"</span>, <span class="st">"race"</span>, <span class="st">"sex"</span><span class="op">)</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span>, <span class="va">..cols_we_want</span><span class="op">]</span>

<span class="co"># select columns using a list</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html">copy</a></span><span class="op">(</span><span class="va">midfieldstudents</span><span class="op">)</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">id</span>, <span class="va">race</span>, <span class="va">sex</span><span class="op">)</span><span class="op">]</span>

<span class="co"># select columns, rename one</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">id</span>, race_ethnicity <span class="op">=</span> <span class="va">race</span>, <span class="va">sex</span><span class="op">)</span><span class="op">]</span>

<span class="co"># combine row and column operations</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html">copy</a></span><span class="op">(</span><span class="va">midfieldstudents</span><span class="op">)</span>
<span class="va">rows_we_want</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">$</span><span class="va">hours_transfer</span> <span class="op">&gt;</span> <span class="fl">11</span> <span class="op">&amp;</span> <span class="va">DT</span><span class="op">$</span><span class="va">hours_transfer</span> <span class="op">&lt;</span> <span class="fl">49</span>
<span class="va">cols_we_want</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"id"</span>, <span class="st">"cip6"</span>, <span class="st">"hours_transfer"</span><span class="op">)</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="va">rows_we_want</span>, <span class="va">..cols_we_want</span><span class="op">]</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span>
  <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html">order</a></span><span class="op">(</span><span class="op">-</span><span class="va">hours_transfer</span><span class="op">)</span>,
  <span class="fu">.</span><span class="op">(</span>ID <span class="op">=</span> <span class="va">id</span>, CIP <span class="op">=</span> <span class="va">cip6</span>, HOURS <span class="op">=</span> <span class="va">hours_transfer</span><span class="op">)</span>
<span class="op">]</span>

<span class="co"># remove a column in place</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html">copy</a></span><span class="op">(</span><span class="va">midfielddegrees</span><span class="op">)</span>
<span class="va">rows_we_want</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">$</span><span class="va">institution</span> <span class="op">==</span> <span class="st">"Institution D"</span>
<span class="va">cols_we_want</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"id"</span>, <span class="st">"degree"</span>, <span class="st">"term_degree"</span><span class="op">)</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="va">rows_we_want</span>, <span class="va">..cols_we_want</span><span class="op">]</span>
<span class="va">DT</span><span class="op">[</span>, <span class="va">id</span> <span class="op">:=</span> <span class="cn">NULL</span><span class="op">]</span>

<span class="co"># add a column in place</span>
<span class="va">DT</span><span class="op">[</span>, <span class="va">inst_size</span> <span class="op">:=</span> <span class="st">"small"</span><span class="op">]</span>
<span class="va">DT</span><span class="op">[</span>, <span class="va">year</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">floor</a></span><span class="op">(</span><span class="va">term_degree</span> <span class="op">/</span> <span class="fl">10</span><span class="op">)</span><span class="op">]</span>
<span class="va">DT</span><span class="op">[</span>, <span class="va">iterm</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">floor</a></span><span class="op">(</span><span class="va">term_degree</span> <span class="op">-</span> <span class="fl">10</span> <span class="op">*</span> <span class="va">year</span><span class="op">)</span><span class="op">]</span>

<span class="co"># add/modify a column in place for specific rows</span>
<span class="va">DT</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">degree</span><span class="op">)</span>, <span class="va">status</span> <span class="op">:=</span> <span class="st">"grad"</span><span class="op">]</span>
<span class="va">DT</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">degree</span><span class="op">)</span>, <span class="va">status</span> <span class="op">:=</span> <span class="st">"nongrad"</span><span class="op">]</span>

<span class="co"># frequency by group</span>
<span class="va">rows_we_want</span> <span class="op">&lt;-</span> <span class="va">midfieldterms</span><span class="op">$</span><span class="va">cip6</span> <span class="op">==</span> <span class="st">"141901"</span>
<span class="va">cols_we_want</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"institution"</span>, <span class="st">"cip6"</span>, <span class="st">"term"</span>, <span class="st">"coop"</span><span class="op">)</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">midfieldterms</span><span class="op">[</span><span class="va">rows_we_want</span>, <span class="va">..cols_we_want</span><span class="op">]</span>
<span class="va">DT</span><span class="op">[</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html">order</a></span><span class="op">(</span><span class="va">institution</span><span class="op">)</span>, <span class="va">.N</span>, by <span class="op">=</span> <span class="va">institution</span><span class="op">]</span>
<span class="va">DT</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span>N_coop <span class="op">=</span> <span class="va">.N</span><span class="op">)</span>, by <span class="op">=</span> <span class="va">coop</span><span class="op">]</span>
<span class="va">grouping_variables</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"institution"</span>, <span class="st">"coop"</span><span class="op">)</span>
<span class="va">DT</span><span class="op">[</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html">order</a></span><span class="op">(</span><span class="va">institution</span>, <span class="va">coop</span><span class="op">)</span>, <span class="fu">.</span><span class="op">(</span>frequency <span class="op">=</span> <span class="va">.N</span><span class="op">)</span>, by <span class="op">=</span> <span class="va">grouping_variables</span><span class="op">]</span>

<span class="co"># operate on a column by group</span>
<span class="va">rows_we_want</span> <span class="op">&lt;-</span> <span class="va">midfieldterms</span><span class="op">$</span><span class="va">cip6</span> <span class="op">==</span> <span class="st">"141901"</span>
<span class="va">cols_we_want</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"id"</span>, <span class="st">"cip6"</span>, <span class="st">"term"</span><span class="op">)</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">midfieldterms</span><span class="op">[</span><span class="va">rows_we_want</span>, <span class="va">..cols_we_want</span><span class="op">]</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span>, <span class="va">.SD</span><span class="op">[</span><span class="va">term</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">term</span><span class="op">)</span><span class="op">]</span>, by <span class="op">=</span> <span class="va">id</span><span class="op">]</span>

<span class="co"># convert data.frame to data.table in place</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">airquality</span><span class="op">)</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html">copy</a></span><span class="op">(</span><span class="va">airquality</span><span class="op">)</span>
<span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setDT.html">setDT</a></span><span class="op">(</span><span class="va">DT</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">airquality</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">DT</span><span class="op">)</span>

<span class="co"># convert data.table to data.frame in place</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">cip</span><span class="op">)</span>
<span class="va">DF</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html">copy</a></span><span class="op">(</span><span class="va">cip</span><span class="op">)</span>
<span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setDF.html">setDF</a></span><span class="op">(</span><span class="va">DF</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">cip</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">DF</span><span class="op">)</span>

<span class="co"># rename columns in place</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html">copy</a></span><span class="op">(</span><span class="va">midfielddegrees</span><span class="op">)</span>
<span class="va">rows_we_want</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">$</span><span class="va">institution</span> <span class="op">==</span> <span class="st">"Institution D"</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="va">rows_we_want</span><span class="op">]</span>
<span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setattr.html">setnames</a></span><span class="op">(</span><span class="va">DT</span>, old <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"id"</span>, <span class="st">"cip6"</span><span class="op">)</span>, new <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"ID"</span>, <span class="st">"CIP"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Richard Layton, Russell Long, Matthew Ohland, US National Science Foundation.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
