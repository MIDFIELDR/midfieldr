<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Stickiness metric • midfieldr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Stickiness metric">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">midfieldr</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/audience.html">Audience</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/cip_filter.html">Selecting CIP codes</a>
    </li>
    <li>
      <a href="../articles/stickiness.html">Stickiness metric</a>
    </li>
    <li>
      <a href="../articles/multiway.html">Multiway data, graphs, and tables</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../articles/about_midfield.html">About</a>
</li>
<li>
  <a href="https://github.com/MIDFIELDR/midfieldr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Stickiness metric</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/MIDFIELDR/midfieldr/blob/master/vignettes/stickiness.Rmd"><code>vignettes/stickiness.Rmd</code></a></small>
      <div class="hidden name"><code>stickiness.Rmd</code></div>

    </div>

    
    
<p>Longitudinal “stickiness” is the ratio of the number of students graduating in a program to the number of students ever enrolled in that program <span class="citation">(Ohland et al. 2012)</span>.</p>
<p>Thus the stickiness metric accounts for all students a program had the most immediate opportunity to retain and graduate—the students were, after all, enrolled in the program at one time.</p>
<p>We typically group stickiness results by program, sex, and “race” as defined by the participating US institutions.</p>
<div id="getting-started" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-started" class="anchor"></a>Getting started</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># packages used</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw">library</span>(midfieldr)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw">library</span>(seplyr)</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="kw">library</span>(tidyverse)</a></code></pre></div>
<p>In this article, we show you how to use midfieldr functions to compute program stickiness. Our workflow is:</p>
<ul>
<li>select the programs</li>
<li>count the students ever enrolled</li>
<li>count the students graduating<br>
</li>
<li>compute stickiness</li>
<li>create a multiway graph</li>
</ul>
</div>
<div id="select-the-programs-to-study" class="section level2">
<h2 class="hasAnchor">
<a href="#select-the-programs-to-study" class="anchor"></a>Select the programs to study</h2>
<p>For this example, we compare the stickiness of four engineering programs: Civil, Electrical, Industrial, and Mechanical. Their 4-digit CIP codes (1408, 1410, 1419, 1435) were found by keyword search as illustrated in <a href="cip_filter.html">Selecting CIP codes</a>.</p>
<p>We use <code><a href="../reference/cip_filter.html">cip_filter()</a></code> to obtain the relevant program codes. You can open the help page by running <code>?cip_filter()</code>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># four data frames of cip codes and names</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">cve &lt;-<span class="st"> </span><span class="kw"><a href="../reference/cip_filter.html">cip_filter</a></span>(cip, <span class="dt">series =</span> <span class="st">"^1408"</span>)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">ele &lt;-<span class="st"> </span><span class="kw"><a href="../reference/cip_filter.html">cip_filter</a></span>(cip, <span class="dt">series =</span> <span class="st">"^1410"</span>)</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">mce &lt;-<span class="st"> </span><span class="kw"><a href="../reference/cip_filter.html">cip_filter</a></span>(cip, <span class="dt">series =</span> <span class="st">"^1419"</span>)</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">ise &lt;-<span class="st"> </span><span class="kw"><a href="../reference/cip_filter.html">cip_filter</a></span>(cip, <span class="dt">series =</span> <span class="st">"^1435"</span>)</a></code></pre></div>
<p>Next we will use <code><a href="../reference/cip_label.html">cip_label()</a></code> to assign program names to the distinct programs we want to compare. One possibility is to use the 4-digit program names already available in the data. To view those names:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co"># view 4-digit program names</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="kw">unique</span>(cve[[<span class="st">"cip4name"</span>]])</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">#&gt; [1] "Civil Engineering"</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="kw">unique</span>(ele[[<span class="st">"cip4name"</span>]])</a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">#&gt; [1] "Electrical, Electronics and Communications Engineering"</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="kw">unique</span>(mce[[<span class="st">"cip4name"</span>]])</a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">#&gt; [1] "Mechanical Engineering"</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="kw">unique</span>(ise[[<span class="st">"cip4name"</span>]])</a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co">#&gt; [1] "Industrial Engineering"</span></a></code></pre></div>
<p>The 4-digit names for Civil, Mechanical, and Industrial Engineering are satisfactory; we’ll assign the default names to these programs using the <code>program = "cip4name"</code> argument in <code><a href="../reference/cip_label.html">cip_label()</a></code>. For other options, see the help page by running <code>?cip_label()</code></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="co"># label the programs with the default 4-digit names</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2">cve &lt;-<span class="st"> </span><span class="kw"><a href="../reference/cip_label.html">cip_label</a></span>(cve, <span class="dt">program =</span> <span class="st">"cip4name"</span>)</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">mce &lt;-<span class="st"> </span><span class="kw"><a href="../reference/cip_label.html">cip_label</a></span>(mce, <span class="dt">program =</span> <span class="st">"cip4name"</span>)</a>
<a class="sourceLine" id="cb4-4" data-line-number="4">ise &lt;-<span class="st"> </span><span class="kw"><a href="../reference/cip_label.html">cip_label</a></span>(ise, <span class="dt">program =</span> <span class="st">"cip4name"</span>)</a></code></pre></div>
<p>The Electrical Engineering program name is somewhat verbose; we’ll assign a custom label to this program as follows:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co"># label the program with a custom name</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2">ele &lt;-<span class="st"> </span><span class="kw"><a href="../reference/cip_label.html">cip_label</a></span>(ele, <span class="dt">program =</span> <span class="st">"Electrical Engineering"</span>)</a></code></pre></div>
<p>We use <code>bind_rows()</code>, a <a href="http://dplyr.tidyverse.org">dplyr</a> function, to bind the individual data frames into one data frame.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">cip_group &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(cve, ele, mce, ise)</a></code></pre></div>
<p>Examine the result: there are a total of 12 CIP codes for these programs. We have 7 columns: 6 from the <code>cip</code> dataset and the one <code>program</code> column of labels we added using <code><a href="../reference/cip_label.html">cip_label()</a></code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># check the result</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2">cip_group</a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="co">#&gt; # A tibble: 12 x 7</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co">#&gt;    cip2  cip2name    cip4  cip4name        cip6  cip6name        program  </span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co">#&gt;    &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;           &lt;chr&gt; &lt;chr&gt;           &lt;chr&gt;    </span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co">#&gt;  1 14    Engineering 1408  Civil Engineer~ 1408~ Civil Engineer~ Civil En~</span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="co">#&gt;  2 14    Engineering 1408  Civil Engineer~ 1408~ Geotechnical E~ Civil En~</span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="co">#&gt;  3 14    Engineering 1408  Civil Engineer~ 1408~ Structural Eng~ Civil En~</span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="co">#&gt;  4 14    Engineering 1408  Civil Engineer~ 1408~ Transportation~ Civil En~</span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10"><span class="co">#&gt;  5 14    Engineering 1408  Civil Engineer~ 1408~ Water Resource~ Civil En~</span></a>
<a class="sourceLine" id="cb7-11" data-line-number="11"><span class="co">#&gt;  6 14    Engineering 1408  Civil Engineer~ 1408~ Civil Engineer~ Civil En~</span></a>
<a class="sourceLine" id="cb7-12" data-line-number="12"><span class="co">#&gt;  7 14    Engineering 1410  Electrical, El~ 1410~ Electrical, El~ Electric~</span></a>
<a class="sourceLine" id="cb7-13" data-line-number="13"><span class="co">#&gt;  8 14    Engineering 1410  Electrical, El~ 1410~ Laser and Opti~ Electric~</span></a>
<a class="sourceLine" id="cb7-14" data-line-number="14"><span class="co">#&gt;  9 14    Engineering 1410  Electrical, El~ 1410~ Telecommunicat~ Electric~</span></a>
<a class="sourceLine" id="cb7-15" data-line-number="15"><span class="co">#&gt; 10 14    Engineering 1410  Electrical, El~ 1410~ Electrical, El~ Electric~</span></a>
<a class="sourceLine" id="cb7-16" data-line-number="16"><span class="co">#&gt; 11 14    Engineering 1419  Mechanical Eng~ 1419~ Mechanical Eng~ Mechanic~</span></a>
<a class="sourceLine" id="cb7-17" data-line-number="17"><span class="co">#&gt; 12 14    Engineering 1435  Industrial Eng~ 1435~ Industrial Eng~ Industri~</span></a></code></pre></div>
<p>When searching the midfielddata datasets for students in these programs, our search functions use the 6-digit CIP codes in the <code>cip6</code> variable. To confirm that the search terms are what we expect, we can extract and view the 12 unique codes.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw">unique</span>(cip_group[[<span class="st">"cip6"</span>]])</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="co">#&gt;  [1] "140801" "140802" "140803" "140804" "140805" "140899" "141001"</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="co">#&gt;  [8] "141003" "141004" "141099" "141901" "143501"</span></a></code></pre></div>
</div>
<div id="gather_ever" class="section level2">
<h2 class="hasAnchor">
<a href="#gather_ever" class="anchor"></a>gather_ever()</h2>
<p><code><a href="../reference/gather_ever.html">gather_ever()</a></code> has one argument, a data frame with at least two character variables: <code>cip6</code> and <code>program</code>. The function extracts from the <code>midfieldterms</code> dataset all students ever enrolled in the programs in <code>cip6</code>. Open the help page by running <code>?gather_ever()</code>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="co"># extract unique students from midfieldterms</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2">students &lt;-<span class="st"> </span><span class="kw"><a href="../reference/gather_ever.html">gather_ever</a></span>(cip_group)</a></code></pre></div>
<p>Use <code>glimpse()</code> (a <a href="http://tibble.tidyverse.org">tibble</a> function) to view the result to check the number of observations and to view the first few values of each variable. We see that we have 10846 students ever enrolled in these programs.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="co"># check the result</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="kw">glimpse</span>(students)</a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="co">#&gt; Observations: 10,846</span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="co">#&gt; Variables: 3</span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="co">#&gt; $ id      &lt;chr&gt; "MID25783197", "MID25783441", "MID25783553", "MID25783...</span></a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="co">#&gt; $ cip6    &lt;chr&gt; "140801", "140801", "140801", "140801", "140801", "140...</span></a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="co">#&gt; $ program &lt;chr&gt; "Civil Engineering", "Civil Engineering", "Civil Engin...</span></a></code></pre></div>
</div>
<div id="race_sex_join" class="section level2">
<h2 class="hasAnchor">
<a href="#race_sex_join" class="anchor"></a>race_sex_join()</h2>
<p><code><a href="../reference/race_sex_join.html">race_sex_join()</a></code> accepts any data frame with the MIDFIELD student <code>id</code> variable and joins the student race and sex from the <code>midfieldstudents</code> data to these data.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">students &lt;-<span class="st"> </span><span class="kw"><a href="../reference/race_sex_join.html">race_sex_join</a></span>(students)</a>
<a class="sourceLine" id="cb11-2" data-line-number="2"></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="co"># check the result</span></a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="kw">glimpse</span>(students)</a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="co">#&gt; Observations: 10,846</span></a>
<a class="sourceLine" id="cb11-6" data-line-number="6"><span class="co">#&gt; Variables: 5</span></a>
<a class="sourceLine" id="cb11-7" data-line-number="7"><span class="co">#&gt; $ id      &lt;chr&gt; "MID25783197", "MID25783441", "MID25783553", "MID25783...</span></a>
<a class="sourceLine" id="cb11-8" data-line-number="8"><span class="co">#&gt; $ cip6    &lt;chr&gt; "140801", "140801", "140801", "140801", "140801", "140...</span></a>
<a class="sourceLine" id="cb11-9" data-line-number="9"><span class="co">#&gt; $ program &lt;chr&gt; "Civil Engineering", "Civil Engineering", "Civil Engin...</span></a>
<a class="sourceLine" id="cb11-10" data-line-number="10"><span class="co">#&gt; $ race    &lt;chr&gt; "White", "White", "White", "White", "International", "...</span></a>
<a class="sourceLine" id="cb11-11" data-line-number="11"><span class="co">#&gt; $ sex     &lt;chr&gt; "Male", "Male", "Male", "Male", "Male", "Female", "Mal...</span></a></code></pre></div>
<p>If the argument to <code><a href="../reference/race_sex_join.html">race_sex_join()</a></code> already includes a <code>sex</code> or <code>race</code> column, that column (or columns) is returned unchanged. Open the help page by running <code>?race_sex_join()</code>.</p>
</div>
<div id="count-the-numbers-of-students-ever-enrolled" class="section level2">
<h2 class="hasAnchor">
<a href="#count-the-numbers-of-students-ever-enrolled" class="anchor"></a>Count the numbers of students ever enrolled</h2>
<p>We use <code>group_summarize()</code> (an <a href="https://winvector.github.io/seplyr/">seplyr</a> function) to group and count the numbers of students ever enrolled in our programs. All variables in <code>students</code> not used as grouping variables are quietly dropped. The assigned count variable is <code>ever</code>.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="co"># select the variables for grouping</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2">grouping_variables &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"program"</span>, <span class="st">"race"</span>, <span class="st">"sex"</span>)</a>
<a class="sourceLine" id="cb12-3" data-line-number="3"></a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="co"># count the numbers of students ever in a program</span></a>
<a class="sourceLine" id="cb12-5" data-line-number="5">ever_enrolled &lt;-<span class="st"> </span>students <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="st">  </span><span class="kw">group_summarize</span>(., grouping_variables, <span class="dt">ever =</span> <span class="kw">n</span>())</a>
<a class="sourceLine" id="cb12-7" data-line-number="7"></a>
<a class="sourceLine" id="cb12-8" data-line-number="8"><span class="co"># check the result</span></a>
<a class="sourceLine" id="cb12-9" data-line-number="9">ever_enrolled</a>
<a class="sourceLine" id="cb12-10" data-line-number="10"><span class="co">#&gt; # A tibble: 63 x 4</span></a>
<a class="sourceLine" id="cb12-11" data-line-number="11"><span class="co">#&gt;    program           race            sex     ever</span></a>
<a class="sourceLine" id="cb12-12" data-line-number="12"><span class="co">#&gt;    &lt;chr&gt;             &lt;chr&gt;           &lt;chr&gt;  &lt;int&gt;</span></a>
<a class="sourceLine" id="cb12-13" data-line-number="13"><span class="co">#&gt;  1 Civil Engineering Asian           Female    22</span></a>
<a class="sourceLine" id="cb12-14" data-line-number="14"><span class="co">#&gt;  2 Civil Engineering Asian           Male      54</span></a>
<a class="sourceLine" id="cb12-15" data-line-number="15"><span class="co">#&gt;  3 Civil Engineering Black           Female    71</span></a>
<a class="sourceLine" id="cb12-16" data-line-number="16"><span class="co">#&gt;  4 Civil Engineering Black           Male     132</span></a>
<a class="sourceLine" id="cb12-17" data-line-number="17"><span class="co">#&gt;  5 Civil Engineering Hispanic        Female    16</span></a>
<a class="sourceLine" id="cb12-18" data-line-number="18"><span class="co">#&gt;  6 Civil Engineering Hispanic        Male      85</span></a>
<a class="sourceLine" id="cb12-19" data-line-number="19"><span class="co">#&gt;  7 Civil Engineering International   Female     2</span></a>
<a class="sourceLine" id="cb12-20" data-line-number="20"><span class="co">#&gt;  8 Civil Engineering International   Male      22</span></a>
<a class="sourceLine" id="cb12-21" data-line-number="21"><span class="co">#&gt;  9 Civil Engineering Native American Male       7</span></a>
<a class="sourceLine" id="cb12-22" data-line-number="22"><span class="co">#&gt; 10 Civil Engineering Other           Female    12</span></a>
<a class="sourceLine" id="cb12-23" data-line-number="23"><span class="co">#&gt; 11 Civil Engineering Other           Male      32</span></a>
<a class="sourceLine" id="cb12-24" data-line-number="24"><span class="co">#&gt; 12 Civil Engineering Unknown         Female     2</span></a>
<a class="sourceLine" id="cb12-25" data-line-number="25"><span class="co">#&gt; # ... with 51 more rows</span></a></code></pre></div>
</div>
<div id="gather_grad" class="section level2">
<h2 class="hasAnchor">
<a href="#gather_grad" class="anchor"></a>gather_grad()</h2>
<p><code><a href="../reference/gather_grad.html">gather_grad()</a></code> extracts a subset of the <code>midfielddegrees</code> data containing the unique students ever graduating from the programs listed in <code>cip_group</code> and joins our user-defined <code>program</code> labels to these data.</p>
<p>Similar to gathering the ever enrolled students, we can chain these functions together in one code chunk. Here, the assigned count variable is <code>grad</code>. Open the help page by running <code>?gather_grad()</code>.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="co"># count students graduating from programs</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2">graduated &lt;-<span class="st"> </span><span class="kw"><a href="../reference/gather_grad.html">gather_grad</a></span>(cip_group) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/race_sex_join.html">race_sex_join</a></span>(.) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="st">  </span><span class="kw">group_summarize</span>(., grouping_variables, <span class="dt">grad =</span> <span class="kw">n</span>())</a>
<a class="sourceLine" id="cb13-5" data-line-number="5"></a>
<a class="sourceLine" id="cb13-6" data-line-number="6"><span class="co"># check the result</span></a>
<a class="sourceLine" id="cb13-7" data-line-number="7">graduated</a>
<a class="sourceLine" id="cb13-8" data-line-number="8"><span class="co">#&gt; # A tibble: 60 x 4</span></a>
<a class="sourceLine" id="cb13-9" data-line-number="9"><span class="co">#&gt;    program           race            sex     grad</span></a>
<a class="sourceLine" id="cb13-10" data-line-number="10"><span class="co">#&gt;    &lt;chr&gt;             &lt;chr&gt;           &lt;chr&gt;  &lt;int&gt;</span></a>
<a class="sourceLine" id="cb13-11" data-line-number="11"><span class="co">#&gt;  1 Civil Engineering Asian           Female    11</span></a>
<a class="sourceLine" id="cb13-12" data-line-number="12"><span class="co">#&gt;  2 Civil Engineering Asian           Male      24</span></a>
<a class="sourceLine" id="cb13-13" data-line-number="13"><span class="co">#&gt;  3 Civil Engineering Black           Female    21</span></a>
<a class="sourceLine" id="cb13-14" data-line-number="14"><span class="co">#&gt;  4 Civil Engineering Black           Male      39</span></a>
<a class="sourceLine" id="cb13-15" data-line-number="15"><span class="co">#&gt;  5 Civil Engineering Hispanic        Female     5</span></a>
<a class="sourceLine" id="cb13-16" data-line-number="16"><span class="co">#&gt;  6 Civil Engineering Hispanic        Male      30</span></a>
<a class="sourceLine" id="cb13-17" data-line-number="17"><span class="co">#&gt;  7 Civil Engineering International   Female     1</span></a>
<a class="sourceLine" id="cb13-18" data-line-number="18"><span class="co">#&gt;  8 Civil Engineering International   Male       5</span></a>
<a class="sourceLine" id="cb13-19" data-line-number="19"><span class="co">#&gt;  9 Civil Engineering Native American Male       3</span></a>
<a class="sourceLine" id="cb13-20" data-line-number="20"><span class="co">#&gt; 10 Civil Engineering Other           Female     1</span></a>
<a class="sourceLine" id="cb13-21" data-line-number="21"><span class="co">#&gt; 11 Civil Engineering Other           Male       8</span></a>
<a class="sourceLine" id="cb13-22" data-line-number="22"><span class="co">#&gt; 12 Civil Engineering Unknown         Female     1</span></a>
<a class="sourceLine" id="cb13-23" data-line-number="23"><span class="co">#&gt; # ... with 48 more rows</span></a></code></pre></div>
</div>
<div id="tally-stickiness" class="section level2">
<h2 class="hasAnchor">
<a href="#tally-stickiness" class="anchor"></a>Tally stickiness</h2>
<p>To compute stickiness, we use <code>left_join()</code> (a dplyr function) to join <code>graduated</code> to <code>ever_enrolled</code> by program, race, and sex.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">stickiness &lt;-<span class="st"> </span><span class="kw">left_join</span>(ever_enrolled, graduated, <span class="dt">by =</span> grouping_variables)</a>
<a class="sourceLine" id="cb14-2" data-line-number="2"></a>
<a class="sourceLine" id="cb14-3" data-line-number="3">stickiness</a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="co">#&gt; # A tibble: 63 x 5</span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5"><span class="co">#&gt;    program           race            sex     ever  grad</span></a>
<a class="sourceLine" id="cb14-6" data-line-number="6"><span class="co">#&gt;    &lt;chr&gt;             &lt;chr&gt;           &lt;chr&gt;  &lt;int&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb14-7" data-line-number="7"><span class="co">#&gt;  1 Civil Engineering Asian           Female    22    11</span></a>
<a class="sourceLine" id="cb14-8" data-line-number="8"><span class="co">#&gt;  2 Civil Engineering Asian           Male      54    24</span></a>
<a class="sourceLine" id="cb14-9" data-line-number="9"><span class="co">#&gt;  3 Civil Engineering Black           Female    71    21</span></a>
<a class="sourceLine" id="cb14-10" data-line-number="10"><span class="co">#&gt;  4 Civil Engineering Black           Male     132    39</span></a>
<a class="sourceLine" id="cb14-11" data-line-number="11"><span class="co">#&gt;  5 Civil Engineering Hispanic        Female    16     5</span></a>
<a class="sourceLine" id="cb14-12" data-line-number="12"><span class="co">#&gt;  6 Civil Engineering Hispanic        Male      85    30</span></a>
<a class="sourceLine" id="cb14-13" data-line-number="13"><span class="co">#&gt;  7 Civil Engineering International   Female     2     1</span></a>
<a class="sourceLine" id="cb14-14" data-line-number="14"><span class="co">#&gt;  8 Civil Engineering International   Male      22     5</span></a>
<a class="sourceLine" id="cb14-15" data-line-number="15"><span class="co">#&gt;  9 Civil Engineering Native American Male       7     3</span></a>
<a class="sourceLine" id="cb14-16" data-line-number="16"><span class="co">#&gt; 10 Civil Engineering Other           Female    12     1</span></a>
<a class="sourceLine" id="cb14-17" data-line-number="17"><span class="co">#&gt; 11 Civil Engineering Other           Male      32     8</span></a>
<a class="sourceLine" id="cb14-18" data-line-number="18"><span class="co">#&gt; 12 Civil Engineering Unknown         Female     2     1</span></a>
<a class="sourceLine" id="cb14-19" data-line-number="19"><span class="co">#&gt; # ... with 51 more rows</span></a></code></pre></div>
<p>We suggest omitting observations with 5 or fewer students ever enrolled.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">stickiness &lt;-<span class="st"> </span>stickiness <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="st">  </span><span class="kw">filter</span>(., ever <span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span>)</a></code></pre></div>
<p>Finally, we create <code>stick</code>, the ratio of <code>grad</code> to <code>ever</code>. Stickiness is reported as a fraction between 0 and 1.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="co"># tally stickiness</span></a>
<a class="sourceLine" id="cb16-2" data-line-number="2">stickiness &lt;-<span class="st"> </span>stickiness <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="st">  </span><span class="kw">mutate</span>(., <span class="dt">stick =</span> <span class="kw">round</span>(grad <span class="op">/</span><span class="st"> </span>ever, <span class="dv">3</span>))</a>
<a class="sourceLine" id="cb16-4" data-line-number="4"></a>
<a class="sourceLine" id="cb16-5" data-line-number="5"><span class="co"># check the result</span></a>
<a class="sourceLine" id="cb16-6" data-line-number="6">stickiness</a>
<a class="sourceLine" id="cb16-7" data-line-number="7"><span class="co">#&gt; # A tibble: 54 x 6</span></a>
<a class="sourceLine" id="cb16-8" data-line-number="8"><span class="co">#&gt;    program           race            sex     ever  grad stick</span></a>
<a class="sourceLine" id="cb16-9" data-line-number="9"><span class="co">#&gt;    &lt;chr&gt;             &lt;chr&gt;           &lt;chr&gt;  &lt;int&gt; &lt;int&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb16-10" data-line-number="10"><span class="co">#&gt;  1 Civil Engineering Asian           Female    22    11 0.5  </span></a>
<a class="sourceLine" id="cb16-11" data-line-number="11"><span class="co">#&gt;  2 Civil Engineering Asian           Male      54    24 0.444</span></a>
<a class="sourceLine" id="cb16-12" data-line-number="12"><span class="co">#&gt;  3 Civil Engineering Black           Female    71    21 0.296</span></a>
<a class="sourceLine" id="cb16-13" data-line-number="13"><span class="co">#&gt;  4 Civil Engineering Black           Male     132    39 0.295</span></a>
<a class="sourceLine" id="cb16-14" data-line-number="14"><span class="co">#&gt;  5 Civil Engineering Hispanic        Female    16     5 0.312</span></a>
<a class="sourceLine" id="cb16-15" data-line-number="15"><span class="co">#&gt;  6 Civil Engineering Hispanic        Male      85    30 0.353</span></a>
<a class="sourceLine" id="cb16-16" data-line-number="16"><span class="co">#&gt;  7 Civil Engineering International   Male      22     5 0.227</span></a>
<a class="sourceLine" id="cb16-17" data-line-number="17"><span class="co">#&gt;  8 Civil Engineering Native American Male       7     3 0.429</span></a>
<a class="sourceLine" id="cb16-18" data-line-number="18"><span class="co">#&gt;  9 Civil Engineering Other           Female    12     1 0.083</span></a>
<a class="sourceLine" id="cb16-19" data-line-number="19"><span class="co">#&gt; 10 Civil Engineering Other           Male      32     8 0.25 </span></a>
<a class="sourceLine" id="cb16-20" data-line-number="20"><span class="co">#&gt; # ... with 44 more rows</span></a></code></pre></div>
</div>
<div id="multiway_order" class="section level2">
<h2 class="hasAnchor">
<a href="#multiway_order" class="anchor"></a>multiway_order()</h2>
<p>Before structuring the data for graphing, we select the populations we are interested in. For example, we might omit students for whom the “race” designation is ambiguous. This step could have been taken earlier, but must be taken (if at all) before using <code><a href="../reference/multiway_order.html">multiway_order()</a></code>.</p>
<p>We use <code>filter()</code> (a <a href="http://dplyr.tidyverse.org">dplyr</a> function) to keep all rows except those in which race is Unknown, International, or Other.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1">stickiness_multiway &lt;-<span class="st"> </span>stickiness <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2"><span class="st">  </span><span class="kw">filter</span>(., <span class="op">!</span>race <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">"Unknown"</span>, <span class="st">"International"</span>, <span class="st">"Other"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb17-3" data-line-number="3"><span class="st">  </span><span class="kw">filter</span>(., <span class="op">!</span>sex <span class="op">%in%</span><span class="st"> "Unknown"</span>)</a></code></pre></div>
<p>This example has no “Unknown” values in <code>sex</code>, but the larger data set does. For completeness, I’ve also filtered to remove those observations.</p>
<p>We structure the stickiness results as <em>multiway</em> data by combining student race and sex into a single <code>race_sex</code> variable. The <a href="multiway.html">Multiway</a> article explains multiway data and graphs in detail.</p>
<p>We use:</p>
<ul>
<li>
<code>mutate()</code> (a <a href="http://dplyr.tidyverse.org">dplyr</a> function) to create a new variable</li>
<li>
<code>str_c()</code> (a <a href="http://stringr.tidyverse.org">stringr</a> function) to combine the race and sex strings</li>
<li>
<code>select()</code> (a <a href="http://dplyr.tidyverse.org">dplyr</a> function) to keep three variables only</li>
</ul>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="co"># create the race_sex variable</span></a>
<a class="sourceLine" id="cb18-2" data-line-number="2">stickiness_multiway &lt;-<span class="st"> </span>stickiness_multiway <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb18-3" data-line-number="3"><span class="st">  </span><span class="kw">mutate</span>(., <span class="dt">race_sex =</span> <span class="kw">str_c</span>(race, sex, <span class="dt">sep =</span> <span class="st">" "</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb18-4" data-line-number="4"><span class="st">  </span><span class="kw">select</span>(., program, race_sex, stick)</a>
<a class="sourceLine" id="cb18-5" data-line-number="5"></a>
<a class="sourceLine" id="cb18-6" data-line-number="6"><span class="co"># check the result</span></a>
<a class="sourceLine" id="cb18-7" data-line-number="7">stickiness_multiway</a>
<a class="sourceLine" id="cb18-8" data-line-number="8"><span class="co">#&gt; # A tibble: 36 x 3</span></a>
<a class="sourceLine" id="cb18-9" data-line-number="9"><span class="co">#&gt;    program                race_sex             stick</span></a>
<a class="sourceLine" id="cb18-10" data-line-number="10"><span class="co">#&gt;    &lt;chr&gt;                  &lt;chr&gt;                &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb18-11" data-line-number="11"><span class="co">#&gt;  1 Civil Engineering      Asian Female         0.5  </span></a>
<a class="sourceLine" id="cb18-12" data-line-number="12"><span class="co">#&gt;  2 Civil Engineering      Asian Male           0.444</span></a>
<a class="sourceLine" id="cb18-13" data-line-number="13"><span class="co">#&gt;  3 Civil Engineering      Black Female         0.296</span></a>
<a class="sourceLine" id="cb18-14" data-line-number="14"><span class="co">#&gt;  4 Civil Engineering      Black Male           0.295</span></a>
<a class="sourceLine" id="cb18-15" data-line-number="15"><span class="co">#&gt;  5 Civil Engineering      Hispanic Female      0.312</span></a>
<a class="sourceLine" id="cb18-16" data-line-number="16"><span class="co">#&gt;  6 Civil Engineering      Hispanic Male        0.353</span></a>
<a class="sourceLine" id="cb18-17" data-line-number="17"><span class="co">#&gt;  7 Civil Engineering      Native American Male 0.429</span></a>
<a class="sourceLine" id="cb18-18" data-line-number="18"><span class="co">#&gt;  8 Civil Engineering      White Female         0.431</span></a>
<a class="sourceLine" id="cb18-19" data-line-number="19"><span class="co">#&gt;  9 Civil Engineering      White Male           0.474</span></a>
<a class="sourceLine" id="cb18-20" data-line-number="20"><span class="co">#&gt; 10 Electrical Engineering Asian Female         0.44 </span></a>
<a class="sourceLine" id="cb18-21" data-line-number="21"><span class="co">#&gt; # ... with 26 more rows</span></a></code></pre></div>
<p><code><a href="../reference/multiway_order.html">multiway_order()</a></code> converts the character variables <code>program</code> and <code>race_sex</code> into <em>factors</em> and orders the levels of the two factors by the relevant stickiness medians. <code>glimpse()</code> shows that the two categorical variables are now factors. Open the help page by running <code>?multiway_order()</code>.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="co"># convert the data to a multiway structure</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2">stickiness_multiway &lt;-<span class="st"> </span><span class="kw"><a href="../reference/multiway_order.html">multiway_order</a></span>(stickiness_multiway)</a>
<a class="sourceLine" id="cb19-3" data-line-number="3"></a>
<a class="sourceLine" id="cb19-4" data-line-number="4"><span class="co"># check the result</span></a>
<a class="sourceLine" id="cb19-5" data-line-number="5">stickiness_multiway</a>
<a class="sourceLine" id="cb19-6" data-line-number="6"><span class="co">#&gt; # A tibble: 36 x 3</span></a>
<a class="sourceLine" id="cb19-7" data-line-number="7"><span class="co">#&gt;    program                race_sex             stick</span></a>
<a class="sourceLine" id="cb19-8" data-line-number="8"><span class="co">#&gt;    &lt;fct&gt;                  &lt;fct&gt;                &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb19-9" data-line-number="9"><span class="co">#&gt;  1 Civil Engineering      Asian Female         0.5  </span></a>
<a class="sourceLine" id="cb19-10" data-line-number="10"><span class="co">#&gt;  2 Civil Engineering      Asian Male           0.444</span></a>
<a class="sourceLine" id="cb19-11" data-line-number="11"><span class="co">#&gt;  3 Civil Engineering      Black Female         0.296</span></a>
<a class="sourceLine" id="cb19-12" data-line-number="12"><span class="co">#&gt;  4 Civil Engineering      Black Male           0.295</span></a>
<a class="sourceLine" id="cb19-13" data-line-number="13"><span class="co">#&gt;  5 Civil Engineering      Hispanic Female      0.312</span></a>
<a class="sourceLine" id="cb19-14" data-line-number="14"><span class="co">#&gt;  6 Civil Engineering      Hispanic Male        0.353</span></a>
<a class="sourceLine" id="cb19-15" data-line-number="15"><span class="co">#&gt;  7 Civil Engineering      Native American Male 0.429</span></a>
<a class="sourceLine" id="cb19-16" data-line-number="16"><span class="co">#&gt;  8 Civil Engineering      White Female         0.431</span></a>
<a class="sourceLine" id="cb19-17" data-line-number="17"><span class="co">#&gt;  9 Civil Engineering      White Male           0.474</span></a>
<a class="sourceLine" id="cb19-18" data-line-number="18"><span class="co">#&gt; 10 Electrical Engineering Asian Female         0.44 </span></a>
<a class="sourceLine" id="cb19-19" data-line-number="19"><span class="co">#&gt; # ... with 26 more rows</span></a></code></pre></div>
</div>
<div id="graphing-the-multiway" class="section level2">
<h2 class="hasAnchor">
<a href="#graphing-the-multiway" class="anchor"></a>Graphing the multiway</h2>
<p>By using <code><a href="../reference/multiway_order.html">multiway_order()</a></code> to condition the data, the rows and panels of the multiway graph will be ordered by the appropriate medians. We use conventional ggplot2 functions applied to the <code>stickiness</code> data frame:</p>
<ul>
<li>
<code>stick</code> is the quantitative x-variable</li>
<li>
<code>race_sex</code> is the y-variable forming the rows of the panels</li>
<li>
<code>program</code> in <code>facet_wrap()</code> conditions the panels<br>
</li>
<li>
<code>as.table = FALSE</code> places the panels in ascending order from bottom to top</li>
<li>
<code>geom_point()</code> creates the data markers; any NA values are removed by <code>na.rm = TRUE</code>
</li>
<li>
<code>labs()</code> assign axis labels</li>
</ul>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="kw">ggplot</span>(stickiness_multiway, <span class="kw">aes</span>(<span class="dt">x =</span> stick, <span class="dt">y =</span> race_sex)) <span class="op">+</span></a>
<a class="sourceLine" id="cb20-2" data-line-number="2"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>program, <span class="dt">ncol =</span> <span class="dv">1</span>, <span class="dt">as.table =</span> <span class="ot">FALSE</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb20-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">na.rm =</span> <span class="ot">TRUE</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb20-4" data-line-number="4"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">"Stickiness"</span>, <span class="dt">y =</span> <span class="st">""</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb20-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="../reference/utils_graph.html">theme_midfield</a></span>()</a></code></pre></div>
<p><img src="../man/figures/stickiness-fig1-1.png" width="70%" style="display: block; margin: auto;"></p>
<p>We also apply our own <code><a href="../reference/utils_graph.html">theme_midfield()</a></code> to edit the visual properties of the graph: axes, legends, panels, strips, etc. Open the help page by running</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1">?<span class="kw"><a href="../reference/utils_graph.html">theme_midfield</a></span>()</a></code></pre></div>
</div>
<div id="complete-script" class="section level2">
<h2 class="hasAnchor">
<a href="#complete-script" class="anchor"></a>Complete script</h2>
<p>For reference, the complete script for this example is collected below.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1"><span class="co"># packages used</span></a>
<a class="sourceLine" id="cb22-2" data-line-number="2"><span class="kw">library</span>(midfieldr)</a>
<a class="sourceLine" id="cb22-3" data-line-number="3"><span class="kw">library</span>(seplyr)</a>
<a class="sourceLine" id="cb22-4" data-line-number="4"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb22-5" data-line-number="5"></a>
<a class="sourceLine" id="cb22-6" data-line-number="6"><span class="co"># collect CIP information for 4 programs and combine into one data frame</span></a>
<a class="sourceLine" id="cb22-7" data-line-number="7">cve &lt;-<span class="st"> </span><span class="kw"><a href="../reference/cip_filter.html">cip_filter</a></span>(cip, <span class="dt">series =</span> <span class="st">"^1408"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-8" data-line-number="8"><span class="st">  </span><span class="kw"><a href="../reference/cip_label.html">cip_label</a></span>(., <span class="dt">program =</span> <span class="st">"cip4name"</span>)</a>
<a class="sourceLine" id="cb22-9" data-line-number="9">ele &lt;-<span class="st"> </span><span class="kw"><a href="../reference/cip_filter.html">cip_filter</a></span>(cip, <span class="dt">series =</span> <span class="st">"^1410"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-10" data-line-number="10"><span class="st">  </span><span class="kw"><a href="../reference/cip_label.html">cip_label</a></span>(., <span class="dt">program =</span> <span class="st">"Electrical Engineering"</span>)</a>
<a class="sourceLine" id="cb22-11" data-line-number="11">mce &lt;-<span class="st"> </span><span class="kw"><a href="../reference/cip_filter.html">cip_filter</a></span>(cip, <span class="dt">series =</span> <span class="st">"^1419"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-12" data-line-number="12"><span class="st">  </span><span class="kw"><a href="../reference/cip_label.html">cip_label</a></span>(., <span class="dt">program =</span> <span class="st">"cip4name"</span>)</a>
<a class="sourceLine" id="cb22-13" data-line-number="13">ise &lt;-<span class="st"> </span><span class="kw"><a href="../reference/cip_filter.html">cip_filter</a></span>(cip, <span class="dt">series =</span> <span class="st">"^1435"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-14" data-line-number="14"><span class="st">  </span><span class="kw"><a href="../reference/cip_label.html">cip_label</a></span>(., <span class="dt">program =</span> <span class="st">"cip4name"</span>)</a>
<a class="sourceLine" id="cb22-15" data-line-number="15">cip_group &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(cve, ele, mce, ise)</a>
<a class="sourceLine" id="cb22-16" data-line-number="16"></a>
<a class="sourceLine" id="cb22-17" data-line-number="17"><span class="co"># assign grouping variables for summarizing and joining</span></a>
<a class="sourceLine" id="cb22-18" data-line-number="18">grouping_variables &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"program"</span>, <span class="st">"race"</span>, <span class="st">"sex"</span>)</a>
<a class="sourceLine" id="cb22-19" data-line-number="19"></a>
<a class="sourceLine" id="cb22-20" data-line-number="20"><span class="co"># count students ever enrolled</span></a>
<a class="sourceLine" id="cb22-21" data-line-number="21">ever_enrolled &lt;-<span class="st"> </span><span class="kw"><a href="../reference/gather_ever.html">gather_ever</a></span>(cip_group) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-22" data-line-number="22"><span class="st">  </span><span class="kw"><a href="../reference/race_sex_join.html">race_sex_join</a></span>(.) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-23" data-line-number="23"><span class="st">  </span><span class="kw">group_summarize</span>(., grouping_variables, <span class="dt">ever =</span> <span class="kw">n</span>())</a>
<a class="sourceLine" id="cb22-24" data-line-number="24"></a>
<a class="sourceLine" id="cb22-25" data-line-number="25"><span class="co"># count students graduating</span></a>
<a class="sourceLine" id="cb22-26" data-line-number="26">graduated &lt;-<span class="st"> </span><span class="kw"><a href="../reference/gather_grad.html">gather_grad</a></span>(cip_group) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-27" data-line-number="27"><span class="st">  </span><span class="kw"><a href="../reference/race_sex_join.html">race_sex_join</a></span>(.) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-28" data-line-number="28"><span class="st">  </span><span class="kw">group_summarize</span>(., grouping_variables, <span class="dt">grad =</span> <span class="kw">n</span>())</a>
<a class="sourceLine" id="cb22-29" data-line-number="29"></a>
<a class="sourceLine" id="cb22-30" data-line-number="30"><span class="co"># tally stickiness, by group</span></a>
<a class="sourceLine" id="cb22-31" data-line-number="31">stickiness &lt;-<span class="st"> </span><span class="kw">left_join</span>(ever_enrolled, graduated, <span class="dt">by =</span> grouping_variables) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-32" data-line-number="32"><span class="st">  </span><span class="kw">filter</span>(., ever <span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-33" data-line-number="33"><span class="st">  </span><span class="kw">mutate</span>(., <span class="dt">stick =</span> <span class="kw">round</span>(grad <span class="op">/</span><span class="st"> </span>ever, <span class="dv">3</span>))</a>
<a class="sourceLine" id="cb22-34" data-line-number="34"></a>
<a class="sourceLine" id="cb22-35" data-line-number="35"><span class="co"># prepare data for graph</span></a>
<a class="sourceLine" id="cb22-36" data-line-number="36">stickiness_multiway &lt;-<span class="st"> </span>stickiness <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-37" data-line-number="37"><span class="st">  </span><span class="kw">filter</span>(., <span class="op">!</span>race <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">"Unknown"</span>, <span class="st">"International"</span>, <span class="st">"Other"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-38" data-line-number="38"><span class="st">  </span><span class="kw">filter</span>(., <span class="op">!</span>sex <span class="op">%in%</span><span class="st"> "Unknown"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-39" data-line-number="39"><span class="st">  </span><span class="kw">mutate</span>(., <span class="dt">race_sex =</span> <span class="kw">str_c</span>(race, sex, <span class="dt">sep =</span> <span class="st">" "</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-40" data-line-number="40"><span class="st">  </span><span class="kw">select</span>(., program, race_sex, stick) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-41" data-line-number="41"><span class="st">  </span><span class="kw"><a href="../reference/multiway_order.html">multiway_order</a></span>(.)</a>
<a class="sourceLine" id="cb22-42" data-line-number="42"></a>
<a class="sourceLine" id="cb22-43" data-line-number="43"><span class="co"># graph</span></a>
<a class="sourceLine" id="cb22-44" data-line-number="44"><span class="kw">ggplot</span>(stickiness_multiway, <span class="kw">aes</span>(<span class="dt">x =</span> stick, <span class="dt">y =</span> race_sex)) <span class="op">+</span></a>
<a class="sourceLine" id="cb22-45" data-line-number="45"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>program, <span class="dt">ncol =</span> <span class="dv">1</span>, <span class="dt">as.table =</span> <span class="ot">FALSE</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb22-46" data-line-number="46"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">na.rm =</span> <span class="ot">TRUE</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb22-47" data-line-number="47"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">"Stickiness"</span>, <span class="dt">y =</span> <span class="st">""</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb22-48" data-line-number="48"><span class="st">  </span><span class="kw"><a href="../reference/utils_graph.html">theme_midfield</a></span>()</a></code></pre></div>
</div>
<div id="references" class="section level2 unnumbered">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<div id="refs" class="references">
<div id="ref-stickiness2012">
<p>Ohland, Matthew, Marisa Orr, Richard Layton, Susan Lord, and Russell Long. 2012. “Introducing Stickiness as a Versatile Metric of Engineering Persistence.” In <em>Proceedings of the Frontiers in Education Conference</em>, 1–5.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#getting-started">Getting started</a></li>
      <li><a href="#select-the-programs-to-study">Select the programs to study</a></li>
      <li><a href="#gather_ever">gather_ever()</a></li>
      <li><a href="#race_sex_join">race_sex_join()</a></li>
      <li><a href="#count-the-numbers-of-students-ever-enrolled">Count the numbers of students ever enrolled</a></li>
      <li><a href="#gather_grad">gather_grad()</a></li>
      <li><a href="#tally-stickiness">Tally stickiness</a></li>
      <li><a href="#multiway_order">multiway_order()</a></li>
      <li><a href="#graphing-the-multiway">Graphing the multiway</a></li>
      <li><a href="#complete-script">Complete script</a></li>
      <li><a href="#references">References</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Richard Layton, Russell Long, Matthew Ohland, US National Science Foundation.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
