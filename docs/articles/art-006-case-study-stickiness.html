<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="midfieldr">
<title>Case study stickiness • midfieldr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="../deps/bs3compat-0.2.5.1/tabs.js"></script><script src="../deps/bs3compat-0.2.5.1/bs3compat.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<link href="../syntax-highlighting.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Case study stickiness">
<meta property="og:description" content="midfieldr">
<meta property="og:image" content="https://midfieldr.github.io/midfieldr/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc" data-headroom>
    

      <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a class="navbar-brand mb-0 h1" href="../index.html">midfieldr</a>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <button type="button" id="version-badge" class="badge badge-default d-none d-lg-block" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Released version">1.0.0.9018</button>

    <div id="navbar" class="collapse navbar-collapse">
      <ul class="navbar-nav mr-auto ml-3">
<li class="nav-item">
  <a class="nav-link" href="../articles/art-000-getting-started.html">Getting started</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-case-study">Case study</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-case-study">
    <a class="dropdown-item" href="../articles/art-002-case-study-programs.html">Programs</a>
    <a class="dropdown-item" href="../articles/art-004-case-study-students.html">Students</a>
    <a class="dropdown-item" href="../articles/art-006-case-study-stickiness.html">Stickiness</a>
    <a class="dropdown-item" href="../articles/art-008-case-study-grad-rate.html">Graduation rate</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-vignettes">Vignettes</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-vignettes">
    <a class="dropdown-item" href="../articles/art-010-program-codes.html">Program codes and names</a>
    <a class="dropdown-item" href="../articles/art-015-subsetting-midfield-data.html">Subsetting MIDFIELD data</a>
    <a class="dropdown-item" href="../articles/art-020-data-sufficiency.html">Data sufficiency</a>
    <a class="dropdown-item" href="../articles/art-030-timely-completion.html">Timely completion</a>
    <a class="dropdown-item" href="../articles/art-040-fye-programs.html">FYE programs</a>
    <a class="dropdown-item" href="../articles/art-050-multiway-graphs.html">Multiway graphs</a>
    <a class="dropdown-item" href="../articles/art-060-tabulating-data.html">Tabulating data</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control mr-sm-2" aria-label="Search" name="search-input" data-search-index="/search.json" id="search-input" placeholder="Search..." autocomplete="off">
</form>

      <ul class="navbar-nav ml-1">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/MIDFIELDR/midfieldr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
  </div>
</nav><div class="container template-article">
<script src="art-006-case-study-stickiness_files/header-attrs-2.9/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <img src="../package-logo.png" class="pkg-logo" alt=""><div class="page-header pb-2 mt-4 mb-2 border-bottom toc-ignore">
      <h1 class="display-4" data-toc-skip>Case study stickiness</h1>
                        <h4 data-toc-skip class="author">Richard Layton</h4>
            
            <h4 data-toc-skip class="date">2021-07-04</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/MIDFIELDR/midfieldr/blob/master/vignettes/art-006-case-study-stickiness.Rmd" class="external-link"><code>vignettes/art-006-case-study-stickiness.Rmd</code></a></small>
      <div class="d-none name"><code>art-006-case-study-stickiness.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor" aria-hidden="true"></a>Introduction</h2>
<p>We continue the case study, a tour of a typical workflow with student unit record data. Again, for the sake of brevity we focus on the logic of the analysis and leave the detailed discussion of functions and arguments to later vignettes.</p>
<p>Assuming you completed the introduction to the four data tables (in <a href="art-000-getting-started.html">Getting started</a>), the case study has four parts:</p>
<ul>
<li><a href="art-002-case-study-programs.html">Case study programs</a></li>
<li><a href="art-004-case-study-students.html">Case study students</a></li>
<li>
<em>Case study stickiness</em> ⮘ You are here.</li>
<li><a href="art-006-case-study-grad-rate.html">Case study graduation rate</a></li>
</ul>
<p>Longer, related vignettes with detailed discussions of methods and functions include:</p>
<ul>
<li><a href="art-020-data-sufficiency.html">Data sufficiency</a></li>
<li><a href="art-030-timely-completion.html" target="_blank">Timely completion</a></li>
<li><a href="art-050-multiway-graphs.html" target="_blank">Multiway graphs</a></li>
</ul>
<div id="in-this-vignette" class="section level3">
<h3 class="hasAnchor">
<a href="#in-this-vignette" class="anchor" aria-hidden="true"></a>In this vignette</h3>
<p>Starting with the <code>study_student</code> data frame from the previous vignette (<a href="art-004-case-study-students.html" target="_blank">Case study students</a>), we:</p>
<ul>
<li>Apply the timely completion criterion</li>
<li>Tally students ever enrolled in a program by race/ethnicity, and sex</li>
<li>Tally students completing a program by race/ethnicity, and sex</li>
<li>Compute and graph the stickiness</li>
<li>Save the results</li>
</ul>
<p><em>Longitudinal stickiness</em> is the ratio of the number of students graduating in a program to the number of students ever enrolled in that program after accounting for the data sufficiency and timely completion criteria <span class="citation"><a href="#ref-Ohland+Orr+others:2012" role="doc-biblioref">[1]</a></span>. Stickiness measures the extent to which a program succeeds in its basic goal of graduating the students it admits, without regard to how or when a student is admitted to a program—the metric includes students who begin college part-time, enroll mid-year, switch majors, or transfer, in addition to first-time-in-college students.</p>
<p>We use the following midfieldr functions</p>
<ul>
<li><a href="../reference/add_completion_timely.html"><code>add_completion_timely()</code></a></li>
<li><a href="../reference/condition_multiway.html"><code>condition_multiway()</code></a></li>
</ul>
<p>The vignette output is the data frame <code>study_stickiness</code>.</p>
</div>
</div>
<div id="apply-the-timely-completion-criterion" class="section level2">
<h2 class="hasAnchor">
<a href="#apply-the-timely-completion-criterion" class="anchor" aria-hidden="true"></a>Apply the timely completion criterion</h2>
<p>If you are writing your own script to follow along, we start with these packages:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># packages used</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/MIDFIELDR/midfieldr" class="external-link">"midfieldr"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/MIDFIELDR/midfielddata" class="external-link">"midfielddata"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://r-datatable.com" class="external-link">"data.table"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://ggplot2.tidyverse.org" class="external-link">"ggplot2"</a></span><span class="op">)</span>

<span class="co"># optional code to control data.table printing</span>
<span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>
  datatable.print.nrows <span class="op">=</span> <span class="fl">10</span>,
  datatable.print.topn <span class="op">=</span> <span class="fl">5</span>,
  datatable.print.class <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span>

<span class="co"># load data tables from midfielddata</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">degree</span><span class="op">)</span></code></pre></div>
<p>We gathered the eligible students for the case study programs in the previous case study vignettes. The data are saved in the <code>study_student</code> data set that loads with midfieldr. View its help page by running</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">?</span> <span class="va">study_student</span></code></pre></div>
<p>Review the data. The data sufficiency criterion has been applied. As usual, we use assign our working data frame to <code>DT</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Create a new memory location to avoid updating by reference</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">study_student</span><span class="op">)</span>

<span class="co"># Examine the result</span>
<span class="va">DT</span>
<span class="co">#&gt;              mcid   institution   cip6    program          race    sex</span>
<span class="co">#&gt;            &lt;char&gt;        &lt;char&gt; &lt;char&gt;     &lt;char&gt;        &lt;char&gt; &lt;char&gt;</span>
<span class="co">#&gt;    1: MID25783197 Institution M 140801      Civil         White   Male</span>
<span class="co">#&gt;    2: MID25783441 Institution M 140801      Civil         White   Male</span>
<span class="co">#&gt;    3: MID25783553 Institution M 140801      Civil         White   Male</span>
<span class="co">#&gt;    4: MID25784209 Institution M 140801      Civil International   Male</span>
<span class="co">#&gt;    5: MID25784489 Institution M 140801      Civil         Asian Female</span>
<span class="co">#&gt;   ---                                                                 </span>
<span class="co">#&gt; 8215: MID26692926 Institution L 143501 Industrial         White   Male</span>
<span class="co">#&gt; 8216: MID26693368 Institution L 143501 Industrial         White   Male</span>
<span class="co">#&gt; 8217: MID26695626 Institution L 143501 Industrial         White   Male</span>
<span class="co">#&gt; 8218: MID26696116 Institution L 143501 Industrial         White Female</span>
<span class="co">#&gt; 8219: MID26696429 Institution L 143501 Industrial         White Female</span>
<span class="co">#&gt;       timely_term data_sufficiency</span>
<span class="co">#&gt;            &lt;char&gt;           &lt;lgcl&gt;</span>
<span class="co">#&gt;    1:       19923             TRUE</span>
<span class="co">#&gt;    2:       19973             TRUE</span>
<span class="co">#&gt;    3:       20073             TRUE</span>
<span class="co">#&gt;    4:       20003             TRUE</span>
<span class="co">#&gt;    5:       19943             TRUE</span>
<span class="co">#&gt;   ---                             </span>
<span class="co">#&gt; 8215:       20153             TRUE</span>
<span class="co">#&gt; 8216:       20143             TRUE</span>
<span class="co">#&gt; 8217:       20143             TRUE</span>
<span class="co">#&gt; 8218:       20153             TRUE</span>
<span class="co">#&gt; 8219:       20153             TRUE</span></code></pre></div>
<p>Before we can count the number of graduates, we have to assess whether graduates complete their program in a timely manner. A student graduating later than their timely-completion term are grouped with non-graduates for purposes of computing a persistence metric.</p>
<p>The <code><a href="../reference/add_completion_timely.html">add_completion_timely()</a></code> function requires that the input data frame has a <code>timely_term</code> column—which ours does. The function accesses the <code>degree</code> data to determine the term of a student’s first degree and reports whether the degree term (if any) satisfies the timely completion criterion.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_completion_timely.html">add_completion_timely</a></span><span class="op">(</span><span class="va">DT</span>, midfield_degree <span class="op">=</span> <span class="va">degree</span><span class="op">)</span>
<span class="va">DT</span>
<span class="co">#&gt;              mcid   institution   cip6    program            race    sex</span>
<span class="co">#&gt;            &lt;char&gt;        &lt;char&gt; &lt;char&gt;     &lt;char&gt;          &lt;char&gt; &lt;char&gt;</span>
<span class="co">#&gt;    1: MID25783178 Institution M 143501 Industrial           Black   Male</span>
<span class="co">#&gt;    2: MID25783197 Institution M 140801      Civil           White   Male</span>
<span class="co">#&gt;    3: MID25783388 Institution M 141901 Mechanical           White   Male</span>
<span class="co">#&gt;    4: MID25783441 Institution M 140801      Civil           White   Male</span>
<span class="co">#&gt;    5: MID25783491 Institution M 141001 Electrical           White   Male</span>
<span class="co">#&gt;   ---                                                                   </span>
<span class="co">#&gt; 8215: MID26696958 Institution L 141901 Mechanical           White   Male</span>
<span class="co">#&gt; 8216: MID26696967 Institution L 141901 Mechanical           White   Male</span>
<span class="co">#&gt; 8217: MID26697163 Institution L 141901 Mechanical Hispanic/Latinx   Male</span>
<span class="co">#&gt; 8218: MID26697444 Institution L 141901 Mechanical           White   Male</span>
<span class="co">#&gt; 8219: MID26697447 Institution L 141001 Electrical           Asian   Male</span>
<span class="co">#&gt;       timely_term data_sufficiency completion_timely</span>
<span class="co">#&gt;            &lt;char&gt;           &lt;lgcl&gt;            &lt;lgcl&gt;</span>
<span class="co">#&gt;    1:       20003             TRUE              TRUE</span>
<span class="co">#&gt;    2:       19923             TRUE              TRUE</span>
<span class="co">#&gt;    3:       19923             TRUE             FALSE</span>
<span class="co">#&gt;    4:       19973             TRUE              TRUE</span>
<span class="co">#&gt;    5:       20013             TRUE              TRUE</span>
<span class="co">#&gt;   ---                                               </span>
<span class="co">#&gt; 8215:       20163             TRUE             FALSE</span>
<span class="co">#&gt; 8216:       20153             TRUE              TRUE</span>
<span class="co">#&gt; 8217:       20143             TRUE              TRUE</span>
<span class="co">#&gt; 8218:       20153             TRUE              TRUE</span>
<span class="co">#&gt; 8219:       20163             TRUE              TRUE</span></code></pre></div>
</div>
<div id="summarize-by-group" class="section level2">
<h2 class="hasAnchor">
<a href="#summarize-by-group" class="anchor" aria-hidden="true"></a>Summarize by group</h2>
<p>We count the number of students ever enrolled and the number of graduates in separate steps, then join the results.</p>
<p>First we assign the grouping variables to be used for grouping, summarizing, and joining.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">grouping_variables</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"program"</span>, <span class="st">"race"</span>, <span class="st">"sex"</span><span class="op">)</span></code></pre></div>
<p>We count the enrollees and assign the result to the new <code>ever</code> column.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ever_enroll</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">DT</span><span class="op">)</span>
<span class="va">ever_enroll</span> <span class="op">&lt;-</span> <span class="va">ever_enroll</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span>ever <span class="op">=</span> <span class="va">.N</span><span class="op">)</span>, by <span class="op">=</span> <span class="va">grouping_variables</span><span class="op">]</span>
<span class="va">ever_enroll</span>
<span class="co">#&gt;        program            race    sex  ever</span>
<span class="co">#&gt;         &lt;char&gt;          &lt;char&gt; &lt;char&gt; &lt;int&gt;</span>
<span class="co">#&gt;  1: Industrial           Black   Male   106</span>
<span class="co">#&gt;  2:      Civil           White   Male  1147</span>
<span class="co">#&gt;  3: Mechanical           White   Male  1940</span>
<span class="co">#&gt;  4: Electrical           White   Male  1366</span>
<span class="co">#&gt;  5: Industrial           White   Male   494</span>
<span class="co">#&gt; ---                                        </span>
<span class="co">#&gt; 51: Industrial Native American   Male     1</span>
<span class="co">#&gt; 52: Industrial   Other/Unknown Female     3</span>
<span class="co">#&gt; 53:      Civil   International Female     1</span>
<span class="co">#&gt; 54: Mechanical Native American Female     5</span>
<span class="co">#&gt; 55: Industrial Native American Female     1</span></code></pre></div>
<p>Before counting graduates, we subset for those satisfying the timely-completion criterion.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">graduate</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">DT</span><span class="op">)</span>
<span class="va">graduate</span> <span class="op">&lt;-</span> <span class="va">graduate</span><span class="op">[</span><span class="va">completion_timely</span> <span class="op">==</span> <span class="cn">TRUE</span><span class="op">]</span>
<span class="va">graduate</span>
<span class="co">#&gt;              mcid   institution   cip6    program            race    sex</span>
<span class="co">#&gt;            &lt;char&gt;        &lt;char&gt; &lt;char&gt;     &lt;char&gt;          &lt;char&gt; &lt;char&gt;</span>
<span class="co">#&gt;    1: MID25783178 Institution M 143501 Industrial           Black   Male</span>
<span class="co">#&gt;    2: MID25783197 Institution M 140801      Civil           White   Male</span>
<span class="co">#&gt;    3: MID25783441 Institution M 140801      Civil           White   Male</span>
<span class="co">#&gt;    4: MID25783491 Institution M 141001 Electrical           White   Male</span>
<span class="co">#&gt;    5: MID25783912 Institution M 143501 Industrial           White   Male</span>
<span class="co">#&gt;   ---                                                                   </span>
<span class="co">#&gt; 5166: MID26696771 Institution L 141001 Electrical           White Female</span>
<span class="co">#&gt; 5167: MID26696967 Institution L 141901 Mechanical           White   Male</span>
<span class="co">#&gt; 5168: MID26697163 Institution L 141901 Mechanical Hispanic/Latinx   Male</span>
<span class="co">#&gt; 5169: MID26697444 Institution L 141901 Mechanical           White   Male</span>
<span class="co">#&gt; 5170: MID26697447 Institution L 141001 Electrical           Asian   Male</span>
<span class="co">#&gt;       timely_term data_sufficiency completion_timely</span>
<span class="co">#&gt;            &lt;char&gt;           &lt;lgcl&gt;            &lt;lgcl&gt;</span>
<span class="co">#&gt;    1:       20003             TRUE              TRUE</span>
<span class="co">#&gt;    2:       19923             TRUE              TRUE</span>
<span class="co">#&gt;    3:       19973             TRUE              TRUE</span>
<span class="co">#&gt;    4:       20013             TRUE              TRUE</span>
<span class="co">#&gt;    5:       20023             TRUE              TRUE</span>
<span class="co">#&gt;   ---                                               </span>
<span class="co">#&gt; 5166:       20143             TRUE              TRUE</span>
<span class="co">#&gt; 5167:       20153             TRUE              TRUE</span>
<span class="co">#&gt; 5168:       20143             TRUE              TRUE</span>
<span class="co">#&gt; 5169:       20153             TRUE              TRUE</span>
<span class="co">#&gt; 5170:       20163             TRUE              TRUE</span></code></pre></div>
<p>We count the graduates and assign the result to the new <code>grad</code> column.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">graduate</span> <span class="op">&lt;-</span> <span class="va">graduate</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span>grad <span class="op">=</span> <span class="va">.N</span><span class="op">)</span>,  by <span class="op">=</span> <span class="va">grouping_variables</span><span class="op">]</span>
<span class="va">graduate</span>
<span class="co">#&gt;        program            race    sex  grad</span>
<span class="co">#&gt;         &lt;char&gt;          &lt;char&gt; &lt;char&gt; &lt;int&gt;</span>
<span class="co">#&gt;  1: Industrial           Black   Male    57</span>
<span class="co">#&gt;  2:      Civil           White   Male   783</span>
<span class="co">#&gt;  3: Electrical           White   Male   870</span>
<span class="co">#&gt;  4: Industrial           White   Male   321</span>
<span class="co">#&gt;  5:      Civil           Asian Female    12</span>
<span class="co">#&gt; ---                                        </span>
<span class="co">#&gt; 47: Industrial   Other/Unknown Female     3</span>
<span class="co">#&gt; 48: Electrical Native American   Male     4</span>
<span class="co">#&gt; 49: Mechanical Native American Female     3</span>
<span class="co">#&gt; 50:      Civil Native American   Male     1</span>
<span class="co">#&gt; 51: Industrial Native American Female     1</span></code></pre></div>
<p>Now we join the two data frames, setting <code>all.x = TRUE</code> to retain all rows of both <code>ever_enroll</code>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">ever_enroll</span>,
            <span class="va">graduate</span>,
            by <span class="op">=</span> <span class="va">grouping_variables</span>,
            all.x <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">DT</span>
<span class="co">#&gt;        program            race    sex  ever  grad</span>
<span class="co">#&gt;         &lt;char&gt;          &lt;char&gt; &lt;char&gt; &lt;int&gt; &lt;int&gt;</span>
<span class="co">#&gt;  1:      Civil           Asian Female    17    12</span>
<span class="co">#&gt;  2:      Civil           Asian   Male    37    24</span>
<span class="co">#&gt;  3:      Civil           Black Female    54    28</span>
<span class="co">#&gt;  4:      Civil           Black   Male    98    43</span>
<span class="co">#&gt;  5:      Civil Hispanic/Latinx Female    10     5</span>
<span class="co">#&gt; ---                                              </span>
<span class="co">#&gt; 51: Mechanical Native American   Male    14     8</span>
<span class="co">#&gt; 52: Mechanical   Other/Unknown Female     8     7</span>
<span class="co">#&gt; 53: Mechanical   Other/Unknown   Male    48    28</span>
<span class="co">#&gt; 54: Mechanical           White Female   291   195</span>
<span class="co">#&gt; 55: Mechanical           White   Male  1940  1265</span></code></pre></div>
</div>
<div id="condition-the-results" class="section level2">
<h2 class="hasAnchor">
<a href="#condition-the-results" class="anchor" aria-hidden="true"></a>Condition the results</h2>
<p>If the <code>graduate</code> data had fewer rows than the <code>ever_enroll</code> data, the <code><a href="https://Rdatatable.gitlab.io/data.table/reference/merge.html" class="external-link">merge()</a></code> we did introduces some NA values in the <code>grad</code> column.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Any NA in grad?</span>
<span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">DT</span><span class="op">$</span><span class="va">grad</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] 4</span></code></pre></div>
<p>Those NA values are better encoded as zeros.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">grad</span><span class="op">)</span>, <span class="va">grad</span> <span class="op">:=</span> <span class="fl">0</span><span class="op">]</span><span class="op">[</span><span class="op">]</span>
<span class="va">DT</span>
<span class="co">#&gt;        program            race    sex  ever  grad</span>
<span class="co">#&gt;         &lt;char&gt;          &lt;char&gt; &lt;char&gt; &lt;int&gt; &lt;int&gt;</span>
<span class="co">#&gt;  1:      Civil           Asian Female    17    12</span>
<span class="co">#&gt;  2:      Civil           Asian   Male    37    24</span>
<span class="co">#&gt;  3:      Civil           Black Female    54    28</span>
<span class="co">#&gt;  4:      Civil           Black   Male    98    43</span>
<span class="co">#&gt;  5:      Civil Hispanic/Latinx Female    10     5</span>
<span class="co">#&gt; ---                                              </span>
<span class="co">#&gt; 51: Mechanical Native American   Male    14     8</span>
<span class="co">#&gt; 52: Mechanical   Other/Unknown Female     8     7</span>
<span class="co">#&gt; 53: Mechanical   Other/Unknown   Male    48    28</span>
<span class="co">#&gt; 54: Mechanical           White Female   291   195</span>
<span class="co">#&gt; 55: Mechanical           White   Male  1940  1265</span></code></pre></div>
<p>Before computing stickiness, we omit populations of 10 or less to protect their identity.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="va">ever</span> <span class="op">&gt;</span> <span class="fl">10</span><span class="op">]</span>
<span class="va">DT</span>
<span class="co">#&gt;        program            race    sex  ever  grad</span>
<span class="co">#&gt;         &lt;char&gt;          &lt;char&gt; &lt;char&gt; &lt;int&gt; &lt;int&gt;</span>
<span class="co">#&gt;  1:      Civil           Asian Female    17    12</span>
<span class="co">#&gt;  2:      Civil           Asian   Male    37    24</span>
<span class="co">#&gt;  3:      Civil           Black Female    54    28</span>
<span class="co">#&gt;  4:      Civil           Black   Male    98    43</span>
<span class="co">#&gt;  5:      Civil Hispanic/Latinx   Male    56    33</span>
<span class="co">#&gt; ---                                              </span>
<span class="co">#&gt; 34: Mechanical   International   Male    37    19</span>
<span class="co">#&gt; 35: Mechanical Native American   Male    14     8</span>
<span class="co">#&gt; 36: Mechanical   Other/Unknown   Male    48    28</span>
<span class="co">#&gt; 37: Mechanical           White Female   291   195</span>
<span class="co">#&gt; 38: Mechanical           White   Male  1940  1265</span></code></pre></div>
</div>
<div id="compute-stickiness" class="section level2">
<h2 class="hasAnchor">
<a href="#compute-stickiness" class="anchor" aria-hidden="true"></a>Compute stickiness</h2>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">DT</span><span class="op">[</span>, <span class="va">stick</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fl">100</span> <span class="op">*</span> <span class="va">grad</span> <span class="op">/</span> <span class="va">ever</span>, <span class="fl">1</span><span class="op">)</span><span class="op">]</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setorder.html" class="external-link">order</a></span><span class="op">(</span><span class="va">program</span>, <span class="va">sex</span>, <span class="va">race</span><span class="op">)</span><span class="op">]</span>
<span class="va">DT</span>
<span class="co">#&gt;        program            race    sex  ever  grad stick</span>
<span class="co">#&gt;         &lt;char&gt;          &lt;char&gt; &lt;char&gt; &lt;int&gt; &lt;int&gt; &lt;num&gt;</span>
<span class="co">#&gt;  1:      Civil           Asian Female    17    12  70.6</span>
<span class="co">#&gt;  2:      Civil           Black Female    54    28  51.9</span>
<span class="co">#&gt;  3:      Civil           White Female   329   232  70.5</span>
<span class="co">#&gt;  4:      Civil           Asian   Male    37    24  64.9</span>
<span class="co">#&gt;  5:      Civil           Black   Male    98    43  43.9</span>
<span class="co">#&gt; ---                                                    </span>
<span class="co">#&gt; 34: Mechanical Hispanic/Latinx   Male    76    47  61.8</span>
<span class="co">#&gt; 35: Mechanical   International   Male    37    19  51.4</span>
<span class="co">#&gt; 36: Mechanical Native American   Male    14     8  57.1</span>
<span class="co">#&gt; 37: Mechanical   Other/Unknown   Male    48    28  58.3</span>
<span class="co">#&gt; 38: Mechanical           White   Male  1940  1265  65.2</span>

<span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/all.equal.data.table.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">DT</span>, <span class="va">study_stickiness</span><span class="op">)</span>
<span class="co">#&gt; [1] TRUE</span></code></pre></div>
</div>
<div id="graph-the-results" class="section level2">
<h2 class="hasAnchor">
<a href="#graph-the-results" class="anchor" aria-hidden="true"></a>Graph the results</h2>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># data preparation</span>
<span class="va">mw</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="op">!</span><span class="va">race</span> <span class="op"><a href="https://Rdatatable.gitlab.io/data.table/reference/chmatch.html" class="external-link">%chin%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"International"</span>, <span class="st">"Other/Unknown"</span><span class="op">)</span><span class="op">]</span>
<span class="va">mw</span>
<span class="co">#&gt;        program            race    sex  ever  grad stick</span>
<span class="co">#&gt;         &lt;char&gt;          &lt;char&gt; &lt;char&gt; &lt;int&gt; &lt;int&gt; &lt;num&gt;</span>
<span class="co">#&gt;  1:      Civil           Asian Female    17    12  70.6</span>
<span class="co">#&gt;  2:      Civil           Black Female    54    28  51.9</span>
<span class="co">#&gt;  3:      Civil           White Female   329   232  70.5</span>
<span class="co">#&gt;  4:      Civil           Asian   Male    37    24  64.9</span>
<span class="co">#&gt;  5:      Civil           Black   Male    98    43  43.9</span>
<span class="co">#&gt; ---                                                    </span>
<span class="co">#&gt; 27: Mechanical           Asian   Male   122    77  63.1</span>
<span class="co">#&gt; 28: Mechanical           Black   Male   214   100  46.7</span>
<span class="co">#&gt; 29: Mechanical Hispanic/Latinx   Male    76    47  61.8</span>
<span class="co">#&gt; 30: Mechanical Native American   Male    14     8  57.1</span>
<span class="co">#&gt; 31: Mechanical           White   Male  1940  1265  65.2</span>

<span class="va">mw</span> <span class="op">&lt;-</span> <span class="va">mw</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">program</span>, race_sex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">race</span>, <span class="va">sex</span><span class="op">)</span>, <span class="va">stick</span><span class="op">)</span><span class="op">]</span>
<span class="va">mw</span>
<span class="co">#&gt;        program             race_sex stick</span>
<span class="co">#&gt;         &lt;char&gt;               &lt;char&gt; &lt;num&gt;</span>
<span class="co">#&gt;  1:      Civil         Asian Female  70.6</span>
<span class="co">#&gt;  2:      Civil         Black Female  51.9</span>
<span class="co">#&gt;  3:      Civil         White Female  70.5</span>
<span class="co">#&gt;  4:      Civil           Asian Male  64.9</span>
<span class="co">#&gt;  5:      Civil           Black Male  43.9</span>
<span class="co">#&gt; ---                                      </span>
<span class="co">#&gt; 27: Mechanical           Asian Male  63.1</span>
<span class="co">#&gt; 28: Mechanical           Black Male  46.7</span>
<span class="co">#&gt; 29: Mechanical Hispanic/Latinx Male  61.8</span>
<span class="co">#&gt; 30: Mechanical Native American Male  57.1</span>
<span class="co">#&gt; 31: Mechanical           White Male  65.2</span>

<span class="va">mw</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/condition_multiway.html">condition_multiway</a></span><span class="op">(</span><span class="va">mw</span>, details <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">mw</span>
<span class="co">#&gt;        program             race_sex med_program med_race_sex stick</span>
<span class="co">#&gt;         &lt;fctr&gt;               &lt;fctr&gt;       &lt;num&gt;        &lt;num&gt; &lt;num&gt;</span>
<span class="co">#&gt;  1:      Civil         Asian Female        64.9        70.85  70.6</span>
<span class="co">#&gt;  2:      Civil         Black Female        64.9        56.95  51.9</span>
<span class="co">#&gt;  3:      Civil         White Female        64.9        65.10  70.5</span>
<span class="co">#&gt;  4:      Civil           Asian Male        64.9        63.90  64.9</span>
<span class="co">#&gt;  5:      Civil           Black Male        64.9        45.90  43.9</span>
<span class="co">#&gt; ---                                                               </span>
<span class="co">#&gt; 27: Mechanical           Asian Male        63.1        63.90  63.1</span>
<span class="co">#&gt; 28: Mechanical           Black Male        63.1        45.90  46.7</span>
<span class="co">#&gt; 29: Mechanical Hispanic/Latinx Male        63.1        60.35  61.8</span>
<span class="co">#&gt; 30: Mechanical Native American Male        63.1        57.10  57.1</span>
<span class="co">#&gt; 31: Mechanical           White Male        63.1        65.10  65.2</span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># creating a multiway graph</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">mw</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">stick</span>, y <span class="op">=</span> <span class="va">race_sex</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">program</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">1</span>, as.table <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="va">med_program</span><span class="op">)</span>,
    linetype <span class="op">=</span> <span class="fl">2</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>
    x <span class="op">=</span> <span class="st">"Stickiness"</span>,
    y <span class="op">=</span> <span class="st">""</span>,
    title <span class="op">=</span> <span class="st">"Practice data (not for research)"</span>,
    caption <span class="op">=</span> <span class="st">"Source: midfielddata"</span>
  <span class="op">)</span></code></pre></div>
<p><img src="../man/figures/art-006-case-study-stickiness-fig1-1.png" width="70%" style="display: block; margin: auto;"></p>
</div>
<div id="references" class="section level2">
<h2 class="hasAnchor">
<a href="#references" class="anchor" aria-hidden="true"></a>References</h2>
<div id="refs" class="references csl-bib-body references csl-bib-body">
<div id="ref-Ohland+Orr+others:2012" class="csl-entry">
<div class="csl-left-margin">[1] </div>
<div class="csl-right-inline">M. Ohland, M. Orr, R. Layton, S. Lord, and R. Long, <span>“<span class="nocase">Introducing stickiness as a versatile metric of engineering persistence</span>,”</span> in <em><span class="nocase">Proceedings of the Frontiers in Education Conference</span></em>, 2012, pp. 1–5. </div>
</div>
</div>
</div>
<div id="appendix" class="section level2">
<h2 class="hasAnchor">
<a href="#appendix" class="anchor" aria-hidden="true"></a>Appendix</h2>
<div id="complete-script" class="section level3">
<h3 class="hasAnchor">
<a href="#complete-script" class="anchor" aria-hidden="true"></a>Complete script</h3>
<p>The vignette code chunks are collected below in a single, condensed script.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># packages used</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/MIDFIELDR/midfieldr" class="external-link">"midfieldr"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/MIDFIELDR/midfielddata" class="external-link">"midfielddata"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://r-datatable.com" class="external-link">"data.table"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://ggplot2.tidyverse.org" class="external-link">"ggplot2"</a></span><span class="op">)</span></code></pre></div>
</div>
</div>
  </div>
 <div class="col-md-3 d-none d-md-block" id="pkgdown-sidebar">
        <div class="sticky-top">
    <nav id="toc"><h2 data-toc-skip>Contents</h2>

    </nav>
</div>
      </div>

</div>



      <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://github.com/graphdr" class="external-link external-link">Richard Layton</a>, Russell Long, Matthew Ohland, US National Science Foundation.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link external-link">pkgdown</a> 1.6.1.9001.</p>
</div>

      </footer>
</div>

  

  

  </body>
</html>
