<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Computing graduation rate • midfieldr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Computing graduation rate">
<meta property="og:description" content="midfieldr">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">midfieldr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/workflow_example.html">Workflow example</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/exploring_cip.html">Exploring program CIP codes</a>
    </li>
    <li>
      <a href="../articles/selecting_programs.html">Selecting and labeling programs</a>
    </li>
    <li>
      <a href="../articles/grad_window.html">Applying the graduation window</a>
    </li>
    <li>
      <a href="../articles/stickiness.html">Computing stickiness</a>
    </li>
    <li>
      <a href="../articles/imputing_fye.html">Imputing FYE starting majors</a>
    </li>
    <li>
      <a href="../articles/grad_rate.html">Computing graduation rate</a>
    </li>
    <li>
      <a href="../articles/multiway.html">Multiway data, graphs, and tables</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Papers/Talks
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/pages/talks.html">Talks</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../articles/pages/about_midfield.html">About</a>
</li>
<li>
  <a href="https://github.com/MIDFIELDR/midfieldr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Computing graduation rate</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/MIDFIELDR/midfieldr/blob/master/vignettes/grad_rate.Rmd"><code>vignettes/grad_rate.Rmd</code></a></small>
      <div class="hidden name"><code>grad_rate.Rmd</code></div>

    </div>

    
    
<p>In this vignette, we demonstrate computing the “graduation rate” persistence metric using Civil, Electrical, Industrial, and Mechanical Engineering as our example programs.</p>
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>Despite its flaws, graduation rate is commonly used persistence metric.</p>
<p>In the US, the Integrated Postsecondary Education Data System (IPEDS) defines “graduation rate” as the fraction of <em>full-time, first-time,</em> degree/certificate-seeking undergraduate students in a particular year who <em>complete the program in which they matriculate</em> within 150 percent of normal time, i.e., <em>within 6 years</em> for a 4-year program <span class="citation">(“IPEDS Survey Components” <a href="#ref-ipeds2018" role="doc-biblioref">2018</a>)</span>.</p>
<p>The IPEDS definition excludes students who begin college part-time, who enroll mid-year, who transfer from one institution to another, and who change majors. The American Council on Education (ACE) estimates that this definition of graduation rate may exclude up to 60% of students at 4-year institutions <span class="citation">(Cook and Hartle <a href="#ref-ace2011" role="doc-biblioref">2011</a>)</span>.</p>
<p>So why use the metric? Do graduation rates really matter? Cook and Hartle say, yes they do …</p>
<blockquote>
<p>… because in the eyes of the public, policy makers, and the media, they provide a clear, simple, and logical—if often misleading—number.</p>
</blockquote>
<p>So with these caveats in mind, we provide the tools for determining program graduation rates per the IPEDS definition. The workflow is:</p>
<ul>
<li>choose the programs to study</li>
<li>impute starting programs for FYE students, if any<br>
</li>
<li>gather starters</li>
<li>gather graduates</li>
<li>apply the IPEDS exclusions</li>
<li>compute graduation rate</li>
<li>create a multiway graph</li>
</ul>
<p><br><a href="#top">▲ top of page</a></p>
</div>
<div id="choose-programs" class="section level2">
<h2 class="hasAnchor">
<a href="#choose-programs" class="anchor"></a>Choose programs</h2>
<p>Our case studies continue with Civil, Electrical, Industrial, and Mechanical Engineering.</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"midfieldr"</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"midfielddata"</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"dplyr"</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"stringr"</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"ggplot2"</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"seplyr"</span>)</pre></body></html></div>
<p>The <a href="selecting_programs.html">Selecting and labeling programs</a> vignette describes how to obtain the program codes and names for these programs. Their 6-digit CIP codes and names are in the midfieldr data set <code>case_program_group</code>.</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="co"># information saved from an earlier vignette</span>
<span class="no">program_group</span> <span class="kw">&lt;-</span> <span class="no">case_program_group</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>()
<span class="co">#&gt; # A tibble: 12 x 3</span>
<span class="co">#&gt;    cip6   cip6name                                            program           </span>
<span class="co">#&gt;    &lt;chr&gt;  &lt;chr&gt;                                               &lt;chr&gt;             </span>
<span class="co">#&gt;  1 140801 Civil Engineering, General                          Civil Engineering </span>
<span class="co">#&gt;  2 140802 Geotechnical Engineering                            Civil Engineering </span>
<span class="co">#&gt;  3 140803 Structural Engineering                              Civil Engineering </span>
<span class="co">#&gt;  4 140804 Transportation and Highway Engineering              Civil Engineering </span>
<span class="co">#&gt;  5 140805 Water Resources Engineering                         Civil Engineering </span>
<span class="co">#&gt;  6 140899 Civil Engineering, Other                            Civil Engineering </span>
<span class="co">#&gt;  7 141001 Electrical, Electronics and Communications Enginee~ Electrical Engine~</span>
<span class="co">#&gt;  8 141003 Laser and Optical Engineering                       Electrical Engine~</span>
<span class="co">#&gt;  9 141004 Telecommunications Engineering                      Electrical Engine~</span>
<span class="co">#&gt; 10 141099 Electrical, Electronics and Communications Enginee~ Electrical Engine~</span>
<span class="co">#&gt; 11 141901 Mechanical Engineering                              Mechanical Engine~</span>
<span class="co">#&gt; 12 143501 Industrial Engineering                              Industrial Engine~</span></pre></body></html></div>
<p>There are a total of 12 CIP codes for these programs. We have two columns from the <code>cip</code> dataset and the <code>program</code> column we added using <code><a href="../reference/cip6_select.html">cip6_select()</a></code>.</p>
<p><br><a href="#top">▲ top of page</a></p>
</div>
<div id="impute-starting-majors-for-fye-students" class="section level2">
<h2 class="hasAnchor">
<a href="#impute-starting-majors-for-fye-students" class="anchor"></a>Impute starting majors for FYE students</h2>
<p>Some US institutions have first year engineering (FYE) programs—typically a common first year curriculum that is a prerequisite for declaring an engineering major. Because students matriculating in FYE cannot graduate in FYE, they cannot be included in a graduation rate metric without special treatment.</p>
<p>Note that FYE students are neither undecided nor undeclared. Their institutions admitted them as engineering students. We define their “starting major” as the degree-granting engineering program—Civil, Electrical, Mechanical, etc.—that we predict they would have declared had they not been required to enroll in FYE.</p>
<p>The prediction process is described in the vignette <a href="imputing_fye.html">Imputing starting majors for FYE students</a>. The results are available in the midfieldr data set <code>case_fye</code>. The data frame has two columns: the student ID of all FYE students in the midfielddata, and the 6-digit CIP of their imputed starting engineering major.</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>(<span class="no">case_fye</span>)
<span class="co">#&gt; # A tibble: 5,992 x 2</span>
<span class="co">#&gt;   id          cip6  </span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt; </span>
<span class="co">#&gt; 1 MID25877315 140901</span>
<span class="co">#&gt; 2 MID25896490 141001</span>
<span class="co">#&gt; 3 MID25916711 141001</span>
<span class="co">#&gt; 4 MID25921297 140701</span>
<span class="co">#&gt; 5 MID25923624 140701</span>
<span class="co">#&gt; # ... with 5,987 more rows</span></pre></body></html></div>
<p><br><a href="#top">▲ top of page</a></p>
</div>
<div id="gather-starters" class="section level2">
<h2 class="hasAnchor">
<a href="#gather-starters" class="anchor"></a>Gather starters</h2>
<p>We extract the vector of 6-digit CIP codes for our programs.</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="co"># obtain the cip6 codes </span>
<span class="no">program_series</span> <span class="kw">&lt;-</span> <span class="no">program_group</span><span class="kw">[[</span><span class="st">"cip6"</span>]]</pre></body></html></div>
<p>We use <code><a href="../reference/starter_filter.html">starter_filter()</a></code> to extract students from <code>case_fye</code> data who start in one of the programs in <code>program_series</code>. The <code><a href="../reference/starter_filter.html">starter_filter()</a></code> function has two main arguments:</p>
<ul>
<li>
<code>data</code> data frame with ID and 6-digit CIP codes</li>
<li>
<code>codes</code> atomic character vector of 6-digit CIP codes</li>
</ul>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="co"># extract starters from FYE</span>
<span class="no">fye</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/starter_filter.html">starter_filter</a></span>(<span class="kw">data</span> <span class="kw">=</span> <span class="no">case_fye</span>, <span class="kw">codes</span> <span class="kw">=</span> <span class="no">program_series</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>()
<span class="co">#&gt; # A tibble: 3,843 x 2</span>
<span class="co">#&gt;   id          cip6  </span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt; </span>
<span class="co">#&gt; 1 MID25896490 141001</span>
<span class="co">#&gt; 2 MID25916711 141001</span>
<span class="co">#&gt; 3 MID25977012 141901</span>
<span class="co">#&gt; 4 MID25864996 141001</span>
<span class="co">#&gt; 5 MID25870152 141001</span>
<span class="co">#&gt; # ... with 3,838 more rows</span></pre></body></html></div>
<p>Thus we have nearly 3900 FYE students imputed to have matriculated in one of our case study programs.</p>
<p>We use <code><a href="../reference/starter_filter.html">starter_filter()</a></code> again on the <code>midfieldterms</code> data to obtain non-FYE starters in our programs. The <code>data</code> argument default value is <code>midfieldterms</code>, so the following two code chunks yield the same result.</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="co"># explicit value for the data argument </span>
<span class="no">non_fye</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/starter_filter.html">starter_filter</a></span>(<span class="kw">data</span> <span class="kw">=</span> <span class="no">midfieldterms</span>, <span class="kw">codes</span> <span class="kw">=</span> <span class="no">program_series</span>)

<span class="co"># implicit value for the data argument is midfieldterms</span>
<span class="no">non_fye</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/starter_filter.html">starter_filter</a></span>(<span class="kw">codes</span> <span class="kw">=</span> <span class="no">program_series</span>)

<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>(<span class="no">non_fye</span>)
<span class="co">#&gt; # A tibble: 5,026 x 2</span>
<span class="co">#&gt;   id          cip6  </span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt; </span>
<span class="co">#&gt; 1 MID25792087 141901</span>
<span class="co">#&gt; 2 MID25796088 140801</span>
<span class="co">#&gt; 3 MID25799551 141001</span>
<span class="co">#&gt; 4 MID25799578 141001</span>
<span class="co">#&gt; 5 MID25808049 140801</span>
<span class="co">#&gt; # ... with 5,021 more rows</span></pre></body></html></div>
<p><br><a href="#top">▲ top of page</a></p>
</div>
<div id="starter_filter" class="section level2">
<h2 class="hasAnchor">
<a href="#starter_filter" class="anchor"></a>starter_filter()</h2>
<p>We use <code><a href="../reference/starter_filter.html">starter_filter()</a></code> to collect all students starting in the programs we are studying.</p>
<p>The <code>codes</code> argument in this case is an atomic vector of the 6-digit CIP codes in our <code>program_group</code>. The function uses these codes to search <code>midfieldstudents</code>, the default data set. Use <code><a href="https://rdrr.io/r/base/print.html">print()</a></code> to check the result.</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="no">program_series</span> <span class="kw">&lt;-</span> <span class="no">program_group</span><span class="kw">[[</span><span class="st">"cip6"</span>]] <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>()
<span class="co">#&gt;  [1] "140801" "140802" "140803" "140804" "140805" "140899" "141001" "141003"</span>
<span class="co">#&gt;  [9] "141004" "141099" "141901" "143501"</span></pre></body></html></div>
<p>Extract all students from <code>midfieldstudents</code> starting in these programs.</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="no">students</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/starter_filter.html">starter_filter</a></span>(<span class="kw">codes</span> <span class="kw">=</span> <span class="no">program_series</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>()
<span class="co">#&gt; # A tibble: 5,026 x 2</span>
<span class="co">#&gt;   id          cip6  </span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt; </span>
<span class="co">#&gt; 1 MID25792087 141901</span>
<span class="co">#&gt; 2 MID25796088 140801</span>
<span class="co">#&gt; 3 MID25799551 141001</span>
<span class="co">#&gt; 4 MID25799578 141001</span>
<span class="co">#&gt; 5 MID25808049 140801</span>
<span class="co">#&gt; # ... with 5,021 more rows</span></pre></body></html></div>
<p>Open the help page by running</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r">? <span class="fu"><a href="../reference/starter_filter.html">starter_filter</a></span>()</pre></body></html></div>
<p>When studying engineering programs, we must account for the <a href="https://midfieldr.github.io/midfieldr/articles/imputing_fye.html">imputed starting majors</a> of students at institutions with a required first year engineering (FYE) program. For the data in this package, the imputed values are saved in the <code>case_fye</code> data set. Use <code><a href="../reference/starter_filter.html">starter_filter()</a></code> again with <code>case_fye</code> as the <code>data</code> argument.</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="no">fye</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/starter_filter.html">starter_filter</a></span>(<span class="kw">data</span> <span class="kw">=</span> <span class="no">case_fye</span>, <span class="kw">codes</span> <span class="kw">=</span> <span class="no">program_series</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>()
<span class="co">#&gt; # A tibble: 3,843 x 2</span>
<span class="co">#&gt;   id          cip6  </span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt; </span>
<span class="co">#&gt; 1 MID25896490 141001</span>
<span class="co">#&gt; 2 MID25916711 141001</span>
<span class="co">#&gt; 3 MID25977012 141901</span>
<span class="co">#&gt; 4 MID25864996 141001</span>
<span class="co">#&gt; 5 MID25870152 141001</span>
<span class="co">#&gt; # ... with 3,838 more rows</span></pre></body></html></div>
<p>Then bind the two data frames.</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="no">started</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span>(<span class="no">students</span>, <span class="no">fye</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>()
<span class="co">#&gt; # A tibble: 8,869 x 2</span>
<span class="co">#&gt;   id          cip6  </span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt; </span>
<span class="co">#&gt; 1 MID25792087 141901</span>
<span class="co">#&gt; 2 MID25796088 140801</span>
<span class="co">#&gt; 3 MID25799551 141001</span>
<span class="co">#&gt; 4 MID25799578 141001</span>
<span class="co">#&gt; 5 MID25808049 140801</span>
<span class="co">#&gt; # ... with 8,864 more rows</span></pre></body></html></div>
<p>Confirm that the CIPs are the ones we expect and that no student ID has been inadvertently duplicated.</p>
<div class="sourceCode" id="cb12"><html><body><pre class="r"><span class="co"># should be a subset of the program_group CIP we started with</span>
<span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span>(<span class="no">started</span><span class="kw">[[</span><span class="st">"cip6"</span>]]))
<span class="co">#&gt; [1] "140801" "141001" "141901" "143501"</span>

<span class="co"># should match the dimension of starters</span>
<span class="fu"><a href="https://rdrr.io/r/base/Logic.html">isTRUE</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(<span class="no">started</span>) <span class="kw">==</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span>(<span class="no">started</span><span class="kw">[[</span><span class="st">"id"</span>]])))
<span class="co">#&gt; [1] TRUE</span></pre></body></html></div>
<p><br><a href="#top">▲ top of page</a></p>
</div>
<div id="grad_filter" class="section level2">
<h2 class="hasAnchor">
<a href="#grad_filter" class="anchor"></a>grad_filter()</h2>
<p>Next we gather the graduates in our program group, but restrict ourselves to students who graduate in the same program in which they started.</p>
<p>We use <code><a href="../reference/grad_filter.html">grad_filter()</a></code> to search the <code>midfielddegrees</code> dataset using the programs listed in <code>program_series</code>.</p>
<div class="sourceCode" id="cb13"><html><body><pre class="r"><span class="co"># count students graduating from programs</span>
<span class="no">graduated</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/grad_filter.html">grad_filter</a></span>(<span class="kw">codes</span> <span class="kw">=</span> <span class="no">program_series</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>()
<span class="co">#&gt; # A tibble: 4,676 x 2</span>
<span class="co">#&gt;   id          cip6  </span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt; </span>
<span class="co">#&gt; 1 MID25783178 143501</span>
<span class="co">#&gt; 2 MID25783197 140801</span>
<span class="co">#&gt; 3 MID25783441 140801</span>
<span class="co">#&gt; 4 MID25783491 141001</span>
<span class="co">#&gt; 5 MID25783912 143501</span>
<span class="co">#&gt; # ... with 4,671 more rows</span></pre></body></html></div>
<p>Open the help page by running</p>
<div class="sourceCode" id="cb14"><html><body><pre class="r">? <span class="fu"><a href="../reference/grad_filter.html">grad_filter</a></span>()</pre></body></html></div>
<p><br><a href="#top">▲ top of page</a></p>
</div>
<div id="graduates-must-be-starters" class="section level2">
<h2 class="hasAnchor">
<a href="#graduates-must-be-starters" class="anchor"></a>Graduates must be starters</h2>
<p>Again, only students who graduate from the program in which they start are counted when computing graduation rate per the IPEDS definition. Thus we keep only those graduates who graduate in the program in which they started.</p>
<p>Before joining, we first change the <code>cip6</code> variable to <code>start</code> and <code>grad</code> in their respective data frames.</p>
<div class="sourceCode" id="cb15"><html><body><pre class="r"># started &lt;- rename(started, start = cip6)
# graduated &lt;- rename(graduated, grad = cip6)</pre></body></html></div>
<p>In the join, we keep all starters and we keep only those graduates whose ID is also in the starters.</p>
<div class="sourceCode" id="cb16"><html><body><pre class="r"><span class="no">start_series</span> <span class="kw">&lt;-</span> <span class="no">started</span><span class="kw">[[</span><span class="st">"id"</span>]] <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/reexports.html">glimpse</a></span>()
<span class="co">#&gt;  chr [1:8869] "MID25792087" "MID25796088" "MID25799551" "MID25799578" ...</span>

<span class="no">collapse_series</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c</a></span>(<span class="no">start_series</span>, <span class="kw">collapse</span> <span class="kw">=</span> <span class="st">"|"</span>)

<span class="no">graduated</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="no">graduated</span>, <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span>(<span class="no">id</span>, <span class="no">collapse_series</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>()
<span class="co">#&gt; # A tibble: 3,380 x 2</span>
<span class="co">#&gt;   id          cip6  </span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt; </span>
<span class="co">#&gt; 1 MID25783441 140801</span>
<span class="co">#&gt; 2 MID25783491 141001</span>
<span class="co">#&gt; 3 MID25783912 143501</span>
<span class="co">#&gt; 4 MID25784334 140801</span>
<span class="co">#&gt; 5 MID25784418 140801</span>
<span class="co">#&gt; # ... with 3,375 more rows</span></pre></body></html></div>
<p>Join race and sex to both data frames, and the program names.</p>
<div class="sourceCode" id="cb17"><html><body><pre class="r"><span class="co"># assign the variables for grouping</span>
<span class="no">grouping_variables</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"program"</span>, <span class="st">"race"</span>, <span class="st">"sex"</span>)

<span class="co"># count students</span>
<span class="no">started</span> <span class="kw">&lt;-</span> <span class="no">started</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/race_sex_join.html">race_sex_join</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span>(<span class="no">.</span>, <span class="no">program_group</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="st">"cip6"</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/seplyr/man/group_summarize.html">group_summarize</a></span>(<span class="no">.</span>, <span class="no">grouping_variables</span>, <span class="st">"start"</span> <span class="kw">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span>()) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>()
<span class="co">#&gt; # A tibble: 63 x 4</span>
<span class="co">#&gt;   program           race     sex    start</span>
<span class="co">#&gt;   &lt;chr&gt;             &lt;chr&gt;    &lt;chr&gt;  &lt;int&gt;</span>
<span class="co">#&gt; 1 Civil Engineering Asian    Female    15</span>
<span class="co">#&gt; 2 Civil Engineering Asian    Male      48</span>
<span class="co">#&gt; 3 Civil Engineering Black    Female    48</span>
<span class="co">#&gt; 4 Civil Engineering Black    Male     101</span>
<span class="co">#&gt; 5 Civil Engineering Hispanic Female    17</span>
<span class="co">#&gt; # ... with 58 more rows</span>

<span class="no">graduated</span> <span class="kw">&lt;-</span> <span class="no">graduated</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/race_sex_join.html">race_sex_join</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span>(<span class="no">.</span>, <span class="no">program_group</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="st">"cip6"</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/seplyr/man/group_summarize.html">group_summarize</a></span>(<span class="no">.</span>, <span class="no">grouping_variables</span>, <span class="st">"grad"</span> <span class="kw">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span>()) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>()
<span class="co">#&gt; # A tibble: 59 x 4</span>
<span class="co">#&gt;   program           race     sex     grad</span>
<span class="co">#&gt;   &lt;chr&gt;             &lt;chr&gt;    &lt;chr&gt;  &lt;int&gt;</span>
<span class="co">#&gt; 1 Civil Engineering Asian    Female     6</span>
<span class="co">#&gt; 2 Civil Engineering Asian    Male      18</span>
<span class="co">#&gt; 3 Civil Engineering Black    Female    18</span>
<span class="co">#&gt; 4 Civil Engineering Black    Male      33</span>
<span class="co">#&gt; 5 Civil Engineering Hispanic Female     3</span>
<span class="co">#&gt; # ... with 54 more rows</span></pre></body></html></div>
<p>And join the two data frames</p>
<div class="sourceCode" id="cb18"><html><body><pre class="r"><span class="co"># tally stickiness, by group</span>
<span class="no">grad_rate</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span>(<span class="no">started</span>, <span class="no">graduated</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="no">grouping_variables</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="no">start</span> <span class="kw">&gt;</span> <span class="fl">5</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="kw">rate</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(<span class="no">grad</span> / <span class="no">start</span>, <span class="fl">2</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>()
<span class="co">#&gt; # A tibble: 48 x 6</span>
<span class="co">#&gt;   program           race     sex    start  grad  rate</span>
<span class="co">#&gt;   &lt;chr&gt;             &lt;chr&gt;    &lt;chr&gt;  &lt;int&gt; &lt;int&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1 Civil Engineering Asian    Female    15     6  0.4 </span>
<span class="co">#&gt; 2 Civil Engineering Asian    Male      48    18  0.38</span>
<span class="co">#&gt; 3 Civil Engineering Black    Female    48    18  0.38</span>
<span class="co">#&gt; 4 Civil Engineering Black    Male     101    33  0.33</span>
<span class="co">#&gt; 5 Civil Engineering Hispanic Female    17     3  0.18</span>
<span class="co">#&gt; # ... with 43 more rows</span></pre></body></html></div>
<p><br><a href="#top">▲ top of page</a></p>
</div>
<div id="graph-the-multiway" class="section level2">
<h2 class="hasAnchor">
<a href="#graph-the-multiway" class="anchor"></a>Graph the multiway</h2>
<p>As we’ve done in other vignettes, we prepare the multiway data and use conventional ggplot2 functions to create the multiway graph.</p>
<div class="sourceCode" id="cb19"><html><body><pre class="r"><span class="co"># prepare data for graph</span>
<span class="no">grad_rate_mw</span> <span class="kw">&lt;-</span> <span class="no">grad_rate</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(!<span class="no">race</span> <span class="kw">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Unknown"</span>, <span class="st">"International"</span>, <span class="st">"Other"</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(!<span class="no">sex</span> <span class="kw">%in%</span> <span class="st">"Unknown"</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="kw">race_sex</span> <span class="kw">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html">str_c</a></span>(<span class="no">race</span>, <span class="no">sex</span>, <span class="kw">sep</span> <span class="kw">=</span> <span class="st">" "</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="no">program</span>, <span class="no">race_sex</span>, <span class="no">rate</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/multiway_order.html">multiway_order</a></span>()

<span class="co"># graph</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="no">grad_rate_mw</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">rate</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">race_sex</span>)) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span>(<span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html">vars</a></span>(<span class="no">program</span>), <span class="kw">ncol</span> <span class="kw">=</span> <span class="fl">1</span>, <span class="kw">as.table</span> <span class="kw">=</span> <span class="fl">FALSE</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>(<span class="kw">na.rm</span> <span class="kw">=</span> <span class="fl">TRUE</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="st">"Graduation rate (IPEDS definition)"</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="st">""</span>) +
  <span class="fu"><a href="../reference/utils_graph.html">theme_midfield</a></span>()</pre></body></html></div>
<p><img src="../man/figures/grad-rate-fig1-1.png" width="70%" style="display: block; margin: auto;"></p>
<p><br><a href="#top">▲ top of page</a></p>
</div>
<div id="references" class="section level2">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<div id="refs">
<div id="ref-ace2011">
<p>Cook, Bryan, and Terry W. Hartle. 2011. “Why Graduation Rates Matter—and Why They Don’t.” Edited by American Council on Education. <a href="http://www.acenet.edu/the-presidency/columns-and-features/Pages/Why-Graduation-Rates-Matter%E2%80%94and-Why-They-Don%E2%80%99t.aspx">http://www.acenet.edu/the-presidency/columns-and-features/Pages/Why-Graduation-Rates-Matter%E2%80%94and-Why-They-Don%E2%80%99t.aspx</a>.</p>
</div>
<div id="ref-ipeds2018">
<p>“IPEDS Survey Components.” 2018. National Center for Education Statistics (NCES); <a href="https://nces.ed.gov/ipeds/use-the-data/survey-components/outcome-measures">https://nces.ed.gov/ipeds/use-the-data/survey-components/outcome-measures</a>.</p>
</div>
</div>
</div>
<div id="issue-bin" class="section level2">
<h2 class="hasAnchor">
<a href="#issue-bin" class="anchor"></a>Issue bin</h2>
<p>TBD</p>
</div>
<div id="complete-script" class="section level2">
<h2 class="hasAnchor">
<a href="#complete-script" class="anchor"></a>Complete script</h2>
<p>TBD</p>
</div>
<div id="session-information" class="section level2">
<h2 class="hasAnchor">
<a href="#session-information" class="anchor"></a>Session information</h2>
<pre><code> setting  value                       
 version  R version 4.0.1 (2020-06-06)
 os       Windows 10 x64              
 system   x86_64, mingw32             
 ui       RTerm                       
 language (EN)                        
 collate  English_United States.1252  
 ctype    English_United States.1252  
 tz       America/New_York            
 date     2020-06-18                  

 package      * version    date       lib source        
 dplyr        * 1.0.0      2020-05-29 []  CRAN (R 4.0.0)
 ggplot2      * 3.3.1      2020-05-28 []  CRAN (R 4.0.0)
 midfielddata * 0.1.0      2020-06-06 []  local         
 midfieldr    * 1.0.0.9001 2020-06-18 []  local         
 seplyr       * 0.8.8      2020-05-24 []  CRAN (R 4.0.0)
 stringr      * 1.4.0      2019-02-10 []  CRAN (R 4.0.0)

* dependent packages not listed</code></pre>
<p><br><a href="#top">▲ top of page </a><br><a href="../index.html">◁ main page </a></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Richard Layton, Russell Long, Matthew Ohland, US National Science Foundation.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
