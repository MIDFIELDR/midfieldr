<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="midfieldr">
<title>Tabulating data • midfieldr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="../deps/bs3compat-0.2.5.1/tabs.js"></script><script src="../deps/bs3compat-0.2.5.1/bs3compat.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<link href="../syntax-highlighting.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Tabulating data">
<meta property="og:description" content="midfieldr">
<meta property="og:image" content="https://midfieldr.github.io/midfieldr/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc" data-headroom>
    

      <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a class="navbar-brand mb-0 h1" href="../index.html">midfieldr</a>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <button type="button" id="version-badge" class="badge badge-default d-none d-lg-block" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Released version">1.0.0.9020</button>

    <div id="navbar" class="collapse navbar-collapse">
      <ul class="navbar-nav mr-auto ml-3">
<li class="nav-item">
  <a class="nav-link" href="../articles/art-000-getting-started.html">Getting started</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-case-study">Case study</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-case-study">
    <a class="dropdown-item" href="../articles/art-002-case-study-programs.html">Programs</a>
    <a class="dropdown-item" href="../articles/art-004-case-study-students.html">Students</a>
    <a class="dropdown-item" href="../articles/art-006-case-study-stickiness.html">Stickiness</a>
    <a class="dropdown-item" href="../articles/art-008-case-study-grad-rate.html">Graduation rate</a>
  </div>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-vignettes">Vignettes</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-vignettes">
    <a class="dropdown-item" href="../articles/art-010-program-codes.html">Program codes and names</a>
    <a class="dropdown-item" href="../articles/art-015-subsetting-midfield-data.html">Subsetting MIDFIELD data</a>
    <a class="dropdown-item" href="../articles/art-020-data-sufficiency.html">Data sufficiency</a>
    <a class="dropdown-item" href="../articles/art-030-timely-completion.html">Timely completion</a>
    <a class="dropdown-item" href="../articles/art-040-fye-programs.html">FYE programs</a>
    <a class="dropdown-item" href="../articles/art-050-multiway-graphs.html">Multiway graphs</a>
    <a class="dropdown-item" href="../articles/art-060-tabulating-data.html">Tabulating data</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control mr-sm-2" aria-label="Search" name="search-input" data-search-index="/search.json" id="search-input" placeholder="Search..." autocomplete="off">
</form>

      <ul class="navbar-nav ml-1">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/MIDFIELDR/midfieldr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
  </div>
</nav><div class="container template-article">
<script src="art-060-tabulating-data_files/header-attrs-2.9/header-attrs.js"></script><script src="art-060-tabulating-data_files/kePrint-0.0.1/kePrint.js"></script><link href="art-060-tabulating-data_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <div class="col-md-9 contents">
    <img src="../package-logo.png" class="pkg-logo" alt=""><div class="page-header pb-2 mt-4 mb-2 border-bottom toc-ignore">
      <h1 class="display-4" data-toc-skip>Tabulating data</h1>
                        <h4 data-toc-skip class="author">Richard Layton</h4>
            
            <h4 data-toc-skip class="date">2021-07-17</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/MIDFIELDR/midfieldr/blob/master/vignettes/art-060-tabulating-data.Rmd" class="external-link"><code>vignettes/art-060-tabulating-data.Rmd</code></a></small>
      <div class="d-none name"><code>art-060-tabulating-data.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor" aria-hidden="true"></a>Introduction</h2>
<p>Data for analysis and graphing are often laid out in “block record” or “long” form with every key variable and response variable in their own columns <span class="citation"><a href="#ref-Mount+Zumel:2019:fluid-data" role="doc-biblioref">[1]</a></span>. We use this form regularly, for example, in preparing data for graphing using the ggplot2 package. However, the “row-record” or “wide” format is generally preferred for data tables in publications or for sharing with research collaborators.</p>
<p>To illustrate the difference, consider the following small subset of the <code>study_stickiness</code> data. The first two columns are keys that uniquely identify rows and the third column is a response or “payload” column containing data. Database designers call this a “denormalized” form; many R users would recognize it as the so-called “tidy” form <span class="citation"><a href="#ref-Wickham+Grolemund:2017" role="doc-biblioref">[2]</a></span>.</p>
<table class="table table" style="font-size: 11px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
Table 1. Block-record form
</caption>
<thead><tr>
<th style="text-align:left;">
race_sex
</th>
<th style="text-align:left;">
program
</th>
<th style="text-align:right;">
stick
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Asian Female
</td>
<td style="text-align:left;">
Civil
</td>
<td style="text-align:right;">
70.6
</td>
</tr>
<tr>
<td style="text-align:left;">
Asian Female
</td>
<td style="text-align:left;">
Electrical
</td>
<td style="text-align:right;">
71.1
</td>
</tr>
<tr>
<td style="text-align:left;">
Asian Female
</td>
<td style="text-align:left;">
Mechanical
</td>
<td style="text-align:right;">
82.6
</td>
</tr>
<tr>
<td style="text-align:left;">
Black Female
</td>
<td style="text-align:left;">
Civil
</td>
<td style="text-align:right;">
51.9
</td>
</tr>
<tr>
<td style="text-align:left;">
Black Female
</td>
<td style="text-align:left;">
Electrical
</td>
<td style="text-align:right;">
61.7
</td>
</tr>
<tr>
<td style="text-align:left;">
Black Female
</td>
<td style="text-align:left;">
Mechanical
</td>
<td style="text-align:right;">
55.4
</td>
</tr>
<tr>
<td style="text-align:left;">
White Female
</td>
<td style="text-align:left;">
Civil
</td>
<td style="text-align:right;">
70.5
</td>
</tr>
<tr>
<td style="text-align:left;">
White Female
</td>
<td style="text-align:left;">
Electrical
</td>
<td style="text-align:right;">
63.2
</td>
</tr>
<tr>
<td style="text-align:left;">
White Female
</td>
<td style="text-align:left;">
Mechanical
</td>
<td style="text-align:right;">
67.0
</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>The same data are shown in row-record form in the table below. The leftmost column is still a key; the new column names contain the values of the second key; and the cells at the row-column intersections contain the response. We have lost the labels for the second key (<code>program</code>) and the response (<code>stick</code>), though the table caption includes the “stickiness” label to identify the cell content.</p>
<table class="table table" style="font-size: 11px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
Table 2. Row-record form
</caption>
<thead><tr>
<th style="text-align:left;">
race_sex
</th>
<th style="text-align:right;">
Civil
</th>
<th style="text-align:right;">
Electrical
</th>
<th style="text-align:right;">
Mechanical
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Asian Female
</td>
<td style="text-align:right;">
70.6
</td>
<td style="text-align:right;">
71.1
</td>
<td style="text-align:right;">
82.6
</td>
</tr>
<tr>
<td style="text-align:left;">
Black Female
</td>
<td style="text-align:right;">
51.9
</td>
<td style="text-align:right;">
61.7
</td>
<td style="text-align:right;">
55.4
</td>
</tr>
<tr>
<td style="text-align:left;">
White Female
</td>
<td style="text-align:right;">
70.5
</td>
<td style="text-align:right;">
63.2
</td>
<td style="text-align:right;">
67.0
</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>Depending on your software background, you may have encountered a block-record/row-record transformation using any of these function pairs—a list adapted from <span class="citation"><a href="#ref-Mount+Zumel:2019:fluid-data" role="doc-biblioref">[1]</a></span>.</p>
<ul>
<li>pivot / anti-pivot or crosstab / shred (databases)</li>
<li>pivot_to_rowrecs / unpivot_to_blocks (cdata)</li>
<li>reshape “wide” / reshape “long” (R)</li>
<li>pivot_wider / pivot_longer (tidyr)</li>
<li>pivot / unpivot (Microsoft Excel)</li>
<li>dcast / melt (data.table)</li>
<li>cast / melt (reshape2)</li>
</ul>
<p>Because we work so often with multiway data (two keys, one response), the transformation between forms is easily accomplished using the data.table functions <code><a href="https://Rdatatable.gitlab.io/data.table/reference/dcast.data.table.html" class="external-link">dcast()</a></code> and <code><a href="https://Rdatatable.gitlab.io/data.table/reference/melt.data.table.html" class="external-link">melt()</a></code>. For more complicated transformations—with multiple response variables for example—we recommend the cdata package <span class="citation"><a href="#ref-Mount+Zumel:2020:cdata" role="doc-biblioref">[3]</a></span>.</p>
<div id="in-this-vignette" class="section level3">
<h3 class="hasAnchor">
<a href="#in-this-vignette" class="anchor" aria-hidden="true"></a>In this vignette</h3>
<p>Using the <code>study_student</code> and <code>study_stickiness</code> data sets included with midfieldr, we:</p>
<ul>
<li>Illustrate the block-record form using multiway data.</li>
<li>Transform multiway block records to row records.</li>
<li>Transform multiway row-records to block-records.</li>
<li>Create a two-way frequency table with row and column totals.</li>
</ul>
</div>
</div>
<div id="block-record-form" class="section level2">
<h2 class="hasAnchor">
<a href="#block-record-form" class="anchor" aria-hidden="true"></a>Block-record form</h2>
<p>If you are writing your own script to follow along, we start with these packages:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># packages used</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/MIDFIELDR/midfieldr" class="external-link">"midfieldr"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/sfirke/janitor" class="external-link">"janitor"</a></span><span class="op">)</span>

<span class="co"># optional code to control data.table printing</span>
<span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>
  datatable.print.nrows <span class="op">=</span> <span class="fl">10</span>,
  datatable.print.topn <span class="op">=</span> <span class="fl">5</span>,
  datatable.print.class <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span></code></pre></div>
<p>In this example, we use the case study longitudinal stickiness results from the case study. View the data help page by running</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">?</span> <span class="va">study_stickiness</span></code></pre></div>
<p>These data are currently laid out in block-record form, where the <code>race_sex</code> key and the <code>program</code> key are both in their own columns and the response, stickiness, is in its own column.</p>
<p>Before tabulating the data, we impose the same constraints we did in the case study by omitting: observations with fewer than 10 students ever enrolled; Native American students because of their small numbers in all but one program; and ambiguous values for race/ethnicity (International and Other/Unknown).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Copy to avoid update by reference</span>
<span class="va">block_form</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">study_stickiness</span><span class="op">)</span>

<span class="co"># Omit before presenting</span>
<span class="va">block_form</span> <span class="op">&lt;-</span> <span class="va">block_form</span><span class="op">[</span><span class="va">ever</span> <span class="op">&gt;=</span> <span class="fl">10</span><span class="op">]</span>
<span class="va">block_form</span> <span class="op">&lt;-</span> <span class="va">block_form</span><span class="op">[</span><span class="op">!</span><span class="va">race_sex</span> <span class="op"><a href="https://Rdatatable.gitlab.io/data.table/reference/like.html" class="external-link">%ilike%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"International|Other|Native"</span><span class="op">)</span><span class="op">]</span>

<span class="co"># Examine the result</span>
<span class="va">block_form</span>
<span class="co">#&gt;        program               race_sex  ever  grad stick</span>
<span class="co">#&gt;         &lt;char&gt;                 &lt;char&gt; &lt;int&gt; &lt;int&gt; &lt;num&gt;</span>
<span class="co">#&gt;  1:      Civil           Asian Female    17    12  70.6</span>
<span class="co">#&gt;  2:      Civil             Asian Male    37    24  64.9</span>
<span class="co">#&gt;  3:      Civil           Black Female    54    28  51.9</span>
<span class="co">#&gt;  4:      Civil             Black Male    98    43  43.9</span>
<span class="co">#&gt;  5:      Civil Hispanic/Latinx Female    10     5  50.0</span>
<span class="co">#&gt; ---                                                    </span>
<span class="co">#&gt; 27: Mechanical             Black Male   214   100  46.7</span>
<span class="co">#&gt; 28: Mechanical Hispanic/Latinx Female    11     8  72.7</span>
<span class="co">#&gt; 29: Mechanical   Hispanic/Latinx Male    76    47  61.8</span>
<span class="co">#&gt; 30: Mechanical           White Female   291   195  67.0</span>
<span class="co">#&gt; 31: Mechanical             White Male  1940  1265  65.2</span></code></pre></div>
<p>We limit the data table to the three multiway variables.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Three columns</span>
<span class="va">block_form</span> <span class="op">&lt;-</span> <span class="va">block_form</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">program</span>, <span class="va">race_sex</span>, <span class="va">stick</span><span class="op">)</span><span class="op">]</span>

<span class="co"># examine the result</span>
<span class="va">block_form</span>
<span class="co">#&gt;        program               race_sex stick</span>
<span class="co">#&gt;         &lt;char&gt;                 &lt;char&gt; &lt;num&gt;</span>
<span class="co">#&gt;  1:      Civil           Asian Female  70.6</span>
<span class="co">#&gt;  2:      Civil             Asian Male  64.9</span>
<span class="co">#&gt;  3:      Civil           Black Female  51.9</span>
<span class="co">#&gt;  4:      Civil             Black Male  43.9</span>
<span class="co">#&gt;  5:      Civil Hispanic/Latinx Female  50.0</span>
<span class="co">#&gt; ---                                        </span>
<span class="co">#&gt; 27: Mechanical             Black Male  46.7</span>
<span class="co">#&gt; 28: Mechanical Hispanic/Latinx Female  72.7</span>
<span class="co">#&gt; 29: Mechanical   Hispanic/Latinx Male  61.8</span>
<span class="co">#&gt; 30: Mechanical           White Female  67.0</span>
<span class="co">#&gt; 31: Mechanical             White Male  65.2</span></code></pre></div>
<p>Following is an HTML version of the data table in block-record form.</p>
<table class="table table" style="font-size: 11px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
Table 3. Stickiness in block-record form
</caption>
<thead><tr>
<th style="text-align:left;">
program
</th>
<th style="text-align:left;">
race_sex
</th>
<th style="text-align:right;">
stick
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Civil
</td>
<td style="text-align:left;">
Asian Female
</td>
<td style="text-align:right;">
70.6
</td>
</tr>
<tr>
<td style="text-align:left;">
Civil
</td>
<td style="text-align:left;">
Asian Male
</td>
<td style="text-align:right;">
64.9
</td>
</tr>
<tr>
<td style="text-align:left;">
Civil
</td>
<td style="text-align:left;">
Black Female
</td>
<td style="text-align:right;">
51.9
</td>
</tr>
<tr>
<td style="text-align:left;">
Civil
</td>
<td style="text-align:left;">
Black Male
</td>
<td style="text-align:right;">
43.9
</td>
</tr>
<tr>
<td style="text-align:left;">
Civil
</td>
<td style="text-align:left;">
Hispanic/Latinx Female
</td>
<td style="text-align:right;">
50.0
</td>
</tr>
<tr>
<td style="text-align:left;">
Civil
</td>
<td style="text-align:left;">
Hispanic/Latinx Male
</td>
<td style="text-align:right;">
58.9
</td>
</tr>
<tr>
<td style="text-align:left;">
Civil
</td>
<td style="text-align:left;">
White Female
</td>
<td style="text-align:right;">
70.5
</td>
</tr>
<tr>
<td style="text-align:left;">
Civil
</td>
<td style="text-align:left;">
White Male
</td>
<td style="text-align:right;">
68.3
</td>
</tr>
<tr>
<td style="text-align:left;">
Electrical
</td>
<td style="text-align:left;">
Asian Female
</td>
<td style="text-align:right;">
71.1
</td>
</tr>
<tr>
<td style="text-align:left;">
Electrical
</td>
<td style="text-align:left;">
Asian Male
</td>
<td style="text-align:right;">
64.5
</td>
</tr>
<tr>
<td style="text-align:left;">
Electrical
</td>
<td style="text-align:left;">
Black Female
</td>
<td style="text-align:right;">
61.7
</td>
</tr>
<tr>
<td style="text-align:left;">
Electrical
</td>
<td style="text-align:left;">
Black Male
</td>
<td style="text-align:right;">
45.1
</td>
</tr>
<tr>
<td style="text-align:left;">
Electrical
</td>
<td style="text-align:left;">
Hispanic/Latinx Female
</td>
<td style="text-align:right;">
71.4
</td>
</tr>
<tr>
<td style="text-align:left;">
Electrical
</td>
<td style="text-align:left;">
Hispanic/Latinx Male
</td>
<td style="text-align:right;">
55.2
</td>
</tr>
<tr>
<td style="text-align:left;">
Electrical
</td>
<td style="text-align:left;">
White Female
</td>
<td style="text-align:right;">
63.2
</td>
</tr>
<tr>
<td style="text-align:left;">
Electrical
</td>
<td style="text-align:left;">
White Male
</td>
<td style="text-align:right;">
63.7
</td>
</tr>
<tr>
<td style="text-align:left;">
Industrial
</td>
<td style="text-align:left;">
Asian Female
</td>
<td style="text-align:right;">
50.0
</td>
</tr>
<tr>
<td style="text-align:left;">
Industrial
</td>
<td style="text-align:left;">
Asian Male
</td>
<td style="text-align:right;">
63.3
</td>
</tr>
<tr>
<td style="text-align:left;">
Industrial
</td>
<td style="text-align:left;">
Black Female
</td>
<td style="text-align:right;">
58.5
</td>
</tr>
<tr>
<td style="text-align:left;">
Industrial
</td>
<td style="text-align:left;">
Black Male
</td>
<td style="text-align:right;">
53.8
</td>
</tr>
<tr>
<td style="text-align:left;">
Industrial
</td>
<td style="text-align:left;">
Hispanic/Latinx Male
</td>
<td style="text-align:right;">
88.0
</td>
</tr>
<tr>
<td style="text-align:left;">
Industrial
</td>
<td style="text-align:left;">
White Female
</td>
<td style="text-align:right;">
60.7
</td>
</tr>
<tr>
<td style="text-align:left;">
Industrial
</td>
<td style="text-align:left;">
White Male
</td>
<td style="text-align:right;">
65.0
</td>
</tr>
<tr>
<td style="text-align:left;">
Mechanical
</td>
<td style="text-align:left;">
Asian Female
</td>
<td style="text-align:right;">
82.6
</td>
</tr>
<tr>
<td style="text-align:left;">
Mechanical
</td>
<td style="text-align:left;">
Asian Male
</td>
<td style="text-align:right;">
63.1
</td>
</tr>
<tr>
<td style="text-align:left;">
Mechanical
</td>
<td style="text-align:left;">
Black Female
</td>
<td style="text-align:right;">
55.4
</td>
</tr>
<tr>
<td style="text-align:left;">
Mechanical
</td>
<td style="text-align:left;">
Black Male
</td>
<td style="text-align:right;">
46.7
</td>
</tr>
<tr>
<td style="text-align:left;">
Mechanical
</td>
<td style="text-align:left;">
Hispanic/Latinx Female
</td>
<td style="text-align:right;">
72.7
</td>
</tr>
<tr>
<td style="text-align:left;">
Mechanical
</td>
<td style="text-align:left;">
Hispanic/Latinx Male
</td>
<td style="text-align:right;">
61.8
</td>
</tr>
<tr>
<td style="text-align:left;">
Mechanical
</td>
<td style="text-align:left;">
White Female
</td>
<td style="text-align:right;">
67.0
</td>
</tr>
<tr>
<td style="text-align:left;">
Mechanical
</td>
<td style="text-align:left;">
White Male
</td>
<td style="text-align:right;">
65.2
</td>
</tr>
</tbody>
</table>
</div>
<div id="transform-block-records-to-row-records" class="section level2">
<h2 class="hasAnchor">
<a href="#transform-block-records-to-row-records" class="anchor" aria-hidden="true"></a>Transform block-records to row-records</h2>
<p>If in the row-record form we want rows and columns ordered alphabetically, we convert factors to characters.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create a new memory location</span>
<span class="va">row_form</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">block_form</span><span class="op">)</span>

<span class="co"># convert factors to characters</span>
<span class="va">row_form</span><span class="op">[</span>, <span class="va">race_sex</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">race_sex</span><span class="op">)</span><span class="op">]</span>
<span class="va">row_form</span><span class="op">[</span>, <span class="va">program</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">program</span><span class="op">)</span><span class="op">]</span></code></pre></div>
<p>Use <code><a href="https://Rdatatable.gitlab.io/data.table/reference/dcast.data.table.html" class="external-link">dcast()</a></code> to reshape the data frame from block-record form to row-record form.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># reshape</span>
<span class="va">row_form</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/dcast.data.table.html" class="external-link">dcast</a></span><span class="op">(</span><span class="va">row_form</span>, <span class="va">race_sex</span> <span class="op">~</span> <span class="va">program</span>, value.var <span class="op">=</span> <span class="st">"stick"</span><span class="op">)</span>

<span class="co"># examine the result</span>
<span class="va">row_form</span>
<span class="co">#&gt;                  race_sex Civil Electrical Industrial Mechanical</span>
<span class="co">#&gt;                    &lt;char&gt; &lt;num&gt;      &lt;num&gt;      &lt;num&gt;      &lt;num&gt;</span>
<span class="co">#&gt; 1:           Asian Female  70.6       71.1       50.0       82.6</span>
<span class="co">#&gt; 2:             Asian Male  64.9       64.5       63.3       63.1</span>
<span class="co">#&gt; 3:           Black Female  51.9       61.7       58.5       55.4</span>
<span class="co">#&gt; 4:             Black Male  43.9       45.1       53.8       46.7</span>
<span class="co">#&gt; 5: Hispanic/Latinx Female  50.0       71.4         NA       72.7</span>
<span class="co">#&gt; 6:   Hispanic/Latinx Male  58.9       55.2       88.0       61.8</span>
<span class="co">#&gt; 7:           White Female  70.5       63.2       60.7       67.0</span>
<span class="co">#&gt; 8:             White Male  68.3       63.7       65.0       65.2</span></code></pre></div>
<p>We can edit the column names for presentation,</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setattr.html" class="external-link">setnames</a></span><span class="op">(</span><span class="va">row_form</span>,
  old <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"race_sex"</span><span class="op">)</span>,
  new <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Race/Ethnicity/Sex"</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<p>Following is an HTML version of the data table in row-record form.</p>
<table class="table table" style="font-size: 11px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
Table 4. Stickiness in row-record form
</caption>
<thead><tr>
<th style="text-align:left;">
Race/Ethnicity/Sex
</th>
<th style="text-align:right;">
Civil
</th>
<th style="text-align:right;">
Electrical
</th>
<th style="text-align:right;">
Industrial
</th>
<th style="text-align:right;">
Mechanical
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Asian Female
</td>
<td style="text-align:right;">
70.6
</td>
<td style="text-align:right;">
71.1
</td>
<td style="text-align:right;">
50.0
</td>
<td style="text-align:right;">
82.6
</td>
</tr>
<tr>
<td style="text-align:left;">
Asian Male
</td>
<td style="text-align:right;">
64.9
</td>
<td style="text-align:right;">
64.5
</td>
<td style="text-align:right;">
63.3
</td>
<td style="text-align:right;">
63.1
</td>
</tr>
<tr>
<td style="text-align:left;">
Black Female
</td>
<td style="text-align:right;">
51.9
</td>
<td style="text-align:right;">
61.7
</td>
<td style="text-align:right;">
58.5
</td>
<td style="text-align:right;">
55.4
</td>
</tr>
<tr>
<td style="text-align:left;">
Black Male
</td>
<td style="text-align:right;">
43.9
</td>
<td style="text-align:right;">
45.1
</td>
<td style="text-align:right;">
53.8
</td>
<td style="text-align:right;">
46.7
</td>
</tr>
<tr>
<td style="text-align:left;">
Hispanic/Latinx Female
</td>
<td style="text-align:right;">
50.0
</td>
<td style="text-align:right;">
71.4
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
72.7
</td>
</tr>
<tr>
<td style="text-align:left;">
Hispanic/Latinx Male
</td>
<td style="text-align:right;">
58.9
</td>
<td style="text-align:right;">
55.2
</td>
<td style="text-align:right;">
88.0
</td>
<td style="text-align:right;">
61.8
</td>
</tr>
<tr>
<td style="text-align:left;">
White Female
</td>
<td style="text-align:right;">
70.5
</td>
<td style="text-align:right;">
63.2
</td>
<td style="text-align:right;">
60.7
</td>
<td style="text-align:right;">
67.0
</td>
</tr>
<tr>
<td style="text-align:left;">
White Male
</td>
<td style="text-align:right;">
68.3
</td>
<td style="text-align:right;">
63.7
</td>
<td style="text-align:right;">
65.0
</td>
<td style="text-align:right;">
65.2
</td>
</tr>
</tbody>
</table>
<div id="exercise" class="section level3">
<h3 class="hasAnchor">
<a href="#exercise" class="anchor" aria-hidden="true"></a>Exercise</h3>
<ol style="list-style-type: decimal">
<li>Create a table of <code>study_grad_rate</code> data similar to the table above.</li>
</ol>
</div>
</div>
<div id="transform-row-records-to-block-records" class="section level2">
<h2 class="hasAnchor">
<a href="#transform-row-records-to-block-records" class="anchor" aria-hidden="true"></a>Transform row-records to block-records</h2>
<p>As Mount and Zumel state, “For coordinatized data, different layouts of rows and columns are demonstrably equivalent.”—if the keys provide invariant “coordinates” to the data values, then one form is readily transformed to another.</p>
<p>In this example (again, a simple example with two coordinates and one response), we can use <code><a href="https://Rdatatable.gitlab.io/data.table/reference/melt.data.table.html" class="external-link">melt()</a></code> to transform row records to block records. Note that we can re-establish the key label <code>program</code> and the response label <code>stick</code>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/melt.data.table.html" class="external-link">melt</a></span><span class="op">(</span><span class="va">row_form</span>,
  id.vars <span class="op">=</span> <span class="st">"Race/Ethnicity/Sex"</span>,
  measure.vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Civil"</span>, <span class="st">"Electrical"</span>, <span class="st">"Industrial"</span>, <span class="st">"Mechanical"</span><span class="op">)</span>,
  variable.name <span class="op">=</span> <span class="st">"program"</span>,
  value.name <span class="op">=</span> <span class="st">"stick"</span>
<span class="op">)</span>
<span class="co">#&gt;         Race/Ethnicity/Sex    program stick</span>
<span class="co">#&gt;                     &lt;char&gt;     &lt;fctr&gt; &lt;num&gt;</span>
<span class="co">#&gt;  1:           Asian Female      Civil  70.6</span>
<span class="co">#&gt;  2:             Asian Male      Civil  64.9</span>
<span class="co">#&gt;  3:           Black Female      Civil  51.9</span>
<span class="co">#&gt;  4:             Black Male      Civil  43.9</span>
<span class="co">#&gt;  5: Hispanic/Latinx Female      Civil  50.0</span>
<span class="co">#&gt; ---                                        </span>
<span class="co">#&gt; 28:             Black Male Mechanical  46.7</span>
<span class="co">#&gt; 29: Hispanic/Latinx Female Mechanical  72.7</span>
<span class="co">#&gt; 30:   Hispanic/Latinx Male Mechanical  61.8</span>
<span class="co">#&gt; 31:           White Female Mechanical  67.0</span>
<span class="co">#&gt; 32:             White Male Mechanical  65.2</span></code></pre></div>
<p>Working with student unit record data, <code><a href="https://Rdatatable.gitlab.io/data.table/reference/melt.data.table.html" class="external-link">melt()</a></code> is particularly useful if a colleague provides you with data in row-record form and you need to transform it to block record for analysis or graphing. Again, for transformations with multiple response variables, we recommend the cdata package <span class="citation"><a href="#ref-Mount+Zumel:2020:cdata" role="doc-biblioref">[3]</a></span>.</p>
</div>
<div id="tables-with-totals" class="section level2">
<h2 class="hasAnchor">
<a href="#tables-with-totals" class="anchor" aria-hidden="true"></a>Tables with totals</h2>
<p>Another commonly-encountered table in student unit record research is a summary table of the numbers of students in different groups. For this example, we use the <code>study_student</code> data. View its help page by running</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">?</span> <span class="va">study_student</span></code></pre></div>
<p>If we focus on two categories, e.g., <code>program</code> and <code>race_sex</code>, the frequency of occurrences of the combinations of the levels of the two categories is a two-way frequency table.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Create a new memory location</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">study_student</span><span class="op">)</span>

<span class="co"># View the data</span>
<span class="va">DT</span>
<span class="co">#&gt;              mcid   institution   cip6    program          race    sex</span>
<span class="co">#&gt;            &lt;char&gt;        &lt;char&gt; &lt;char&gt;     &lt;char&gt;        &lt;char&gt; &lt;char&gt;</span>
<span class="co">#&gt;    1: MID25783197 Institution M 140801      Civil         White   Male</span>
<span class="co">#&gt;    2: MID25783441 Institution M 140801      Civil         White   Male</span>
<span class="co">#&gt;    3: MID25783553 Institution M 140801      Civil         White   Male</span>
<span class="co">#&gt;    4: MID25784209 Institution M 140801      Civil International   Male</span>
<span class="co">#&gt;    5: MID25784489 Institution M 140801      Civil         Asian Female</span>
<span class="co">#&gt;   ---                                                                 </span>
<span class="co">#&gt; 8215: MID26692926 Institution L 143501 Industrial         White   Male</span>
<span class="co">#&gt; 8216: MID26693368 Institution L 143501 Industrial         White   Male</span>
<span class="co">#&gt; 8217: MID26695626 Institution L 143501 Industrial         White   Male</span>
<span class="co">#&gt; 8218: MID26696116 Institution L 143501 Industrial         White Female</span>
<span class="co">#&gt; 8219: MID26696429 Institution L 143501 Industrial         White Female</span>
<span class="co">#&gt;       timely_term data_sufficiency</span>
<span class="co">#&gt;            &lt;char&gt;           &lt;lgcl&gt;</span>
<span class="co">#&gt;    1:       19923             TRUE</span>
<span class="co">#&gt;    2:       19973             TRUE</span>
<span class="co">#&gt;    3:       20073             TRUE</span>
<span class="co">#&gt;    4:       20003             TRUE</span>
<span class="co">#&gt;    5:       19943             TRUE</span>
<span class="co">#&gt;   ---                             </span>
<span class="co">#&gt; 8215:       20153             TRUE</span>
<span class="co">#&gt; 8216:       20143             TRUE</span>
<span class="co">#&gt; 8217:       20143             TRUE</span>
<span class="co">#&gt; 8218:       20153             TRUE</span>
<span class="co">#&gt; 8219:       20153             TRUE</span></code></pre></div>
<p>We join the race/ethnicity and sex variables to construct our usual categories,</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Merge the groups as usual</span>
<span class="va">DT</span><span class="op">[</span>, <span class="va">race_sex</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">race</span>, <span class="va">sex</span><span class="op">)</span><span class="op">]</span>

<span class="co"># Subset the same populations as above</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="op">!</span><span class="va">race_sex</span> <span class="op"><a href="https://Rdatatable.gitlab.io/data.table/reference/like.html" class="external-link">%ilike%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"International|Other|Native"</span><span class="op">)</span><span class="op">]</span></code></pre></div>
<p>Counting by the two grouping variables yields the frequency of the combinations of levels and omits the other columns.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span>, <span class="va">.N</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"program"</span>, <span class="st">"race_sex"</span><span class="op">)</span><span class="op">]</span>

<span class="co"># omit small populations</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="va">N</span> <span class="op">&gt;=</span> <span class="fl">10</span><span class="op">]</span>

<span class="co"># Examine the result</span>
<span class="va">DT</span>
<span class="co">#&gt;        program             race_sex     N</span>
<span class="co">#&gt;         &lt;char&gt;               &lt;char&gt; &lt;int&gt;</span>
<span class="co">#&gt;  1:      Civil           White Male  1147</span>
<span class="co">#&gt;  2:      Civil         Asian Female    17</span>
<span class="co">#&gt;  3:      Civil         White Female   329</span>
<span class="co">#&gt;  4:      Civil           Black Male    98</span>
<span class="co">#&gt;  5:      Civil         Black Female    54</span>
<span class="co">#&gt; ---                                      </span>
<span class="co">#&gt; 27: Industrial         White Female   234</span>
<span class="co">#&gt; 28: Industrial         Black Female    94</span>
<span class="co">#&gt; 29: Industrial           Asian Male    60</span>
<span class="co">#&gt; 30: Industrial Hispanic/Latinx Male    25</span>
<span class="co">#&gt; 31: Industrial         Asian Female    40</span></code></pre></div>
<p>Reshaping from block-record to row-record form creates the two-way frequency table.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/dcast.data.table.html" class="external-link">dcast</a></span><span class="op">(</span><span class="va">DT</span>, <span class="va">race_sex</span> <span class="op">~</span> <span class="va">program</span>, value.var <span class="op">=</span> <span class="st">"N"</span><span class="op">)</span>

<span class="co"># Examine the result</span>
<span class="va">DT</span>
<span class="co">#&gt;                  race_sex Civil Electrical Industrial Mechanical</span>
<span class="co">#&gt;                    &lt;char&gt; &lt;int&gt;      &lt;int&gt;      &lt;int&gt;      &lt;int&gt;</span>
<span class="co">#&gt; 1:           Asian Female    17         38         40         23</span>
<span class="co">#&gt; 2:             Asian Male    37        197         60        122</span>
<span class="co">#&gt; 3:           Black Female    54        154         94         83</span>
<span class="co">#&gt; 4:             Black Male    98        304        106        214</span>
<span class="co">#&gt; 5: Hispanic/Latinx Female    10         14         NA         11</span>
<span class="co">#&gt; 6:   Hispanic/Latinx Male    56         67         25         76</span>
<span class="co">#&gt; 7:           White Female   329        193        234        291</span>
<span class="co">#&gt; 8:             White Male  1147       1366        494       1940</span></code></pre></div>
<p>With data of this sort, readers often wish to see row and column totals. The janitor package has the <code><a href="https://rdrr.io/pkg/janitor/man/adorn_totals.html" class="external-link">adorn_totals()</a></code> function to do just that. You can sum rows, columns, or both.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/janitor/man/adorn_totals.html" class="external-link">adorn_totals</a></span><span class="op">(</span><span class="va">DT</span>, where <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"row"</span>, <span class="st">"col"</span><span class="op">)</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="va">DT</span>
<span class="co">#&gt;                race_sex Civil Electrical Industrial Mechanical Total</span>
<span class="co">#&gt;            Asian Female    17         38         40         23   118</span>
<span class="co">#&gt;              Asian Male    37        197         60        122   416</span>
<span class="co">#&gt;            Black Female    54        154         94         83   385</span>
<span class="co">#&gt;              Black Male    98        304        106        214   722</span>
<span class="co">#&gt;  Hispanic/Latinx Female    10         14         NA         11    35</span>
<span class="co">#&gt;    Hispanic/Latinx Male    56         67         25         76   224</span>
<span class="co">#&gt;            White Female   329        193        234        291  1047</span>
<span class="co">#&gt;              White Male  1147       1366        494       1940  4947</span>
<span class="co">#&gt;                   Total  1748       2333       1053       2760  7894</span></code></pre></div>
<p>Following is an HTML version of these data.</p>
<table class="table table" style="font-size: 11px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
Table 5. Two-way frequency table with totals
</caption>
<thead><tr>
<th style="text-align:left;">
Race/Ethnicity/Sex
</th>
<th style="text-align:right;">
Civil
</th>
<th style="text-align:right;">
Electrical
</th>
<th style="text-align:right;">
Industrial
</th>
<th style="text-align:right;">
Mechanical
</th>
<th style="text-align:right;">
Total
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Asian Female
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
38
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
118
</td>
</tr>
<tr>
<td style="text-align:left;">
Asian Male
</td>
<td style="text-align:right;">
37
</td>
<td style="text-align:right;">
197
</td>
<td style="text-align:right;">
60
</td>
<td style="text-align:right;">
122
</td>
<td style="text-align:right;">
416
</td>
</tr>
<tr>
<td style="text-align:left;">
Black Female
</td>
<td style="text-align:right;">
54
</td>
<td style="text-align:right;">
154
</td>
<td style="text-align:right;">
94
</td>
<td style="text-align:right;">
83
</td>
<td style="text-align:right;">
385
</td>
</tr>
<tr>
<td style="text-align:left;">
Black Male
</td>
<td style="text-align:right;">
98
</td>
<td style="text-align:right;">
304
</td>
<td style="text-align:right;">
106
</td>
<td style="text-align:right;">
214
</td>
<td style="text-align:right;">
722
</td>
</tr>
<tr>
<td style="text-align:left;">
Hispanic/Latinx Female
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
35
</td>
</tr>
<tr>
<td style="text-align:left;">
Hispanic/Latinx Male
</td>
<td style="text-align:right;">
56
</td>
<td style="text-align:right;">
67
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
76
</td>
<td style="text-align:right;">
224
</td>
</tr>
<tr>
<td style="text-align:left;">
White Female
</td>
<td style="text-align:right;">
329
</td>
<td style="text-align:right;">
193
</td>
<td style="text-align:right;">
234
</td>
<td style="text-align:right;">
291
</td>
<td style="text-align:right;">
1047
</td>
</tr>
<tr>
<td style="text-align:left;">
White Male
</td>
<td style="text-align:right;">
1147
</td>
<td style="text-align:right;">
1366
</td>
<td style="text-align:right;">
494
</td>
<td style="text-align:right;">
1940
</td>
<td style="text-align:right;">
4947
</td>
</tr>
<tr>
<td style="text-align:left;">
Total
</td>
<td style="text-align:right;">
1748
</td>
<td style="text-align:right;">
2333
</td>
<td style="text-align:right;">
1053
</td>
<td style="text-align:right;">
2760
</td>
<td style="text-align:right;">
7894
</td>
</tr>
</tbody>
</table>
</div>
<div id="references" class="section level2">
<h2 class="hasAnchor">
<a href="#references" class="anchor" aria-hidden="true"></a>References</h2>
<div id="refs" class="references csl-bib-body references csl-bib-body">
<div id="ref-Mount+Zumel:2019:fluid-data" class="csl-entry">
<div class="csl-left-margin">[1] </div>
<div class="csl-right-inline">J. Mount and N. Zumel, <span>“<span class="nocase">Coordinatized data: A fluid data specification</span>.”</span> <span>Win Vector LLC</span>, 2019 [Online]. Available: <a href="http://winvector.github.io/FluidData/RowsAndColumns.html" class="external-link">http://winvector.github.io/FluidData/RowsAndColumns.html</a>
</div>
</div>
<div id="ref-Wickham+Grolemund:2017" class="csl-entry">
<div class="csl-left-margin">[2] </div>
<div class="csl-right-inline">H. Wickham and G. Grolemund, <em><span class="nocase">R for Data Science</span></em>. Sebastopol, CA: <span>O’Reilly Media, Inc.</span>, 2017 [Online]. Available: <a href="https://r4ds.had.co.nz/" class="external-link">https://r4ds.had.co.nz/</a>
</div>
</div>
<div id="ref-Mount+Zumel:2020:cdata" class="csl-entry">
<div class="csl-left-margin">[3] </div>
<div class="csl-right-inline">J. Mount and N. Zumel, <em><span class="nocase">cdata: Fluid Data Transformations</span></em>. R package version 1.1.6, 2020 [Online]. Available: <a href="https://CRAN.R-project.org/package=cdata" class="external-link">https://CRAN.R-project.org/package=cdata</a>
</div>
</div>
</div>
</div>
<div id="appendix" class="section level2">
<h2 class="hasAnchor">
<a href="#appendix" class="anchor" aria-hidden="true"></a>Appendix</h2>
<div id="complete-script" class="section level3">
<h3 class="hasAnchor">
<a href="#complete-script" class="anchor" aria-hidden="true"></a>Complete script</h3>
<p>The vignette code chunks are collected below in a single, condensed script.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># packages used</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/MIDFIELDR/midfieldr" class="external-link">"midfieldr"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/sfirke/janitor" class="external-link">"janitor"</a></span><span class="op">)</span>

<span class="co"># optional code to control data.table printing</span>
<span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>
  datatable.print.nrows <span class="op">=</span> <span class="fl">10</span>,
  datatable.print.topn <span class="op">=</span> <span class="fl">5</span>,
  datatable.print.class <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span>

<span class="co"># Block-record form</span>
<span class="va">block_form</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">study_stickiness</span><span class="op">)</span>
<span class="va">block_form</span> <span class="op">&lt;-</span> <span class="va">block_form</span><span class="op">[</span><span class="va">ever</span> <span class="op">&gt;=</span> <span class="fl">10</span><span class="op">]</span>
<span class="va">block_form</span> <span class="op">&lt;-</span> <span class="va">block_form</span><span class="op">[</span><span class="op">!</span><span class="va">race_sex</span> <span class="op"><a href="https://Rdatatable.gitlab.io/data.table/reference/like.html" class="external-link">%ilike%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"International|Other|Native"</span><span class="op">)</span><span class="op">]</span>
<span class="va">block_form</span> <span class="op">&lt;-</span> <span class="va">block_form</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">program</span>, <span class="va">race_sex</span>, <span class="va">stick</span><span class="op">)</span><span class="op">]</span>

<span class="co"># Transform block-records to row-records</span>
<span class="va">row_form</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">block_form</span><span class="op">)</span>
<span class="va">row_form</span><span class="op">[</span>, <span class="va">race_sex</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">race_sex</span><span class="op">)</span><span class="op">]</span>
<span class="va">row_form</span><span class="op">[</span>, <span class="va">program</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">program</span><span class="op">)</span><span class="op">]</span>
<span class="va">row_form</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/dcast.data.table.html" class="external-link">dcast</a></span><span class="op">(</span><span class="va">row_form</span>, <span class="va">race_sex</span> <span class="op">~</span> <span class="va">program</span>, value.var <span class="op">=</span> <span class="st">"stick"</span><span class="op">)</span>
<span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setattr.html" class="external-link">setnames</a></span><span class="op">(</span><span class="va">row_form</span>,
  old <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"race_sex"</span><span class="op">)</span>,
  new <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Race/Ethnicity/Sex"</span><span class="op">)</span>
<span class="op">)</span>

<span class="co"># Transform row-records to block-records</span>
<span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/melt.data.table.html" class="external-link">melt</a></span><span class="op">(</span><span class="va">row_form</span>,
  id.vars <span class="op">=</span> <span class="st">"Race/Ethnicity/Sex"</span>,
  measure.vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Civil"</span>, <span class="st">"Electrical"</span>, <span class="st">"Industrial"</span>, <span class="st">"Mechanical"</span><span class="op">)</span>,
  variable.name <span class="op">=</span> <span class="st">"program"</span>,
  value.name <span class="op">=</span> <span class="st">"stick"</span>
<span class="op">)</span>

<span class="co"># Tables with totals</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">study_student</span><span class="op">)</span>
<span class="va">DT</span><span class="op">[</span>, <span class="va">race_sex</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">race</span>, <span class="va">sex</span><span class="op">)</span><span class="op">]</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="op">!</span><span class="va">race_sex</span> <span class="op"><a href="https://Rdatatable.gitlab.io/data.table/reference/like.html" class="external-link">%ilike%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"International|Other|Native"</span><span class="op">)</span><span class="op">]</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span>, <span class="va">.N</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"program"</span>, <span class="st">"race_sex"</span><span class="op">)</span><span class="op">]</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="va">N</span> <span class="op">&gt;=</span> <span class="fl">10</span><span class="op">]</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/dcast.data.table.html" class="external-link">dcast</a></span><span class="op">(</span><span class="va">DT</span>, <span class="va">race_sex</span> <span class="op">~</span> <span class="va">program</span>, value.var <span class="op">=</span> <span class="st">"N"</span><span class="op">)</span>
<span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/janitor/man/adorn_totals.html" class="external-link">adorn_totals</a></span><span class="op">(</span><span class="va">DT</span>, where <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"row"</span>, <span class="st">"col"</span><span class="op">)</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<style type="text/css">
blockquote {
    padding: 10px 20px;
    margin: 0 0 20px;
    font-size: 12px;
    border-left: 0px solid
}
</style>
</div>
</div>
  </div>
 <div class="col-md-3 d-none d-md-block" id="pkgdown-sidebar">
        <div class="sticky-top">
    <nav id="toc"><h2 data-toc-skip>Contents</h2>

    </nav>
</div>
      </div>

</div>



      <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://github.com/graphdr" class="external-link external-link">Richard Layton</a>, Russell Long, Matthew Ohland, US National Science Foundation.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link external-link">pkgdown</a> 1.6.1.9001.</p>
</div>

      </footer>
</div>

  

  

  </body>
</html>
