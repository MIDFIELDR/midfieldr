<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Explore multiway data • midfieldr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Explore multiway data">
<meta property="og:description" content="midfieldr">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">midfieldr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/using_midfieldr.html">Using midfieldr</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/explore_cip.html">Explore program CIP codes</a>
    </li>
    <li>
      <a href="../articles/get_programs.html">Gather programs</a>
    </li>
    <li>
      <a href="../articles/feasible_completion.html">Filter for program completion feasibility</a>
    </li>
    <li>
      <a href="../articles/explore_multiway.html">Explore multiway data</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Papers/Talks
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/pages/talks.html">Talks</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/pages/get_session.html">Session info</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../articles/pages/about_midfield.html">About</a>
</li>
<li>
  <a href="https://github.com/MIDFIELDR/midfieldr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="explore_multiway_files/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="explore_multiway_files/kePrint-0.0.1/kePrint.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Explore multiway data</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/MIDFIELDR/midfieldr/blob/master/vignettes/explore_multiway.Rmd"><code>vignettes/explore_multiway.Rmd</code></a></small>
      <div class="hidden name"><code>explore_multiway.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>Many persistence metrics can be organized as <em>multiway data</em> in which there is is one quantitative variable and two categorical variables. To quote Bill Cleveland <span class="citation">(<a href="#ref-cleveland1993" role="doc-biblioref">1993</a>)</span>,</p>
<blockquote>
<p>… the quantitative variable is a response, and the goal is to study how it depends on the categorical variables, which are factors. What distinguishes multiway data is the cross-classification of the categorical variables; there is a value of the response for each combination of levels of the two categorical variables.</p>
</blockquote>
</div>
<div id="preparing-the-multiway-data" class="section level2">
<h2 class="hasAnchor">
<a href="#preparing-the-multiway-data" class="anchor"></a>Preparing the multiway data</h2>
<p>We’ll use the “stickiness” metric to illustrate multiway graphs and data tables. Stickiness is the ratio of the number of students graduating in a program to the number of students ever enrolled in that program <span class="citation">(Ohland et al. <a href="#ref-stickiness2012" role="doc-biblioref">2012</a>)</span>.</p>
<p><code>exa_stickiness</code> is a sample dataset included with midfieldr.</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="co"># packages</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">midfieldr</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">ggplot2</span>)

<span class="co"># load stickiness data from case study</span>
<span class="no">pre_mw</span> <span class="kw">&lt;-</span> <span class="no">exa_stickiness</span>

<span class="co"># examine the result</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(<span class="no">pre_mw</span>)
<span class="co">#&gt; 'data.frame':    63 obs. of  6 variables:</span>
<span class="co">#&gt;  $ race   : chr  "Asian" "Asian" "Asian" "Asian" ...</span>
<span class="co">#&gt;  $ sex    : chr  "Female" "Female" "Female" "Female" ...</span>
<span class="co">#&gt;  $ program: chr  "Civil Engineering" "Electrical Engineering" "Industrial Engineering" "Mechanical Engineering" ...</span>
<span class="co">#&gt;  $ ever   : int  18 42 39 24 42 204 67 126 55 156 ...</span>
<span class="co">#&gt;  $ grad   : num  11 22 22 15 24 120 47 82 21 72 ...</span>
<span class="co">#&gt;  $ stick  : num  0.611 0.524 0.564 0.625 0.571 0.588 0.701 0.651 0.382 0.462 ...</span></pre></body></html></div>
<p>To protect confidentiality and prevent identification of individuals or institutions with small sub-populations, we typically omit rows with a small population. Using the larger MIDFIELD database, we usually set this limit to 10. Here, using the midfielddata sample, we’ll use 5.</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="co"># prepare rows</span>
<span class="no">rows_we_want</span> <span class="kw">&lt;-</span> <span class="no">pre_mw</span>$<span class="no">ever</span> <span class="kw">&gt;=</span> <span class="fl">5</span>
<span class="no">pre_mw</span> <span class="kw">&lt;-</span> <span class="no">pre_mw</span>[<span class="no">rows_we_want</span>, , <span class="kw">drop</span> <span class="kw">=</span> <span class="fl">FALSE</span>]

<span class="co"># examine the result</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(<span class="no">pre_mw</span>)
<span class="co">#&gt; 'data.frame':    51 obs. of  6 variables:</span>
<span class="co">#&gt;  $ race   : chr  "Asian" "Asian" "Asian" "Asian" ...</span>
<span class="co">#&gt;  $ sex    : chr  "Female" "Female" "Female" "Female" ...</span>
<span class="co">#&gt;  $ program: chr  "Civil Engineering" "Electrical Engineering" "Industrial Engineering" "Mechanical Engineering" ...</span>
<span class="co">#&gt;  $ ever   : int  18 42 39 24 42 204 67 126 55 156 ...</span>
<span class="co">#&gt;  $ grad   : num  11 22 22 15 24 120 47 82 21 72 ...</span>
<span class="co">#&gt;  $ stick  : num  0.611 0.524 0.564 0.625 0.571 0.588 0.701 0.651 0.382 0.462 ...</span></pre></body></html></div>
<p>We typically delete ambiguous levels of race/ethnicity. And because of its sparse representation in the data, we often omit the Native American population as well.</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="co"># remove rows of ambiguous or underrepresented populations </span>
<span class="no">rows_we_want</span> <span class="kw">&lt;-</span> !<span class="no">pre_mw</span>$<span class="no">race</span> <span class="kw">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Unknown"</span>,
                                    <span class="st">"International"</span>,
                                    <span class="st">"Other"</span>,
                                    <span class="st">"Native American"</span>)
<span class="no">pre_mw</span> <span class="kw">&lt;-</span> <span class="no">pre_mw</span>[<span class="no">rows_we_want</span>, , <span class="kw">drop</span> <span class="kw">=</span> <span class="fl">FALSE</span>]

<span class="co"># examine the result</span>
<span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span>(<span class="no">pre_mw</span>$<span class="no">race</span>)
<span class="co">#&gt; [1] "Asian"    "Black"    "Hispanic" "White"</span></pre></body></html></div>
<p>We combine the race/ethnicity and sex column to create one of the multiway categorical variables.</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="co"># prepare columns</span>
<span class="no">pre_mw</span>$<span class="no">race_sex</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(<span class="no">pre_mw</span>$<span class="no">race</span>, <span class="no">pre_mw</span>$<span class="no">sex</span>, <span class="kw">sep</span> <span class="kw">=</span> <span class="st">" "</span>)

<span class="co"># examine the result</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(<span class="no">pre_mw</span>)
<span class="co">#&gt; 'data.frame':    32 obs. of  7 variables:</span>
<span class="co">#&gt;  $ race    : chr  "Asian" "Asian" "Asian" "Asian" ...</span>
<span class="co">#&gt;  $ sex     : chr  "Female" "Female" "Female" "Female" ...</span>
<span class="co">#&gt;  $ program : chr  "Civil Engineering" "Electrical Engineering" "Industrial Engineering" "Mechanical Engineering" ...</span>
<span class="co">#&gt;  $ ever    : int  18 42 39 24 42 204 67 126 55 156 ...</span>
<span class="co">#&gt;  $ grad    : num  11 22 22 15 24 120 47 82 21 72 ...</span>
<span class="co">#&gt;  $ stick   : num  0.611 0.524 0.564 0.625 0.571 0.588 0.701 0.651 0.382 0.462 ...</span>
<span class="co">#&gt;  $ race_sex: chr  "Asian Female" "Asian Female" "Asian Female" "Asian Female" ...</span></pre></body></html></div>
<p>To complete the transformation to multiway form, we select the three multiway variables.</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="co"># select the multiway variables</span>
<span class="no">pre_mw</span>$<span class="no">race_sex</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(<span class="no">pre_mw</span>$<span class="no">race</span>, <span class="no">pre_mw</span>$<span class="no">sex</span>, <span class="kw">sep</span> <span class="kw">=</span> <span class="st">" "</span>)
<span class="no">columns_we_want</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"program"</span>, <span class="st">"race_sex"</span>, <span class="st">"stick"</span>)
<span class="no">pre_mw</span> <span class="kw">&lt;-</span> <span class="no">pre_mw</span>[, <span class="no">columns_we_want</span>, <span class="kw">drop</span> <span class="kw">=</span> <span class="fl">FALSE</span>]

<span class="co"># examine the result</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(<span class="no">pre_mw</span>)
<span class="co">#&gt; 'data.frame':    32 obs. of  3 variables:</span>
<span class="co">#&gt;  $ program : chr  "Civil Engineering" "Electrical Engineering" "Industrial Engineering" "Mechanical Engineering" ...</span>
<span class="co">#&gt;  $ race_sex: chr  "Asian Female" "Asian Female" "Asian Female" "Asian Female" ...</span>
<span class="co">#&gt;  $ stick   : num  0.611 0.524 0.564 0.625 0.571 0.588 0.701 0.651 0.382 0.462 ...</span></pre></body></html></div>
<p>Then we use <code><a href="../reference/order_multiway.html">order_multiway()</a></code> to convert the character columns to factors ordered by the median stickiness.</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="co"># transform characters to factors ordered by median stickiness</span>
<span class="no">data_mw</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/order_multiway.html">order_multiway</a></span>(<span class="no">pre_mw</span>)

<span class="co"># examine the result</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(<span class="no">data_mw</span>)
<span class="co">#&gt; 'data.frame':    32 obs. of  3 variables:</span>
<span class="co">#&gt;  $ program : Factor w/ 4 levels "Electrical Engineering",..: 3 1 4 2 3 1 4 2 3 1 ...</span>
<span class="co">#&gt;  $ race_sex: Factor w/ 8 levels "Black Male","Black Female",..: 7 7 7 7 8 8 8 8 2 2 ...</span>
<span class="co">#&gt;  $ stick   : num  0.611 0.524 0.564 0.625 0.571 0.588 0.701 0.651 0.382 0.462 ...</span></pre></body></html></div>
</div>
<div id="a-multiway-dot-plot" class="section level2">
<h2 class="hasAnchor">
<a href="#a-multiway-dot-plot" class="anchor"></a>A multiway dot plot</h2>
<p>We use conventional ggplot2 functions to create the multiway graphs. By previously ordering the levels of the factors, we have structured the data so that the rows and panels of the multiway graph are ordered by the appropriate medians.</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="co"># create one multiway graph </span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw">data</span> <span class="kw">=</span> <span class="no">data_mw</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">stick</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">race_sex</span>)) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span>(<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html">vars</a></span>(<span class="no">program</span>), <span class="kw">ncol</span> <span class="kw">=</span> <span class="fl">1</span>, <span class="kw">as.table</span> <span class="kw">=</span> <span class="fl">FALSE</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>(<span class="kw">na.rm</span> <span class="kw">=</span> <span class="fl">TRUE</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="st">"Stickiness"</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="st">""</span>)</pre></body></html></div>
<p><img src="../man/figures/explore-multiway-fig1-1.png" width="70%" style="display: block; margin: auto;"></p>
<p><br></p>
<p>This graph permits a direct visual comparison of how stickiness varies by race and sex within a particular major.</p>
<p>Reading a multiway graph</p>
<ul>
<li>We can more effectively compare values within a panel than between panels.</li>
<li>Because rows are ordered, one expects a generally increasing trend within a panel. A response greater or smaller than expected creates a visual asymmetry. The interesting stories are often in these visual anomalies.</li>
<li>To explore the comparison between panels, we swap the row and panel categories, creating the dual multiway.</li>
</ul>
</div>
<div id="the-dual-multiway-dot-plot" class="section level2">
<h2 class="hasAnchor">
<a href="#the-dual-multiway-dot-plot" class="anchor"></a>The dual multiway dot plot</h2>
<p>The previous graph does not facilitate visual comparisons of members of the same race-sex group. As Cleveland says,</p>
<blockquote>
<p>Because of this asymmetry, it is often important to explore multiway data by as many multiway dot plots as there are categorical variables, with each variable assigned once to the levels.</p>
</blockquote>
<p>To create the <em>dual multiway</em> graph, we swap the roles of the rows and panels.</p>
<ul>
<li>
<code>y = race_sex</code> becomes <code>y = program</code>
</li>
<li>
<code>facet_wrap(vars(program) ...</code> becomes <code>facet_wrap(vars(race_sex) ...</code>
</li>
</ul>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="co"># create the dual multiway graph </span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw">data</span> <span class="kw">=</span> <span class="no">data_mw</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">stick</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">program</span>)) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span>(<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html">vars</a></span>(<span class="no">race_sex</span>), <span class="kw">ncol</span> <span class="kw">=</span> <span class="fl">1</span>, <span class="kw">as.table</span> <span class="kw">=</span> <span class="fl">FALSE</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>(<span class="kw">na.rm</span> <span class="kw">=</span> <span class="fl">TRUE</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="st">"Stickiness"</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="st">""</span>)</pre></body></html></div>
<p><img src="../man/figures/explore-multiway-fig1-dual-1.png" width="70%" style="display: block; margin: auto;"></p>
<p><br></p>
<p>This graph permits a direct visual comparison of how stickiness varies by major for one group of students.</p>
<p>Both multiways should be created for discussion. Usually one or the other will convey a more compelling visual story that gets included in the published findings.</p>
</div>
<div id="creating-a-data-table" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-a-data-table" class="anchor"></a>Creating a data table</h2>
<p>Data tables are useful in discussions with one’s research team and are often included in publications for editors or reviewers who want to see the values underlying the data graphics. The first thing to do before tabulating is to limit the significant figures of floating-point numbers.</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="co"># tabulate data in block record ("long") form</span>
<span class="no">blockf</span> <span class="kw">&lt;-</span> <span class="no">data_mw</span>

<span class="co"># limit significant digits</span>
<span class="no">blockf</span>$<span class="no">stick</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(<span class="no">blockf</span>$<span class="no">stick</span>, <span class="fl">2</span>)

<span class="co"># examine the result</span>
<span class="no">blockf</span></pre></body></html></div>
<p>These data are laid out in “block record” form <span class="citation">(Mount and Zumel <a href="#ref-Mount+Zumel:2019:fluid-data" role="doc-biblioref">2019</a>)</span>, where the <code>race_sex</code> key and the <code>program</code> key are both in columns and the finding is in the last column. This layout is also called “tidy data” <span class="citation">(Wickham and Grolemund <a href="#ref-Wickham+Grolemund:2017" role="doc-biblioref">2017</a>)</span>.</p>
<p>The graphing package we use, ggplot2, is designed to work most effectively with block-record data, thus the block-record (“long”) form is the default layout in midfieldr.</p>
<p><br></p>
<table class="table table">
<caption style="font-size: initial !important;">
Table 1: Stickiness (block records)
</caption>
<thead><tr>
<th style="text-align:left;">
program
</th>
<th style="text-align:left;">
race_sex
</th>
<th style="text-align:right;">
stick
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Civil Engineering
</td>
<td style="text-align:left;">
Asian Female
</td>
<td style="text-align:right;">
0.61
</td>
</tr>
<tr>
<td style="text-align:left;">
Electrical Engineering
</td>
<td style="text-align:left;">
Asian Female
</td>
<td style="text-align:right;">
0.52
</td>
</tr>
<tr>
<td style="text-align:left;">
Industrial Engineering
</td>
<td style="text-align:left;">
Asian Female
</td>
<td style="text-align:right;">
0.56
</td>
</tr>
<tr>
<td style="text-align:left;">
Mechanical Engineering
</td>
<td style="text-align:left;">
Asian Female
</td>
<td style="text-align:right;">
0.62
</td>
</tr>
<tr>
<td style="text-align:left;">
Civil Engineering
</td>
<td style="text-align:left;">
Asian Male
</td>
<td style="text-align:right;">
0.57
</td>
</tr>
<tr>
<td style="text-align:left;">
Electrical Engineering
</td>
<td style="text-align:left;">
Asian Male
</td>
<td style="text-align:right;">
0.59
</td>
</tr>
<tr>
<td style="text-align:left;">
Industrial Engineering
</td>
<td style="text-align:left;">
Asian Male
</td>
<td style="text-align:right;">
0.70
</td>
</tr>
<tr>
<td style="text-align:left;">
Mechanical Engineering
</td>
<td style="text-align:left;">
Asian Male
</td>
<td style="text-align:right;">
0.65
</td>
</tr>
<tr>
<td style="text-align:left;">
Civil Engineering
</td>
<td style="text-align:left;">
Black Female
</td>
<td style="text-align:right;">
0.38
</td>
</tr>
<tr>
<td style="text-align:left;">
Electrical Engineering
</td>
<td style="text-align:left;">
Black Female
</td>
<td style="text-align:right;">
0.46
</td>
</tr>
<tr>
<td style="text-align:left;">
Industrial Engineering
</td>
<td style="text-align:left;">
Black Female
</td>
<td style="text-align:right;">
0.59
</td>
</tr>
<tr>
<td style="text-align:left;">
Mechanical Engineering
</td>
<td style="text-align:left;">
Black Female
</td>
<td style="text-align:right;">
0.39
</td>
</tr>
<tr>
<td style="text-align:left;">
Civil Engineering
</td>
<td style="text-align:left;">
Black Male
</td>
<td style="text-align:right;">
0.38
</td>
</tr>
<tr>
<td style="text-align:left;">
Electrical Engineering
</td>
<td style="text-align:left;">
Black Male
</td>
<td style="text-align:right;">
0.43
</td>
</tr>
<tr>
<td style="text-align:left;">
Industrial Engineering
</td>
<td style="text-align:left;">
Black Male
</td>
<td style="text-align:right;">
0.50
</td>
</tr>
<tr>
<td style="text-align:left;">
Mechanical Engineering
</td>
<td style="text-align:left;">
Black Male
</td>
<td style="text-align:right;">
0.41
</td>
</tr>
<tr>
<td style="text-align:left;">
Civil Engineering
</td>
<td style="text-align:left;">
Hispanic Female
</td>
<td style="text-align:right;">
0.46
</td>
</tr>
<tr>
<td style="text-align:left;">
Electrical Engineering
</td>
<td style="text-align:left;">
Hispanic Female
</td>
<td style="text-align:right;">
0.43
</td>
</tr>
<tr>
<td style="text-align:left;">
Industrial Engineering
</td>
<td style="text-align:left;">
Hispanic Female
</td>
<td style="text-align:right;">
0.71
</td>
</tr>
<tr>
<td style="text-align:left;">
Mechanical Engineering
</td>
<td style="text-align:left;">
Hispanic Female
</td>
<td style="text-align:right;">
0.38
</td>
</tr>
<tr>
<td style="text-align:left;">
Civil Engineering
</td>
<td style="text-align:left;">
Hispanic Male
</td>
<td style="text-align:right;">
0.49
</td>
</tr>
<tr>
<td style="text-align:left;">
Electrical Engineering
</td>
<td style="text-align:left;">
Hispanic Male
</td>
<td style="text-align:right;">
0.46
</td>
</tr>
<tr>
<td style="text-align:left;">
Industrial Engineering
</td>
<td style="text-align:left;">
Hispanic Male
</td>
<td style="text-align:right;">
0.73
</td>
</tr>
<tr>
<td style="text-align:left;">
Mechanical Engineering
</td>
<td style="text-align:left;">
Hispanic Male
</td>
<td style="text-align:right;">
0.49
</td>
</tr>
<tr>
<td style="text-align:left;">
Civil Engineering
</td>
<td style="text-align:left;">
White Female
</td>
<td style="text-align:right;">
0.56
</td>
</tr>
<tr>
<td style="text-align:left;">
Electrical Engineering
</td>
<td style="text-align:left;">
White Female
</td>
<td style="text-align:right;">
0.35
</td>
</tr>
<tr>
<td style="text-align:left;">
Industrial Engineering
</td>
<td style="text-align:left;">
White Female
</td>
<td style="text-align:right;">
0.68
</td>
</tr>
<tr>
<td style="text-align:left;">
Mechanical Engineering
</td>
<td style="text-align:left;">
White Female
</td>
<td style="text-align:right;">
0.45
</td>
</tr>
<tr>
<td style="text-align:left;">
Civil Engineering
</td>
<td style="text-align:left;">
White Male
</td>
<td style="text-align:right;">
0.59
</td>
</tr>
<tr>
<td style="text-align:left;">
Electrical Engineering
</td>
<td style="text-align:left;">
White Male
</td>
<td style="text-align:right;">
0.49
</td>
</tr>
<tr>
<td style="text-align:left;">
Industrial Engineering
</td>
<td style="text-align:left;">
White Male
</td>
<td style="text-align:right;">
0.69
</td>
</tr>
<tr>
<td style="text-align:left;">
Mechanical Engineering
</td>
<td style="text-align:left;">
White Male
</td>
<td style="text-align:right;">
0.57
</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>However, the visual convention preferred by publishers and readers is a row-record (“wide”) form, as illustrated by Table 2. The <code>race_sex</code> key is in the left column and the <code>program key</code> is in the column names. The stickiness findings lie at the row-column intersections.</p>
<p><br></p>
<table class="table table">
<caption style="font-size: initial !important;">
Table 2: Stickiness (row records)
</caption>
<thead><tr>
<th style="text-align:left;">
Group
</th>
<th style="text-align:right;">
Civil
</th>
<th style="text-align:right;">
Electrical
</th>
<th style="text-align:right;">
Industrial
</th>
<th style="text-align:right;">
Mechanical
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Asian Female
</td>
<td style="text-align:right;">
0.61
</td>
<td style="text-align:right;">
0.52
</td>
<td style="text-align:right;">
0.56
</td>
<td style="text-align:right;">
0.62
</td>
</tr>
<tr>
<td style="text-align:left;">
Asian Male
</td>
<td style="text-align:right;">
0.57
</td>
<td style="text-align:right;">
0.59
</td>
<td style="text-align:right;">
0.70
</td>
<td style="text-align:right;">
0.65
</td>
</tr>
<tr>
<td style="text-align:left;">
Black Female
</td>
<td style="text-align:right;">
0.38
</td>
<td style="text-align:right;">
0.46
</td>
<td style="text-align:right;">
0.59
</td>
<td style="text-align:right;">
0.39
</td>
</tr>
<tr>
<td style="text-align:left;">
Black Male
</td>
<td style="text-align:right;">
0.38
</td>
<td style="text-align:right;">
0.43
</td>
<td style="text-align:right;">
0.50
</td>
<td style="text-align:right;">
0.41
</td>
</tr>
<tr>
<td style="text-align:left;">
Hispanic Female
</td>
<td style="text-align:right;">
0.46
</td>
<td style="text-align:right;">
0.43
</td>
<td style="text-align:right;">
0.71
</td>
<td style="text-align:right;">
0.38
</td>
</tr>
<tr>
<td style="text-align:left;">
Hispanic Male
</td>
<td style="text-align:right;">
0.49
</td>
<td style="text-align:right;">
0.46
</td>
<td style="text-align:right;">
0.73
</td>
<td style="text-align:right;">
0.49
</td>
</tr>
<tr>
<td style="text-align:left;">
White Female
</td>
<td style="text-align:right;">
0.56
</td>
<td style="text-align:right;">
0.35
</td>
<td style="text-align:right;">
0.68
</td>
<td style="text-align:right;">
0.45
</td>
</tr>
<tr>
<td style="text-align:left;">
White Male
</td>
<td style="text-align:right;">
0.59
</td>
<td style="text-align:right;">
0.49
</td>
<td style="text-align:right;">
0.69
</td>
<td style="text-align:right;">
0.57
</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>Depending on your software background, you may have encountered a block-record/row-record transformation using any of these function pairs—a list adapted from <span class="citation">(Mount and Zumel <a href="#ref-Mount+Zumel:2019:fluid-data" role="doc-biblioref">2019</a>)</span>.</p>
<ul>
<li>pivot / anti-pivot or crosstab / shred (databases)</li>
<li>pivot_to_rowrecs / unpivot_to_blocks (cdata)</li>
<li>reshape “wide” / reshape “long” (R)</li>
<li>pivot_wider / pivot_longer (tidyr)</li>
<li>pivot / unpivot (Microsoft Excel)</li>
<li>cast / melt (reshape2)</li>
</ul>
<p>In base R, using <code><a href="https://rdrr.io/r/stats/reshape.html">reshape()</a></code>, the block-record form is transformed to row-record form to create Table 2 as follows. Both table layouts are useful. Choosing one or the other depends on one’s audience and rhetorical goals.</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="co"># tabulate data in row record ("wide") form</span>
<span class="no">rowf</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/reshape.html">reshape</a></span>(<span class="kw">data</span> <span class="kw">=</span> <span class="no">blockf</span>,
                <span class="kw">idvar</span>     <span class="kw">=</span> <span class="st">"race_sex"</span>, <span class="co"># column of row keys to copy </span>
                <span class="kw">timevar</span>   <span class="kw">=</span> <span class="st">"program"</span>,  <span class="co"># column to take keys from</span>
                <span class="kw">v.names</span>   <span class="kw">=</span> <span class="st">"stick"</span>,    <span class="co"># column to take values from</span>
                <span class="kw">direction</span> <span class="kw">=</span> <span class="st">"wide"</span>)

<span class="co"># reset the row numbers</span>
<span class="fu"><a href="https://rdrr.io/r/base/row.names.html">row.names</a></span>(<span class="no">rowf</span>) <span class="kw">&lt;-</span> <span class="kw">NULL</span>

<span class="co"># edit columns names</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span>(<span class="no">rowf</span>) <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Group"</span>, <span class="st">"Civil"</span>, <span class="st">"Electrical"</span>, <span class="st">"Industrial"</span>, <span class="st">"Mechanical"</span>)

<span class="co"># examine the result</span>
<span class="no">rowf</span>
<span class="co">#&gt;             Group Civil Electrical Industrial Mechanical</span>
<span class="co">#&gt; 1    Asian Female  0.61       0.52       0.56       0.62</span>
<span class="co">#&gt; 2      Asian Male  0.57       0.59       0.70       0.65</span>
<span class="co">#&gt; 3    Black Female  0.38       0.46       0.59       0.39</span>
<span class="co">#&gt; 4      Black Male  0.38       0.43       0.50       0.41</span>
<span class="co">#&gt; 5 Hispanic Female  0.46       0.43       0.71       0.38</span>
<span class="co">#&gt; 6   Hispanic Male  0.49       0.46       0.73       0.49</span>
<span class="co">#&gt; 7    White Female  0.56       0.35       0.68       0.45</span>
<span class="co">#&gt; 8      White Male  0.59       0.49       0.69       0.57</span></pre></body></html></div>
</div>
<div id="references" class="section level2">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<div id="refs">
<div id="ref-cleveland1993">
<p>Cleveland, William S. 1993. <em>Visualizing Data</em>. Summit, NJ: Hobart Press.</p>
</div>
<div id="ref-Mount+Zumel:2019:fluid-data">
<p>Mount, John, and Nina Zumel. 2019. <em>Coordinatized data: A fluid data specification</em>. Win Vector LLC. <a href="http://winvector.github.io/FluidData/RowsAndColumns.html">http://winvector.github.io/FluidData/RowsAndColumns.html</a>.</p>
</div>
<div id="ref-stickiness2012">
<p>Ohland, Matthew, Marisa Orr, Richard Layton, Susan Lord, and Russell Long. 2012. “Introducing Stickiness as a Versatile Metric of Engineering Persistence.” In <em>Proceedings of the Frontiers in Education Conference</em>, 1–5.</p>
</div>
<div id="ref-Wickham+Grolemund:2017">
<p>Wickham, Hadley, and Garrett Grolemund. 2017. <em>R for Data Science</em>. Sebastopol, CA: O’Reilly Media, Inc. <a href="https://r4ds.had.co.nz/">https://r4ds.had.co.nz/</a>.</p>
</div>
</div>
</div>
<div id="appendix" class="section level2">
<h2 class="hasAnchor">
<a href="#appendix" class="anchor"></a>Appendix</h2>
<div id="complete-script" class="section level3">
<h3 class="hasAnchor">
<a href="#complete-script" class="anchor"></a>Complete script</h3>
<p>In response to requests from some of our workshop attendees, we collect the vignette code chunks in one script. We condense the script by omitting exploratory steps so we can focus on the steps that produce the results.</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="co"># packages</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">midfieldr</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">ggplot2</span>)

<span class="co"># load stickiness data from case study</span>
<span class="no">pre_mw</span> <span class="kw">&lt;-</span> <span class="no">exa_stickiness</span>

<span class="co"># prepare rows</span>
<span class="no">rows_we_want</span> <span class="kw">&lt;-</span> <span class="no">pre_mw</span>$<span class="no">ever</span> <span class="kw">&gt;=</span> <span class="fl">5</span> <span class="kw">&amp;</span>
  !<span class="no">pre_mw</span>$<span class="no">race</span> <span class="kw">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Unknown"</span>,
                      <span class="st">"International"</span>,
                      <span class="st">"Other"</span>,
                      <span class="st">"Native American"</span>)
<span class="no">pre_mw</span> <span class="kw">&lt;-</span> <span class="no">pre_mw</span>[<span class="no">rows_we_want</span>, , <span class="kw">drop</span> <span class="kw">=</span> <span class="fl">FALSE</span>]

<span class="co"># prepare columns</span>
<span class="no">pre_mw</span>$<span class="no">race_sex</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(<span class="no">pre_mw</span>$<span class="no">race</span>, <span class="no">pre_mw</span>$<span class="no">sex</span>, <span class="kw">sep</span> <span class="kw">=</span> <span class="st">" "</span>)
<span class="no">columns_we_want</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"program"</span>, <span class="st">"race_sex"</span>, <span class="st">"stick"</span>)
<span class="no">pre_mw</span> <span class="kw">&lt;-</span> <span class="no">pre_mw</span>[, <span class="no">columns_we_want</span>, <span class="kw">drop</span> <span class="kw">=</span> <span class="fl">FALSE</span>]

<span class="co"># transform characters to factors ordered by median stickiness</span>
<span class="no">data_mw</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/order_multiway.html">order_multiway</a></span>(<span class="no">pre_mw</span>)

<span class="co"># create one multiway graph </span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw">data</span> <span class="kw">=</span> <span class="no">data_mw</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">stick</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">race_sex</span>)) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span>(<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html">vars</a></span>(<span class="no">program</span>), <span class="kw">ncol</span> <span class="kw">=</span> <span class="fl">1</span>, <span class="kw">as.table</span> <span class="kw">=</span> <span class="fl">FALSE</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>(<span class="kw">na.rm</span> <span class="kw">=</span> <span class="fl">TRUE</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="st">"Stickiness"</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="st">""</span>)

<span class="co"># create the dual multiway graph </span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw">data</span> <span class="kw">=</span> <span class="no">data_mw</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">stick</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">program</span>)) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span>(<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html">vars</a></span>(<span class="no">race_sex</span>), <span class="kw">ncol</span> <span class="kw">=</span> <span class="fl">1</span>, <span class="kw">as.table</span> <span class="kw">=</span> <span class="fl">FALSE</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>(<span class="kw">na.rm</span> <span class="kw">=</span> <span class="fl">TRUE</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="st">"Stickiness"</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="st">""</span>)

<span class="co"># tabulate data in block record ("long") form</span>
<span class="no">blockf</span> <span class="kw">&lt;-</span> <span class="no">data_mw</span>
<span class="no">blockf</span>$<span class="no">stick</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(<span class="no">blockf</span>$<span class="no">stick</span>, <span class="fl">2</span>)
<span class="no">columns_we_want</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"race_sex"</span>, <span class="st">"program"</span>, <span class="st">"stick"</span>)
<span class="no">blockf</span> <span class="kw">&lt;-</span> <span class="no">blockf</span>[, <span class="no">columns_we_want</span>, <span class="kw">drop</span> <span class="kw">=</span> <span class="fl">FALSE</span>]
<span class="no">blockf</span>

<span class="co"># tabulate data in row record ("wide") form</span>
<span class="no">rowf</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/reshape.html">reshape</a></span>(<span class="kw">data</span> <span class="kw">=</span> <span class="no">blockf</span>,
                <span class="kw">idvar</span>     <span class="kw">=</span> <span class="st">"race_sex"</span>, <span class="co"># column of row keys to copy </span>
                <span class="kw">timevar</span>   <span class="kw">=</span> <span class="st">"program"</span>,  <span class="co"># column to take keys from</span>
                <span class="kw">v.names</span>   <span class="kw">=</span> <span class="st">"stick"</span>,    <span class="co"># column to take values from</span>
                <span class="kw">direction</span> <span class="kw">=</span> <span class="st">"wide"</span>)
<span class="fu"><a href="https://rdrr.io/r/base/row.names.html">row.names</a></span>(<span class="no">rowf</span>) <span class="kw">&lt;-</span> <span class="kw">NULL</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span>(<span class="no">rowf</span>) <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Group"</span>, <span class="st">"Civil"</span>, <span class="st">"Electrical"</span>, <span class="st">"Industrial"</span>, <span class="st">"Mechanical"</span>)
<span class="no">rowf</span></pre></body></html></div>
<p><br><a href="#top">▲ top of page </a><br><a href="../index.html">◁ main page </a></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Richard Layton, Russell Long, Matthew Ohland, US National Science Foundation.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
