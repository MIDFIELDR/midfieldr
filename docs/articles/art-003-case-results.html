<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="midfieldr">
<title>Case study: Results • midfieldr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/Courier_Prime-0.4.6/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Case study: Results">
<meta property="og:description" content="midfieldr">
<meta property="og:image" content="https://midfieldr.github.io/midfieldr/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">midfieldr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/art-000-getting-started.html">Getting started</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-case-study">Case study</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-case-study">
    <a class="dropdown-item" href="../articles/art-001-case-goals.html">Goals</a>
    <a class="dropdown-item" href="../articles/art-002-case-data.html">Data</a>
    <a class="dropdown-item" href="../articles/art-003-case-results.html">Results</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/art-010-planning.html">Planning</a>
    <a class="dropdown-item" href="../articles/art-020-data-sufficiency.html">Data sufficiency</a>
    <a class="dropdown-item" href="../articles/art-030-degree-seeking.html">Degree seeking</a>
    <a class="dropdown-item" href="../articles/art-040-programs.html">Programs</a>
    <a class="dropdown-item" href="../articles/art-050-blocs.html">Blocs</a>
    <a class="dropdown-item" href="../articles/art-060-fye-proxies.html">FYE proxies</a>
    <a class="dropdown-item" href="../articles/art-070-starters.html">Starters</a>
    <a class="dropdown-item" href="../articles/art-080-graduates.html">Graduates</a>
    <a class="dropdown-item" href="../articles/art-090-groupings.html">Groupings</a>
    <a class="dropdown-item" href="../articles/art-100-grad-rate.html">Graduation rate</a>
    <a class="dropdown-item" href="../articles/art-110-stickiness.html">Stickiness</a>
    <a class="dropdown-item" href="../articles/art-120-multiway.html">Multiway data and charts</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/MIDFIELDR/midfieldr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="art-003-case-results_files/kePrint-0.0.1/kePrint.js"></script><link href="art-003-case-results_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Case study: Results</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/MIDFIELDR/midfieldr/blob/HEAD/vignettes/art-003-case-results.Rmd" class="external-link"><code>vignettes/art-003-case-results.Rmd</code></a></small>
      <div class="d-none name"><code>art-003-case-results.Rmd</code></div>
    </div>

    
    
<p>Part 3 of a case study in three parts, illustrating how we work with
longitudinal student-level records.</p>
<ol style="list-style-type: decimal">
<li><p><em>Goals.</em>   Introducing the study.</p></li>
<li><p><em>Data.</em>   Transforming the data to yield the observations
of interest.</p></li>
<li><p><em>Results.</em>   Summary statistics, metric, chart, and
table.</p></li>
</ol>
<div class="section level2">
<h2 id="method">Method<a class="anchor" aria-label="anchor" href="#method"></a>
</h2>
<p>Our goal in this segment is to group and summarize the observations
we saved previously, calculate the stickiness metric, and display the
results.</p>
<p><em>Reminder.</em>   midfielddata datasets are for practice, not
research.</p>
</div>
<div class="section level2">
<h2 id="load-data">Load data<a class="anchor" aria-label="anchor" href="#load-data"></a>
</h2>
<p><em>Start.</em>   If you are writing your own script to follow along,
we use these packages in this article:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://midfieldr.github.io/midfieldr/">midfieldr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
<p><em>Loads with midfieldr.</em>   Prepared data. View data dictionary
via <code><a href="../reference/study_observations.html">?study_observations</a></code>.</p>
<ul>
<li>
<code>study_observations</code> (derived in <a href="art-002-case-data.html">Case study: Data</a>).</li>
</ul>
</div>
<div class="section level2">
<h2 id="group-and-summarize">Group and summarize<a class="anchor" aria-label="anchor" href="#group-and-summarize"></a>
</h2>
<p><em>Initialize.</em>   Assign a working data frame.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Working data frame</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">study_observations</span><span class="op">)</span></span>
<span><span class="va">DT</span></span>
<span><span class="co">#&gt;                 mcid          race  sex program          bloc</span></span>
<span><span class="co">#&gt;    1: MCID3111142965 International Male      EE ever_enrolled</span></span>
<span><span class="co">#&gt;    2: MCID3111142965 International Male      EE     graduates</span></span>
<span><span class="co">#&gt;    3: MCID3111145102         White Male      EE ever_enrolled</span></span>
<span><span class="co">#&gt;   ---                                                        </span></span>
<span><span class="co">#&gt; 8915: MCID3112641535         White Male      ME ever_enrolled</span></span>
<span><span class="co">#&gt; 8916: MCID3112641535         White Male      ME     graduates</span></span>
<span><span class="co">#&gt; 8917: MCID3112698681         White Male      ME ever_enrolled</span></span></code></pre></div>
<p>The study observations data frame is designed with one column for
each grouping variable: <code>race</code>, <code>sex</code>,
<code>program</code>, and <code>bloc</code>.</p>
<dl>
<dt>grouping variables</dt>
<dd>
<p>Detailed information in the student-level data that further
characterize a bloc of records, typically used to create bloc subsets
for comparison, for example, program, race/ethnicity, sex, age, grade
level, grades, etc.</p>
</dd>
</dl>
<p><em>Summarize.</em>   Count the numbers of observations for each
combination of the grouping variables.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Group and summarize</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span>, <span class="va">.N</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bloc"</span>, <span class="st">"program"</span>, <span class="st">"race"</span>, <span class="st">"sex"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">DT</span></span>
<span><span class="co">#&gt;              bloc program            race    sex   N</span></span>
<span><span class="co">#&gt;  1: ever_enrolled      EE   International   Male 195</span></span>
<span><span class="co">#&gt;  2:     graduates      EE   International   Male  90</span></span>
<span><span class="co">#&gt;  3: ever_enrolled      EE           White   Male 864</span></span>
<span><span class="co">#&gt; ---                                                 </span></span>
<span><span class="co">#&gt; 96: ever_enrolled      CE Native American Female   1</span></span>
<span><span class="co">#&gt; 97:     graduates      CE Native American Female   1</span></span>
<span><span class="co">#&gt; 98:     graduates      EE   Other/Unknown Female   3</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="reshape">Reshape<a class="anchor" aria-label="anchor" href="#reshape"></a>
</h2>
<p><em>Reshape.</em>   Transform from block-record form to row-record
form to set up the stickiness metric calculation. Transforms the
<em>N</em> column into two columns, one for ever-enrolled and one for
graduates. This operation is essentially a transformation from block
records to row records—a process known by a number of different names,
e.g., pivot, crosstab, unstack, spread, or widen <span class="citation">(<a href="#ref-Mount+Zumel:2019:fluid-data" role="doc-biblioref">Mount and Zumel 2019</a>)</span>. This step leaves
the graphing variables (program, race/ethnicity, and sex) in place.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Prepare to compute metric</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/dcast.data.table.html" class="external-link">dcast</a></span><span class="op">(</span><span class="va">DT</span>, <span class="va">program</span> <span class="op">+</span> <span class="va">sex</span> <span class="op">+</span> <span class="va">race</span> <span class="op">~</span> <span class="va">bloc</span>, value.var <span class="op">=</span> <span class="st">"N"</span>, fill <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span><span class="va">DT</span></span>
<span><span class="co">#&gt;     program    sex            race ever_enrolled graduates</span></span>
<span><span class="co">#&gt;  1:      CE Female           Asian            15        10</span></span>
<span><span class="co">#&gt;  2:      CE Female           Black             4         1</span></span>
<span><span class="co">#&gt;  3:      CE Female   International            23        13</span></span>
<span><span class="co">#&gt; ---                                                       </span></span>
<span><span class="co">#&gt; 48:      ME   Male Native American             5         1</span></span>
<span><span class="co">#&gt; 49:      ME   Male   Other/Unknown            80        41</span></span>
<span><span class="co">#&gt; 50:      ME   Male           White          1596       953</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="compute-the-metric">Compute the metric<a class="anchor" aria-label="anchor" href="#compute-the-metric"></a>
</h2>
<dl>
<dt>metric</dt>
<dd>
<p>A quantitative measure derived from student-level data. Includes
statistical measures such as counts of program starters or graduates as
well as comparative ratios such as graduation rate or stickiness.
Typically involves comparisons of specific blocs of students and
programs.</p>
</dd>
<dt>stickiness</dt>
<dd>
<p>Stickiness <span class="math inline">\((S)\)</span> is the ratio of
the number of graduates of a program <span class="math inline">\((N_g)\)</span> to the number ever enrolled in the
program <span class="math inline">\((N_e)\)</span>. <span class="math display">\[
S = \frac{N_g}{N_e}
\]</span></p>
</dd>
</dl>
<p><em>Create a variable.</em>   Compute stickiness.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Compute the metric</span></span>
<span><span class="va">DT</span><span class="op">[</span>, <span class="va">stickiness</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fl">100</span> <span class="op">*</span> <span class="va">graduates</span> <span class="op">/</span> <span class="va">ever_enrolled</span>, <span class="fl">1</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setkey.html" class="external-link">setkey</a></span><span class="op">(</span><span class="va">DT</span>, <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="va">DT</span></span>
<span><span class="co">#&gt;     program    sex            race ever_enrolled graduates stickiness</span></span>
<span><span class="co">#&gt;  1:      CE Female           Asian            15        10       66.7</span></span>
<span><span class="co">#&gt;  2:      CE Female           Black             4         1       25.0</span></span>
<span><span class="co">#&gt;  3:      CE Female   International            23        13       56.5</span></span>
<span><span class="co">#&gt; ---                                                                  </span></span>
<span><span class="co">#&gt; 48:      ME   Male Native American             5         1       20.0</span></span>
<span><span class="co">#&gt; 49:      ME   Male   Other/Unknown            80        41       51.2</span></span>
<span><span class="co">#&gt; 50:      ME   Male           White          1596       953       59.7</span></span></code></pre></div>
<p><em>Verify built-in data.</em> To avoid deriving this data frame each
time it is needed in other articles, the same information is provided in
the <code>study_results</code> data frame included with midfieldr. Here
we verify that the two data frames are identical.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Demonstrate equivalence</span></span>
<span><span class="fu"><a href="../reference/same_content.html">same_content</a></span><span class="op">(</span><span class="va">DT</span>, <span class="va">study_results</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="prepare-for-dissemination">Prepare for dissemination<a class="anchor" aria-label="anchor" href="#prepare-for-dissemination"></a>
</h2>
<p>We take several additional steps to prepare the data for
dissemination in tables or charts.</p>
<p><em>Filtering.</em> To preserve the anonymity of the people involved,
we remove observations with fewer than 10 graduates.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Preserve anonymity</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="va">graduates</span> <span class="op">&gt;=</span> <span class="fl">10</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Display the result</span></span>
<span><span class="va">DT</span></span>
<span><span class="co">#&gt;     program    sex          race ever_enrolled graduates stickiness</span></span>
<span><span class="co">#&gt;  1:      CE Female         Asian            15        10       66.7</span></span>
<span><span class="co">#&gt;  2:      CE Female International            23        13       56.5</span></span>
<span><span class="co">#&gt;  3:      CE Female         White           263       162       61.6</span></span>
<span><span class="co">#&gt; ---                                                                </span></span>
<span><span class="co">#&gt; 27:      ME   Male        Latine            79        42       53.2</span></span>
<span><span class="co">#&gt; 28:      ME   Male Other/Unknown            80        41       51.2</span></span>
<span><span class="co">#&gt; 29:      ME   Male         White          1596       953       59.7</span></span></code></pre></div>
<p><em>Note.</em>   MIDFIELD research findings are regularly grouped by
program, race/ethnicity, and sex. However, applied to the practice data
these groupings produce several groups with totals below the threshold
we impose to preserve anonymity, introducing a number of NA values in
the resulting charts and tables. These NAs are largely an artifact of
applying these groupings to practice data.</p>
<p><em>Filtering.</em> Let us assume that our study focuses on
“domestic” students of known race/ethnicity. In that case, we omit
observations labeled “International” and Other/Unknown”.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Filter by study design</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="op">!</span><span class="va">race</span> <span class="op"><a href="https://Rdatatable.gitlab.io/data.table/reference/chmatch.html" class="external-link">%chin%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"International"</span>, <span class="st">"Other/Unknown"</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Display the result</span></span>
<span><span class="va">DT</span></span>
<span><span class="co">#&gt;     program    sex   race ever_enrolled graduates stickiness</span></span>
<span><span class="co">#&gt;  1:      CE Female  Asian            15        10       66.7</span></span>
<span><span class="co">#&gt;  2:      CE Female  White           263       162       61.6</span></span>
<span><span class="co">#&gt;  3:      CE   Male  Asian            30        25       83.3</span></span>
<span><span class="co">#&gt; ---                                                         </span></span>
<span><span class="co">#&gt; 18:      ME   Male  Black            30        19       63.3</span></span>
<span><span class="co">#&gt; 19:      ME   Male Latine            79        42       53.2</span></span>
<span><span class="co">#&gt; 20:      ME   Male  White          1596       953       59.7</span></span></code></pre></div>
<p><em>Creating variables.</em> We have found it useful to report such
data with a variable that combines race/ethnicity and sex.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a variable</span></span>
<span><span class="va">DT</span><span class="op">[</span>, <span class="va">people</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">race</span>, <span class="va">sex</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">DT</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"race"</span>, <span class="st">"sex"</span><span class="op">)</span> <span class="op">:=</span> <span class="cn">NULL</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setcolorder.html" class="external-link">setcolorder</a></span><span class="op">(</span><span class="va">DT</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"program"</span>, <span class="st">"people"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Display the result</span></span>
<span><span class="va">DT</span></span>
<span><span class="co">#&gt;     program       people ever_enrolled graduates stickiness</span></span>
<span><span class="co">#&gt;  1:      CE Asian Female            15        10       66.7</span></span>
<span><span class="co">#&gt;  2:      CE White Female           263       162       61.6</span></span>
<span><span class="co">#&gt;  3:      CE   Asian Male            30        25       83.3</span></span>
<span><span class="co">#&gt; ---                                                        </span></span>
<span><span class="co">#&gt; 18:      ME   Black Male            30        19       63.3</span></span>
<span><span class="co">#&gt; 19:      ME  Latine Male            79        42       53.2</span></span>
<span><span class="co">#&gt; 20:      ME   White Male          1596       953       59.7</span></span></code></pre></div>
<p><em>Recoding values.</em> Readers can more readily interpret our
charts and tables if the programs are unabbreviated.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Recode values for charts and tables</span></span>
<span><span class="va">DT</span><span class="op">[</span>, <span class="va">program</span> <span class="op">:=</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/fcase.html" class="external-link">fcase</a></span><span class="op">(</span></span>
<span>  <span class="va">program</span> <span class="op"><a href="https://Rdatatable.gitlab.io/data.table/reference/like.html" class="external-link">%like%</a></span> <span class="st">"CE"</span>, <span class="st">"Civil"</span>,</span>
<span>  <span class="va">program</span> <span class="op"><a href="https://Rdatatable.gitlab.io/data.table/reference/like.html" class="external-link">%like%</a></span> <span class="st">"EE"</span>, <span class="st">"Electrical"</span>,</span>
<span>  <span class="va">program</span> <span class="op"><a href="https://Rdatatable.gitlab.io/data.table/reference/like.html" class="external-link">%like%</a></span> <span class="st">"ME"</span>, <span class="st">"Mechanical"</span>,</span>
<span>  <span class="va">program</span> <span class="op"><a href="https://Rdatatable.gitlab.io/data.table/reference/like.html" class="external-link">%like%</a></span> <span class="st">"ISE"</span>, <span class="st">"Industrial/Systems"</span></span>
<span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Display the result</span></span>
<span><span class="va">DT</span></span>
<span><span class="co">#&gt;        program       people ever_enrolled graduates stickiness</span></span>
<span><span class="co">#&gt;  1:      Civil Asian Female            15        10       66.7</span></span>
<span><span class="co">#&gt;  2:      Civil White Female           263       162       61.6</span></span>
<span><span class="co">#&gt;  3:      Civil   Asian Male            30        25       83.3</span></span>
<span><span class="co">#&gt; ---                                                           </span></span>
<span><span class="co">#&gt; 18: Mechanical   Black Male            30        19       63.3</span></span>
<span><span class="co">#&gt; 19: Mechanical  Latine Male            79        42       53.2</span></span>
<span><span class="co">#&gt; 20: Mechanical   White Male          1596       953       59.7</span></span></code></pre></div>
<p>With one quantitative variable (stickiness) for every combination of
the levels of two categorical variables (program and
race/ethnicity/sex), these data are <em>multiway data</em> <span class="citation">(<a href="#ref-Cleveland:1993" role="doc-biblioref">Cleveland 1993</a>)</span>. How one orders the
categorical variables is critical for visualizing effects.</p>
<dl>
<dt>multiway data</dt>
<dd>
<p>A data set of three variables: a category with <em>m</em> levels; a
second independent category with <em>n</em> levels; and a quantitative
variable (the response) of length <em>mn</em> such that there is a value
of the response for each combination of levels of the two categorical
variables.</p>
</dd>
</dl>
<p><em>Conditioning.</em> Convert the two categorical variables to
ordered factors to support the ordering of rows and panels in the
chart.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Convert categorical variables to factors</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/order_multiway.html">order_multiway</a></span><span class="op">(</span><span class="va">DT</span>,</span>
<span>  quantity <span class="op">=</span> <span class="st">"stickiness"</span>,</span>
<span>  categories <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"program"</span>, <span class="st">"people"</span><span class="op">)</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"percent"</span>,</span>
<span>  ratio_of <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"graduates"</span>, <span class="st">"ever_enrolled"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Display the result</span></span>
<span><span class="va">DT</span></span>
<span><span class="co">#&gt;        program       people graduates ever_enrolled stickiness</span></span>
<span><span class="co">#&gt;  1:      Civil Asian Female        10            15       66.7</span></span>
<span><span class="co">#&gt;  2:      Civil White Female       162           263       61.6</span></span>
<span><span class="co">#&gt;  3:      Civil   Asian Male        25            30       83.3</span></span>
<span><span class="co">#&gt; ---                                                           </span></span>
<span><span class="co">#&gt; 18: Mechanical   Black Male        19            30       63.3</span></span>
<span><span class="co">#&gt; 19: Mechanical  Latine Male        42            79       53.2</span></span>
<span><span class="co">#&gt; 20: Mechanical   White Male       953          1596       59.7</span></span>
<span><span class="co">#&gt;     program_stickiness people_stickiness</span></span>
<span><span class="co">#&gt;  1:               63.5              62.7</span></span>
<span><span class="co">#&gt;  2:               63.5              60.5</span></span>
<span><span class="co">#&gt;  3:               63.5              62.8</span></span>
<span><span class="co">#&gt; ---                                     </span></span>
<span><span class="co">#&gt; 18:               60.0              61.0</span></span>
<span><span class="co">#&gt; 19:               60.0              47.4</span></span>
<span><span class="co">#&gt; 20:               60.0              59.3</span></span></code></pre></div>
<p>The column <code>program_stickiness</code> determines the order of
the programs in the chart; <code>people_stickiness</code> determines the
order of the race/ethnicity/sex groupings; the values in
<code>stickiness</code> are the quantitative values to be graphed.</p>
</div>
<div class="section level2">
<h2 id="charts">Charts<a class="anchor" aria-label="anchor" href="#charts"></a>
</h2>
<p>In the first multiway chart, the rows are programs and panels are
people, facilitating comparisons of different program for a single
group. Rows and panels are both ordered from bottom to top in order of
increasing stickiness.</p>
<dl>
<dt>multiway chart</dt>
<dd>
<p>A multi-panel dot plot: horizontal, quantitative scales; rows that
encode one category; and panels that encode the second category. All
panels have identical axes. The ordering of the rows and panels is
crucial to the perception of effects.</p>
</dd>
</dl>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">DT</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">stickiness</span>, y <span class="op">=</span> <span class="va">program</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">people</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">1</span>, as.table <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="va">people_stickiness</span><span class="op">)</span>, linetype <span class="op">=</span> <span class="fl">2</span>, color <span class="op">=</span> <span class="st">"gray60"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Stickiness (%)"</span>, y <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="../reference/figures/art-003-fig01-1.png" alt="Figure 1: Stickiness with programs on rows." width="100%"><p class="caption">
Figure 1: Stickiness with programs on rows.
</p>
</div>
<p>The vertical reference line is the overall stickiness of the people
in a panel.</p>
<p>Alternatively, we can consider the dual chart, swapping the roles of
the panels and rows. Here the rows are people and panels are programs,
facilitating comparisons of different people within a program. Over many
years of publishing research using MIDFIELD data, placing people on the
rows of the multiway chart has been perhaps our most frequently used
design.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">DT</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">stickiness</span>, y <span class="op">=</span> <span class="va">people</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">program</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">1</span>, as.table <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="va">program_stickiness</span><span class="op">)</span>, linetype <span class="op">=</span> <span class="fl">2</span>, color <span class="op">=</span> <span class="st">"gray60"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Stickiness (%)"</span>, y <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="../reference/figures/art-003-fig02-1.png" alt="Figure 1: Stickiness with programs in panels." width="100%"><p class="caption">
Figure 1: Stickiness with programs in panels.
</p>
</div>
<p>The vertical reference line is the overall stickiness of the program
in a panel.</p>
<p>The chart illustrates the importance of ordering the rows and panels.
We would conclude that Industrial/Systems Engineering is the stickiest
program of the four, followed by Civil, Mechanical, and Electrical in
descending order.</p>
<p>Because rows are ordered, one expects a generally increasing trend
within a panel. A response greater or smaller than expected creates a
visual asymmetry. For example, Asian students are asymmetrically lower
in Industrial/Systems Engineering.</p>
</div>
<div class="section level2">
<h2 id="tables">Tables<a class="anchor" aria-label="anchor" href="#tables"></a>
</h2>
<p>Data tables are often needed for publication. In this example, we
format the data in a conventional row-record form with the groups of
people in the first column labeling the rows and the program names
labeling the remaining columns.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Select the columns I want for the table</span></span>
<span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">program</span>, <span class="va">people</span>, <span class="va">stickiness</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Change factors to characters so rows/columns can be alphabetized</span></span>
<span><span class="va">tbl</span><span class="op">[</span>, <span class="va">people</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">people</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">tbl</span><span class="op">[</span>, <span class="va">program</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">program</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Transform from block records to row records</span></span>
<span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/dcast.data.table.html" class="external-link">dcast</a></span><span class="op">(</span><span class="va">tbl</span>, <span class="va">people</span> <span class="op">~</span> <span class="va">program</span>, value.var <span class="op">=</span> <span class="st">"stickiness"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Edit one column header</span></span>
<span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setattr.html" class="external-link">setnames</a></span><span class="op">(</span><span class="va">tbl</span>, old <span class="op">=</span> <span class="st">"people"</span>, new <span class="op">=</span> <span class="st">"People"</span>, skip_absent <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Groups with numbers below our reporting threshold are denoted NA or
omitted.</p>
<table class="table  lightable-paper" style='font-family: "Arial Narrow", arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;'>
<caption>
Table 1: Program stickiness (%)
</caption>
<thead><tr>
<th style="text-align:left;background-color: #c7eae5 !important;">
People
</th>
<th style="text-align:right;background-color: #c7eae5 !important;">
Civil
</th>
<th style="text-align:right;background-color: #c7eae5 !important;">
Electrical
</th>
<th style="text-align:right;background-color: #c7eae5 !important;">
Industrial/Systems
</th>
<th style="text-align:right;background-color: #c7eae5 !important;">
Mechanical
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;color: black !important;background-color: white !important;">
Asian Female
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
66.7
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
57.1
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
66.7
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;color: black !important;background-color: white !important;">
Asian Male
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
83.3
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
57.7
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
58.3
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
64.5
</td>
</tr>
<tr>
<td style="text-align:left;color: black !important;background-color: white !important;">
Black Male
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
NA
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
58.6
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
NA
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
63.3
</td>
</tr>
<tr>
<td style="text-align:left;color: black !important;background-color: white !important;">
Latine Male
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
47.0
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
37.8
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
NA
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
53.2
</td>
</tr>
<tr>
<td style="text-align:left;color: black !important;background-color: white !important;">
White Female
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
61.6
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
47.5
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
70.1
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
62.9
</td>
</tr>
<tr>
<td style="text-align:left;color: black !important;background-color: white !important;">
White Male
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
64.5
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
50.8
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
69.5
</td>
<td style="text-align:right;color: black !important;background-color: white !important;">
59.7
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Cleveland:1993" class="csl-entry">
Cleveland, William S. 1993. <em><span>Visualizing Data</span></em>.
Summit, NJ: <span>Hobart Press</span>.
</div>
<div id="ref-Mount+Zumel:2019:fluid-data" class="csl-entry">
Mount, John, and Nina Zumel. 2019. <span>“<span class="nocase">Coordinatized data: A fluid data
specification</span>.”</span> <span>Win Vector LLC</span>. <a href="http://winvector.github.io/FluidData/RowsAndColumns.html" class="external-link">http://winvector.github.io/FluidData/RowsAndColumns.html</a>.
</div>
</div>
<style type="text/css">
blockquote {
    padding:     10px 20px;
    margin:      0 0 20px;
    border-left: 0px
}
caption {
    color:       #525252;
    text-align:  left;
    font-weight: normal;
    font-size:   medium;
    line-height: 1.5;
}
</style>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://github.com/graphdr" class="external-link">Richard Layton</a>, Russell Long, Matthew Ohland, Marisa Orr, Susan Lord.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
