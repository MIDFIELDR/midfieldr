<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Impute FYE starting majors • midfieldr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Impute FYE starting majors">
<meta property="og:description" content="midfieldr">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">midfieldr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/getting_started.html">Getting started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/explore_multiway.html">Explore multiway data</a>
    </li>
    <li>
      <a href="../articles/explore_cip.html">Explore program CIP codes</a>
    </li>
    <li>
      <a href="../articles/get_programs.html">Gather programs</a>
    </li>
    <li>
      <a href="../articles/compute_stickiness.html">Compute stickiness</a>
    </li>
    <li>
      <a href="../articles/feasible_completion.html">Filter for program completion feasibility</a>
    </li>
    <li>
      <a href="../articles/compute_grad_rate.html">Compute graduation rate</a>
    </li>
    <li>
      <a href="../articles/impute_fye.html">Impute FYE starting majors</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Papers/Talks
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/pages/talks.html">Talks</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/pages/get_session.html">Session info</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../articles/pages/about_midfield.html">About</a>
</li>
<li>
  <a href="https://github.com/MIDFIELDR/midfieldr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="impute_fye_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Impute FYE starting majors</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/MIDFIELDR/midfieldr/blob/master/vignettes/impute_fye.Rmd"><code>vignettes/impute_fye.Rmd</code></a></small>
      <div class="hidden name"><code>impute_fye.Rmd</code></div>

    </div>

    
    
<p>Focus on:</p>
<ul>
<li>
<code>midfield_fye</code> (data set)</li>
<li><code><a href="../reference/filter_by_id.html">filter_by_id()</a></code></li>
</ul>
<p>With an optional look at:</p>
<ul>
<li><code>fye_next_cip()</code></li>
<li><code>fye_join_cats()</code></li>
<li><code>fye_mice()</code></li>
</ul>
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>Some US institutions have first year engineering (FYE) programs—typically a common first year curriculum that is a prerequisite for declaring an engineering major. For these FYE students, some persistence metrics require us to predict their “starting major.”</p>
<dl>
<dt>starting major</dt>
<dd>
<p>The degree-granting engineering program—Civil Engineering, Electrical Engineering, Mechanical Engineering, etc.—that we predict the student would have declared had they not been required to enroll in FYE.</p>
</dd>
</dl>
<p>Note that FYE students are neither undecided nor undeclared. Their institutions admitted them as engineering students. We just don’t know their preferred major. We have to predict the starting majors of FYE students to make fair comparisons across programs and institutions.</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="co"># packages used</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">midfieldr</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">midfielddata</span>)

<span class="co"># print max 20 rows, otherwise 5 rows each head/tail</span>
<span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span>(<span class="kw">datatable.print.nrows</span> <span class="kw">=</span> <span class="fl">20</span>, <span class="kw">datatable.print.topn</span> <span class="kw">=</span> <span class="fl">5</span>)</pre></body></html></div>
<p><br><a href="#top">▲ top of page</a></p>
</div>
<div id="how-the-imputed-majors-are-used" class="section level2">
<h2 class="hasAnchor">
<a href="#how-the-imputed-majors-are-used" class="anchor"></a>How the imputed majors are used</h2>
<p>A data frame of starting majors imputed for all FYE students in midfielddata is included with midfieldr as the built-in data set <code>midfield_fye</code>. The starting majors are encoded, as usual, with a 6-digit CIP code, keyed by student ID. View its help page by loading midfieldr and running</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r">? <span class="no">midfield_fye</span></pre></body></html></div>
<p>The data are loaded with midfieldr.</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="co"># view the example data</span>
<span class="no">midfield_fye</span>
<span class="co">#&gt;                id  start</span>
<span class="co">#&gt;    1: MID25783162 141901</span>
<span class="co">#&gt;    2: MID25783166 141901</span>
<span class="co">#&gt;    3: MID25783167 140901</span>
<span class="co">#&gt;    4: MID25783178 140701</span>
<span class="co">#&gt;    5: MID25783197 140701</span>
<span class="co">#&gt;   ---                   </span>
<span class="co">#&gt; 5988: MID26648435 140801</span>
<span class="co">#&gt; 5989: MID26648484 140201</span>
<span class="co">#&gt; 5990: MID26648508 141901</span>
<span class="co">#&gt; 5991: MID26648517 140201</span>
<span class="co">#&gt; 5992: MID26648544 141901</span></pre></body></html></div>
<p>We illustrate its usage in the <em>Compute the graduation rate metric</em> vignette <a href="compute_grad_rate.html">(link)</a>. In summary, if one has a working data frame of student IDs and starting majors that include the FYE codes “14XXXX” or “14YYYY”,</p>
<ul>
<li>extract the FYE IDs from the working data frame</li>
<li>subset <code>midfield_fye</code> using these IDs</li>
<li>replace the the FYE codes “14XXXX” or “14YYYY” in the working data frame with the imputed starting majors from <code>midfield_fye</code>
</li>
</ul>
<p>The imputed starting major should be consistent with a student’s race/ethnicity, sex, and institution because these are the variables used in the imputation.</p>
<p><strong>Example</strong> using the case study IDs.</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(<span class="no">exa_ever</span>)
<span class="co">#&gt;  chr [1:10135] "MID25783178" "MID25783197" "MID25783388" "MID25783441" ...</span></pre></body></html></div>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">matric</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/filter_by_id.html">filter_by_id</a></span>(<span class="no">midfieldstudents</span>,
  <span class="kw">keep_id</span> <span class="kw">=</span> <span class="no">exa_ever</span>,
  <span class="kw">keep_col</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"id"</span>, <span class="st">"cip6"</span>),
  <span class="kw">unique_row</span> <span class="kw">=</span> <span class="fl">TRUE</span>
)
<span class="no">rows_we_want</span> <span class="kw">&lt;-</span> <span class="no">matric</span>$<span class="no">cip</span> <span class="kw">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"14XXXX"</span>, <span class="st">"14YYYY"</span>)
<span class="no">engr</span> <span class="kw">&lt;-</span> <span class="no">matric</span>[!<span class="no">rows_we_want</span>]
<span class="no">fye</span> <span class="kw">&lt;-</span> <span class="no">matric</span>[<span class="no">rows_we_want</span>]

<span class="co"># join</span>
<span class="no">fye</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html">merge</a></span>(<span class="no">fye</span>, <span class="no">midfield_fye</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="st">"id"</span>, <span class="kw">all.x</span> <span class="kw">=</span> <span class="fl">TRUE</span>)

<span class="co"># add start column</span>
<span class="no">engr</span> <span class="kw">&lt;-</span> <span class="no">engr</span>[, <span class="fu">.</span>(<span class="no">id</span>, <span class="no">cip6</span>, <span class="kw">start</span> <span class="kw">=</span> <span class="no">cip6</span>)]

<span class="no">starters</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span>(<span class="no">fye</span>, <span class="no">engr</span>)
<span class="no">starters</span>[<span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span>(<span class="no">id</span>)]
<span class="co">#&gt;                 id   cip6  start</span>
<span class="co">#&gt;     1: MID25783178 14XXXX 140701</span>
<span class="co">#&gt;     2: MID25783197 14XXXX 140701</span>
<span class="co">#&gt;     3: MID25783388 14XXXX 141901</span>
<span class="co">#&gt;     4: MID25783441 14XXXX 140801</span>
<span class="co">#&gt;     5: MID25783491 14XXXX 141001</span>
<span class="co">#&gt;    ---                          </span>
<span class="co">#&gt; 10131: MID26696967 141901 141901</span>
<span class="co">#&gt; 10132: MID26696979 141901 141901</span>
<span class="co">#&gt; 10133: MID26697163 140101 140101</span>
<span class="co">#&gt; 10134: MID26697444 141901 141901</span>
<span class="co">#&gt; 10135: MID26697447 140701 140701</span>
<span class="no">starters</span>
<span class="co">#&gt;                 id   cip6  start</span>
<span class="co">#&gt;     1: MID25783178 14XXXX 140701</span>
<span class="co">#&gt;     2: MID25783197 14XXXX 140701</span>
<span class="co">#&gt;     3: MID25783388 14XXXX 141901</span>
<span class="co">#&gt;     4: MID25783441 14XXXX 140801</span>
<span class="co">#&gt;     5: MID25783491 14XXXX 141001</span>
<span class="co">#&gt;    ---                          </span>
<span class="co">#&gt; 10131: MID26696967 141901 141901</span>
<span class="co">#&gt; 10132: MID26696979 141901 141901</span>
<span class="co">#&gt; 10133: MID26697163 140101 140101</span>
<span class="co">#&gt; 10134: MID26697444 141901 141901</span>
<span class="co">#&gt; 10135: MID26697447 140701 140701</span></pre></body></html></div>
<p><br><a href="#top">▲ top of page</a></p>
</div>
<div id="how-the-imputed-majors-are-obtained" class="section level2">
<h2 class="hasAnchor">
<a href="#how-the-imputed-majors-are-obtained" class="anchor"></a>How the imputed majors are obtained</h2>
<p>The remainder of the vignette describes how the imputation is performed.</p>
<p>Predicting the starting major of FYE students takes one of two forms.</p>
<ol style="list-style-type: decimal">
<li><p>In the first instance, we have students who complete an FYE and declare an engineering major. This is the easy case–at the student’s first opportunity, they enrolled in an engineering major of their choosing. We use that major as our predicted starting major.</p></li>
<li><p>In the second instance, we have students who, after FYE, do not declare an engineering major. This is the more complicated case—the data provide no information regarding what engineering major the student would have declared originally had the institution not required them to enroll in FYE. For these students, we treat the starting major as missing data and impute a predicted value.</p></li>
</ol>
<p>We impute these missing values using multiple imputation as implemented in the mice package <span class="citation">(van Buuren and Groothuis-Oudshoorn, <a href="#ref-vanBuuren+Oudshoorn:2011" role="doc-biblioref">2011</a>)</span>.</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="co"># additional packages used for the imputation</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">midfielddata</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">data.table</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">mice</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">visdat</span>)</pre></body></html></div>
<div id="determine-a-students-first-major-after-fye" class="section level3">
<h3 class="hasAnchor">
<a href="#determine-a-students-first-major-after-fye" class="anchor"></a>1. Determine a student’s first major after FYE</h3>
<p>The variables used to predict the starting majors treated as missing values are institution, race, and sex. Though any subset of IDs could be used, we’ll start with all FYE students in the midfielddata data sets to show how we obtained the <code>midfield_fye</code> data frame described earlier.</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="co"># extract IDs of all FYE students in midfieldstudents</span>
<span class="no">rows_we_want</span> <span class="kw">&lt;-</span> <span class="no">midfieldstudents</span>$<span class="no">cip6</span> <span class="kw">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"14XXXX"</span>, <span class="st">"14YYYY"</span>)
<span class="no">columns_we_want</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"id"</span>)
<span class="no">fye</span> <span class="kw">&lt;-</span> <span class="no">midfieldstudents</span>[<span class="no">rows_we_want</span>, <span class="no">..columns_we_want</span>]

<span class="co"># examine the result</span>
<span class="no">fye</span>
<span class="co">#&gt;                id</span>
<span class="co">#&gt;    1: MID25783162</span>
<span class="co">#&gt;    2: MID25783166</span>
<span class="co">#&gt;    3: MID25783167</span>
<span class="co">#&gt;    4: MID25783178</span>
<span class="co">#&gt;    5: MID25783197</span>
<span class="co">#&gt;   ---            </span>
<span class="co">#&gt; 5988: MID26648435</span>
<span class="co">#&gt; 5989: MID26648484</span>
<span class="co">#&gt; 5990: MID26648508</span>
<span class="co">#&gt; 5991: MID26648517</span>
<span class="co">#&gt; 5992: MID26648544</span></pre></body></html></div>
<p><code><a href="../reference/cip_after_fye.html">cip_after_fye()</a></code> accesses <code>midfieldstudents</code> and <code>midfieldterms</code> (or their equivalents) and returns the CIP codes of a student’s first program after FYE. A CIP code of NA indicates that the student enrolled in no program after FYE.</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="co"># post-FYE major</span>
<span class="no">fye_id</span> <span class="kw">&lt;-</span> <span class="no">fye</span>$<span class="no">id</span>
<span class="no">cip_post_fye</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/cip_after_fye.html">cip_after_fye</a></span>(<span class="no">fye_id</span>)

<span class="co"># examine the result</span>
<span class="no">cip_post_fye</span>
<span class="co">#&gt;                id   cip6</span>
<span class="co">#&gt;    1: MID25783162 520301</span>
<span class="co">#&gt;    2: MID25783166   &lt;NA&gt;</span>
<span class="co">#&gt;    3: MID25783167 140901</span>
<span class="co">#&gt;    4: MID25783178 140701</span>
<span class="co">#&gt;    5: MID25783197 140701</span>
<span class="co">#&gt;   ---                   </span>
<span class="co">#&gt; 5988: MID26648435   &lt;NA&gt;</span>
<span class="co">#&gt; 5989: MID26648484   &lt;NA&gt;</span>
<span class="co">#&gt; 5990: MID26648508   &lt;NA&gt;</span>
<span class="co">#&gt; 5991: MID26648517   &lt;NA&gt;</span>
<span class="co">#&gt; 5992: MID26648544   &lt;NA&gt;</span></pre></body></html></div>
<p>To learn more, open the help page by running</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r">? <span class="no">cip_after_fye</span></pre></body></html></div>
</div>
<div id="set-up-the-imputation-data-frame" class="section level3">
<h3 class="hasAnchor">
<a href="#set-up-the-imputation-data-frame" class="anchor"></a>2. Set up the imputation data frame</h3>
<p>Our next step is to treat all non-engineering majors as missing values, converting them to NA. Engineering CIPs start with “14,” so we identify all rows that do not start with 14.</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="co"># reset CIP as "start" column</span>
<span class="no">engr_post_fye</span> <span class="kw">&lt;-</span> <span class="no">cip_post_fye</span>[, <span class="fu">.</span>(<span class="no">id</span>, <span class="kw">start</span> <span class="kw">=</span> <span class="no">cip6</span>)]

<span class="co"># find NOT engineering rows</span>
<span class="no">rows_we_want</span> <span class="kw">&lt;-</span> !<span class="fu"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span>(<span class="st">"^14"</span>, <span class="no">engr_post_fye</span>$<span class="no">start</span>)

<span class="co"># set NOT engineering to NA</span>
<span class="no">engr_post_fye</span>[<span class="no">rows_we_want</span>, <span class="no">start</span> <span class="kw">:=</span> <span class="fl">NA_character_</span>]

<span class="co"># examine the result</span>
<span class="no">engr_post_fye</span>
<span class="co">#&gt;                id  start</span>
<span class="co">#&gt;    1: MID25783162   &lt;NA&gt;</span>
<span class="co">#&gt;    2: MID25783166   &lt;NA&gt;</span>
<span class="co">#&gt;    3: MID25783167 140901</span>
<span class="co">#&gt;    4: MID25783178 140701</span>
<span class="co">#&gt;    5: MID25783197 140701</span>
<span class="co">#&gt;   ---                   </span>
<span class="co">#&gt; 5988: MID26648435   &lt;NA&gt;</span>
<span class="co">#&gt; 5989: MID26648484   &lt;NA&gt;</span>
<span class="co">#&gt; 5990: MID26648508   &lt;NA&gt;</span>
<span class="co">#&gt; 5991: MID26648517   &lt;NA&gt;</span>
<span class="co">#&gt; 5992: MID26648544   &lt;NA&gt;</span></pre></body></html></div>
<p>Here we see the two forms of starting majors for FYE students. A CIP code in the <code>start</code> column indicates they transitioned to this engineering major after FYE. We treat this major as their predicted starting major.</p>
<p>A <code>start</code> value of NA indicates a non-engineering post-FYE major, which we treat as missing data for the imputation.</p>
<p>Our multivariate imputation process operates on categorical variables. We have selected institution, race/ethnicity, and sex as out categories.</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">dplyr</span>)
<span class="no">inst_id</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html">semi_join</a></span>(<span class="no">midfieldstudents</span>, <span class="no">engr_post_fye</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="st">"id"</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="no">id</span>, <span class="no">institution</span>)

<span class="no">engr_post_fye</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span>(<span class="no">engr_post_fye</span>, <span class="no">inst_id</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="st">"id"</span>)

<span class="no">race_sex</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/filter_by_id.html">filter_by_id</a></span>(<span class="no">midfieldstudents</span>,
  <span class="kw">keep_id</span> <span class="kw">=</span> <span class="no">engr_post_fye</span>$<span class="no">id</span>,
  <span class="kw">keep_col</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"id"</span>, <span class="st">"race"</span>, <span class="st">"sex"</span>),
  <span class="kw">unique_row</span> <span class="kw">=</span> <span class="fl">TRUE</span>
)
<span class="no">engr_post_fye</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span>(<span class="no">engr_post_fye</span>, <span class="no">race_sex</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="st">"id"</span>)

<span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setDT.html">setDT</a></span>(<span class="no">engr_post_fye</span>)

<span class="no">engr_post_fye</span></pre></body></html></div>
<div class="sourceCode" id="cb12"><html><body><pre class="r"><span class="no">cip_after_fye</span>

<span class="no">fye_join_categories</span>

<span class="no">fye_mice</span></pre></body></html></div>
</div>
</div>
<div id="references" class="section level2">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<div id="refs">
<div id="ref-vanBuuren+Oudshoorn:2011">
<p>van Buuren S and Groothuis-Oudshoorn K (2011) mice: Multivariate Imputation by Chained Equations in R. <em>Journal of Statistical Software</em> <strong>45</strong>(3), 1–67 <a href="https://www.jstatsoft.org/v45/i03/">https://www.jstatsoft.org/v45/i03/</a></p>
</div>
</div>
</div>
<div id="appendix" class="section level2">
<h2 class="hasAnchor">
<a href="#appendix" class="anchor"></a>Appendix</h2>
<div id="complete-script" class="section level3">
<h3 class="hasAnchor">
<a href="#complete-script" class="anchor"></a>Complete script</h3>
<p>The vignette code chunks are collected below in a single, condensed script.</p>
<div class="sourceCode" id="cb13"><html><body><pre class="r"># TBD</pre></body></html></div>
<p><br><a href="#top">▲ top of page </a><br><a href="../index.html">◁ main page </a></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Richard Layton, Russell Long, Matthew Ohland, US National Science Foundation.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
