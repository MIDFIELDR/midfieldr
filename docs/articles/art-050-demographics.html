<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="midfieldr">
<title>Demographics (left outer joins) • midfieldr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Demographics (left outer joins)">
<meta property="og:description" content="midfieldr">
<meta property="og:image" content="https://midfieldr.github.io/midfieldr/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">midfieldr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0.9026</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/art-000-getting-started.html">Getting started</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-case-study">Case study</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-case-study">
    <a class="dropdown-item" href="../articles/art-001-case-goals.html">Goals</a>
    <a class="dropdown-item" href="../articles/art-002-case-data.html">Data</a>
    <a class="dropdown-item" href="../articles/art-003-case-results.html">Results</a>
  </div>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-vignettes">Vignettes</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-vignettes">
    <a class="dropdown-item" href="../articles/art-010-data-sufficiency.html">Data sufficiency</a>
    <a class="dropdown-item" href="../articles/art-020-degree-seeking.html">Degree seeking (inner joins)</a>
    <a class="dropdown-item" href="../articles/art-030-programs.html">Programs</a>
    <a class="dropdown-item" href="../articles/art-040-completion.html">Completion status</a>
    <a class="dropdown-item" href="../articles/art-050-demographics.html">Demographics (left outer joins)</a>
    <a class="dropdown-item" href="../articles/art-060-multiway.html">Multiway data and charts</a>
    <a class="dropdown-item" href="../articles/art-070-fye.html">FYE programs</a>
    <a class="dropdown-item" href="../articles/art-080-grad-rate.html">Graduation rate</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/MIDFIELDR/midfieldr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Demographics (left outer joins)</h1>
            
            <h4 data-toc-skip class="date">2022-09-27</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/MIDFIELDR/midfieldr/blob/HEAD/vignettes/art-050-demographics.Rmd" class="external-link"><code>vignettes/art-050-demographics.Rmd</code></a></small>
      <div class="d-none name"><code>art-050-demographics.Rmd</code></div>
    </div>

    
    
<p>As our processing of longitudinal Student Unit Records (SURs)
approaches completion, a typical step is adding columns for student race
and sex (demographics).</p>
<p>Within this context, this vignette illustrates using left outer joins
to add columns from any of the midfielddata tables to our working data
frame. We use MIDFIELD data, but no midfieldr functions are
required.</p>
<div class="section level2">
<h2 id="method">Method<a class="anchor" aria-label="anchor" href="#method"></a>
</h2>
<p>We add columns from midfielddata tables to a working data frame using
a left-outer join. The usual shared column name to merge on is
<code>mcid</code>. One of the most common joins is student demographics
(race and sex) from the <code>student</code> table.</p>
</div>
<div class="section level2">
<h2 id="population">Population<a class="anchor" aria-label="anchor" href="#population"></a>
</h2>
<p>If you are writing your own script to follow along, we start with
these packages:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Packages</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/MIDFIELDR/midfieldr" class="external-link">"midfieldr"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/MIDFIELDR/midfielddata" class="external-link">"midfielddata"</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressPackageStartupMessages</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://r-datatable.com" class="external-link">"data.table"</a></span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Printing options for data.table</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span></span>
<span>  datatable.print.nrows <span class="op">=</span> <span class="fl">15</span>,</span>
<span>  datatable.print.topn <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  datatable.print.class <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><strong>Importing.</strong> Load the midfielddata data tables.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load data sets from midfielddata</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">student</span>, <span class="va">term</span>, <span class="va">degree</span><span class="op">)</span></span></code></pre></div>
<p>Start with the student IDs from the case study vignettes. You can
view the help page (and data dictionary) by running</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Run in Console</span></span>
<span><span class="op">?</span> <span class="va">study_mcid</span></span></code></pre></div>
<p>These data are the IDs of all students ever enrolled in four
engineering programs: Civil, Electrical, Industrial/Systems, and
Mechanical Engineering.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># A convenient set of IDs</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">study_mcid</span><span class="op">)</span></span>
<span><span class="va">DT</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;              mcid</span></span>
<span><span class="co">#&gt;            &lt;char&gt;</span></span>
<span><span class="co">#&gt;    1: MID25783178</span></span>
<span><span class="co">#&gt;    2: MID25783441</span></span>
<span><span class="co">#&gt;    3: MID25783491</span></span>
<span><span class="co">#&gt;    4: MID25783912</span></span>
<span><span class="co">#&gt;    5: MID25784025</span></span>
<span><span class="co">#&gt;   ---            </span></span>
<span><span class="co">#&gt; 7129: MID26696958</span></span>
<span><span class="co">#&gt; 7130: MID26696967</span></span>
<span><span class="co">#&gt; 7131: MID26697163</span></span>
<span><span class="co">#&gt; 7132: MID26697444</span></span>
<span><span class="co">#&gt; 7133: MID26697447</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="left-outer-joins">Left outer joins<a class="anchor" aria-label="anchor" href="#left-outer-joins"></a>
</h2>
<p>An left outer join is a merge operation between two data frame which
returns all observations (rows) of the “left” data frame and all the
matching rows in the “right” data frame, where specified variables are
used for matching.</p>
<p>Using data.table syntax, we have two approaches: <code><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge()</a></code>
and the <code>Y[X, j]</code> syntax.</p>
<p><strong>Using merge().</strong> Using the data.table
<code><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge()</a></code> syntax, the <code>all.x = TRUE</code> argument
creates the left-outer join. To join only race and sex from
<code>student</code>, we extract those columns before the join.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Subset of student data frame to join</span></span>
<span><span class="va">cols_to_join</span> <span class="op">&lt;-</span> <span class="va">student</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">race</span>, <span class="va">sex</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">DT</span>, <span class="va">cols_to_join</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span>, all.x <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;              mcid            race    sex</span></span>
<span><span class="co">#&gt;            &lt;char&gt;          &lt;char&gt; &lt;char&gt;</span></span>
<span><span class="co">#&gt;    1: MID25783178           Black   Male</span></span>
<span><span class="co">#&gt;    2: MID25783441           White   Male</span></span>
<span><span class="co">#&gt;    3: MID25783491           White   Male</span></span>
<span><span class="co">#&gt;    4: MID25783912           White   Male</span></span>
<span><span class="co">#&gt;    5: MID25784025           Black   Male</span></span>
<span><span class="co">#&gt;   ---                                   </span></span>
<span><span class="co">#&gt; 7129: MID26696958           White   Male</span></span>
<span><span class="co">#&gt; 7130: MID26696967           White   Male</span></span>
<span><span class="co">#&gt; 7131: MID26697163 Hispanic/Latinx   Male</span></span>
<span><span class="co">#&gt; 7132: MID26697444           White   Male</span></span>
<span><span class="co">#&gt; 7133: MID26697447           Asian   Male</span></span></code></pre>
<p>Alternatively, one can include the columns selection within the merge
operation.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">DT</span>, <span class="va">student</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">race</span>, <span class="va">sex</span><span class="op">)</span><span class="op">]</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span>, all.x <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;              mcid            race    sex</span></span>
<span><span class="co">#&gt;            &lt;char&gt;          &lt;char&gt; &lt;char&gt;</span></span>
<span><span class="co">#&gt;    1: MID25783178           Black   Male</span></span>
<span><span class="co">#&gt;    2: MID25783441           White   Male</span></span>
<span><span class="co">#&gt;    3: MID25783491           White   Male</span></span>
<span><span class="co">#&gt;    4: MID25783912           White   Male</span></span>
<span><span class="co">#&gt;    5: MID25784025           Black   Male</span></span>
<span><span class="co">#&gt;   ---                                   </span></span>
<span><span class="co">#&gt; 7129: MID26696958           White   Male</span></span>
<span><span class="co">#&gt; 7130: MID26696967           White   Male</span></span>
<span><span class="co">#&gt; 7131: MID26697163 Hispanic/Latinx   Male</span></span>
<span><span class="co">#&gt; 7132: MID26697444           White   Male</span></span>
<span><span class="co">#&gt; 7133: MID26697447           Asian   Male</span></span></code></pre>
<p><strong>Using Y[X, j].</strong> The second approach—computationally
more efficient—uses the data.table <code>Y[X, j]</code> syntax were
<code>X</code> is the “left” data (all rows returned) and <code>Y</code>
the “right” (matching rows returned).</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Fresh start</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">study_mcid</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Left-outer join student to DT</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">student</span><span class="op">[</span><span class="va">DT</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">race</span>, <span class="va">sex</span><span class="op">)</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">DT</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;              mcid            race    sex</span></span>
<span><span class="co">#&gt;            &lt;char&gt;          &lt;char&gt; &lt;char&gt;</span></span>
<span><span class="co">#&gt;    1: MID25783178           Black   Male</span></span>
<span><span class="co">#&gt;    2: MID25783441           White   Male</span></span>
<span><span class="co">#&gt;    3: MID25783491           White   Male</span></span>
<span><span class="co">#&gt;    4: MID25783912           White   Male</span></span>
<span><span class="co">#&gt;    5: MID25784025           Black   Male</span></span>
<span><span class="co">#&gt;   ---                                   </span></span>
<span><span class="co">#&gt; 7129: MID26696958           White   Male</span></span>
<span><span class="co">#&gt; 7130: MID26696967           White   Male</span></span>
<span><span class="co">#&gt; 7131: MID26697163 Hispanic/Latinx   Male</span></span>
<span><span class="co">#&gt; 7132: MID26697444           White   Male</span></span>
<span><span class="co">#&gt; 7133: MID26697447           Asian   Male</span></span></code></pre>
<p>The <code>on</code> argument defines the shared column to use in
matching. The <code>j</code> argument, .(mcid, race, sex), defines the
columns from both data frames to return. In the <code>Y[X, j, on]</code>
configuration, all rows of <code>X</code> are returned plus matching
rows from <code>Y</code> with NA in columns of <code>Y</code> where
there is no match.</p>
<p><strong>Demonstrate equivalence.</strong> Showing that the two
approaches produce the same result.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Fresh start</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">study_mcid</span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">DT</span>, <span class="va">student</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">race</span>, <span class="va">sex</span><span class="op">)</span><span class="op">]</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span>, all.x <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setkey.html" class="external-link">setkey</a></span><span class="op">(</span><span class="va">x</span>, <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="va">student</span><span class="op">[</span><span class="va">DT</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">race</span>, <span class="va">sex</span><span class="op">)</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p><strong>Order matters.</strong> In the <a href="art-020-degree-seeking.html">Degree seeking (inner joins)</a>
vignette, we show that for inner joins <code>X[Y, j]</code> and
<code>Y[X, j]</code> return the same result. Not so with outer
joins.</p>
<p>In left-outer joins, <code>Y[X, j]</code> returns all rows of
<code>X</code> and <code>X[Y, j]</code> returns all rows of
<code>Y</code>.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># What we want</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">student</span><span class="op">[</span><span class="va">DT</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">race</span>, <span class="va">sex</span><span class="op">)</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Not what we want</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="va">student</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">race</span>, <span class="va">sex</span><span class="op">)</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Equal?</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Different number of rows"</span></span>
<span></span>
<span><span class="co"># Compare N rows</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 7133</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 97640</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="columns-from-student">Columns from <code>student</code><a class="anchor" aria-label="anchor" href="#columns-from-student"></a>
</h2>
<p>Above we added the race and sex columns from <code>student</code> to
a working data frame. Depending on the goals of a study, other columns
could be added as well. The variables available in <code>student</code>
are:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Variables in the practice data set</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">student</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "mcid"           "institution"    "transfer"       "hours_transfer"</span></span>
<span><span class="co">#&gt;  [5] "race"           "sex"            "age"            "us_citizen"    </span></span>
<span><span class="co">#&gt;  [9] "home_zip"       "high_school"    "sat_math"       "sat_verbal"    </span></span>
<span><span class="co">#&gt; [13] "act_comp"</span></span></code></pre></div>
<p>Adding transfer status and transfer credit hours.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Fresh start</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">study_mcid</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add variables from student to DT</span></span>
<span><span class="va">student</span><span class="op">[</span><span class="va">DT</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">transfer</span>, <span class="va">hours_transfer</span><span class="op">)</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt;              mcid              transfer hours_transfer</span></span>
<span><span class="co">#&gt;            &lt;char&gt;                &lt;char&gt;          &lt;num&gt;</span></span>
<span><span class="co">#&gt;    1: MID25783178 First-Time in College             NA</span></span>
<span><span class="co">#&gt;    2: MID25783441 First-Time in College             NA</span></span>
<span><span class="co">#&gt;    3: MID25783491 First-Time in College             NA</span></span>
<span><span class="co">#&gt;    4: MID25783912 First-Time in College             NA</span></span>
<span><span class="co">#&gt;    5: MID25784025 First-Time in College             NA</span></span>
<span><span class="co">#&gt;   ---                                                 </span></span>
<span><span class="co">#&gt; 7129: MID26696958 First-Time in College             NA</span></span>
<span><span class="co">#&gt; 7130: MID26696967 First-Time in College             NA</span></span>
<span><span class="co">#&gt; 7131: MID26697163 First-Time in College             NA</span></span>
<span><span class="co">#&gt; 7132: MID26697444 First-Time in College             NA</span></span>
<span><span class="co">#&gt; 7133: MID26697447 First-Time in College             NA</span></span></code></pre></div>
<p>Adding SAT scores.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add variables from student to DT</span></span>
<span><span class="va">student</span><span class="op">[</span><span class="va">DT</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">sat_math</span>, <span class="va">sat_verbal</span><span class="op">)</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt;              mcid sat_math sat_verbal</span></span>
<span><span class="co">#&gt;            &lt;char&gt;    &lt;num&gt;      &lt;num&gt;</span></span>
<span><span class="co">#&gt;    1: MID25783178      642        486</span></span>
<span><span class="co">#&gt;    2: MID25783441      680        486</span></span>
<span><span class="co">#&gt;    3: MID25783491      540        555</span></span>
<span><span class="co">#&gt;    4: MID25783912      570        685</span></span>
<span><span class="co">#&gt;    5: MID25784025      490        544</span></span>
<span><span class="co">#&gt;   ---                                </span></span>
<span><span class="co">#&gt; 7129: MID26696958       NA         NA</span></span>
<span><span class="co">#&gt; 7130: MID26696967       NA         NA</span></span>
<span><span class="co">#&gt; 7131: MID26697163       NA         NA</span></span>
<span><span class="co">#&gt; 7132: MID26697444       NA         NA</span></span>
<span><span class="co">#&gt; 7133: MID26697447       NA         NA</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="columns-from-term">Columns from <code>term</code><a class="anchor" aria-label="anchor" href="#columns-from-term"></a>
</h2>
<p>Joining variables from degree gives us the opportunity to show that
in left-outer joins, where rows in <code>X</code> have multiple matches
in <code>Y</code>, a row in <code>X</code> is added for every match in
<code>Y</code>.</p>
<p>The variables available in <code>term</code> are:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Variables in the practice data set</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">term</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "mcid"                "institution"         "term"               </span></span>
<span><span class="co">#&gt;  [4] "cip6"                "level"               "standing"           </span></span>
<span><span class="co">#&gt;  [7] "coop"                "hours_term"          "hours_term_attempt" </span></span>
<span><span class="co">#&gt; [10] "hours_cumul"         "hours_cumul_attempt" "gpa_term"           </span></span>
<span><span class="co">#&gt; [13] "gpa_cumul"</span></span></code></pre></div>
<p>Adding institution. Because term has multiple rows per student (one
row per term per ID), we get a row for every instance in
<code>term</code> with a matching ID. Add a <code><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique()</a></code>
function to remove duplicates.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Fresh start</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">study_mcid</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add variables from term to DT</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">term</span><span class="op">[</span><span class="va">DT</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">institution</span><span class="op">)</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">x</span><span class="op">[</span><span class="op">]</span></span>
<span><span class="co">#&gt;               mcid   institution</span></span>
<span><span class="co">#&gt;             &lt;char&gt;        &lt;char&gt;</span></span>
<span><span class="co">#&gt;     1: MID25783178 Institution M</span></span>
<span><span class="co">#&gt;     2: MID25783178 Institution M</span></span>
<span><span class="co">#&gt;     3: MID25783178 Institution M</span></span>
<span><span class="co">#&gt;     4: MID25783178 Institution M</span></span>
<span><span class="co">#&gt;     5: MID25783178 Institution M</span></span>
<span><span class="co">#&gt;    ---                          </span></span>
<span><span class="co">#&gt; 74782: MID26697447 Institution L</span></span>
<span><span class="co">#&gt; 74783: MID26697447 Institution L</span></span>
<span><span class="co">#&gt; 74784: MID26697447 Institution L</span></span>
<span><span class="co">#&gt; 74785: MID26697447 Institution L</span></span>
<span><span class="co">#&gt; 74786: MID26697447 Institution L</span></span>
<span></span>
<span><span class="co"># Remove duplicate rows</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="co">#&gt;              mcid   institution</span></span>
<span><span class="co">#&gt;            &lt;char&gt;        &lt;char&gt;</span></span>
<span><span class="co">#&gt;    1: MID25783178 Institution M</span></span>
<span><span class="co">#&gt;    2: MID25783441 Institution M</span></span>
<span><span class="co">#&gt;    3: MID25783491 Institution M</span></span>
<span><span class="co">#&gt;    4: MID25783912 Institution M</span></span>
<span><span class="co">#&gt;    5: MID25784025 Institution M</span></span>
<span><span class="co">#&gt;   ---                          </span></span>
<span><span class="co">#&gt; 7129: MID26696958 Institution L</span></span>
<span><span class="co">#&gt; 7130: MID26696967 Institution L</span></span>
<span><span class="co">#&gt; 7131: MID26697163 Institution L</span></span>
<span><span class="co">#&gt; 7132: MID26697444 Institution L</span></span>
<span><span class="co">#&gt; 7133: MID26697447 Institution L</span></span></code></pre></div>
<p>Add program. Here, after removing duplicates, we still have more rows
that we started with because over time students switch majors resulting
in more than one CIP code associated with their ID over the time span of
the SURs.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add variables from term to DT</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">term</span><span class="op">[</span><span class="va">DT</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">cip6</span><span class="op">)</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="co">#&gt;               mcid   cip6</span></span>
<span><span class="co">#&gt;             &lt;char&gt; &lt;char&gt;</span></span>
<span><span class="co">#&gt;     1: MID25783178 140102</span></span>
<span><span class="co">#&gt;     2: MID25783178 140701</span></span>
<span><span class="co">#&gt;     3: MID25783178 143501</span></span>
<span><span class="co">#&gt;     4: MID25783441 140102</span></span>
<span><span class="co">#&gt;     5: MID25783441 140801</span></span>
<span><span class="co">#&gt;    ---                   </span></span>
<span><span class="co">#&gt; 13769: MID26697444 260701</span></span>
<span><span class="co">#&gt; 13770: MID26697444 040201</span></span>
<span><span class="co">#&gt; 13771: MID26697444 240199</span></span>
<span><span class="co">#&gt; 13772: MID26697447 140701</span></span>
<span><span class="co">#&gt; 13773: MID26697447 141001</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="columns-from-degree">Columns from <code>degree</code><a class="anchor" aria-label="anchor" href="#columns-from-degree"></a>
</h2>
<p>Joining variables from degree gives us the opportunity to show that
in left-outer joins, where rows in <code>X</code> have no match in
<code>Y</code>, the <code>Y</code> column values are NA.</p>
<p>The variables available in <code>degree</code> are:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Variables in the practice data set</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">degree</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "mcid"        "institution" "term_degree" "cip6"        "degree"</span></span></code></pre></div>
<p>Add degree term and CIP. Where rows in <code>DT</code> have no match
in <code>degree</code>, the <code>degree</code> column values are
NA.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add variables from degree to DT</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">degree</span><span class="op">[</span><span class="va">DT</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">term_degree</span>, <span class="va">cip6</span><span class="op">)</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">x</span><span class="op">[</span><span class="op">]</span></span>
<span><span class="co">#&gt;              mcid term_degree   cip6</span></span>
<span><span class="co">#&gt;            &lt;char&gt;      &lt;char&gt; &lt;char&gt;</span></span>
<span><span class="co">#&gt;    1: MID25783178       20001 143501</span></span>
<span><span class="co">#&gt;    2: MID25783441       19963 140801</span></span>
<span><span class="co">#&gt;    3: MID25783491       20001 141001</span></span>
<span><span class="co">#&gt;    4: MID25783912       20001 143501</span></span>
<span><span class="co">#&gt;    5: MID25784025        &lt;NA&gt;   &lt;NA&gt;</span></span>
<span><span class="co">#&gt;   ---                               </span></span>
<span><span class="co">#&gt; 7129: MID26696958        &lt;NA&gt;   &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 7130: MID26696967       20141 141901</span></span>
<span><span class="co">#&gt; 7131: MID26697163       20133 141901</span></span>
<span><span class="co">#&gt; 7132: MID26697444       20151 240199</span></span>
<span><span class="co">#&gt; 7133: MID26697447       20154 141001</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="closing">Closing<a class="anchor" aria-label="anchor" href="#closing"></a>
</h2>
<p>Using data.table syntax, we demonstrate left outer joins for adding
columns from midfielddata tables to a working data frame.</p>
<p>Adding student demographic columns is typical in MIDFIELD research
because race/ethnicity and sex are so often used for grouping and
summarizing.</p>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" line-spacing="2">
<div id="ref-Dowle+Srinivasan:2021:data.table" class="csl-entry">
Dowle, M., &amp; Srinivasan, A. (2021). <em><span class="nocase">data.table: Extension of data.frame</span></em>.
R package version 1.14.2. <a href="https://CRAN.R-project.org/package=data.table" class="external-link">https://CRAN.R-project.org/package=data.table</a>
</div>
</div>
</div>
<div class="section level2">
<h2 id="appendix">Appendix<a class="anchor" aria-label="anchor" href="#appendix"></a>
</h2>
<p>We conclude each vignette by collecting its code chunks in a single,
condensed script for the convenience of those who wish to copy it into
their own R file.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Packages</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/MIDFIELDR/midfieldr" class="external-link">"midfieldr"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/MIDFIELDR/midfielddata" class="external-link">"midfielddata"</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressPackageStartupMessages</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://r-datatable.com" class="external-link">"data.table"</a></span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Printing options for data.table</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span></span>
<span>  datatable.print.nrows <span class="op">=</span> <span class="fl">15</span>,</span>
<span>  datatable.print.topn <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  datatable.print.class <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load data sets from midfielddata</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">student</span>, <span class="va">term</span>, <span class="va">degree</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Using merge</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">study_mcid</span><span class="op">)</span></span>
<span><span class="va">cols_to_join</span> <span class="op">&lt;-</span> <span class="va">student</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">race</span>, <span class="va">sex</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">DT</span>, <span class="va">cols_to_join</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span>, all.x <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">DT</span>, <span class="va">student</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">race</span>, <span class="va">sex</span><span class="op">)</span><span class="op">]</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span>, all.x <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Using Y[X, j]</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">study_mcid</span><span class="op">)</span></span>
<span><span class="va">student</span><span class="op">[</span><span class="va">DT</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">race</span>, <span class="va">sex</span><span class="op">)</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Compare</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">DT</span>, <span class="va">student</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">race</span>, <span class="va">sex</span><span class="op">)</span><span class="op">]</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span>, all.x <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setkey.html" class="external-link">setkey</a></span><span class="op">(</span><span class="va">x</span>, <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="va">student</span><span class="op">[</span><span class="va">DT</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">race</span>, <span class="va">sex</span><span class="op">)</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Order matters</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">student</span><span class="op">[</span><span class="va">DT</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">race</span>, <span class="va">sex</span><span class="op">)</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="va">student</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">race</span>, <span class="va">sex</span><span class="op">)</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Columns from student</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">student</span><span class="op">)</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">study_mcid</span><span class="op">)</span></span>
<span><span class="va">student</span><span class="op">[</span><span class="va">DT</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">transfer</span>, <span class="va">hours_transfer</span><span class="op">)</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">student</span><span class="op">[</span><span class="va">DT</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">sat_math</span>, <span class="va">sat_verbal</span><span class="op">)</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Columns from term</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">term</span><span class="op">)</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">study_mcid</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">term</span><span class="op">[</span><span class="va">DT</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">institution</span><span class="op">)</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">term</span><span class="op">[</span><span class="va">DT</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">cip6</span><span class="op">)</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Columns from degree</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">degree</span><span class="op">)</span></span>
<span><span class="va">degree</span><span class="op">[</span><span class="va">DT</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">term_degree</span>, <span class="va">cip6</span><span class="op">)</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<style type="text/css">
blockquote {
    padding: 10px 20px;
    margin: 0 0 20px;
    font-size: 12px;
    border-left: 0px solid
}
</style>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://github.com/graphdr" class="external-link">Richard Layton</a>, Russell Long, Matthew Ohland, Marisa Orr, Susan Lord, US National Science Foundation.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
