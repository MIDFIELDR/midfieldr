<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="midfieldr">
<title>Case study programs • midfieldr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="../deps/bs3compat-0.2.5.1/tabs.js"></script><script src="../deps/bs3compat-0.2.5.1/bs3compat.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<link href="../syntax-highlighting.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Case study programs">
<meta property="og:description" content="midfieldr">
<meta property="og:image" content="https://midfieldr.github.io/midfieldr/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc" data-headroom>
    

      <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a class="navbar-brand mb-0 h1" href="../index.html">midfieldr</a>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <button type="button" id="version-badge" class="badge badge-default d-none d-lg-block" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Released version">1.0.0.9020</button>

    <div id="navbar" class="collapse navbar-collapse">
      <ul class="navbar-nav mr-auto ml-3">
<li class="nav-item">
  <a class="nav-link" href="../articles/art-000-getting-started.html">Getting started</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-case-study">Case study</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-case-study">
    <a class="dropdown-item" href="../articles/art-002-case-study-programs.html">Programs</a>
    <a class="dropdown-item" href="../articles/art-004-case-study-students.html">Students</a>
    <a class="dropdown-item" href="../articles/art-006-case-study-stickiness.html">Stickiness</a>
    <a class="dropdown-item" href="../articles/art-008-case-study-grad-rate.html">Graduation rate</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-vignettes">Vignettes</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-vignettes">
    <a class="dropdown-item" href="../articles/art-010-program-codes.html">Program codes and names</a>
    <a class="dropdown-item" href="../articles/art-015-subsetting-midfield-data.html">Subsetting MIDFIELD data</a>
    <a class="dropdown-item" href="../articles/art-020-data-sufficiency.html">Data sufficiency</a>
    <a class="dropdown-item" href="../articles/art-030-timely-completion.html">Timely completion</a>
    <a class="dropdown-item" href="../articles/art-040-fye-programs.html">FYE programs</a>
    <a class="dropdown-item" href="../articles/art-050-multiway-graphs.html">Multiway graphs</a>
    <a class="dropdown-item" href="../articles/art-060-tabulating-data.html">Tabulating data</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control mr-sm-2" aria-label="Search" name="search-input" data-search-index="/search.json" id="search-input" placeholder="Search..." autocomplete="off">
</form>

      <ul class="navbar-nav ml-1">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/MIDFIELDR/midfieldr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
  </div>
</nav><div class="container template-article">
<script src="art-002-case-study-programs_files/header-attrs-2.9/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <img src="../package-logo.png" class="pkg-logo" alt=""><div class="page-header pb-2 mt-4 mb-2 border-bottom toc-ignore">
      <h1 class="display-4" data-toc-skip>Case study programs</h1>
                        <h4 data-toc-skip class="author">Richard Layton</h4>
            
            <h4 data-toc-skip class="date">2021-07-14</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/MIDFIELDR/midfieldr/blob/master/vignettes/art-002-case-study-programs.Rmd" class="external-link"><code>vignettes/art-002-case-study-programs.Rmd</code></a></small>
      <div class="d-none name"><code>art-002-case-study-programs.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor" aria-hidden="true"></a>Introduction</h2>
<p>The case study is a tour of a typical workflow with student unit record data. For the sake of brevity, we focus on the logic of the analysis and leave the detailed discussion of functions and arguments to later vignettes.</p>
<p>Assuming you completed the introduction to the four data tables (in <a href="art-000-getting-started.html">Getting started</a>), the case study has four parts:</p>
<ul>
<li>
<em>Case study programs</em> ◁ You are here.</li>
<li><a href="art-004-case-study-students.html">Case study students</a></li>
<li><a href="art-006-case-study-stickiness.html">Case study stickiness</a></li>
<li><a href="art-006-case-study-grad-rate.html">Case study graduation rate</a></li>
</ul>
<p>Longer vignettes with detailed development of methods and functions related to this part of the study include:</p>
<ul>
<li><a href="art-010-program-codes.html" target="_blank">Program codes and names</a></li>
<li><a href="art-015-subsetting-midfield-data.html" target="_blank">Subsetting MIDFIELD data</a></li>
</ul>
<div id="in-this-vignette" class="section level3">
<h3 class="hasAnchor">
<a href="#in-this-vignette" class="anchor" aria-hidden="true"></a>In this vignette</h3>
<p>In studying student records, a common first step is to select a specific set of programs to explore. In this vignette, we start a case study of four engineering programs in which we:</p>
<ul>
<li>Identify their CIP codes<br>
</li>
<li>Assign custom program names</li>
<li>Save the results</li>
</ul>
<p>We use the following midfieldr functions</p>
<ul>
<li><a href="../reference/filter_search.html"><code>filter_search()</code></a></li>
</ul>
<p>The vignette output is the data frame <code>study_program</code>.</p>
</div>
</div>
<div id="identify-program-codes" class="section level2">
<h2 class="hasAnchor">
<a href="#identify-program-codes" class="anchor" aria-hidden="true"></a>Identify program codes</h2>
<p>If you are writing your own script to follow along, we start with these packages:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># packages used</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/MIDFIELDR/midfieldr" class="external-link">"midfieldr"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://r-datatable.com" class="external-link">"data.table"</a></span><span class="op">)</span>

<span class="co"># optional code to control data.table printing</span>
<span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>
  datatable.print.nrows <span class="op">=</span> <span class="fl">6</span>,
  datatable.print.topn <span class="op">=</span> <span class="fl">3</span>,
  datatable.print.class <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span></code></pre></div>
<p>midfieldr includes <code>cip</code>, a data table of academic program codes and names. View its help page by running</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Type in the Console</span>
<span class="op">?</span> <span class="va">cip</span></code></pre></div>
<p>We know the conventional names of the desired programs (Civil, Electrical, Industrial, and Mechanical Engineering) but these are not necessarily the exact program names used in the CIP. Thus we have to search CIP thoroughly to make sure we find all 6-digit CIP codes associated with these disciplines.</p>
<p>We start with a text search of <code>cip</code> for <code>engineering</code> using <code><a href="../reference/filter_search.html">filter_search()</a></code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># subset rows of the CIP data matching conditions</span>
<span class="va">pass01</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_search.html">filter_search</a></span><span class="op">(</span><span class="va">cip</span>, <span class="st">"engineering"</span><span class="op">)</span>

<span class="co"># Examine the result</span>
<span class="va">pass01</span>
<span class="co">#&gt;        cip2                                         cip2name   cip4</span>
<span class="co">#&gt;      &lt;char&gt;                                           &lt;char&gt; &lt;char&gt;</span>
<span class="co">#&gt;   1:     14                                      Engineering   1401</span>
<span class="co">#&gt;   2:     14                                      Engineering   1401</span>
<span class="co">#&gt;   3:     14                                      Engineering   1402</span>
<span class="co">#&gt;  ---                                                               </span>
<span class="co">#&gt; 117:     29                            Military Technologies   2903</span>
<span class="co">#&gt; 118:     29                            Military Technologies   2903</span>
<span class="co">#&gt; 119:     51 Health Professions and Related Clinical Sciences   5123</span>
<span class="co">#&gt;                                                   cip4name   cip6</span>
<span class="co">#&gt;                                                     &lt;char&gt; &lt;char&gt;</span>
<span class="co">#&gt;   1:                                  Engineering, General 140101</span>
<span class="co">#&gt;   2:                                  Engineering, General 140102</span>
<span class="co">#&gt;   3: Aerospace, Aeronautical and Astronautical Engineering 140201</span>
<span class="co">#&gt;  ---                                                             </span>
<span class="co">#&gt; 117:                             Military Applied Sciences 290301</span>
<span class="co">#&gt; 118:                             Military Applied Sciences 290303</span>
<span class="co">#&gt; 119:            Rehabilitation and Therapeutic Professions 512312</span>
<span class="co">#&gt;                                                              cip6name</span>
<span class="co">#&gt;                                                                &lt;char&gt;</span>
<span class="co">#&gt;   1:                                             Engineering, General</span>
<span class="co">#&gt;   2:                                                  Pre-Engineering</span>
<span class="co">#&gt;   3:     Aerospace, Aeronautical and Astronautical, Space Engineering</span>
<span class="co">#&gt;  ---                                                                 </span>
<span class="co">#&gt; 117:                                       Combat Systems Engineering</span>
<span class="co">#&gt; 118:                                            Engineering Acoustics</span>
<span class="co">#&gt; 119: Assistive, Augmentative Technology and Rehabiliation Engineering</span></code></pre></div>
<p>We have a number of 2-digit codes reported. Let’s examine those more closely using data.table syntax for selecting columns.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cols_we_want</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cip2"</span>, <span class="st">"cip2name"</span><span class="op">)</span>
<span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/duplicated.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">pass01</span><span class="op">[</span>, <span class="va">..cols_we_want</span><span class="op">]</span><span class="op">)</span>
<span class="co">#&gt;      cip2                                         cip2name</span>
<span class="co">#&gt;    &lt;char&gt;                                           &lt;char&gt;</span>
<span class="co">#&gt; 1:     14                                      Engineering</span>
<span class="co">#&gt; 2:     15                           Engineering Technology</span>
<span class="co">#&gt; 3:     29                            Military Technologies</span>
<span class="co">#&gt; 4:     51 Health Professions and Related Clinical Sciences</span></code></pre></div>
<p>Only one of these (14) will have the programs we are looking for. So in our second pass, we can restrict our search to codes starting with 14.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pass02</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_search.html">filter_search</a></span><span class="op">(</span><span class="va">pass01</span>, <span class="st">"^14"</span><span class="op">)</span>

<span class="co"># Examine the result</span>
<span class="va">pass02</span>
<span class="co">#&gt;       cip2    cip2name   cip4</span>
<span class="co">#&gt;     &lt;char&gt;      &lt;char&gt; &lt;char&gt;</span>
<span class="co">#&gt;  1:     14 Engineering   1401</span>
<span class="co">#&gt;  2:     14 Engineering   1401</span>
<span class="co">#&gt;  3:     14 Engineering   1402</span>
<span class="co">#&gt; ---                          </span>
<span class="co">#&gt; 52:     14 Engineering   1444</span>
<span class="co">#&gt; 53:     14 Engineering   1445</span>
<span class="co">#&gt; 54:     14 Engineering   1499</span>
<span class="co">#&gt;                                                  cip4name   cip6</span>
<span class="co">#&gt;                                                    &lt;char&gt; &lt;char&gt;</span>
<span class="co">#&gt;  1:                                  Engineering, General 140101</span>
<span class="co">#&gt;  2:                                  Engineering, General 140102</span>
<span class="co">#&gt;  3: Aerospace, Aeronautical and Astronautical Engineering 140201</span>
<span class="co">#&gt; ---                                                             </span>
<span class="co">#&gt; 52:                                 Engineering Chemistry 144401</span>
<span class="co">#&gt; 53:                    Biological, Biosystems Engineering 144501</span>
<span class="co">#&gt; 54:                                    Engineering, Other 149999</span>
<span class="co">#&gt;                                                         cip6name</span>
<span class="co">#&gt;                                                           &lt;char&gt;</span>
<span class="co">#&gt;  1:                                         Engineering, General</span>
<span class="co">#&gt;  2:                                              Pre-Engineering</span>
<span class="co">#&gt;  3: Aerospace, Aeronautical and Astronautical, Space Engineering</span>
<span class="co">#&gt; ---                                                             </span>
<span class="co">#&gt; 52:                                        Engineering Chemistry</span>
<span class="co">#&gt; 53:                           Biological, Biosystems Engineering</span>
<span class="co">#&gt; 54:                                           Engineering, Other</span></code></pre></div>
<p>In the next pass, let’s try restricting our search to the four conventional terms: civil, electrical, industrial, and mechanical. The search is not case-sensitive.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># optional code to control data.table printing</span>
<span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>datatable.print.topn <span class="op">=</span> <span class="fl">13</span><span class="op">)</span>

<span class="va">pass03</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_search.html">filter_search</a></span><span class="op">(</span><span class="va">pass02</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"civil"</span>, <span class="st">"electrical"</span>, <span class="st">"industrial"</span>, <span class="st">"mechanical"</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Examine the result</span>
<span class="va">pass03</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">cip6</span>, <span class="va">cip6name</span><span class="op">)</span><span class="op">]</span>
<span class="co">#&gt;       cip6                                                      cip6name</span>
<span class="co">#&gt;     &lt;char&gt;                                                        &lt;char&gt;</span>
<span class="co">#&gt;  1: 140801                                    Civil Engineering, General</span>
<span class="co">#&gt;  2: 140802                                      Geotechnical Engineering</span>
<span class="co">#&gt;  3: 140803                                        Structural Engineering</span>
<span class="co">#&gt;  4: 140804                        Transportation and Highway Engineering</span>
<span class="co">#&gt;  5: 140805                                   Water Resources Engineering</span>
<span class="co">#&gt;  6: 140899                                      Civil Engineering, Other</span>
<span class="co">#&gt;  7: 141001        Electrical, Electronics and Communications Engineering</span>
<span class="co">#&gt;  8: 141003                                 Laser and Optical Engineering</span>
<span class="co">#&gt;  9: 141004                                Telecommunications Engineering</span>
<span class="co">#&gt; 10: 141099 Electrical, Electronics and Communications Engineering, Other</span>
<span class="co">#&gt; 11: 141901                                        Mechanical Engineering</span>
<span class="co">#&gt; 12: 143501                                        Industrial Engineering</span>
<span class="co">#&gt; 13: 144101                                 Electromechanical Engineering</span></code></pre></div>
<p>In this result, only Electromechanical Engineering is superfluous, so we can drop it in the next pass.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pass04</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_search.html">filter_search</a></span><span class="op">(</span><span class="va">pass03</span>, drop_text <span class="op">=</span> <span class="st">"electromechanical"</span><span class="op">)</span>

<span class="co"># Examine the result</span>
<span class="va">pass04</span>
<span class="co">#&gt;       cip2    cip2name   cip4</span>
<span class="co">#&gt;     &lt;char&gt;      &lt;char&gt; &lt;char&gt;</span>
<span class="co">#&gt;  1:     14 Engineering   1408</span>
<span class="co">#&gt;  2:     14 Engineering   1408</span>
<span class="co">#&gt;  3:     14 Engineering   1408</span>
<span class="co">#&gt;  4:     14 Engineering   1408</span>
<span class="co">#&gt;  5:     14 Engineering   1408</span>
<span class="co">#&gt;  6:     14 Engineering   1408</span>
<span class="co">#&gt;  7:     14 Engineering   1410</span>
<span class="co">#&gt;  8:     14 Engineering   1410</span>
<span class="co">#&gt;  9:     14 Engineering   1410</span>
<span class="co">#&gt; 10:     14 Engineering   1410</span>
<span class="co">#&gt; 11:     14 Engineering   1419</span>
<span class="co">#&gt; 12:     14 Engineering   1435</span>
<span class="co">#&gt;                                                   cip4name   cip6</span>
<span class="co">#&gt;                                                     &lt;char&gt; &lt;char&gt;</span>
<span class="co">#&gt;  1:                                      Civil Engineering 140801</span>
<span class="co">#&gt;  2:                                      Civil Engineering 140802</span>
<span class="co">#&gt;  3:                                      Civil Engineering 140803</span>
<span class="co">#&gt;  4:                                      Civil Engineering 140804</span>
<span class="co">#&gt;  5:                                      Civil Engineering 140805</span>
<span class="co">#&gt;  6:                                      Civil Engineering 140899</span>
<span class="co">#&gt;  7: Electrical, Electronics and Communications Engineering 141001</span>
<span class="co">#&gt;  8: Electrical, Electronics and Communications Engineering 141003</span>
<span class="co">#&gt;  9: Electrical, Electronics and Communications Engineering 141004</span>
<span class="co">#&gt; 10: Electrical, Electronics and Communications Engineering 141099</span>
<span class="co">#&gt; 11:                                 Mechanical Engineering 141901</span>
<span class="co">#&gt; 12:                                 Industrial Engineering 143501</span>
<span class="co">#&gt;                                                          cip6name</span>
<span class="co">#&gt;                                                            &lt;char&gt;</span>
<span class="co">#&gt;  1:                                    Civil Engineering, General</span>
<span class="co">#&gt;  2:                                      Geotechnical Engineering</span>
<span class="co">#&gt;  3:                                        Structural Engineering</span>
<span class="co">#&gt;  4:                        Transportation and Highway Engineering</span>
<span class="co">#&gt;  5:                                   Water Resources Engineering</span>
<span class="co">#&gt;  6:                                      Civil Engineering, Other</span>
<span class="co">#&gt;  7:        Electrical, Electronics and Communications Engineering</span>
<span class="co">#&gt;  8:                                 Laser and Optical Engineering</span>
<span class="co">#&gt;  9:                                Telecommunications Engineering</span>
<span class="co">#&gt; 10: Electrical, Electronics and Communications Engineering, Other</span>
<span class="co">#&gt; 11:                                        Mechanical Engineering</span>
<span class="co">#&gt; 12:                                        Industrial Engineering</span></code></pre></div>
<p>We see that</p>
<ul>
<li>the 4-digit level describes these programs with the customary names<br>
</li>
<li>Civil Engineering encompasses six programs at the 6-digit level</li>
<li>Electrical Engineering encompasses four programs at the 6-digit level</li>
<li>Mechanical and Industrial have one program each at the 6-digit level</li>
</ul>
<p>All MIDFIELD data tables that have a column of CIP codes use 6-digit codes. Therefore, for a case study, we only need the <code>cip6</code> column from the work above. The names we want (in this case), however, are at the 4-digit level. We can select the columns we need.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cols_we_want</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cip6"</span>, <span class="st">"cip4name"</span><span class="op">)</span>
<span class="va">case_cip</span> <span class="op">&lt;-</span> <span class="va">pass04</span><span class="op">[</span>, <span class="va">..cols_we_want</span><span class="op">]</span>

<span class="co"># Examine the result</span>
<span class="va">case_cip</span>
<span class="co">#&gt;       cip6                                               cip4name</span>
<span class="co">#&gt;     &lt;char&gt;                                                 &lt;char&gt;</span>
<span class="co">#&gt;  1: 140801                                      Civil Engineering</span>
<span class="co">#&gt;  2: 140802                                      Civil Engineering</span>
<span class="co">#&gt;  3: 140803                                      Civil Engineering</span>
<span class="co">#&gt;  4: 140804                                      Civil Engineering</span>
<span class="co">#&gt;  5: 140805                                      Civil Engineering</span>
<span class="co">#&gt;  6: 140899                                      Civil Engineering</span>
<span class="co">#&gt;  7: 141001 Electrical, Electronics and Communications Engineering</span>
<span class="co">#&gt;  8: 141003 Electrical, Electronics and Communications Engineering</span>
<span class="co">#&gt;  9: 141004 Electrical, Electronics and Communications Engineering</span>
<span class="co">#&gt; 10: 141099 Electrical, Electronics and Communications Engineering</span>
<span class="co">#&gt; 11: 141901                                 Mechanical Engineering</span>
<span class="co">#&gt; 12: 143501                                 Industrial Engineering</span></code></pre></div>
</div>
<div id="assign-program-names" class="section level2">
<h2 class="hasAnchor">
<a href="#assign-program-names" class="anchor" aria-hidden="true"></a>Assign program names</h2>
<p>As the study proceeds, we will want to compare and contrast the programs by name. The names in <code>cip4name</code> are close to what we want, but all can be shortened for later reporting in graphs and tables.</p>
<p>We use the data.table <code><a href="https://Rdatatable.gitlab.io/data.table/reference/fcase.html" class="external-link">fcase()</a></code> function and <code>%ilike%</code> to add a <code>program</code> column with values that depend on the values in the <code>cip4name</code> column.</p>
<p>View their help pages by running</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Type in the Console</span>
<span class="op">?</span> <span class="va">`%ilike%`</span>

<span class="op">?</span> <span class="va">fcase</span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Create a new memory location to avoid updating by reference</span>
<span class="va">case_program</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">case_cip</span><span class="op">)</span>

<span class="co"># Add a new column for custom program labels</span>
<span class="va">case_program</span><span class="op">[</span>, <span class="va">program</span> <span class="op">:=</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/fcase.html" class="external-link">fcase</a></span><span class="op">(</span>
  <span class="va">cip4name</span> <span class="op"><a href="https://Rdatatable.gitlab.io/data.table/reference/like.html" class="external-link">%ilike%</a></span> <span class="st">"civil"</span>, <span class="st">"Civil"</span>,
  <span class="va">cip4name</span> <span class="op"><a href="https://Rdatatable.gitlab.io/data.table/reference/like.html" class="external-link">%ilike%</a></span> <span class="st">"electrical"</span>, <span class="st">"Electrical"</span>,
  <span class="va">cip4name</span> <span class="op"><a href="https://Rdatatable.gitlab.io/data.table/reference/like.html" class="external-link">%ilike%</a></span> <span class="st">"mechanical"</span>, <span class="st">"Mechanical"</span>,
  <span class="va">cip4name</span> <span class="op"><a href="https://Rdatatable.gitlab.io/data.table/reference/like.html" class="external-link">%ilike%</a></span> <span class="st">"industrial"</span>, <span class="st">"Industrial"</span>
<span class="op">)</span><span class="op">]</span>

<span class="co"># Examine the result</span>
<span class="va">case_program</span>
<span class="co">#&gt;       cip6                                               cip4name    program</span>
<span class="co">#&gt;     &lt;char&gt;                                                 &lt;char&gt;     &lt;char&gt;</span>
<span class="co">#&gt;  1: 140801                                      Civil Engineering      Civil</span>
<span class="co">#&gt;  2: 140802                                      Civil Engineering      Civil</span>
<span class="co">#&gt;  3: 140803                                      Civil Engineering      Civil</span>
<span class="co">#&gt;  4: 140804                                      Civil Engineering      Civil</span>
<span class="co">#&gt;  5: 140805                                      Civil Engineering      Civil</span>
<span class="co">#&gt;  6: 140899                                      Civil Engineering      Civil</span>
<span class="co">#&gt;  7: 141001 Electrical, Electronics and Communications Engineering Electrical</span>
<span class="co">#&gt;  8: 141003 Electrical, Electronics and Communications Engineering Electrical</span>
<span class="co">#&gt;  9: 141004 Electrical, Electronics and Communications Engineering Electrical</span>
<span class="co">#&gt; 10: 141099 Electrical, Electronics and Communications Engineering Electrical</span>
<span class="co">#&gt; 11: 141901                                 Mechanical Engineering Mechanical</span>
<span class="co">#&gt; 12: 143501                                 Industrial Engineering Industrial</span></code></pre></div>
<p>In subsequent work we need only the <code>cip6</code> and <code>program</code> values, so we can drop the <code>cip4name</code> column.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Drop an unnecessary column</span>
<span class="va">case_program</span><span class="op">[</span>, <span class="va">cip4name</span> <span class="op">:=</span> <span class="cn">NULL</span><span class="op">]</span>

<span class="co"># Examine the result</span>
<span class="va">case_program</span>
<span class="co">#&gt;       cip6    program</span>
<span class="co">#&gt;     &lt;char&gt;     &lt;char&gt;</span>
<span class="co">#&gt;  1: 140801      Civil</span>
<span class="co">#&gt;  2: 140802      Civil</span>
<span class="co">#&gt;  3: 140803      Civil</span>
<span class="co">#&gt;  4: 140804      Civil</span>
<span class="co">#&gt;  5: 140805      Civil</span>
<span class="co">#&gt;  6: 140899      Civil</span>
<span class="co">#&gt;  7: 141001 Electrical</span>
<span class="co">#&gt;  8: 141003 Electrical</span>
<span class="co">#&gt;  9: 141004 Electrical</span>
<span class="co">#&gt; 10: 141099 Electrical</span>
<span class="co">#&gt; 11: 141901 Mechanical</span>
<span class="co">#&gt; 12: 143501 Industrial</span></code></pre></div>
</div>
<div id="save-results" class="section level2">
<h2 class="hasAnchor">
<a href="#save-results" class="anchor" aria-hidden="true"></a>Save results</h2>
<p>We save the <code>case_program</code> data frame as a CSV file to the <code>results</code> directory for easy access as we work through the study. Here we use fast write <code><a href="https://Rdatatable.gitlab.io/data.table/reference/fwrite.html" class="external-link">fwrite()</a></code> from data.table. You may prefer other read/write functions such as those in base R or packages readr or rio. Note that relative file path shown assumes you are working within an RStudio project and that you have a <code>results</code> subdirectory (as described in <a href="art-00-midfield-data.html">Getting started</a>).</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Assumes you have a results folder in the project directory</span>
<span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/fwrite.html" class="external-link">fwrite</a></span><span class="op">(</span><span class="va">case_program</span>, file <span class="op">=</span> <span class="st">"results/case_program.csv"</span><span class="op">)</span></code></pre></div>
<p>We suggest saving intermediate results like these at each significant milestone of a study, especially after steps requiring a lot of computing time.</p>
<p>These results have been included with midfieldr as the built-in data set <code>study_program</code>. View its help page by running</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Type in the Console</span>
<span class="op">?</span> <span class="va">study_program</span></code></pre></div>
<p>View the data frame,</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">study_program</span>
<span class="co">#&gt;       cip6    program</span>
<span class="co">#&gt;     &lt;char&gt;     &lt;char&gt;</span>
<span class="co">#&gt;  1: 140801      Civil</span>
<span class="co">#&gt;  2: 140802      Civil</span>
<span class="co">#&gt;  3: 140803      Civil</span>
<span class="co">#&gt;  4: 140804      Civil</span>
<span class="co">#&gt;  5: 140805      Civil</span>
<span class="co">#&gt;  6: 140899      Civil</span>
<span class="co">#&gt;  7: 141001 Electrical</span>
<span class="co">#&gt;  8: 141003 Electrical</span>
<span class="co">#&gt;  9: 141004 Electrical</span>
<span class="co">#&gt; 10: 141099 Electrical</span>
<span class="co">#&gt; 11: 141901 Mechanical</span>
<span class="co">#&gt; 12: 143501 Industrial</span></code></pre></div>
<p>Check that the two data frames are identical,</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/all.equal.data.table.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">case_program</span>, <span class="va">study_program</span><span class="op">)</span>
<span class="co">#&gt; [1] TRUE</span></code></pre></div>
<p>In subsequent vignettes, you can read in the <code>case_program</code> data from your <code>results</code> directory or you can use the <code>study_program</code> data provided with midfieldr.</p>
</div>
<div id="related-articles" class="section level2">
<h2 class="hasAnchor">
<a href="#related-articles" class="anchor" aria-hidden="true"></a>Related articles</h2>
<ul>
<li>
<a href="art-010-program-codes.html">Program codes and names</a> for practice working with CIP codes and assigning program names.</li>
</ul>
</div>
<div id="references" class="section level2">
<h2 class="hasAnchor">
<a href="#references" class="anchor" aria-hidden="true"></a>References</h2>
<div id="refs">

</div>
</div>
<div id="appendix" class="section level2">
<h2 class="hasAnchor">
<a href="#appendix" class="anchor" aria-hidden="true"></a>Appendix</h2>
<div id="complete-script" class="section level3">
<h3 class="hasAnchor">
<a href="#complete-script" class="anchor" aria-hidden="true"></a>Complete script</h3>
<p>The vignette code chunks are collected below in a single, condensed script.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># packages used</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/MIDFIELDR/midfieldr" class="external-link">"midfieldr"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://r-datatable.com" class="external-link">"data.table"</a></span><span class="op">)</span>

<span class="co"># identify program codes</span>
<span class="va">pass01</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_search.html">filter_search</a></span><span class="op">(</span><span class="va">cip</span>, <span class="st">"engineering"</span><span class="op">)</span>
<span class="va">pass02</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_search.html">filter_search</a></span><span class="op">(</span><span class="va">pass01</span>, <span class="st">"^14"</span><span class="op">)</span>
<span class="va">pass03</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_search.html">filter_search</a></span><span class="op">(</span>
  <span class="va">pass02</span>,
  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"civil"</span>, <span class="st">"electrical"</span>, <span class="st">"industrial"</span>, <span class="st">"mechanical"</span><span class="op">)</span>
<span class="op">)</span>
<span class="va">pass04</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_search.html">filter_search</a></span><span class="op">(</span><span class="va">pass03</span>, drop_text <span class="op">=</span> <span class="st">"electromechanical"</span><span class="op">)</span>
<span class="va">cols_we_want</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cip6"</span>, <span class="st">"cip4name"</span><span class="op">)</span>
<span class="va">case_cip</span> <span class="op">&lt;-</span> <span class="va">pass04</span><span class="op">[</span>, <span class="va">..cols_we_want</span><span class="op">]</span>

<span class="co"># assign program names</span>
<span class="va">case_program</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">case_cip</span><span class="op">)</span>
<span class="va">dframe</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">case_program</span><span class="op">)</span>
<span class="va">case_program</span><span class="op">[</span>, <span class="va">program</span> <span class="op">:=</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/fcase.html" class="external-link">fcase</a></span><span class="op">(</span>
  <span class="va">cip4name</span> <span class="op"><a href="https://Rdatatable.gitlab.io/data.table/reference/like.html" class="external-link">%ilike%</a></span> <span class="st">"civil"</span>, <span class="st">"Civil"</span>,
  <span class="va">cip4name</span> <span class="op"><a href="https://Rdatatable.gitlab.io/data.table/reference/like.html" class="external-link">%ilike%</a></span> <span class="st">"electrical"</span>, <span class="st">"Electrical"</span>,
  <span class="va">cip4name</span> <span class="op"><a href="https://Rdatatable.gitlab.io/data.table/reference/like.html" class="external-link">%ilike%</a></span> <span class="st">"mechanical"</span>, <span class="st">"Mechanical"</span>,
  <span class="va">cip4name</span> <span class="op"><a href="https://Rdatatable.gitlab.io/data.table/reference/like.html" class="external-link">%ilike%</a></span> <span class="st">"industrial"</span>, <span class="st">"Industrial"</span>
<span class="op">)</span><span class="op">]</span>
<span class="va">case_program</span><span class="op">[</span>, <span class="va">cip4name</span> <span class="op">:=</span> <span class="cn">NULL</span><span class="op">]</span>

<span class="co"># save results</span>
<span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/fwrite.html" class="external-link">fwrite</a></span><span class="op">(</span><span class="va">case_program</span>, file <span class="op">=</span> <span class="st">"results/case_program.csv"</span><span class="op">)</span></code></pre></div>
</div>
</div>
  </div>
 <div class="col-md-3 d-none d-md-block" id="pkgdown-sidebar">
        <div class="sticky-top">
    <nav id="toc"><h2 data-toc-skip>Contents</h2>

    </nav>
</div>
      </div>

</div>



      <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://github.com/graphdr" class="external-link external-link">Richard Layton</a>, Russell Long, Matthew Ohland, US National Science Foundation.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link external-link">pkgdown</a> 1.6.1.9001.</p>
</div>

      </footer>
</div>

  

  

  </body>
</html>
