<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="midfieldr">
<title>Degree seeking • midfieldr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><link href="../deps/Courier_Prime-0.4.2/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Degree seeking">
<meta property="og:description" content="midfieldr">
<meta property="og:image" content="https://midfieldr.github.io/midfieldr/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">midfieldr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0.9029</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/art-000-getting-started.html">Getting started</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-case-study">Case study</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-case-study">
    <a class="dropdown-item" href="../articles/art-001-case-goals.html">Goals</a>
    <a class="dropdown-item" href="../articles/art-002-case-data.html">Data</a>
    <a class="dropdown-item" href="../articles/art-003-case-results.html">Results</a>
  </div>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-vignettes">Vignettes</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-vignettes">
    <a class="dropdown-item" href="../articles/art-010-planning.html">Planning</a>
    <a class="dropdown-item" href="../articles/art-020-data-sufficiency.html">Data sufficiency</a>
    <a class="dropdown-item" href="../articles/art-030-degree-seeking.html">Degree seeking</a>
    <a class="dropdown-item" href="../articles/art-040-programs.html">Programs</a>
    <a class="dropdown-item" href="../articles/art-050-blocs.html">Blocs</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/MIDFIELDR/midfieldr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Degree seeking</h1>
            
            <h4 data-toc-skip class="date">2022-12-10</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/MIDFIELDR/midfieldr/blob/HEAD/vignettes/art-030-degree-seeking.Rmd" class="external-link"><code>vignettes/art-030-degree-seeking.Rmd</code></a></small>
      <div class="d-none name"><code>art-030-degree-seeking.Rmd</code></div>
    </div>

    
    
<p>Most analyses of Student Unit Records (SURs) omit records of students
not seeking degrees. We use an <em>inner join</em> merging operation as
a degree-seeking filter. This vignette treats degree seeking and inner
joins generally.</p>
<p>This vignette in the MIDFIELD workflow.</p>
<ol style="list-style-type: decimal">
<li>Planning<br>
</li>
<li>
<span style=" font-weight: bold;    color: #b35806 !important;">Initial
processing</span>
<ul>
<li>Data sufficiency<br>
</li>
<li><span style=" font-weight: bold;    color: #b35806 !important;">Degree
seeking</span></li>
<li>Identify programs<br>
</li>
</ul>
</li>
<li>Blocs<br>
</li>
<li>Groupings<br>
</li>
<li>Metrics<br>
</li>
<li>Displays</li>
</ol>
<div class="section level2">
<h2 id="method">Method<a class="anchor" aria-label="anchor" href="#method"></a>
</h2>
<p>By design, the <code>student</code> data table contains records of
degree-seeking students only. We use an inner join with
<code>student</code> to filter our working data frame for degree-seeking
students.</p>
<ol style="list-style-type: decimal">
<li><p>Filter source SURs for data sufficiency.</p></li>
<li><p>Filter for degree seeking.</p></li>
</ol>
<p><em>Reminder.</em>   The data in <code>midfielddata</code> are
practice data, suitable for learning to work with student-level data
generally but not for drawing inferences about program attributes or
student experiences. MIDFIELD data are for research;
<code>midfielddata</code> is for practice.</p>
</div>
<div class="section level2">
<h2 id="load-data">Load data<a class="anchor" aria-label="anchor" href="#load-data"></a>
</h2>
<p><em>Open.</em>   If you are writing your own script to follow along,
we use these packages in this vignette:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># midfieldr: Degree seeking (inner joins)</span></span>
<span></span>
<span><span class="co"># Packages</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://midfieldr.github.io/midfieldr/">"midfieldr"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://midfieldr.github.io/midfielddata/" class="external-link">"midfielddata"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://r-datatable.com" class="external-link">"data.table"</a></span><span class="op">)</span></span></code></pre></div>
<p><em>Load.</em>   MIDFIELD practice data tables. Described in <a href="art-000-getting-started.html#load-data">Getting started</a>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">student</span>, <span class="va">term</span>, package <span class="op">=</span> <span class="st">"midfielddata"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="initial-processing">Initial processing<a class="anchor" aria-label="anchor" href="#initial-processing"></a>
</h2>
<p><em>(Optional) Select.</em>   Columns required by midfieldr
functions. Code reproduced from <a href="art-000-getting-started.html#reusable-code">Getting
started</a>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Optional. Copy of source files with all variables</span></span>
<span><span class="va">source_student</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">student</span><span class="op">)</span></span>
<span><span class="va">source_term</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">term</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Optional. Select variables required by midfieldr functions</span></span>
<span><span class="va">student</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/select_required.html">select_required</a></span><span class="op">(</span><span class="va">source_student</span><span class="op">)</span></span>
<span><span class="va">term</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/select_required.html">select_required</a></span><span class="op">(</span><span class="va">source_term</span><span class="op">)</span></span></code></pre></div>
<p><em>Work.</em>   Using <code><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy()</a></code> avoids
<em>by-reference</em> effects <span class="citation">(<a href="#ref-data.table-reference-semantics" role="doc-biblioref">Dowle
&amp; Srinivasan, 2022</a>)</span>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Working data frame</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">term</span><span class="op">)</span></span></code></pre></div>
<p><em>Data sufficiency.</em>   Filter to satisfy the data sufficiency
criterion. Code reproduced from <a href="art-020-data-sufficiency.html#reusable-code">Data
sufficiency</a>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Filter for data sufficiency, output unique IDs</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_timely_term.html">add_timely_term</a></span><span class="op">(</span><span class="va">DT</span>, <span class="va">term</span><span class="op">)</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_data_sufficiency.html">add_data_sufficiency</a></span><span class="op">(</span><span class="va">DT</span>, <span class="va">term</span><span class="op">)</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="va">data_sufficiency</span> <span class="op">==</span> <span class="st">"include"</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">DT</span><span class="op">)</span></span></code></pre></div>
<p>We preserve this data frame as a baseline for examples in the
vignette.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">baseline</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">DT</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="inner-joins">Inner joins<a class="anchor" aria-label="anchor" href="#inner-joins"></a>
</h2>
<p>An <em>inner join</em> is a merge operation that returns all
observations (rows) from two data frames that match specified conditions
in both. Using data.table syntax, we have two approaches:
<code>merge(X, Y, by)</code> (similar to base R) and
<code>Y[X, j, on]</code> (native to data.table).</p>
<div class="section level3">
<h3 id="using-mergex-y-by">Using <code>merge(X, Y, by)</code><a class="anchor" aria-label="anchor" href="#using-mergex-y-by"></a>
</h3>
<p>The general form for an inner join is</p>
<pre><code><span>    <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">X</span>, <span class="va">Y</span>, <span class="va">by</span>, all <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre>
<p>where</p>
<ul>
<li>
<code>X</code> is a data frame, matching rows returned</li>
<li>
<code>Y</code> is a data frame, matching rows returned</li>
<li>by is the vector of shared column names to merge by</li>
<li>
<code>all = FALSE</code> ensures the inner join</li>
</ul>
<p>In this example, the <code>Y</code> data frame is
<code>student</code>, from which we extract the ID column before
joining. Otherwise, all columns from both data frames would be
returned.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Select columns in Y</span></span>
<span><span class="va">cols_we_want</span> <span class="op">&lt;-</span> <span class="va">student</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># merge(X, Y) inner join</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">DT</span>, <span class="va">cols_we_want</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span>, all <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;                  mcid</span></span>
<span><span class="co">#&gt;                &lt;char&gt;</span></span>
<span><span class="co">#&gt;     1: MCID3111142689</span></span>
<span><span class="co">#&gt;     2: MCID3111142782</span></span>
<span><span class="co">#&gt;     3: MCID3111142881</span></span>
<span><span class="co">#&gt;    ---               </span></span>
<span><span class="co">#&gt; 76873: MCID3112785480</span></span>
<span><span class="co">#&gt; 76874: MCID3112800920</span></span>
<span><span class="co">#&gt; 76875: MCID3112870009</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="using-yx-j-on">Using <code>Y[X, j, on]</code><a class="anchor" aria-label="anchor" href="#using-yx-j-on"></a>
</h3>
<p>The second approach—native to data.table and computationally more
efficient—has the form</p>
<pre><code><span>    <span class="va">Y</span><span class="op">[</span><span class="va">X</span>, <span class="va">j</span>, <span class="va">on</span>, nomatch <span class="op">=</span> <span class="cn">NULL</span><span class="op">]</span></span></code></pre>
<p>where</p>
<ul>
<li>
<code>X</code> is a data frame, matching rows returned</li>
<li>
<code>Y</code> is a data frame, matching rows returned</li>
<li>
<code>j</code> selects columns from the joined data frame to retain
(default all columns)</li>
<li>
<code>on</code> is the vector of shared column names to merge
by</li>
<li>
<code>nomatch = NULL</code> ensures the inner join</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Y[X] inner join</span></span>
<span><span class="va">DT</span><span class="op">[</span><span class="va">student</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span><span class="op">)</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span>, nomatch <span class="op">=</span> <span class="cn">NULL</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;                  mcid</span></span>
<span><span class="co">#&gt;                &lt;char&gt;</span></span>
<span><span class="co">#&gt;     1: MCID3111142689</span></span>
<span><span class="co">#&gt;     2: MCID3111142782</span></span>
<span><span class="co">#&gt;     3: MCID3111142881</span></span>
<span><span class="co">#&gt;    ---               </span></span>
<span><span class="co">#&gt; 76873: MCID3112785480</span></span>
<span><span class="co">#&gt; 76874: MCID3112800920</span></span>
<span><span class="co">#&gt; 76875: MCID3112870009</span></span></code></pre>
<p><em>Demonstrate equivalence.</em>   Showing that the two approaches
produce the same result and that, for inner joins, <code>X</code> and
<code>Y</code> are interchangeable.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># merge(X, Y)</span></span>
<span><span class="va">w</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">DT</span>, <span class="va">cols_we_want</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span>, all <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co"># merge(Y, X)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">cols_we_want</span>, <span class="va">DT</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span>, all <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co"># X[Y]</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="va">student</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span><span class="op">)</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span>, nomatch <span class="op">=</span> <span class="cn">NULL</span><span class="op">]</span></span>
<span><span class="co"># Y[X]</span></span>
<span><span class="va">z</span> <span class="op">&lt;-</span> <span class="va">student</span><span class="op">[</span><span class="va">DT</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span><span class="op">)</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span>, nomatch <span class="op">=</span> <span class="cn">NULL</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Demonstrate equivalence</span></span>
<span><span class="fu"><a href="../reference/same_content.html">same_content</a></span><span class="op">(</span><span class="va">w</span>, <span class="va">x</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="../reference/same_content.html">same_content</a></span><span class="op">(</span><span class="va">w</span>, <span class="va">y</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="../reference/same_content.html">same_content</a></span><span class="op">(</span><span class="va">w</span>, <span class="va">z</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="selecting-columns">Selecting columns<a class="anchor" aria-label="anchor" href="#selecting-columns"></a>
</h3>
<p>In either method, we can select columns from both data frames. Using
<code><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge()</a></code> we select the columns by explicitly subsetting the
two data frames.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Selecting columns from both data frames, merge() inner join</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">DT</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span><span class="op">)</span><span class="op">]</span>, <span class="va">student</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">institution</span><span class="op">)</span><span class="op">]</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span>, all <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setkey.html" class="external-link">setkey</a></span><span class="op">(</span><span class="va">x</span>, <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="va">x</span><span class="op">[</span><span class="op">]</span></span>
<span><span class="co">#&gt;                  mcid   institution</span></span>
<span><span class="co">#&gt;                &lt;char&gt;        &lt;char&gt;</span></span>
<span><span class="co">#&gt;     1: MCID3111142689 Institution B</span></span>
<span><span class="co">#&gt;     2: MCID3111142782 Institution J</span></span>
<span><span class="co">#&gt;     3: MCID3111142881 Institution B</span></span>
<span><span class="co">#&gt;    ---                             </span></span>
<span><span class="co">#&gt; 76873: MCID3112785480 Institution C</span></span>
<span><span class="co">#&gt; 76874: MCID3112800920 Institution B</span></span>
<span><span class="co">#&gt; 76875: MCID3112870009 Institution B</span></span></code></pre></div>
<p>In the <code>X[Y, j]</code> syntax, however, we can list the columns
to be returned from both data frames in the <code>j</code> list, that
is, <code>.(var1, var2, etc.)</code>, without subsetting the original
two data frames.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Selecting columns from both data frames, X[Y] inner join</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="va">DT</span><span class="op">[</span><span class="va">student</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span>, <span class="va">institution</span><span class="op">)</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span>, nomatch <span class="op">=</span> <span class="cn">NULL</span><span class="op">]</span></span>
<span><span class="va">y</span><span class="op">[</span><span class="op">]</span></span>
<span><span class="co">#&gt;                  mcid   institution</span></span>
<span><span class="co">#&gt;                &lt;char&gt;        &lt;char&gt;</span></span>
<span><span class="co">#&gt;     1: MCID3111142689 Institution B</span></span>
<span><span class="co">#&gt;     2: MCID3111142782 Institution J</span></span>
<span><span class="co">#&gt;     3: MCID3111142881 Institution B</span></span>
<span><span class="co">#&gt;    ---                             </span></span>
<span><span class="co">#&gt; 76873: MCID3112785480 Institution C</span></span>
<span><span class="co">#&gt; 76874: MCID3112800920 Institution B</span></span>
<span><span class="co">#&gt; 76875: MCID3112870009 Institution B</span></span></code></pre></div>
<p><em>Demonstrate equivalence.</em>   Showing that the two approaches
produce the same result.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Demonstrate equivalence</span></span>
<span><span class="fu"><a href="../reference/same_content.html">same_content</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="degree-seeking">Degree seeking<a class="anchor" aria-label="anchor" href="#degree-seeking"></a>
</h2>
<p><em>Work.</em>   The baseline data frame we preserved earlier is the
intake for this section.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Reusable starting state</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">baseline</span><span class="op">)</span></span>
<span><span class="va">DT</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;                  mcid</span></span>
<span><span class="co">#&gt;                &lt;char&gt;</span></span>
<span><span class="co">#&gt;     1: MCID3111142689</span></span>
<span><span class="co">#&gt;     2: MCID3111142782</span></span>
<span><span class="co">#&gt;     3: MCID3111142881</span></span>
<span><span class="co">#&gt;    ---               </span></span>
<span><span class="co">#&gt; 76873: MCID3112785480</span></span>
<span><span class="co">#&gt; 76874: MCID3112800920</span></span>
<span><span class="co">#&gt; 76875: MCID3112870009</span></span></code></pre>
<p><em>Filter.</em> Use an inner join with <code>student</code> to
filter <code>DT</code> to retain degree-seeking students.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Inner join for degree seeking</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">student</span><span class="op">[</span><span class="va">DT</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span><span class="op">)</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span>, nomatch <span class="op">=</span> <span class="cn">NULL</span><span class="op">]</span></span></code></pre></div>
<p><em>Filter.</em>   Filter to ensure IDs are unique.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># One observation per ID</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">DT</span><span class="op">)</span></span>
<span><span class="va">DT</span><span class="op">[</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;                  mcid</span></span>
<span><span class="co">#&gt;                &lt;char&gt;</span></span>
<span><span class="co">#&gt;     1: MCID3111142689</span></span>
<span><span class="co">#&gt;     2: MCID3111142782</span></span>
<span><span class="co">#&gt;     3: MCID3111142881</span></span>
<span><span class="co">#&gt;    ---               </span></span>
<span><span class="co">#&gt; 76873: MCID3112785480</span></span>
<span><span class="co">#&gt; 76874: MCID3112800920</span></span>
<span><span class="co">#&gt; 76875: MCID3112870009</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="reusable-code-degree-seeking">Reusable code: Degree seeking<a class="anchor" aria-label="anchor" href="#reusable-code-degree-seeking"></a>
</h2>
<p><em>Preparation.</em>   The baseline data frame we preserved earlier
is the intake for this section.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">baseline</span><span class="op">)</span></span></code></pre></div>
<p><em>Degree seeking.</em>   A summary code chunk for ready
reference.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Filter for degree seeking, output unique IDs</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="va">student</span><span class="op">[</span><span class="va">DT</span>, <span class="fu">.</span><span class="op">(</span><span class="va">mcid</span><span class="op">)</span>, on <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mcid"</span><span class="op">)</span>, nomatch <span class="op">=</span> <span class="cn">NULL</span><span class="op">]</span></span>
<span><span class="va">DT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">DT</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" line-spacing="2">
<div id="ref-data.table-reference-semantics" class="csl-entry">
Dowle, M., &amp; Srinivasan, A. (2022). <em><span class="nocase">Reference semantics [data.table]</span></em>. <a href="https://rdatatable.gitlab.io/data.table/articles/datatable-reference-semantics.html" class="external-link">https://rdatatable.gitlab.io/data.table/articles/datatable-reference-semantics.html</a>
</div>
</div>
<style type="text/css">
blockquote {
    padding:     10px 20px;
    margin:      0 0 20px;
    border-left: 0px
}
caption {
    color:       #525252;
    text-align:  left;
    font-weight: normal;
    font-size:   medium;
    line-height: 1.5;
}
</style>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://github.com/graphdr" class="external-link">Richard Layton</a>, Russell Long, Matthew Ohland, Marisa Orr, Susan Lord, US National Science Foundation.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
