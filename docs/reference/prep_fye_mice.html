<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Prepare FYE data for multiple imputation — prep_fye_mice • midfieldr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Courier_Prime-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Prepare FYE data for multiple imputation — prep_fye_mice"><meta name="description" content="Constructs a data frame of student-level records of First-Year Engineering
(FYE) programs and conditions the data for later use as an input to the mice
R package for multiple imputation. Sets up three variables as predictors
(institution, race/ethnicity, and sex) and one variable to be estimated
(program CIP code)."><meta property="og:description" content="Constructs a data frame of student-level records of First-Year Engineering
(FYE) programs and conditions the data for later use as an input to the mice
R package for multiple imputation. Sets up three variables as predictors
(institution, race/ethnicity, and sex) and one variable to be estimated
(program CIP code)."><meta property="og:image" content="https://midfieldr.github.io/midfieldr/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">midfieldr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.2.9004</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/art-000-getting-started.html">Getting started</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-case-study" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Case study</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-case-study"><li><a class="dropdown-item" href="../articles/art-001-case-goals.html">Goals</a></li>
    <li><a class="dropdown-item" href="../articles/art-002-case-data.html">Data</a></li>
    <li><a class="dropdown-item" href="../articles/art-003-case-results.html">Results</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/art-010-planning.html">Planning</a></li>
    <li><a class="dropdown-item" href="../articles/art-020-data-sufficiency.html">Data sufficiency</a></li>
    <li><a class="dropdown-item" href="../articles/art-030-degree-seeking.html">Degree seeking</a></li>
    <li><a class="dropdown-item" href="../articles/art-040-programs.html">Programs</a></li>
    <li><a class="dropdown-item" href="../articles/art-050-blocs.html">Blocs</a></li>
    <li><a class="dropdown-item" href="../articles/art-060-fye-proxies.html">FYE proxies</a></li>
    <li><a class="dropdown-item" href="../articles/art-070-starters.html">Starters</a></li>
    <li><a class="dropdown-item" href="../articles/art-080-graduates.html">Graduates</a></li>
    <li><a class="dropdown-item" href="../articles/art-090-groupings.html">Groupings</a></li>
    <li><a class="dropdown-item" href="../articles/art-100-grad-rate.html">Graduation rate</a></li>
    <li><a class="dropdown-item" href="../articles/art-110-stickiness.html">Stickiness</a></li>
    <li><a class="dropdown-item" href="../articles/art-120-multiway.html">Multiway data and charts</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/MIDFIELDR/midfieldr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Prepare FYE data for multiple imputation</h1>
      <small class="dont-index">Source: <a href="https://github.com/MIDFIELDR/midfieldr/blob/HEAD/R/prep_fye_mice.R" class="external-link"><code>R/prep_fye_mice.R</code></a></small>
      <div class="d-none name"><code>prep_fye_mice.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Constructs a data frame of student-level records of First-Year Engineering
(FYE) programs and conditions the data for later use as an input to the mice
R package for multiple imputation. Sets up three variables as predictors
(institution, race/ethnicity, and sex) and one variable to be estimated
(program CIP code).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">prep_fye_mice</span><span class="op">(</span></span>
<span>  midfield_student <span class="op">=</span> <span class="va">student</span>,</span>
<span>  midfield_term <span class="op">=</span> <span class="va">term</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  fye_codes <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-midfield-student">midfield_student<a class="anchor" aria-label="anchor" href="#arg-midfield-student"></a></dt>
<dd><p>MIDFIELD <code>student</code> data table or
equivalent with required variables <code>mcid</code>, <code>race</code>, and <code>sex.</code></p></dd>


<dt id="arg-midfield-term">midfield_term<a class="anchor" aria-label="anchor" href="#arg-midfield-term"></a></dt>
<dd><p>MIDFIELD <code>term</code> data table or equivalent
with required variables <code>mcid</code>, <code>institution</code>, <code>term</code>, and <code>cip6.</code></p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Not used for passing values; forces subsequent arguments to be
referable only by name.</p></dd>


<dt id="arg-fye-codes">fye_codes<a class="anchor" aria-label="anchor" href="#arg-fye-codes"></a></dt>
<dd><p>Optional character vector of 6-digit CIP codes to identify
FYE programs, default "140102". Codes must be 6-digit strings of numbers;
regular expressions are prohibited. Non-engineering codes—those that do
not start with 14—produce an error.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame in <code>data.table</code> format conditioned for
later use as an input to the mice R package for multiple imputation. The
data frame comprises one row for every FYE student, first-term and
migrator. Grouping structures are not preserved. The columns returned
are:</p><dl><dt><code>mcid</code></dt>
<dd><p>Character, anonymized student identifier. Returned
as-is.</p></dd>

<dt><code>race</code></dt>
<dd><p>Factor, race/ethnicity as self-reported by the
student. An imputation predictor variable.</p></dd>

<dt><code>sex</code></dt>
<dd><p>Factor, sex as self-reported by the
student. An imputation predictor variable.</p></dd>

<dt><code>institution</code></dt>
<dd><p>Factor, anonymized institution name. An
imputation predictor variable.</p></dd>

<dt><code>proxy</code></dt>
<dd><p>Factor, 6-digit CIP code of a student's known,
post-FYE engineering program or NA representing missing
values to be imputed.</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>At some US institutions, engineering students are required to complete a
First-Year Engineering (FYE) program as a prerequisite for declaring an
engineering major. Administratively, degree-granting engineering programs
such as Electrical Engineering or Mechanical Engineering treat their incoming
post-FYE students as their "starting" cohorts.  However, when computing a
metric that requires a count of starters—graduation rate, for example—FYE
records must be treated with special care to avoid a miscount.</p>
<p>To illustrate the potential for miscounting starters, suppose we wish to
calculate a Mechanical Engineering (ME) graduation rate. Students starting in
ME constitute the starting pool and the fraction of that pool graduating in
ME is the graduation rate. At FYE institutions, an ME program would typically
define their starting pool as the post-FYE cohort entering their program.
This may be the best information available, but it invariably undercounts
starters by failing to account for FYE students who do not transition
(post-FYE) to degree-granting engineering programs—students who may have
left the institution or switched to non-engineering majors. In either case,
in the absence of the FYE requirement, some of these students would have been
ME starters. By neglecting these students, the count of ME starters is
artificially low resulting in an ME graduation rate that is artificially
high. The same is true for every degree-granting engineering discipline in an
FYE institution.</p>
<p>Therefore, to avoid miscounting starters at FYE institutions, we have to
estimate an "FYE proxy", that is, the 6-digit CIP codes of the
degree-granting engineering programs that FYE students would have declared
had they not been required to enroll in FYE. The purpose of
`prep_fye_mice()“ is to prepare the data for making that estimation.</p>
<p>After running <code>prep_fye_mice()</code> but before running <code>mice()</code>, one can edit
variables or add variables to create a custom set of predictors. The mice
package expects all predictors and the proxy variables to be factors. Do not
delete the institution variable because it ensures that a student's imputed
program is available at their institution.</p>
<p>In addition, ensure that the only missing values are in the proxy column.
Other variables are expected to be complete (no NA values). A value of
"unknown" in a predictor column, e.g., race/ethnicity or sex, is an
acceptable value, not missing data. Observations with missing or unknown
values in the ID or institution columns (if any) should be removed.</p>
    </div>
    <div class="section level2">
    <h2 id="method">Method<a class="anchor" aria-label="anchor" href="#method"></a></h2>
    <p>The function extracts all terms for all FYE students,
including those who migrate to enter Engineering after their first term,
and identifies the first post-FYE program in which they enroll, if any.
This treatment yields two possible outcomes for values returned in the
<code>proxy</code> column:</p>
<ol><li><p>The student completes FYE and enrolls in an engineering major. For
this outcome, we know that at the student's first opportunity, they
enrolled in an engineering program of their choosing. The CIP code of
that program is returned as the student's FYE proxy.</p></li>
<li><p>The student does not enroll post-FYE in an engineering major. Such
students have no further records in the database or switched from
Engineering to another program. For this outcome, the data provide no
information regarding what engineering program the student would have
declared originally had the institution not required them to enroll in
FYE. For these students a proxy value of NA is returned. These are the
data treated as missing values to be imputed by <code>mice()</code>.</p></li>
</ol><p>In cases where students enter FYE, change programs, and re-enter FYE, only
the first group of FYE terms is considered. Any programs before FYE are
ignored.</p>
<p>The resulting data frame is ready for use as input for the mice package,
with all variables except <code>mcid</code> returned as factors.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Using toy data</span></span></span>
<span class="r-in"><span><span class="fu">prep_fye_mice</span><span class="op">(</span><span class="va">toy_student</span>, <span class="va">toy_term</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            mcid     race    sex   institution  proxy</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          &lt;char&gt;   &lt;fctr&gt; &lt;fctr&gt;        &lt;fctr&gt; &lt;fctr&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1: MID26060301    Asian Female Institution C   &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2: MID25995980 Hispanic Female Institution C   &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3: MID25997636 Hispanic Female Institution C   &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4: MID26086310 Hispanic Female Institution C   &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5: MID26000057    White Female Institution C   &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6: MID26614720    Asian   Male Institution J   &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7: MID26593796    White   Male Institution J   &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8: MID25848589    White   Male Institution M 143501</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9: MID25846316    White   Male Institution M 143501</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10: MID25847220    White   Male Institution M 143501</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11: MID25828870    White   Male Institution M 149999</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Other columns, if any, are dropped</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">toy_student</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "mcid"        "institution" "race"        "sex"        </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="fu">prep_fye_mice</span><span class="op">(</span><span class="va">toy_student</span>, <span class="va">toy_term</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "mcid"        "race"        "sex"         "institution" "proxy"      </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Optional argument permits multiple CIP codes for FYE</span></span></span>
<span class="r-in"><span><span class="fu">prep_fye_mice</span><span class="op">(</span>midfield_student <span class="op">=</span> <span class="va">toy_student</span>, </span></span>
<span class="r-in"><span>              midfield_term <span class="op">=</span><span class="va">toy_term</span>, </span></span>
<span class="r-in"><span>              fye_codes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"140101"</span>, <span class="st">"140102"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            mcid     race    sex   institution  proxy</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          &lt;char&gt;   &lt;fctr&gt; &lt;fctr&gt;        &lt;fctr&gt; &lt;fctr&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1: MID25977316    White   Male Institution B   &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2: MID26060301    Asian Female Institution C   &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3: MID25995980 Hispanic Female Institution C   &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4: MID25997636 Hispanic Female Institution C   &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5: MID26086310 Hispanic Female Institution C   &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6: MID26000057    White Female Institution C   &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7: MID26614720    Asian   Male Institution J   &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8: MID26593796    White   Male Institution J   &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9: MID25848589    White   Male Institution M 143501</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10: MID25846316    White   Male Institution M 143501</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11: MID25847220    White   Male Institution M 143501</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12: MID25828870    White   Male Institution M 149999</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/graphdr" class="external-link">Richard Layton</a>, Russell Long, Matthew Ohland, Marisa Orr, Susan Lord.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

