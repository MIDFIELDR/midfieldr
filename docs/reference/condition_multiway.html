<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='Transform a data frame such that two categorical variables are factors
with levels ordered by medians of the quantitative variable. Rows and
columns of the data frame are otherwise unaffected. The primary goal is to
structure the data for display in a Cleveland "multiway dot plot," where
the ordering of the levels and panels are crucial to the perception of
effects.'><title>Condition multiway data for graphing — condition_multiway • midfieldr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="../deps/bs3compat-0.2.5.1/tabs.js"></script><script src="../deps/bs3compat-0.2.5.1/bs3compat.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><link href="../syntax-highlighting.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Condition multiway data for graphing — condition_multiway"><meta property="og:description" content='Transform a data frame such that two categorical variables are factors
with levels ordered by medians of the quantitative variable. Rows and
columns of the data frame are otherwise unaffected. The primary goal is to
structure the data for display in a Cleveland "multiway dot plot," where
the ordering of the levels and panels are crucial to the perception of
effects.'><meta property="og:image" content="https://midfieldr.github.io/midfieldr/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc" data-headroom>
    

      <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a class="navbar-brand mb-0 h1" href="../index.html">midfieldr</a>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <button type="button" id="version-badge" class="badge badge-default d-none d-lg-block" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Released version">1.0.0.9017</button>

    <div id="navbar" class="collapse navbar-collapse">
      <ul class="navbar-nav mr-auto ml-3"><li class="nav-item">
  <a class="nav-link" href="../articles/art-00-midfield-data.html">Getting started</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-vignettes">Vignettes</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-vignettes">
    <a class="dropdown-item" href="../articles/art-01-multiway.html">Multiway graphs and tables</a>
    <a class="dropdown-item" href="../articles/art-02-program-codes.html">Program codes</a>
    <a class="dropdown-item" href="../articles/art-03-case-selection.html">Case selection</a>
    <a class="dropdown-item" href="../articles/art-04-data-sufficiency.html">Data sufficiency</a>
    <a class="dropdown-item" href="../articles/art-06-timely-completion.html">Timely completion</a>
    <a class="dropdown-item" href="../articles/art-05-stickiness.html">Stickiness</a>
    <a class="dropdown-item" href="../articles/art-07-fye-programs.html">FYE programs</a>
    <a class="dropdown-item" href="../articles/art-08-graduation-rate.html">Graduation rate</a>
  </div>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control mr-sm-2" aria-label="Search" name="search-input" data-search-index="/search.json" id="search-input" placeholder="Search..." autocomplete="off"></form>

      <ul class="navbar-nav ml-1"><li class="nav-item">
  <a class="nav-link" href="https://github.com/MIDFIELDR/midfieldr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <div class="col-md-9 contents">
    <img src="../package-logo.png" class="pkg-logo" alt=""><div class="page-header pb-2 mt-4 mb-2 border-bottom toc-ignore">
    <h1 class="display-4">Condition multiway data for graphing</h1>
    <small class="dont-index">Source: <a href="https://github.com/MIDFIELDR/midfieldr/blob/master/R/condition_multiway.R"><code>R/condition_multiway.R</code></a></small>
    <div class="d-none name"><code>condition_multiway.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Transform a data frame such that two categorical variables are factors
with levels ordered by medians of the quantitative variable. Rows and
columns of the data frame are otherwise unaffected. The primary goal is to
structure the data for display in a Cleveland "multiway dot plot," where
the ordering of the levels and panels are crucial to the perception of
effects.</p>
    </div>

    <div id="ref-usage" class="ref-usage section level2 sourceCode">
    <pre class="sourceCode r"><code><span class="fu">condition_multiway</span><span class="op">(</span><span class="va">dframe</span>, <span class="va">...</span>, details <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></code></pre>
    </div>

    <h2>Arguments</h2>
    <dl class="row" id="ref-arguments"><dt class="col-sm-3 section level2" id="pkg-arg-dframe">dframe</dt>
      <dd class="col-sm-9" id="ref-arguments desc"><p>Data frame of multiway data.</p></dd>
    <dt class="col-sm-3 section level2" id="pkg-arg-...">...</dt>
      <dd class="col-sm-9" id="ref-arguments desc"><p>Not used, forces later arguments to be used by name.</p></dd>
    <dt class="col-sm-3 section level2" id="pkg-arg-details">details</dt>
      <dd class="col-sm-9" id="ref-arguments desc"><p>Optional flag to add columns reporting the medians on which
the order of the levels is based, default FALSE.</p></dd>
    </dl><div class="ref-section section level2" id="section-value">
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value" aria-hidden="true"></a>Value</h2>

    <p>A <code>data.table</code> with the following properties:</p><ul><li><p>Rows are not modified.</p></li>
<li><p>Quantitative column is not modified.</p></li>
<li><p>Categorical columns are factors with levels ordered by median
        quantitative values with an option to add columns of group medians.</p></li>
<li><p>Grouping structures are not preserved.</p></li>
</ul></div>
    <div class="ref-section section level2" id="section-details">
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details" aria-hidden="true"></a>Details</h2>

    <p>In multiway data---as defined by
Cleveland (1993)
---there is a single
quantitative value (or response) for every combination of levels
of two categorical variables. <code>condition_multiway()</code> converts
the columns of categorical variables to factors and orders the factor
levels by increasing medians of the quantitative response variable.</p>
<p>Note that "multiway" in our context refers to the data structure and graph
design defined by Cleveland, not to the methods of analysis described by
Kroonenberg (2008)
.</p>
<p>In the multiway dot plot, there are panels, the individual dot plots
of the display, and there are levels, the rows of each panel. One category
is encoded by the panels; the other by the rows. All panels have the same
quantitative scale on the x-axis and the same organization of category
levels on the y-axis. Panels and rows are ordered so that medians increase
in "graph order", that is, from left to right and from bottom to top. Hence
the importance of the medians reported by the <code>details</code> argument.</p>
<p>In our implementation, the <code>dframe</code> argument must have three
columns only: two categorical columns (type character or factor) and one
quantitative column (type numeric).</p>
    </div>
    <div class="ref-section section level2" id="section-references">
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references" aria-hidden="true"></a>References</h2>

    <p>Cleveland WS (1993).
<em>Visualizing Data</em>.
Hobart Press, Summit, NJ.<br><br> Kroonenberg PM (2008).
<em>Applied Multiway Data Analysis</em>.
Wiley, Hoboken, NJ.</p>
    </div>
    <div class="ref-section section level2" id="section-see-also">
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also" aria-hidden="true"></a>See also</h2>

    <div class="dont-index"><p>Other condition_*: 
<code><a href="condition_fye.html">condition_fye</a>()</code></p></div>
    </div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples" aria-hidden="true"></a>Examples</h2>
    <div class="ref-examples sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># Construct example data frame</span></span>
<span class="r-in"><span class="va">catg1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"urban"</span>, <span class="st">"rural"</span>, <span class="st">"suburb"</span>, <span class="st">"village"</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span class="r-in"><span class="va">catg2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"men"</span>, <span class="st">"women"</span><span class="op">)</span>, times <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span class="r-in"><span class="va">value</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.22</span>, <span class="fl">0.14</span>, <span class="fl">0.43</span>, <span class="fl">0.58</span>, <span class="fl">0.81</span>, <span class="fl">0.46</span>, <span class="fl">0.15</span>, <span class="fl">0.20</span><span class="op">)</span></span>
<span class="r-in"><span class="va">dframe</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">catg1</span>, <span class="va">catg2</span>, <span class="va">value</span><span class="op">)</span></span>
<span class="r-in"><span class="va">dframe</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     catg1 catg2 value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   urban   men  0.22</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   urban women  0.14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   rural   men  0.43</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   rural women  0.58</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  suburb   men  0.81</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  suburb women  0.46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7 village   men  0.15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8 village women  0.20</span>
<span class="r-in"></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Class before conditioning</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">dframe</span><span class="op">$</span><span class="va">catg1</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "character"</span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">dframe</span><span class="op">$</span><span class="va">catg2</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "character"</span>
<span class="r-in"></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Class and levels after conditioning</span></span>
<span class="r-in"><span class="va">mw1</span> <span class="op">&lt;-</span> <span class="fu">condition_multiway</span><span class="op">(</span><span class="va">dframe</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">mw1</span><span class="op">$</span><span class="va">catg1</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "factor"</span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">mw1</span><span class="op">$</span><span class="va">catg1</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "village" "urban"   "rural"   "suburb" </span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">mw1</span><span class="op">$</span><span class="va">catg2</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "factor"</span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">mw1</span><span class="op">$</span><span class="va">catg2</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "men"   "women"</span>
<span class="r-in"></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Existing factors (if any) are re-ordered</span></span>
<span class="r-in"><span class="va">mw2</span> <span class="op">&lt;-</span> <span class="va">dframe</span></span>
<span class="r-in"><span class="va">mw2</span><span class="op">$</span><span class="va">catg1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">mw2</span><span class="op">$</span><span class="va">catg1</span>,</span>
<span class="r-in">                       levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"rural"</span>, <span class="st">"suburb"</span>, <span class="st">"urban"</span>, <span class="st">"village"</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">mw2</span><span class="op">$</span><span class="va">catg1</span><span class="op">)</span> <span class="co"># levels before conditioning</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "rural"   "suburb"  "urban"   "village"</span>
<span class="r-in"><span class="va">mw2</span> <span class="op">&lt;-</span> <span class="fu">condition_multiway</span><span class="op">(</span><span class="va">mw2</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">mw2</span><span class="op">$</span><span class="va">catg1</span><span class="op">)</span> <span class="co"># levels after conditioning</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "village" "urban"   "rural"   "suburb" </span>
<span class="r-in"></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Report median values</span></span>
<span class="r-in"><span class="va">mw</span> <span class="op">&lt;-</span> <span class="fu">condition_multiway</span><span class="op">(</span><span class="va">dframe</span>, details <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-in"><span class="va">mw</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      catg1 catg2 med_catg1 med_catg2 value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:   urban   men     0.180     0.325  0.22</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:   urban women     0.180     0.330  0.14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:   rural   men     0.505     0.325  0.43</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:   rural women     0.505     0.330  0.58</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:  suburb   men     0.635     0.325  0.81</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:  suburb women     0.635     0.330  0.46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7: village   men     0.175     0.325  0.15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8: village women     0.175     0.330  0.20</span>
</code></pre></div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="sticky-top">
    <nav id="toc"><h2 data-toc-skip>Contents</h2>

    </nav></div>
  </div>
</div>


      <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://github.com/graphdr" class="external-link">Richard Layton</a>, Russell Long, Matthew Ohland, US National Science Foundation.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.6.1.9001.</p>
</div>

      </footer></div>

  

  

  </body></html>

