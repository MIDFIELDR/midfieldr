<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Constructs a data frame of Student Unit Records (SURs) of First-Year 
Engineering (FYE) programs and conditions the data for later use as an 
input to the mice R package for multiple imputation. Sets up three 
variables as predictors (institution, race, and sex) and one variable to 
be predicted (program CIP code) with NA values to be imputed. Requires 
MIDFIELD student and term data frames in the environment."><title>Prepare FYE data for multiple imputation — condition_fye • midfieldr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Prepare FYE data for multiple imputation — condition_fye"><meta property="og:description" content="Constructs a data frame of Student Unit Records (SURs) of First-Year 
Engineering (FYE) programs and conditions the data for later use as an 
input to the mice R package for multiple imputation. Sets up three 
variables as predictors (institution, race, and sex) and one variable to 
be predicted (program CIP code) with NA values to be imputed. Requires 
MIDFIELD student and term data frames in the environment."><meta property="og:image" content="https://midfieldr.github.io/midfieldr/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">midfieldr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0.9024</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/art-000-getting-started.html">Getting started</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-case-study">Case study</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-case-study">
    <a class="dropdown-item" href="../articles/art-001-case-goals.html">Goals</a>
    <a class="dropdown-item" href="../articles/art-002-case-data.html">Data</a>
    <a class="dropdown-item" href="../articles/art-003-case-results.html">Results</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-vignettes">Vignettes</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-vignettes">
    <a class="dropdown-item" href="../articles/art-010-data-sufficiency.html">Data sufficiency</a>
    <a class="dropdown-item" href="../articles/art-020-degree-seeking.html">Degree seeking (inner joins)</a>
    <a class="dropdown-item" href="../articles/art-030-programs.html">Programs</a>
    <a class="dropdown-item" href="../articles/art-040-completion.html">Completion status</a>
    <a class="dropdown-item" href="../articles/art-050-demographics.html">Demographics (left outer joins)</a>
    <a class="dropdown-item" href="../articles/art-060-multiway.html">Multiway data and chatrs</a>
  </div>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/MIDFIELDR/midfieldr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Prepare FYE data for multiple imputation</h1>
      <small class="dont-index">Source: <a href="https://github.com/MIDFIELDR/midfieldr/blob/HEAD/R/condition_fye.R" class="external-link"><code>R/condition_fye.R</code></a></small>
      <div class="d-none name"><code>condition_fye.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Constructs a data frame of Student Unit Records (SURs) of First-Year 
Engineering (FYE) programs and conditions the data for later use as an 
input to the mice R package for multiple imputation. Sets up three 
variables as predictors (institution, race, and sex) and one variable to 
be predicted (program CIP code) with NA values to be imputed. Requires 
MIDFIELD <code>student</code> and <code>term</code> data frames in the environment.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">condition_fye</span><span class="op">(</span><span class="va">midfield_student</span>, <span class="va">midfield_term</span>, <span class="va">...</span>, fye_codes <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>midfield_student</dt>
<dd><p>Data frame of Student Unit Record (SUR) student observations, 
keyed by student ID. Required variables 
are <code>mcid</code>, <code>race</code>, and <code>sex</code>.</p></dd>


<dt>midfield_term</dt>
<dd><p>Data frame of SUR term observations keyed 
by student ID. Required variables are 
<code>mcid</code>, <code>institution</code>, <code>term</code>, and <code>cip6</code>.</p></dd>


<dt>...</dt>
<dd><p>Not used, forces later arguments to be used by name.</p></dd>


<dt>fye_codes</dt>
<dd><p>Optional character vector of 6-digit CIP codes to
identify FYE programs, default 140102. Codes must be 6-digit
strings of numbers; regular expressions are prohibited.
Non-engineering codes---those that do not start with
14---are ignored.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A <code>data.table</code> conditioned for later use as an input to the 
mice R package for multiple imputation. The data have the following 
properties:</p><ul><li><p>One row for every FYE student.</p></li>
<li><p>Grouping structures are not preserved.</p></li>
<li><p>Columns returned:</p><dl><dt><code>mcid</code></dt>
<dd><p>Character, anonymized student identifier. Returned 
           as-is.</p></dd>

   <dt><code>race</code></dt>
<dd><p>Factor, race/ethnicity as self-reported by the 
           student. An imputation predictor variable.</p></dd>

   <dt><code>sex</code></dt>
<dd><p>Factor, sex as self-reported by the 
           student. An imputation predictor variable.</p></dd>
 
   <dt><code>institution</code></dt>
<dd><p>Factor, anonymized institution name. An 
           imputation predictor variable.</p></dd>
 
   <dt><code>cip6</code></dt>
<dd><p>Factor, 6-digit CIP code of a student's known, 
           post-FYE engineering program or NA representing missing 
          values to be imputed.</p></dd>

 
</dl></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>At some US institutions, First-Year Engineering (FYE) programs comprise a 
common first year curriculum that is a prerequisite for declaring a  
engineering major. In longitudinal studies, FYE programs can be problematic 
when combining their observations with those of non-FYE institutions. 
For example, suppose we are calculating a graduation rate for Mechanical 
Engineering (ME) programs. By most definitions, the students starting in ME 
constitute the pool; the fraction of the pool that graduates in ME is the 
rate. FYE starters, even if they graduate in ME, are excluded from the 
count because they did not start in ME.</p>
<p>Therefore, to include FYE students in any persistence metric requiring a
degree-granting "starting" program, we have to predict the engineering
program (such as Electrical Engineering, Mechanical Engineering, etc.) 
the FYE student would have declared had they not been required to
enroll in FYE. The purpose of <code>condition_fye()</code> is to prepare the data 
for making that prediction.</p>
    </div>
    <div class="section level2">
    <h2 id="method">Method<a class="anchor" aria-label="anchor" href="#method"></a></h2>
    
 
<p>The method requires MIDFIELD-style student and term data tables that 
contain at a minimum the institutions being studied that also have FYE 
programs. The function extracts all terms for all FYE students and sorts 
them into two categories:</p>
<ol><li><p>Students who complete an FYE and declare an engineering major.
    This is the easy case--at the student's first opportunity, they
    enrolled in an engineering program of their choosing. We use that
    program as the predicted  starting program.</p></li>
<li><p>Students who, after FYE, do not declare an engineering major.
    This is the more complicated case---the data provide no information
    regarding what engineering program the student would have declared
    originally had the institution not required them to enroll in FYE.
    For these students, we treat the starting program as missing data to be
    predicted using multiple imputation.</p></li>
</ol><p>In cases where students enter FYE, change programs,
and re-enter FYE, only the first group of FYE terms is considered. Any
programs before FYE are ignored. The first (if any) post-FYE program is
identified. If the program is in engineering, the CIP is retained as
their predicted starting major. If not, the CIP is replaced with NA to
be treated as missing data for the imputation.</p>
<p>Lastly, the predictor variables (institution, race, sex) and the predicted
variable (6-digit CIP code) are converted to unordered factors. 
The resulting data frame is ready for use as input for the mice package.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other condition_*: 
<code><a href="condition_multiway.html">condition_multiway</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># # Using toy data</span></span></span>
<span class="r-in"><span><span class="co"># DT &lt;- toy_student[, .(mcid, race, sex)]</span></span></span>
<span class="r-in"><span><span class="co"># condition_fye(dframe = DT, midfield_term = toy_term)</span></span></span>
<span class="r-in"><span><span class="co"># </span></span></span>
<span class="r-in"><span><span class="co"># </span></span></span>
<span class="r-in"><span><span class="co"># # Overwrites institution if present in dframe</span></span></span>
<span class="r-in"><span><span class="co"># DT &lt;- toy_student[, .(mcid, institution, race, sex)]</span></span></span>
<span class="r-in"><span><span class="co"># condition_fye(dframe = DT, midfield_term = toy_term)</span></span></span>
<span class="r-in"><span><span class="co"># </span></span></span>
<span class="r-in"><span><span class="co"># </span></span></span>
<span class="r-in"><span><span class="co"># # Other columns, if any, are dropped</span></span></span>
<span class="r-in"><span><span class="co"># colnames(toy_student)</span></span></span>
<span class="r-in"><span><span class="co"># colnames(condition_fye(toy_student, toy_term))</span></span></span>
<span class="r-in"><span><span class="co"># </span></span></span>
<span class="r-in"><span><span class="co"># </span></span></span>
<span class="r-in"><span><span class="co"># # Optional argument permits multiple CIP codes for FYE</span></span></span>
<span class="r-in"><span><span class="co"># condition_fye(DT, toy_term, fye_codes = c("140101", "140102"))</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://github.com/graphdr" class="external-link">Richard Layton</a>, Russell Long, Matthew Ohland, Marisa Orr, Susan Lord, US National Science Foundation.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

