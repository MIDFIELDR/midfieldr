<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tools for Student Records Research  • midfieldr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Tools for Student Records Research ">
<meta property="og:description" content="Tools for investigating a stratified sample from the MIDFIELD 
  database, a dataset compiled from registrars student records from 
  participating US universities. The sample contains data for every course taken 
  and degrees earned by 98,000 undergraduate students from 1987 to 2016. This 
  package interacts with data available through the midfielddata package, 
  a data package available in a drat repository. To access this data package, run 
  install.packages(&quot;midfielddata&quot;, repos = &quot;https://MIDFIELDR.github.io/drat/&quot;, type = &quot;source&quot;). 
  The size of the midfielddata' package is approximately 31 Mb. This work is  
  supported by a grant from the US National Science Foundation (EEC 1545667). ">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">midfieldr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/using_midfieldr.html">Using midfieldr</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/explore_cip.html">Explore program CIP codes</a>
    </li>
    <li>
      <a href="articles/get_programs.html">Gather programs</a>
    </li>
    <li>
      <a href="articles/feasible_completion.html">Filter for program completion feasibility</a>
    </li>
    <li>
      <a href="articles/explore_multiway.html">Explore multiway data</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Papers/Talks
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/pages/talks.html">Talks</a>
    </li>
  </ul>
</li>
<li>
  <a href="articles/pages/get_session.html">Session info</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
<li>
  <a href="articles/pages/about_midfield.html">About</a>
</li>
<li>
  <a href="https://github.com/MIDFIELDR/midfieldr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="midfieldr-" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#midfieldr-" class="anchor"></a>midfieldr <span class="border-wrap"><img src="reference/figures/logo.png" align="right" height="122" width="106" alt="logo.png"></span>
</h1></div>

<div id="undergoing-major-revision" class="section level2">
<h2 class="hasAnchor">
<a href="#undergoing-major-revision" class="anchor"></a>Undergoing major revision</h2>
<p>Based on feedback from workshop attendees, the package is undergoing major revision to the vignettes and the underlying functionality.</p>
<p>While in this ambiguous state, the package should be used experimentally only. We hope to have the update complete by the end of August 2020.</p>
</div>
<div id="tools-for-student-records-research" class="section level2">
<h2 class="hasAnchor">
<a href="#tools-for-student-records-research" class="anchor"></a>Tools for student records research</h2>
<p>MIDFIELD—the <em>Multiple-Institution Database for Investigating Engineering Longitudinal Development</em>—is a partnership of US higher education institutions with engineering programs <a href="https://engineering.purdue.edu/MIDFIELD">(link)</a>. As of June, 2020, MIDFIELD contains registrar’s population data for 1.7M undergraduates at 19 institutions from 1987–2019. The data are organized in four related tables: students, courses, terms, and degrees. A sample of the MIDFIELD data is provided by the midfielddata package.</p>
<p><strong>midfieldr</strong> is an R package that provides tools specialized for the midfielddata sample data set.</p>
<p><strong>midfielddata</strong> is an R package that provides a stratified sample of the MIDFIELD population data set. The sample contains data for 97,640 undergraduates at 12 institutions from 1987–2016 <a href="https://midfieldr.github.io/midfielddata/">(link)</a>.</p>
<p>For members of MIDFIELD partner institutions: data dictionaries for midfielddata are a subset of those for MIDFIELD. When creating midfielddata, some MIDFIELD variables were omitted and some were re-coded to preserve confidentiality. In general, however, scripts written for the midfielddata sample data set will work for the MIDFIELD population data set.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Install midfielddata first.</p>
<p>Because of its size, the data package is stored in a drat repository. Installation takes time; please be patient and wait for the Console prompt “&gt;” to reappear.</p>
<div class="sourceCode" id="cb1"><pre class="r"><span class="co"># install midfielddata first </span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"midfielddata"</span>,
                 <span class="kw">repos</span> <span class="kw">=</span> <span class="st">"https://MIDFIELDR.github.io/drat/"</span>,
                 <span class="kw">type</span> <span class="kw">=</span> <span class="st">"source"</span>)</pre></div>
<p>To confirm a successful installation, run the following to view the data package help page. A portion of the help page is shown below.</p>
<div class="sourceCode" id="cb2"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">midfielddata</span>)
? <span class="no">midfielddata</span></pre></div>
<p><img src="reference/figures/README-fig0-midfielddata-help-page2.png" alt="midfielddata help page" class="center" width="80%"></p>
<p>Once the midfielddata installation is confirmed successful, install midfieldr. The package should be submitted to CRAN by September 2020.</p>
<div class="sourceCode" id="cb3"><pre class="r"><span class="co"># install from CRAN (when available)</span>
<span class="co"># install.packages("midfieldr")</span>

<span class="co"># or install the development version from GitHub (available now)</span>
<span class="co"># install.packages("devtools")</span>
<span class="kw pkg">devtools</span><span class="kw ns">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="st">"MIDFIELDR/midfieldr"</span>)</pre></div>
</div>
<div id="data" class="section level2">
<h2 class="hasAnchor">
<a href="#data" class="anchor"></a>Data</h2>
<p>The midfieldr package includes:</p>
<ul>
<li>
<code>cip</code> A data frame with 1584 observations and 6 CIP variables of program codes and names at the 2, 4, and 6-digit levels. Each observation is a unique program keyed by a 6-digit CIP code. Occupies 379.9 kB of memory. Data dictionary <a href="https://midfieldr.github.io/midfieldr/reference/cip.html">(link)</a>.</li>
</ul>
<p>The midfielddata package contains the four datasets that comprengr a stratified sample of the MIDFIELD database.</p>
<ul>
<li><p><code>midfieldstudents</code> A data frame with 97,640 observations and 15 demographic variables. Each observation is a unique student keyed by student ID. Occupies 19 MB of memory. Data dictionary <a href="https://midfieldr.github.io/midfielddata/reference/midfieldstudents.html">(link)</a>.</p></li>
<li><p><code>midfieldcourses</code> A data frame with 3.5 M observations and 12 academic course variables keyed by student ID, term, and course. Each observation is one course in one term for one student. Occupies 348.5 MB of memory. Data dictionary <a href="https://midfieldr.github.io/midfielddata/reference/midfieldcourses.html">(link)</a>.</p></li>
<li><p><code>midfieldterms</code> A data frame with 727,369 observations and 13 academic term variables keyed by student ID and term. Each observation is one term for one student. Occupies 81.8 MB of memory. Data dictionary <a href="https://midfieldr.github.io/midfielddata/reference/midfieldterms.html">(link)</a>.</p></li>
<li><p><code>midfielddegrees</code> A data frame with 97,640 observations and 5 graduation variables keyed by student ID. Each observation is a unique student. Occupies 10.2 MB of memory. Data dictionary <a href="https://midfieldr.github.io/midfielddata/reference/midfielddegrees.html">(link)</a>.</p></li>
</ul>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p><strong>data manipulation ecosystem</strong> We use base R in the examples. A user who prefers a dplyr or data.table ecosystem should find the translation to be straightforward.</p>
<p><strong>data frames</strong> midfieldr functions do not preserve data frame extensions such as tibble or data.table. Data frames returned by midfieldr functions are always base R <code>data.frame</code> objects.</p>
<p><strong>graphs</strong> We use ggplot2 in the examples. A translation to lattice or base R graphics should be easily managed by users familiar with those systems.</p>
<p><strong>midfieldr functions</strong> are designed to work with MIDFIELD-structured data to access and manipulate student records. A typical workflow might include:</p>
<ul>
<li>
<code><a href="reference/get_cip.html">get_cip()</a></code> search the CIP data set for program codes<br>
</li>
<li>
<code><a href="reference/label_programs.html">label_programs()</a></code> isolate and label specific programs to study<br>
</li>
<li>
<code><a href="reference/get_enrollees.html">get_enrollees()</a></code> gather students ever enrolled in the programs</li>
<li>
<code>feasible_completion()</code> subset students for 6-year completion feasibility</li>
<li>
<code><a href="reference/get_race_sex.html">get_race_sex()</a></code> obtain student sex and race/ethnicity</li>
<li>
<code><a href="reference/order_multiway.html">order_multiway()</a></code> condition multiway data for graphing</li>
</ul>
<p><strong>examples</strong> A complete example that starts with program selection and concludes with a persistence metric is given in the <a href="articles/using_midfieldr.html">vignette (“Using midfieldr”)</a>.</p>
<p>A short example below illustrates applying of some of these functions. Suppose we want to graph the number of students ever enrolled in Engineering, grouped by sex and race/ethnicity, for whom graduation is feasible within the range of data available.</p>
<p>We start with the CIP code—Engineering CIPs start with 14. <code><a href="reference/get_cip.html">get_cip()</a></code> accesses the <code>cip</code> dataset.</p>
<div class="sourceCode" id="cb4"><pre class="r"><span class="co"># packages used</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">midfieldr</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">ggplot2</span>)

<span class="co"># gather the program CIPs</span>
<span class="no">engr_cip</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/get_cip.html">get_cip</a></span>(<span class="kw">keep_any</span> <span class="kw">=</span> <span class="st">"^14"</span>)
<span class="no">engr</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/label_programs.html">label_programs</a></span>(<span class="kw">data</span> <span class="kw">=</span> <span class="no">engr_cip</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="st">"Engineering"</span>)

<span class="co"># examine the result</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(<span class="no">engr</span>)
<span class="co">#&gt; 'data.frame':    56 obs. of  3 variables:</span>
<span class="co">#&gt;  $ cip6    : chr  "140101" "140102" "140201" "140301" ...</span>
<span class="co">#&gt;  $ cip6name: chr  "Engineering, General" "Pre-Engineering" "Aerospace, Aeronautical and Astronautical, Space Engineering" "Agricultural, Biological Engineering and Bioengineering" ...</span>
<span class="co">#&gt;  $ program : chr  "Engineering" "Engineering" "Engineering" "Engineering" ...</span></pre></div>
<p><code><a href="reference/get_enrollees.html">get_enrollees()</a></code> accesses the <code>midfieldterms</code> dataset using the <code>engr</code> 6-digit CIP column to obtain the IDs of all students ever enrolled in these programs.</p>
<div class="sourceCode" id="cb5"><pre class="r"><span class="co"># extract students ever enrolled</span>
<span class="no">enrollees</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/get_enrollees.html">get_enrollees</a></span>(<span class="kw">codes</span> <span class="kw">=</span> <span class="no">engr</span>$<span class="no">cip6</span>)

<span class="co"># examine the result</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(<span class="no">enrollees</span>)
<span class="co">#&gt; 'data.frame':    26042 obs. of  2 variables:</span>
<span class="co">#&gt;  $ id  : chr  "MID25783162" "MID25783166" "MID25783167" "MID25783167" ...</span>
<span class="co">#&gt;  $ cip6: chr  "14XXXX" "14XXXX" "14XXXX" "140901" ...</span></pre></div>
<p><code>feasible_completion()</code> accesses the students, terms, and degrees datasets to filter for feasible program completion within the limits of the data.</p>
<div class="sourceCode" id="cb6"><pre class="r"><span class="co"># apply the feasible completion filter</span>
<span class="no">ids_we_want</span>  <span class="kw">&lt;-</span> <span class="fu">feasible_completion</span>(<span class="kw">id</span> <span class="kw">=</span> <span class="no">enrollees</span>$<span class="no">id</span>)
<span class="no">rows_we_want</span> <span class="kw">&lt;-</span> <span class="no">enrollees</span>$<span class="no">id</span> <span class="kw">%in%</span> <span class="no">ids_we_want</span>
<span class="no">enrollees</span>    <span class="kw">&lt;-</span> <span class="no">enrollees</span>[<span class="no">rows_we_want</span>, , <span class="kw">drop</span> <span class="kw">=</span> <span class="fl">FALSE</span>]

<span class="co"># examine the result</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(<span class="no">enrollees</span>)
<span class="co">#&gt; 'data.frame':    19970 obs. of  2 variables:</span>
<span class="co">#&gt;  $ id  : chr  "MID25783162" "MID25783178" "MID25783178" "MID25783178" ...</span>
<span class="co">#&gt;  $ cip6: chr  "14XXXX" "14XXXX" "140701" "143501" ...</span></pre></div>
<p><code><a href="reference/get_race_sex.html">get_race_sex()</a></code> accesses the <code>midfieldstudents</code> dataset using the enrollees IDs.</p>
<div class="sourceCode" id="cb7"><pre class="r"><span class="co"># get student demographics </span>
<span class="no">demographics</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/get_race_sex.html">get_race_sex</a></span>(<span class="kw">keep_id</span> <span class="kw">=</span> <span class="no">ids_we_want</span>)

<span class="co"># examine the result</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(<span class="no">demographics</span>)
<span class="co">#&gt; 'data.frame':    14241 obs. of  3 variables:</span>
<span class="co">#&gt;  $ id  : chr  "MID25783162" "MID25783178" "MID25783197" "MID25783259" ...</span>
<span class="co">#&gt;  $ race: chr  "White" "Black" "White" "White" ...</span>
<span class="co">#&gt;  $ sex : chr  "Male" "Male" "Male" "Male" ...</span></pre></div>
<p>To the working data frame, join the student race/ethnicity and sex and the program names.</p>
<div class="sourceCode" id="cb8"><pre class="r"><span class="co"># join demographics and program labels to working data frame </span>
<span class="no">enrollees</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html">merge</a></span>(<span class="no">enrollees</span>, <span class="no">demographics</span>, <span class="kw">all.x</span> <span class="kw">=</span> <span class="fl">TRUE</span>)
<span class="no">enrollees</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html">merge</a></span>(<span class="no">enrollees</span>, <span class="no">engr</span>, <span class="kw">all.x</span> <span class="kw">=</span> <span class="fl">TRUE</span>)

<span class="co"># examine the result</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(<span class="no">enrollees</span>)
<span class="co">#&gt; 'data.frame':    19970 obs. of  6 variables:</span>
<span class="co">#&gt;  $ cip6    : chr  "140101" "140101" "140101" "140101" ...</span>
<span class="co">#&gt;  $ id      : chr  "MID26523480" "MID25942292" "MID25976639" "MID26239077" ...</span>
<span class="co">#&gt;  $ race    : chr  "White" "White" "White" "White" ...</span>
<span class="co">#&gt;  $ sex     : chr  "Male" "Male" "Female" "Male" ...</span>
<span class="co">#&gt;  $ cip6name: chr  "Engineering, General" "Engineering, General" "Engineering, General" "Engineering, General" ...</span>
<span class="co">#&gt;  $ program : chr  "Engineering" "Engineering" "Engineering" "Engineering" ...</span></pre></div>
<p>Group and summarize by race/ethnicity and sex.</p>
<div class="sourceCode" id="cb9"><pre class="r"><span class="co"># initialize the summarizing column</span>
<span class="no">enrollees</span>$<span class="no">ever</span> <span class="kw">&lt;-</span> <span class="fl">0</span>

<span class="co"># group and summarize</span>
<span class="no">grouped_enrollees</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html">aggregate</a></span>(<span class="no">ever</span> ~ <span class="no">race</span> + <span class="no">sex</span>,
  <span class="kw">data</span> <span class="kw">=</span> <span class="no">enrollees</span>,
  <span class="kw">FUN</span> <span class="kw">=</span> <span class="kw">function</span>(<span class="no">x</span>) <span class="no">ever</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(!<span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(<span class="no">x</span>))
)

<span class="co"># examine the result</span>
<span class="no">grouped_enrollees</span>
<span class="co">#&gt;               race    sex  ever</span>
<span class="co">#&gt; 1            Asian Female   302</span>
<span class="co">#&gt; 2            Black Female   775</span>
<span class="co">#&gt; 3         Hispanic Female   138</span>
<span class="co">#&gt; 4    International Female    56</span>
<span class="co">#&gt; 5  Native American Female    21</span>
<span class="co">#&gt; 6            Other Female    51</span>
<span class="co">#&gt; 7          Unknown Female    23</span>
<span class="co">#&gt; 8            White Female  2985</span>
<span class="co">#&gt; 9            Asian   Male  1045</span>
<span class="co">#&gt; 10           Black   Male  1241</span>
<span class="co">#&gt; 11        Hispanic   Male   498</span>
<span class="co">#&gt; 12   International   Male   346</span>
<span class="co">#&gt; 13 Native American   Male    76</span>
<span class="co">#&gt; 14           Other   Male   229</span>
<span class="co">#&gt; 15         Unknown   Male    52</span>
<span class="co">#&gt; 16           White   Male 12132</span></pre></div>
<p>Prepare data for graphing.</p>
<div class="sourceCode" id="cb10"><pre class="r"><span class="co"># remove ambiguous levels of race/ethnicity</span>
<span class="no">pre_mw</span> <span class="kw">&lt;-</span> <span class="no">grouped_enrollees</span>
<span class="no">rows_we_want</span> <span class="kw">&lt;-</span> !<span class="no">pre_mw</span>$<span class="no">race</span> <span class="kw">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"International"</span>, <span class="st">"Other"</span>, <span class="st">"Unknown"</span>)
<span class="no">pre_mw</span> <span class="kw">&lt;-</span> <span class="no">pre_mw</span>[<span class="no">rows_we_want</span>, , <span class="kw">drop</span> <span class="kw">=</span> <span class="fl">FALSE</span>]

<span class="co"># complete the transformation to multiway form</span>
<span class="no">columns_we_want</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"race"</span>, <span class="st">"sex"</span>, <span class="st">"ever"</span>)
<span class="no">pre_mw</span> <span class="kw">&lt;-</span> <span class="no">pre_mw</span>[, <span class="no">columns_we_want</span>, <span class="kw">drop</span> <span class="kw">=</span> <span class="fl">FALSE</span>]

<span class="co"># examine the result</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(<span class="no">pre_mw</span>)
<span class="co">#&gt; 'data.frame':    10 obs. of  3 variables:</span>
<span class="co">#&gt;  $ race: chr  "Asian" "Black" "Hispanic" "Native American" ...</span>
<span class="co">#&gt;  $ sex : chr  "Female" "Female" "Female" "Female" ...</span>
<span class="co">#&gt;  $ ever: int  302 775 138 21 2985 1045 1241 498 76 12132</span></pre></div>
<p><code><a href="reference/order_multiway.html">order_multiway()</a></code> converts the categorical variables to factors and orders the levels by the median of the quantitative variable.</p>
<div class="sourceCode" id="cb11"><pre class="r"><span class="no">data_mw</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/order_multiway.html">order_multiway</a></span>(<span class="no">pre_mw</span>)

<span class="co"># examine the result</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(<span class="no">data_mw</span>)
<span class="co">#&gt; 'data.frame':    10 obs. of  3 variables:</span>
<span class="co">#&gt;  $ race: Factor w/ 5 levels "Native American",..: 3 4 2 1 5 3 4 2 1 5</span>
<span class="co">#&gt;  $ sex : Factor w/ 2 levels "Female","Male": 1 1 1 1 1 2 2 2 2 2</span>
<span class="co">#&gt;  $ ever: num  302 775 138 21 2985 ...</span>

<span class="co"># total number of students for graph subtitle</span>
<span class="no">n_ever</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(<span class="no">data_mw</span>$<span class="no">ever</span>)
<span class="no">n_ever</span>
<span class="co">#&gt; [1] 19213</span></pre></div>
<p>And we’re ready to graph the results.</p>
<div class="sourceCode" id="cb12"><pre class="r"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw">data</span> <span class="kw">=</span> <span class="no">data_mw</span>, <span class="kw">mapping</span> <span class="kw">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">ever</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">race</span>)) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span>(<span class="kw">facets</span> <span class="kw">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html">vars</a></span>(<span class="no">sex</span>), <span class="kw">ncol</span> <span class="kw">=</span> <span class="fl">1</span>, <span class="kw">as.table</span> <span class="kw">=</span> <span class="fl">FALSE</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>(<span class="kw">na.rm</span> <span class="kw">=</span> <span class="fl">TRUE</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span>(<span class="kw">trans</span> <span class="kw">=</span> <span class="st">'log2'</span>, <span class="kw">breaks</span> <span class="kw">=</span> <span class="fl">2</span>^<span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="fl">0</span>, <span class="fl">15</span>)) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="st">"Number of students, log-2 scale"</span>,
       <span class="kw">y</span> <span class="kw">=</span> <span class="st">""</span>,
       <span class="kw">title</span> <span class="kw">=</span> <span class="st">"Ever enrolled in Engineering"</span>,
       <span class="kw">subtitle</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/bquote.html">bquote</a></span>(<span class="no">N</span> <span class="kw">==</span> <span class="fu">.</span>(<span class="no">n_ever</span>)),
       <span class="kw">caption</span> <span class="kw">=</span> <span class="st">"Source: midfielddata"</span>
       ) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span>(<span class="kw">panel.grid.minor.x</span> <span class="kw">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span>())</pre></div>
<p><img src="reference/figures/README-fig1-1.png" width="70%" style="display: block; margin: auto;"></p>
</div>
<div id="meta" class="section level2">
<h2 class="hasAnchor">
<a href="#meta" class="anchor"></a>Meta</h2>
<ul>
<li>Data provided by MIDFIELD <a href="https://engineering.purdue.edu/MIDFIELD">(link)</a><br>
</li>
<li>Get citation information with <code><a href="https://rdrr.io/r/utils/citation.html">citation("midfieldr")</a></code>
</li>
<li>This project is released with a Code of Conduct <a href="https://midfieldr.github.io/midfieldr/CONDUCT.html">(link)</a>. If you contribute to this project you agree to abide by its terms.</li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/MIDFIELDR/midfieldr/">https://​github.com/​MIDFIELDR/​midfieldr/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/MIDFIELDR/midfieldr/issues">https://​github.com/​MIDFIELDR/​midfieldr/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> | file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Richard Layton <br><small class="roles"> Maintainer, author </small>  </li>
<li>Russell Long <br><small class="roles"> Data manager, author </small>  </li>
<li>Matthew Ohland <br><small class="roles"> Author </small>  </li>
<li>US National Science Foundation <br><small class="roles"> Funder </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.gnu.org/licenses/gpl-3.0"><img src="reference/figures/License-GPL-v3-blue.svg" alt="License: GPL v3"></a></li>
<li><a href="https://cran.r-project.org/package=midfieldr"><img src="https://cranlogs.r-pkg.org/badges/grand-total/midfieldr" alt="Downloads"></a></li>
<li><a href="http://cran.r-project.org/package=midfieldr"><img src="http://www.r-pkg.org/badges/version/midfieldr" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://travis-ci.org/MIDFIELDR/midfieldr"><img src="https://travis-ci.org/MIDFIELDR/midfieldr.svg?branch=master" alt="Build Status"></a></li>
<li><a href="https://codecov.io/github/MIDFIELDR/midfieldr?branch=master"><img src="https://img.shields.io/codecov/c/github/MIDFIELDR/midfieldr/master.svg" alt="Coverage Status"></a></li>
<li><a href="https://www.tidyverse.org/lifecycle/#experimental"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="lifecycle"></a></li>
<li><a href="https://www.repostatus.org/#wip"><img src="https://www.repostatus.org/badges/latest/wip.svg" alt="Project Status: WIP – Initial development is in progress, but there has not yet been a stable, usable release suitable for the public."></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Richard Layton, Russell Long, Matthew Ohland, US National Science Foundation.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
