---
output: github_document
editor_options: 
  chunk_output_type: console
bibliography: inst/REFERENCES.bib
csl: inst/body-and-society.csl
link-citations: yes
resource_files:
  - man/figures/README-midfielddata-help-page-2.png
  - man/figures/README-fig1-1.png
  - man/figures/README-midfieldr-help-page-2.png
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r setup, include = FALSE}
knitr::opts_chunk$set(fig.path = "man/figures/readme-")
knitr::opts_chunk$set(
  echo = TRUE,
  message = FALSE,
  warning = FALSE,
  collapse = TRUE,
  comment = "#>",
  error = FALSE,
  fig.width = 6,
  fig.asp = 1 / 1.6,
  out.width = "70%",
  fig.align = "center"
)
knitr::knit_hooks$set(inline = function(x) {
  if (!is.numeric(x)) {
    x
  } else if (x >= 10000) {
    prettyNum(round(x, 2), big.mark = ",")
  } else {
    prettyNum(round(x, 2))
  }
})
kable2html <- function(x, font_size = NULL, caption = NULL) {
  font_size <- ifelse(is.null(font_size), 11, font_size)
  kable_in <- knitr::kable(x, format = "html", caption = caption)
  kableExtra::kable_styling(kable_input = kable_in, font_size = font_size)
}
library(midfieldr)
library(midfielddata)
```

# midfieldr <span class="border-wrap"><img src="man/figures/logo.png" align="right" height="122" width="106" alt="logo.png"></span>

[![License: GPL v2](https://img.shields.io/badge/License-GPL%20v2-blue.svg)](https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html)
[![License: GPL v3](https://img.shields.io/badge/License-GPLv3-blue.svg)](https://www.gnu.org/licenses/gpl-3.0)
[![Downloads](https://cranlogs.r-pkg.org/badges/grand-total/midfieldr)](https://cran.r-project.org/package=midfieldr)
[![CRAN_Status_Badge](http://www.r-pkg.org/badges/version/midfieldr)](http://cran.r-project.org/package=midfieldr)
[![Build Status](https://travis-ci.org/MIDFIELDR/midfieldr.svg?branch=master)](https://travis-ci.org/MIDFIELDR/midfieldr)
[![Coverage Status](https://img.shields.io/codecov/c/github/MIDFIELDR/midfieldr/master.svg)](https://codecov.io/github/MIDFIELDR/midfieldr?branch=main)
[![lifecycle](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://www.tidyverse.org/lifecycle/#experimental)
[![Project Status: WIP â€“ Initial development is in progress, but there has not yet been a stable, usable release suitable for the public.](https://www.repostatus.org/badges/latest/wip.svg)](https://www.repostatus.org/#wip)

```{r, echo = FALSE}
# constants from the data sets

# cip
obs_cip <- 1584
var_cip <- 6
size_cip <- "380 kB"

# midfieldstudents
obs_students <- 97640
var_students <- 15
size_students <- "19 MB"

# midfieldcourses
obs_courses <- 3.5e6
var_courses <- 12
size_courses <- "349 MB"

# midfielddegrees
obs_degrees <- 97640
var_degrees <- 5
size_degrees <- "10.2 MB"

# midfieldterms
obs_terms <- 727369
var_terms <- 13
size_terms <- "82 MB"
n_inst <- 12
year_limits <- c(1987, 2016)
```



## Undergoing major revision

Based on feedback from workshop attendees, the package is undergoing major revision to the vignettes and the underlying functionality. 

While in this ambiguous state, the package should be used experimentally only. We hope to have the update completed by July 2021.  



## Tools for student records research

The *Multiple-Institution Database for Investigating Engineering Longitudinal Development* [(MIDFIELD)](https://engineering.purdue.edu/MIDFIELD) is a partnership of US higher education institutions with engineering programs. MIDFIELD contains registrar's data for 1.7M undergraduates in all majors at 19 institutions from 1987--2019. The data are organized in four related tables: students, courses, terms, and degrees. 

Two R packages are available: 

- **midfielddata** [(link)](https://midfieldr.github.io/midfielddata/) An R data package providing a stratified sample of MIDFIELD data. Contains data for `r obs_students` undergraduates at `r n_inst` institutions from `r year_limits[1]`--`r year_limits[2]` in four data sets: `midfieldstudents`, `midfieldcourses`, `midfieldterms`, and `midfielddegrees`. 

- **midfieldr** An R package providing functions specialized for manipulating MIDFIELD data to  examine the intersectionality of race/ethnicity, sex, and discipline in persistence metrics such as stickiness (retention by a discipline) and graduation rate.  



## Data

Data are available in two forms: a publicly-available practice data set in the midfielddata package; and a complete research data set from MIDFIELD upon approval. 

**Practice data**

The practice data provided in midfieldr and midfielddata give users the opportunity to learn about analysis of student records using R---definitions, assumptions, and methods---with detailed examples for practice. However, these data are not suitable for drawing inferences about student performance, i.e., not for research.  

The midfielddata package contains four data sets that are proportionate stratified random samples of 12 institutions in the larger MIDFIELD data sets. Strata are institution, cip4 (the first four digits of the 6-digit CIP code), transfer status, race/ethnicity, and sex. 

- `midfieldstudents` Data frame with `r obs_students` observations and `r var_students` demographic variables. Each observation is a unique student keyed by student ID. Occupies `r size_students` of memory. Data dictionary   [(link)](https://midfieldr.github.io/midfielddata/reference/midfieldstudents.html). 

- `midfieldcourses` Data frame with `r round(obs_courses/1e6, 1)` M observations and `r var_courses` academic course variables keyed by student ID, term, and course. Each observation is one course in one term for one student. Occupies `r size_courses` of memory. Data dictionary  [(link)](https://midfieldr.github.io/midfielddata/reference/midfieldcourses.html).

- `midfieldterms` Data frame with `r obs_terms` observations and `r var_terms` academic term variables keyed by student ID and term. Each observation is one term for one student. Occupies `r size_terms` of memory. Data dictionary  [(link)](https://midfieldr.github.io/midfielddata/reference/midfieldterms.html).

- `midfielddegrees` A data frame with `r obs_degrees` observations and `r var_degrees` graduation variables keyed by student ID. Each observation is a unique student. Occupies `r size_degrees` of memory. Data dictionary  [(link)](https://midfieldr.github.io/midfielddata/reference/midfielddegrees.html).

In making the midfielddata package public, confidentiality required some  variables to be anonymized and others to be omitted. Thus the public midfielddata data dictionary is a subset of the research data dictionary of the complete MIDFIELD database. 

In addition to these data sets, the midfieldr package includes: 

- `cip`  Data frame with `r obs_cip` observations and `r var_cip` CIP variables of the 2010 program codes and names at the 2, 4, and 6-digit levels. Each observation is a unique program keyed by a 6-digit CIP code. Occupies `r size_cip` of memory.  Data dictionary [(link)](reference/cip.html). 

**Research data**

Complete MIDFIELD data sets  suitable for student-records research are available to researchers under the following conditions:

- Your institutional IRB has granted approval for your project to study students using MIDFIELD. At most institutions, the use of MIDFIELD data for research is  in the IRB "Exempt" category, but institutional practices vary. 
- Each researcher using the data signs a letter of confidentiality describing  the guidelines for how the data may be reported.

The research data and practice data have the same structure (students, degrees, terms, and courses) with consistent variable names. Thus R scripts written for the practice data sets using midfieldr functionality are expected to be used with the research data set with minor (if any) modifications.   

For information about obtaining access to MIDFIELD research data, contact Russell Long (ralong@purdue.edu).


## For the absolute R beginner

Experienced R users may skip this section. 

If you are an R novice and need an introduction to the R environment, there are good introductory tutorials available. Our recommendations include: 

- Basic Basics series by R Ladies Sydney [(link)](https://www.youtube.com/hashtag/ryouwithme). Step-by-step video tutorials.  
- A Beginner's Guide to R [@Zuur+Ieno+Meesters:2009]. A good resource for the absolute R beginner. 



## Install the data sets

Install midfielddata first. 

Because of its size, the data package is stored in a `drat` repository. Installation takes time; please be patient and wait for the Console prompt ">" to reappear.

```r
# install midfielddata first 
install.packages("midfielddata", 
                 repos = "https://MIDFIELDR.github.io/drat/", 
                 type = "source")
```

To confirm a successful installation, run the following to view the package help page. 

```r
library(midfielddata)
? midfielddata
```

If the installation is successful, the code chunk above should produce a view of the help page as shown here.  If this step is successful, you can go on to the next step. 

<img src="man/figures/README-midfielddata-help-page-2.png" alt="midfielddata help page" class="center" width="80%">



## Install midfieldr

We use the `install_github()` function from the remotes package to install midfieldr from GitHub. (Note to experienced users: you can use devtools if you have it installed. We suggest the remotes package to reduce the number of package dependencies.)

```r
# install the remotes package
install.packages("remotes")

# install midfieldr from GitHub
remotes::install_github("MIDFIELDR/midfieldr")
```

To confirm a successful installation, run the following to view the package help page. 

```r
library(midfieldr)
? midfieldr
```

If the installation is successful, the code chunk above should produce a view of the help page as shown here. 

<img src="man/figures/README-midfieldr-help-page-2.png" alt="midfieldr help page" class="center" width="80%">



## Usage

**midfieldr functions** work with MIDFIELD-structured data to access and manipulate student records. A typical workflow might include:  

- `filter_text()` gather programs to study  
- `prepare_fye_mi()` condition first-year-engineering data for multiple imputation
- `subset_ipeds()` subset for the IPEDS definition of successful graduation
- `subset_feasible()` subset for 6-year completion feasibility
- `prepare_multiway()` condition multiway data for graphing 

**R ecosystem**. midfieldr uses data.table functions and syntax. midfielddata data sets are class `data.table` and `data.frame`. However, midfieldr functions attempt to preserve data frame extensions assigned by the user (`tbl` for example). Thus users who prefer a different "dialect" such as base R or dplyr should find that the package is compatible with their preference. 

In general the midfieldr vignettes use the following packages: 

- midfieldr 
- midfielddata 
- data.table [@Dowle+Srinivasan:2020:data.table]
- ggplot2 [@Wickham:2016:ggplot2]

**Get started** vignette [(link)](articles/get_started.html) introduces some of the basic midfieldr functions and the midfielddata data sets. Additional vignettes develop the material in more detail.  



## Meta

- Data provided by MIDFIELD [(link)](https://engineering.purdue.edu/MIDFIELD)   
- Get citation information with `citation("midfieldr")` 
- This project is released with a Code of Conduct  [(link)](CONDUCT.html). If you contribute to this project you agree to abide by its terms. 



## References

<div id="refs"></div>


