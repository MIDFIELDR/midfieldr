---
output: github_document
---

```{r setup, echo = FALSE, message = FALSE}
library(knitr)
opts_knit$set(root.dir = "../")
opts_chunk$set(echo = FALSE, message = FALSE)
knit_hooks$set(inline = function(x) {
	if (!is.numeric(x)) { 
		x 
		} else if (x >= 10000) { 
		prettyNum(round(x, 2), big.mark = ",")
		} else {
		prettyNum(round(x, 2))
		}
	})
```

```{r}
library(midfieldr)
```

# midfieldr <a href="https://engineering.purdue.edu/MIDFIELD" target="blank"><img src="man/figures/midfieldcut.png" align="right"/></a>

[![License: GPL v3](man/figures/License-GPL-v3-blue.svg)](https://www.gnu.org/licenses/gpl-3.0)
[![CRAN_Status_Badge](http://www.r-pkg.org/badges/version/midfieldr)](http://cran.r-project.org/package=midfieldr)
[![Build Status](https://travis-ci.org/MIDFIELDR/midfieldr.svg?branch=master)](https://travis-ci.org/MIDFIELDR/midfieldr)
[![Coverage Status](https://img.shields.io/codecov/c/github/MIDFIELDR/midfieldr/master.svg)](https://codecov.io/github/MIDFIELDR/midfieldr?branch=master)

```{r}
# unpack data bits
data_bits    <- midfieldr:::data_bits_cip
obs_cip      <- round(data_bits$data[data_bits$name == "obs_cip"] / 1e+0, 1)
var_cip      <- data_bits$data[data_bits$name == "var_cip"]
size_cip     <- round(data_bits$data[data_bits$name == "size_cip"] / 1e+3, 0)

data_bits    <- midfieldstudents:::data_bits_students
obs_student  <- round(data_bits$data[data_bits$name == "obs_student"] / 1e+0, 1)
size_student <- round(data_bits$data[data_bits$name == "size_student"] / 1e+6, 0)
var_student  <- data_bits$data[data_bits$name == "var_student"]
year_min     <- data_bits$data[data_bits$name == "year_min"] 

data_bits    <- midfielddegrees:::data_bits_degrees
obs_degree   <- round(data_bits$data[data_bits$name == "obs_degree"] / 1e+0, 1)
var_degree   <- data_bits$data[data_bits$name == "var_degree"]
size_degree  <- round(data_bits$data[data_bits$name == "size_degree"] / 1e+6, 0)
award_degree <- round(data_bits$data[data_bits$name == "award_degree"] / 1e+0, 1)
year_max     <- data_bits$data[data_bits$name == "year_max"] 

data_bits    <- midfieldterms:::data_bits_terms
obs_term     <- round(data_bits$data[data_bits$name == "obs_term"] / 1e+0, 1)
var_term     <- data_bits$data[data_bits$name == "var_term"]
size_term    <- round(data_bits$data[data_bits$name == "size_term"] / 1e+6, 0)

data_bits    <- midfieldcourses:::data_bits_courses
obs_course   <- round(data_bits$data[data_bits$name == "obs_course"] / 1e+6, 1)
var_course   <- data_bits$data[data_bits$name == "var_course"]
size_course  <- round(data_bits$data[data_bits$name == "size_course"] / 1e+6, 0)
```

midfieldr is a package for investigating student record data provided by registrars at US universities participating in the MIDFIELD project. 

A stratified sample of the MIDFIELD database is accessible using midfieldr. The sample comprises demographic, term, course, and degree information for `r obs_student` undergraduate students from `r year_min` to `r year_max`. Because of their size, the sample datasets are provided in separate data packages.

midfieldr includes functions for selecting specific fields of study and  aggregating, computing, and graphing student persistence metrics.

## Installation

midfieldr is not currently available from CRAN, but the development version can be installed from GitHub with:

    install.packages("devtools")
    devtools::install_github("MIDFIELDR/midfieldr")

## Usage

The basic units for computing persistence metrics are the individual student, course, term, program, or institution. 

For investigating graduation rates

- `gather_start()` 
- `gather_grad()` 
- `tally_gradrate()` 
- `graph_gradrate()` 

For investigating stickiness 

- `gather_ever()`
- `gather_grad()` 
- `tally_stickiness()` 
- `graph_stickiness()`  

Helper functions 

- `cip_filter()` 
- `join_demographics()` 
- `count_and_fill()` 

## Data 

The sample of the MIDFIELD database that is accessible using midfieldr and its data packages includes:   

- `cip` in the [midfieldr](https://github.com/MIDFIELDR/midfieldr) package. A tidy data frame with `r obs_cip` observations and `r var_cip` CIP variables of program codes and names at the 2, 4, and 6-digit levels. Each observation is a unique program. Occupies `r size_cip` kb of memory.  

- `midfieldstudents` in the [midfieldstudents](https://github.com/MIDFIELDR/midfieldstudents) package. A tidy data frame with `r obs_student` observations and `r var_student` demographic variables. Each observation is a unique student. Ooccupies `r size_student` Mb of memory.  

- `midfieldcourses` in the [midfieldcourses](https://github.com/MIDFIELDR/midfieldcourses) package. A tidy data frame with `r obs_course` M observations and `r var_course` academic course variables. Each observation is one course in one term for one student. Occupies `r size_course` Mb of memory. 

- `midfieldterms` in the [midfieldterms](https://github.com/MIDFIELDR/midfieldterms) package. A tidy data frame with `r obs_term` observations and `r var_term` academic term variables. Each observation is one term for one student. Occupies `r size_term` Mb of memory. 

- `midfielddegrees` in the [midfielddegrees](https://github.com/MIDFIELDR/midfielddegrees) package. A tidy data frame with `r obs_degree` observations and `r var_degree` graduation variables. Each observation is a unique student. Occupies `r size_degree` Mb of memory.

## Meta

- Please [report any issues or bugs](https://github.com/MIDFIELDR/midfieldr/issues). 
- License: GPL-3. 
- Get citation information with `citation(package = 'midfieldr')`. 
- Please note that this project is released with a [Code of Conduct](CONDUCT.md). If you contribute to this project you agree to abide by its terms. 
  
