---
output: github_document
bibliography: inst/REFERENCES.bib
csl: inst/body-and-society.csl
link-citations: yes
resource_files:
  - man/figures/README-midfielddata-help-page-2.png
  - man/figures/README-fig1-1.png
  - man/figures/README-midfieldr-help-page-2.png
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r setup, include = FALSE}
knitr::opts_chunk$set(fig.path = "man/figures/readme-")
knitr::opts_chunk$set(
  echo = TRUE,
  message = FALSE,
  warning = FALSE,
  collapse = TRUE,
  comment = "#>",
  error = FALSE,
  fig.width = 6,
  fig.asp = 1 / 1.6,
  out.width = "70%",
  fig.align = "center"
)
knitr::knit_hooks$set(inline = function(x) {
  if (!is.numeric(x)) {
    x
  } else if (x >= 10000) {
    prettyNum(round(x, 2), big.mark = ",")
  } else {
    prettyNum(round(x, 2))
  }
})
kable2html <- function(x, font_size = NULL, caption = NULL) {
  font_size <- ifelse(is.null(font_size), 11, font_size)
  kable_in <- knitr::kable(x, format = "html", caption = caption)
  kableExtra::kable_styling(kable_input = kable_in, font_size = font_size)
}
library(midfieldr)
library(midfielddata)
```

# midfieldr <span class="border-wrap"><img src="man/figures/logo.png" align="right" height="122" width="106" alt="logo.png"></span>

[![License: GPL v2](https://img.shields.io/badge/License-GPL%20v2-blue.svg)](https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html)
[![License: GPL v3](https://img.shields.io/badge/License-GPLv3-blue.svg)](https://www.gnu.org/licenses/gpl-3.0)
[![Downloads](https://cranlogs.r-pkg.org/badges/grand-total/midfieldr)](https://cran.r-project.org/package=midfieldr)
[![CRAN_Status_Badge](http://www.r-pkg.org/badges/version/midfieldr)](http://cran.r-project.org/package=midfieldr)
[![Build Status](https://travis-ci.org/MIDFIELDR/midfieldr.svg?branch=master)](https://travis-ci.org/MIDFIELDR/midfieldr)
[![Coverage Status](https://img.shields.io/codecov/c/github/MIDFIELDR/midfieldr/master.svg)](https://codecov.io/github/MIDFIELDR/midfieldr?branch=main)
[![lifecycle](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://www.tidyverse.org/lifecycle/#experimental)
[![Project Status: WIP â€“ Initial development is in progress, but there has not yet been a stable, usable release suitable for the public.](https://www.repostatus.org/badges/latest/wip.svg)](https://www.repostatus.org/#wip)

```{r, echo = FALSE}
# constants from the data sets

# cip
obs_cip <- 1584
var_cip <- 6
size_cip <- "380 kB"

# midfieldstudents
obs_students <- 97640
var_students <- 13
size_students <- "19 MB"

# midfieldcourses
obs_courses <- 3.5e6
var_courses <- 12
size_courses <- "349 MB"

# midfielddegrees
obs_degrees <- 97640
var_degrees <- 5
size_degrees <- "10.2 MB"

# midfieldterms
obs_terms <- 727369
var_terms <- 13
size_terms <- "82 MB"
n_inst <- 12
year_limits <- c(1987, 2016)
```






## Undergoing major revision

Based on feedback from workshop attendees and use-testing, the package is undergoing major revision to the vignettes and the underlying functionality. While in this ambiguous state, the package should be used experimentally only. We hope to have the update completed by July 2021.  






## Tools for student records research

The *Multiple-Institution Database for Investigating Engineering Longitudinal Development* (MIDFIELD) is a partnership of US higher education institutions with engineering programs. MIDFIELD contains registrar's data for 1.7M undergraduates in all majors at 19 institutions from 1987--2019 [@Ohland+Long:2016].

Our software environment comprises two R packages:  

- **midfieldr** An R package providing functions specialized for manipulating MIDFIELD data to examine the intersectionality of race/ethnicity, sex, and discipline in persistence metrics such as stickiness (retention by a discipline) and graduation rate. 

- **midfielddata** [(link)](https://midfieldr.github.io/midfielddata/) An R  package with practice data for users to learn about student record analysis  using R. However, these data are not suitable for drawing inferences about student performance, i.e., not for research. 

## Data

**Taxonomy of programs**

midfieldr includes `cip`, a data frame of the 2010 *Classification of Instructional Programs* (CIP)---a taxonomy of academic programs curated by the US Department of Education, National Center for Education Statistics (NCES), Integrated Postsecondary Education Data System (IPEDS). 

- `cip`  Data frame with `r obs_cip` observations and `r var_cip` variables providing program codes and names at the 2, 4, and 6-digit levels. Each observation is a unique program keyed by a 6-digit CIP code. Occupies `r size_cip` of memory.  [(Link)](reference/cip.html) to data dictionary. 

**Student records for practice**

midfielddata provides a proportionate stratified random sample of the MIDFIELD research data. The sampling strata are institution, cip4 (the first four digits of the 6-digit CIP code), transfer status, race/ethnicity, and sex. Contains data for `r obs_students` undergraduates at `r n_inst` institutions from `r year_limits[1]`--`r year_limits[2]` in four data sets:

- `midfieldstudents` Data frame with `r obs_students` observations and `r var_students` demographic variables. Each observation is a unique student keyed by student ID. Occupies `r size_students` of memory.  [(Link)](https://midfieldr.github.io/midfielddata/reference/midfieldstudents.html) to data dictionary. 

- `midfieldcourses` Data frame with `r round(obs_courses/1e6, 1)` M observations and `r var_courses` academic course variables keyed by student ID, term, and course. Each observation is one course in one term for one student. Occupies `r size_courses` of memory. [(Link)](https://midfieldr.github.io/midfielddata/reference/midfieldcourses.html) to data dictionary. 

- `midfieldterms` Data frame with `r obs_terms` observations and `r var_terms` academic term variables keyed by student ID and term. Each observation is one term for one student. Occupies `r size_terms` of memory. [(Link)](https://midfieldr.github.io/midfielddata/reference/midfieldterms.html) to data dictionary. 

- `midfielddegrees` A data frame with `r obs_degrees` observations and `r var_degrees` graduation variables keyed by student ID. Each observation is a unique student. Occupies `r size_degrees` of memory. [(Link)](https://midfieldr.github.io/midfielddata/reference/midfielddegrees.html) to data dictionary. 

In making the midfielddata package public, maintaining confidentiality required that some variables be omitted and that student and institution identifiers be anonymized.

**Student records for research**

Complete MIDFIELD data suitable for student-records research are available to researchers under the following conditions:

- Your institutional IRB has granted approval for your project to study students using MIDFIELD. At most institutions, the use of MIDFIELD data for research is  in the IRB "Exempt" category, but institutional practices vary. 

- Each researcher using the data signs a letter of confidentiality describing  the guidelines for how the data may be reported.

The research data and practice data have the same structure (`student`, `course`, `term`, and `degree`) with the same variable names, though some research variables are omitted from the practice data, as noted above. Thus R scripts written for the practice data should generally work with the research data.  

For more information about obtaining access to MIDFIELD research data, contact Russell Long (ralong@purdue.edu)

## Install the data

Install midfielddata first. 

Because of its size, the data package is stored in a `drat` repository. Installation takes time; please be patient and wait for the Console prompt ">" to reappear. Type (or copy and paste) the following lines in the Console. 

```r
# install midfielddata first 
install.packages("midfielddata", 
                 repos = "https://MIDFIELDR.github.io/drat/", 
                 type = "source")
# be patient
```

Once the Console prompt ">" reappears, you can confirm a successful installation by viewing the package help page. In the Console, run:

```r
library("midfielddata")
? midfielddata
```

If the installation is successful, the code chunk above should produce a view of the help page as shown here.  If this step is successful, you can go on to the next step. 

<img src="man/figures/README-midfielddata-help-page-2.png" alt="midfielddata help page" class="center" width="80%">

## Install midfieldr

We use the `install_github()` function from the remotes package to install midfieldr from GitHub. In the Console, run:

```r
# install the remotes package
install.packages("remotes")

# install midfieldr from GitHub
remotes::install_github("MIDFIELDR/midfieldr")
```

You can confirm a successful installation by viewing the package help page. In the Console, run:

```r
library("midfieldr")
? midfieldr
```

If the installation is successful, the code chunk above should produce a view of the help page as shown here. 

<img src="man/figures/README-midfieldr-help-page-2.png" alt="midfieldr help page" class="center" width="80%">

## Usage

**midfieldr functions** work with MIDFIELD-structured data to access and manipulate student records. Usage examples are given in the vignettes, but an outline of a typical workflow might include these midfieldr functions: 

- `filter_text()` identify program names and codes
- `subset_matriculant()` limit the study to students with a matriculation record
- `add_timely_limit()` estimate the latest term for which program completion could be considered timely 
- `eval_fair_record()` determine if data have sufficient span to fairly assess a student's record 
- `eval_timely_completion()` determine if a student completes their program in a timely manner 
- `add_race_sex()` obtain student demographics
- `prepare_multiway()` condition multiway data for graphing 

**R ecosystem**. Internally, midfieldr and midfielddata use a data.table syntax and structure. However, midfieldr functions attempt to preserve other data frame classes such as the plain data frame in base R or the tibble structure in dplyr. Thus users should find midfieldr compatible with their preferred "dialect." 

In general the midfieldr vignettes use the following packages: 

- midfieldr 
- midfielddata 
- data.table [@Dowle+Srinivasan:2020:data.table]
- ggplot2 [@Wickham:2016:ggplot2]

**Get started** vignette [(link)](articles/get_started.html) introduces some of the basic midfieldr functions and the midfielddata data sets. Additional vignettes (accessible from the *Vignettes* pull-down menu) develop the material in more detail.  

## Meta

- For more information about MIDFIELD  [(link)](https://engineering.purdue.edu/MIDFIELD)   
- Get citation information with `citation("midfieldr")` and  `citation("midfielddata")`
- This project is released with a Code of Conduct  [(link)](CONDUCT.html). If you contribute to this project you agree to abide by its terms. 

## References

<div id="refs"></div>
