---
output: github_document
bibliography: inst/REFERENCES.bib
editor_options: 
  chunk_output_type: console
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r setup, echo = FALSE, message = FALSE}
library("midfieldr")
library("dplyr")
library("knitr")
load("R/sysdata.rda")

knitr::opts_chunk$set(
  # these options tend to vary from one Rmd to another
  echo = FALSE,
  fig.path = "man/figures/README-",

  # these options tend to remain constant
  collapse = TRUE,
  comment = "#>",
  message = FALSE,
  warning = FALSE,
  fig.width = 6,
  fig.asp = 1 / 1.6,
  out.width = "70%",
  fig.align = "center",

  # http://r-pkgs.had.co.nz/vignettes.html: error = TRUE captures errors in
  # the block and shows them inline. This is useful for demonstrating what
  # happens if code throws an error. If you use error = TRUE, set
  # purl = FALSE. Vignettes are accompanied by files containing all the
  # code from the vignette. purl = FALSE prevents the code from being
  # inserted into that file
  error = TRUE,
  purl = FALSE
)

knitr::knit_hooks$set(inline = function(x) {
  if (!is.numeric(x)) {
    x
  } else if (x >= 10000) {
    prettyNum(round(x, 2), big.mark = ",")
  } else {
    prettyNum(round(x, 2))
  }
})

options(tibble.print_min = 8L, tibble.print_max = 8L)
```






# midfieldr <span class="border-wrap"><img src="man/figures/logo.png" align="right" height="122" width="106" alt="logo.png"></span>

```{r}
Usage <- c(
  "[![License: GPL v3](man/figures/License-GPL-v3-blue.svg)](https://www.gnu.org/licenses/gpl-3.0)",
  "[![Downloads](https://cranlogs.r-pkg.org/badges/grand-total/midfieldr)](https://cran.r-project.org/package=midfieldr)"
)
Release <- c(
  "[![CRAN_Status_Badge](http://www.r-pkg.org/badges/version/midfieldr)](http://cran.r-project.org/package=midfieldr)", 
  ""
)
Development <- c(
  "[![Build Status](https://travis-ci.org/MIDFIELDR/midfieldr.svg?branch=master)](https://travis-ci.org/MIDFIELDR/midfieldr) [![Coverage Status](https://img.shields.io/codecov/c/github/MIDFIELDR/midfieldr/master.svg)](https://codecov.io/github/MIDFIELDR/midfieldr?branch=master)", 
  "[![lifecycle](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://www.tidyverse.org/lifecycle/#experimental) [![Project Status: Active â€“ The project has reached a stable, usable state and is being actively developed.](http://www.repostatus.org/badges/latest/active.svg)](http://www.repostatus.org/#active)"
)

df <- tibble(Usage, Release, Development)
kable(df)
```


## Tools for student records research
 
MIDFIELD---the  *Multiple-Institution Database for Investigating Engineering Longitudinal Development*---is a partnership of US higher education institutions with engineering programs. As of June, 2020, MIDFIELD contains registrar's population data for 1.7M undergraduates at 19 institutions from 1987--2019. The data are organized in four related tables: students, courses, terms, and degrees. The MIDFIELD population data set is available to partner institutions only  [(link)](https://engineering.purdue.edu/MIDFIELD). 

**midfieldr** is an R package that provides tools specialized for the midfielddata sample data set. 

**midfielddata** is an R package that provides a stratified sample of the MIDFIELD population data set. The sample contains data for `r obs_students` undergraduates at `r obs_institution` institutions from `r year_min`--`r year_max` [(link)](https://midfieldr.github.io/midfielddata/). 

For members of MIDFIELD partner institutions: The midfielddata data dictionaries are a subset of the MIDFIELD data dictionaries. When creating the midfielddata sample data set, some MIDFIELD variables were omitted and some were re-coded to preserve confidentiality. In general, however, scripts written for the midfielddata sample data set will work for the MIDFIELD population data set. 






## Installation

The data package is too large for CRAN, so it is stored on GitHub in a drat repository. Installation takes time; please be patient and wait for the Console prompt > to reappear. 

Installation must be in the order shown: install midfielddata before midfieldr. 

```r
install.packages("midfielddata", repos = "https://MIDFIELDR.github.io/drat/", type = "source")
```

Install the development version of midfieldr from GitHub using: 

```r
devtools::install_github("MIDFIELDR/midfieldr")
```

Once midfieldr is available on CRAN (planned for the summer of 2020), use: 

```r
install.packages("midfieldr")
```





## Data

The midfieldr package includes: 

- `cip`  A data frame with `r obs_cip` observations and `r var_cip` CIP variables of program codes and names at the 2, 4, and 6-digit levels. Each observation is a unique program. Occupies `r round(size_cip/1e3)` kB of memory.  Data dictionary [(link)](https://midfieldr.github.io/midfieldr/reference/cip.html). 

The midfielddata package contains the four datasets that comprise a stratified sample of the MIDFIELD database. 

- `midfieldstudents` A data frame with `r obs_students` observations and `r var_students` demographic variables. Each observation is a unique student. Occupies `r round(size_students/1e6)` Mb of memory. Data dictionary   [(link)](https://midfieldr.github.io/midfielddata/reference/midfieldstudents.html). 

- `midfieldcourses` A data frame with `r round(obs_courses/1e6, 1)` M observations and `r var_courses` academic course variables. Each observation is one course in one term for one student. Occupies `r round(size_courses/1e6)` Mb of memory. Data dictionary  [(link)](https://midfieldr.github.io/midfielddata/reference/midfieldcourses.html).

- `midfieldterms` A data frame with `r obs_terms` observations and `r var_terms` academic term variables. Each observation is one term for one student. Occupies `r round(size_terms/1e6)` Mb of memory. Data dictionary  [(link)](https://midfieldr.github.io/midfielddata/reference/midfieldterms.html).

- `midfielddegrees` A data frame with `r obs_degrees` observations and `r var_degrees` graduation variables. Each observation is a unique student. Occupies `r round(size_degrees/1e6)` Mb of memory. Data dictionary  [(link)](https://midfieldr.github.io/midfielddata/reference/midfielddegrees.html).






## Usage

This package provides functions to access, manipulate, and graph student record data. To illustrate the workflow, we would use these functions to compute and display the "stickiness" persistence metric: 

- `cip_filter()` to filter programs from the CIP data.
- `cip6_select()` to select 6-digit CIPs and add custom labels.
- `gather_ever()` to gather students ever enrolled.
- `gather_grad()` to gather graduating students.
- `race_sex_join()` to join student sex and race/ethnicity.
- dplyr package (or equivalent) to group, summarize, join, and compute a persistence metric.
- `multiway_order()` to prepare the results for graphing.
- ggplot2 package (or equivalent) to graph the results.

A short but complete example is provided in the "Using midfieldr" vignette  [(link)](articles/using_midfieldr.html).   




## Meta

- Data provided by MIDFIELD [(link)](https://engineering.purdue.edu/MIDFIELD)   
- Get citation information with `citation("midfieldr")` 
- This project is released with a Code of Conduct  [(link)](https://midfieldr.github.io/midfieldr/CONDUCT.html). If you contribute to this project you agree to abide by its terms. 




